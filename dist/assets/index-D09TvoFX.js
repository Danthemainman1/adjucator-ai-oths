import{j as r,m as F,A as St,R as zN,a as UN}from"./animations-BI2268eO.js";import{r as k,R as FN}from"./charts-BqTqP0xP.js";import{r as MT,a as OT,g as Gg}from"./react-vendor-OvXVS5lI.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var j0={exports:{}},iu={},E0={exports:{}},S0={};var U1;function PT(){return U1||(U1=1,(function(t){function e(q,Z){var ue=q.length;q.push(Z);e:for(;0<ue;){var ye=ue-1>>>1,B=q[ye];if(0<l(B,Z))q[ye]=Z,q[ue]=B,ue=ye;else break e}}function n(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var Z=q[0],ue=q.pop();if(ue!==Z){q[0]=ue;e:for(var ye=0,B=q.length,Se=B>>>1;ye<Se;){var Oe=2*(ye+1)-1,U=q[Oe],Ie=Oe+1,Ge=q[Ie];if(0>l(U,ue))Ie<B&&0>l(Ge,U)?(q[ye]=Ge,q[Ie]=ue,ye=Ie):(q[ye]=U,q[Oe]=ue,ye=Oe);else if(Ie<B&&0>l(Ge,ue))q[ye]=Ge,q[Ie]=ue,ye=Ie;else break e}}return Z}function l(q,Z){var ue=q.sortIndex-Z.sortIndex;return ue!==0?ue:q.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],m=[],x=1,b=null,v=3,N=!1,E=!1,V=!1,R=!1,z=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function X(q){for(var Z=n(m);Z!==null;){if(Z.callback===null)s(m);else if(Z.startTime<=q)s(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=n(m)}}function se(q){if(V=!1,X(q),!E)if(n(f)!==null)E=!0,Y||(Y=!0,P());else{var Z=n(m);Z!==null&&te(se,Z.startTime-q)}}var Y=!1,I=-1,T=5,M=-1;function S(){return R?!0:!(t.unstable_now()-M<T)}function A(){if(R=!1,Y){var q=t.unstable_now();M=q;var Z=!0;try{e:{E=!1,V&&(V=!1,L(I),I=-1),N=!0;var ue=v;try{t:{for(X(q),b=n(f);b!==null&&!(b.expirationTime>q&&S());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,v=b.priorityLevel;var B=ye(b.expirationTime<=q);if(q=t.unstable_now(),typeof B=="function"){b.callback=B,X(q),Z=!0;break t}b===n(f)&&s(f),X(q)}else s(f);b=n(f)}if(b!==null)Z=!0;else{var Se=n(m);Se!==null&&te(se,Se.startTime-q),Z=!1}}break e}finally{b=null,v=ue,N=!1}Z=void 0}}finally{Z?P():Y=!1}}}var P;if(typeof H=="function")P=function(){H(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,re=D.port2;D.port1.onmessage=A,P=function(){re.postMessage(null)}}else P=function(){z(A,0)};function te(q,Z){I=z(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ue=v;v=Z;try{return q()}finally{v=ue}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ue=v;v=q;try{return Z()}finally{v=ue}},t.unstable_scheduleCallback=function(q,Z,ue){var ye=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ye+ue:ye):ue=ye,q){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ue+B,q={id:x++,callback:Z,priorityLevel:q,startTime:ue,expirationTime:B,sortIndex:-1},ue>ye?(q.sortIndex=ue,e(m,q),n(f)===null&&q===n(m)&&(V?(L(I),I=-1):V=!0,te(se,ue-ye))):(q.sortIndex=B,e(f,q),E||N||(E=!0,Y||(Y=!0,P()))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var Z=v;return function(){var ue=v;v=Z;try{return q.apply(this,arguments)}finally{v=ue}}}})(S0)),S0}var F1;function LT(){return F1||(F1=1,E0.exports=PT()),E0.exports}var B1;function VT(){if(B1)return iu;B1=1;var t=LT(),e=MT(),n=OT();function s(a){var i="https://react.dev/errors/"+a;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var i=a,c=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(c=i.return),a=i.return;while(a)}return i.tag===3?c:null}function u(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function h(a){if(a.tag===31){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function f(a){if(o(a)!==a)throw Error(s(188))}function m(a){var i=a.alternate;if(!i){if(i=o(a),i===null)throw Error(s(188));return i!==a?null:a}for(var c=a,d=i;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return f(g),a;if(y===d)return f(g),i;y=y.sibling}throw Error(s(188))}if(c.return!==d.return)c=g,d=y;else{for(var _=!1,C=g.child;C;){if(C===c){_=!0,c=g,d=y;break}if(C===d){_=!0,d=g,c=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===c){_=!0,c=y,d=g;break}if(C===d){_=!0,d=y,c=g;break}C=C.sibling}if(!_)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?a:i}function x(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a;for(a=a.child;a!==null;){if(i=x(a),i!==null)return i;a=a.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),H=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),S=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}var D=Symbol.for("react.client.reference");function re(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===D?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case z:return"Profiler";case R:return"StrictMode";case se:return"Suspense";case Y:return"SuspenseList";case M:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case H:return a.displayName||"Context";case L:return(a._context.displayName||"Context")+".Consumer";case X:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case I:return i=a.displayName||null,i!==null?i:re(a.type)||"Memo";case T:i=a._payload,a=a._init;try{return re(a(i))}catch{}}return null}var te=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ye=[],B=-1;function Se(a){return{current:a}}function Oe(a){0>B||(a.current=ye[B],ye[B]=null,B--)}function U(a,i){B++,ye[B]=a.current,a.current=i}var Ie=Se(null),Ge=Se(null),Ye=Se(null),ot=Se(null);function vt(a,i){switch(U(Ye,i),U(Ge,a),U(Ie,null),i.nodeType){case 9:case 11:a=(a=i.documentElement)&&(a=a.namespaceURI)?c1(a):0;break;default:if(a=i.tagName,i=i.namespaceURI)i=c1(i),a=u1(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Oe(Ie),U(Ie,a)}function gt(){Oe(Ie),Oe(Ge),Oe(Ye)}function fn(a){a.memoizedState!==null&&U(ot,a);var i=Ie.current,c=u1(i,a.type);i!==c&&(U(Ge,a),U(Ie,c))}function mn(a){Ge.current===a&&(Oe(Ie),Oe(Ge)),ot.current===a&&(Oe(ot),nu._currentValue=ue)}var wn,me;function ge(a){if(wn===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);wn=i&&i[1]||"",me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wn+a+me}var Ae=!1;function Fe(a,i){if(!a||Ae)return"";Ae=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var ee=ae}Reflect.construct(a,[],de)}else{try{de.call()}catch(ae){ee=ae}a.call(de.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var $=_.split(`
`),J=C.split(`
`);for(g=d=0;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(d===$.length||g===J.length)for(d=$.length-1,g=J.length-1;1<=d&&0<=g&&$[d]!==J[g];)g--;for(;1<=d&&0<=g;d--,g--)if($[d]!==J[g]){if(d!==1||g!==1)do if(d--,g--,0>g||$[d]!==J[g]){var ie=`
`+$[d].replace(" at new "," at ");return a.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",a.displayName)),ie}while(1<=d&&0<=g);break}}}finally{Ae=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?ge(c):""}function Kt(a,i){switch(a.tag){case 26:case 27:case 5:return ge(a.type);case 16:return ge("Lazy");case 13:return a.child!==i&&i!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return Fe(a.type,!1);case 11:return Fe(a.type.render,!1);case 1:return Fe(a.type,!0);case 31:return ge("Activity");default:return""}}function be(a){try{var i="",c=null;do i+=Kt(a,c),c=a,a=a.return;while(a);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var we=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,Nn=t.unstable_shouldYield,on=t.unstable_requestPaint,Ot=t.unstable_now,Fa=t.unstable_getCurrentPriorityLevel,le=t.unstable_ImmediatePriority,xe=t.unstable_UserBlockingPriority,Re=t.unstable_NormalPriority,Ke=t.unstable_LowPriority,ct=t.unstable_IdlePriority,Rn=t.log,vs=t.unstable_setDisableYieldValue,Ut=null,Pt=null;function pn(a){if(typeof Rn=="function"&&vs(a),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Ut,a)}catch{}}var at=Math.clz32?Math.clz32:fd,Us=Math.log,Dn=Math.LN2;function fd(a){return a>>>=0,a===0?32:31-(Us(a)/Dn|0)|0}var la=256,Ri=262144,Qt=4194304;function oa(a){var i=a&42;if(i!==0)return i;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ca(a,i,c){var d=a.pendingLanes;if(d===0)return 0;var g=0,y=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var C=d&134217727;return C!==0?(d=C&~y,d!==0?g=oa(d):(_&=C,_!==0?g=oa(_):c||(c=C&~a,c!==0&&(g=oa(c))))):(C=d&~y,C!==0?g=oa(C):_!==0?g=oa(_):c||(c=d&~a,c!==0&&(g=oa(c)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,c=i&-i,y>=c||y===32&&(c&4194048)!==0)?i:g}function Fs(a,i){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&i)===0}function Am(a,i){switch(a){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function md(){var a=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),a}function ua(a){for(var i=[],c=0;31>c;c++)i.push(a);return i}function Di(a,i){a.pendingLanes|=i,i!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Cm(a,i,c,d,g,y){var _=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var C=a.entanglements,$=a.expirationTimes,J=a.hiddenUpdates;for(c=_&~c;0<c;){var ie=31-at(c),de=1<<ie;C[ie]=0,$[ie]=-1;var ee=J[ie];if(ee!==null)for(J[ie]=null,ie=0;ie<ee.length;ie++){var ae=ee[ie];ae!==null&&(ae.lane&=-536870913)}c&=~de}d!==0&&Mi(a,d,0),y!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=y&~(_&~i))}function Mi(a,i,c){a.pendingLanes|=i,a.suspendedLanes&=~i;var d=31-at(i);a.entangledLanes|=i,a.entanglements[d]=a.entanglements[d]|1073741824|c&261930}function lc(a,i){var c=a.entangledLanes|=i;for(a=a.entanglements;c;){var d=31-at(c),g=1<<d;g&i|a[d]&i&&(a[d]|=i),c&=~g}}function oc(a,i){var c=i&-i;return c=(c&42)!==0?1:Oi(c),(c&(a.suspendedLanes|i))!==0?0:c}function Oi(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ba(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pd(){var a=Z.p;return a!==0?a:(a=window.event,a===void 0?32:D1(a.type))}function Bs(a,i){var c=Z.p;try{return Z.p=a,i()}finally{Z.p=c}}var qs=Math.random().toString(36).slice(2),Xt="__reactFiber$"+qs,gn="__reactProps$"+qs,da="__reactContainer$"+qs,Il="__reactEvents$"+qs,km="__reactListeners$"+qs,gd="__reactHandles$"+qs,xd="__reactResources$"+qs,ha="__reactMarker$"+qs;function Rl(a){delete a[Xt],delete a[gn],delete a[Il],delete a[km],delete a[gd]}function fa(a){var i=a[Xt];if(i)return i;for(var c=a.parentNode;c;){if(i=c[da]||c[Xt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(a=x1(a);a!==null;){if(c=a[Xt])return c;a=x1(a)}return i}a=c,c=a.parentNode}return null}function ws(a){if(a=a[Xt]||a[da]){var i=a.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return a}return null}function ls(a){var i=a.tag;if(i===5||i===26||i===27||i===6)return a.stateNode;throw Error(s(33))}function ma(a){var i=a[xd];return i||(i=a[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Wt(a){a[ha]=!0}var cc=new Set,uc={};function pa(a,i){ga(a,i),ga(a+"Capture",i)}function ga(a,i){for(uc[a]=i,a=0;a<i.length;a++)cc.add(i[a])}var dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hc={},fc={};function yd(a){return we.call(fc,a)?!0:we.call(hc,a)?!1:dc.test(a)?fc[a]=!0:(hc[a]=!0,!1)}function Dl(a,i,c){if(yd(i))if(c===null)a.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(i);return}}a.setAttribute(i,""+c)}}function os(a,i,c){if(c===null)a.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(i);return}a.setAttribute(i,""+c)}}function Jt(a,i,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(i,c,""+d)}}function xn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Er(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mc(a,i,c){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,i);if(!a.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return g.call(this)},set:function(_){c=""+_,y.call(this,_)}}),Object.defineProperty(a,i,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function xt(a){if(!a._valueTracker){var i=Er(a)?"checked":"value";a._valueTracker=mc(a,i,""+a[i])}}function Pi(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return a&&(d=Er(a)?a.checked?"true":"false":a.value),a=d,a!==c?(i.setValue(a),!0):!1}function xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Li=/[\n"\\]/g;function Yn(a){return a.replace(Li,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ml(a,i,c,d,g,y,_,C){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),i!=null?_==="number"?(i===0&&a.value===""||a.value!=i)&&(a.value=""+xn(i)):a.value!==""+xn(i)&&(a.value=""+xn(i)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),i!=null?pc(a,_,xn(i)):c!=null?pc(a,_,xn(c)):d!=null&&a.removeAttribute("value"),g==null&&y!=null&&(a.defaultChecked=!!y),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.name=""+xn(C):a.removeAttribute("name")}function bd(a,i,c,d,g,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),i!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){xt(a);return}c=c!=null?""+xn(c):"",i=i!=null?""+xn(i):c,C||i===a.value||(a.value=i),a.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=C?a.checked:!!d,a.defaultChecked=!!d,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_),xt(a)}function pc(a,i,c){i==="number"&&xa(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Sr(a,i,c,d){if(a=a.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<a.length;c++)g=i.hasOwnProperty("$"+a[c].value),a[c].selected!==g&&(a[c].selected=g),g&&d&&(a[c].defaultSelected=!0)}else{for(c=""+xn(c),i=null,g=0;g<a.length;g++){if(a[g].value===c){a[g].selected=!0,d&&(a[g].defaultSelected=!0);return}i!==null||a[g].disabled||(i=a[g])}i!==null&&(i.selected=!0)}}function vd(a,i,c){if(i!=null&&(i=""+xn(i),i!==a.value&&(a.value=i),c==null)){a.defaultValue!==i&&(a.defaultValue=i);return}a.defaultValue=c!=null?""+xn(c):""}function Tr(a,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(s(92));if(te(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=xn(i),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d),xt(a)}function Kn(a,i){if(i){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=i;return}}a.textContent=i}var wd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gc(a,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(i,""):i==="float"?a.cssFloat="":a[i]="":d?a.setProperty(i,c):typeof c!="number"||c===0||wd.has(i)?i==="float"?a.cssFloat=c:a[i]=(""+c).trim():a[i]=c+"px"}function xc(a,i,c){if(i!=null&&typeof i!="object")throw Error(s(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&c[g]!==d&&gc(a,g,d)}else for(var y in i)i.hasOwnProperty(y)&&gc(a,y,i[y])}function Ol(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(a){return Ar.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Hs(){}var yc=null;function Ns(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Cr=null,ya=null;function Vi(a){var i=ws(a);if(i&&(a=i.stateNode)){var c=a[gn]||null;e:switch(a=i.stateNode,i.type){case"input":if(Ml(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Yn(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==a&&d.form===a.form){var g=d[gn]||null;if(!g)throw Error(s(90));Ml(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===a.form&&Pi(d)}break e;case"textarea":vd(a,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Sr(a,!!c.multiple,i,!1)}}}var Ll=!1;function kr(a,i,c){if(Ll)return a(i,c);Ll=!0;try{var d=a(i);return d}finally{if(Ll=!1,(Cr!==null||ya!==null)&&(ph(),Cr&&(i=Cr,a=ya,ya=Cr=null,Vi(i),a)))for(i=0;i<a.length;i++)Vi(a[i])}}function $s(a,i){var c=a.stateNode;if(c===null)return null;var d=c[gn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(s(231,i,typeof c));return c}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zi=!1;if(_s)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){zi=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{zi=!1}var ba=null,bc=null,Ui=null;function vc(){if(Ui)return Ui;var a,i=bc,c=i.length,d,g="value"in ba?ba.value:ba.textContent,y=g.length;for(a=0;a<c&&i[a]===g[a];a++);var _=c-a;for(d=1;d<=_&&i[c-d]===g[y-d];d++);return Ui=g.slice(a,1<d?1-d:void 0)}function Fi(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function qa(){return!0}function Gs(){return!1}function _n(a){function i(c,d,g,y,_){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in a)a.hasOwnProperty(C)&&(c=a[C],this[C]=c?c(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?qa:Gs,this.isPropagationStopped=Gs,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),i}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=_n(Ha),Ir=b({},Ha,{view:0,detail:0}),wc=_n(Ir),Rr,Vl,wa,zl=b({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==wa&&(wa&&a.type==="mousemove"?(Rr=a.screenX-wa.screenX,Vl=a.screenY-wa.screenY):Vl=Rr=0,wa=a),Rr)},movementY:function(a){return"movementY"in a?a.movementY:Vl}}),Nc=_n(zl),Bi=b({},zl,{dataTransfer:0}),_d=_n(Bi),jd=b({},Ir,{relatedTarget:0}),qi=_n(jd),_c=b({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Ed=_n(_c),Ul=b({},Ha,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Sd=_n(Ul),Td=b({},Ha,{data:0}),Na=_n(Td),Ad={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Id(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=kd[a])?!!i[a]:!1}function Dr(){return Id}var qn=b({},Ir,{key:function(a){if(a.key){var i=Ad[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=Fi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Cd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(a){return a.type==="keypress"?Fi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Fi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=_n(qn),Dd=b({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=_n(Dd),p=b({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),w=_n(p),j=b({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=_n(j),Q=b({},zl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=_n(Q),ve=b({},Ha,{newState:0,oldState:0}),Be=_n(ve),Ft=[9,13,27,32],ft=_s&&"CompositionEvent"in window,Dt=null;_s&&"documentMode"in document&&(Dt=document.documentMode);var js=_s&&"TextEvent"in window&&!Dt,_a=_s&&(!ft||Dt&&8<Dt&&11>=Dt),Ys=" ",Ks=!1;function Hi(a,i){switch(a){case"keyup":return Ft.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Bl=!1;function aS(a,i){switch(a){case"compositionend":return Fl(i);case"keypress":return i.which!==32?null:(Ks=!0,Ys);case"textInput":return a=i.data,a===Ys&&Ks?null:a;default:return null}}function rS(a,i){if(Bl)return a==="compositionend"||!ft&&Hi(a,i)?(a=vc(),Ui=bc=ba=null,Bl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _a&&i.locale!=="ko"?null:i.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!iS[a.type]:i==="textarea"}function wy(a,i,c,d){Cr?ya?ya.push(d):ya=[d]:Cr=d,i=Nh(i,"onChange"),0<i.length&&(c=new va("onChange","change",null,c,d),a.push({event:c,listeners:i}))}var jc=null,Ec=null;function lS(a){s1(a,0)}function Md(a){var i=ls(a);if(Pi(i))return a}function Ny(a,i){if(a==="change")return i}var _y=!1;if(_s){var Im;if(_s){var Rm="oninput"in document;if(!Rm){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),Rm=typeof jy.oninput=="function"}Im=Rm}else Im=!1;_y=Im&&(!document.documentMode||9<document.documentMode)}function Ey(){jc&&(jc.detachEvent("onpropertychange",Sy),Ec=jc=null)}function Sy(a){if(a.propertyName==="value"&&Md(Ec)){var i=[];wy(i,Ec,a,Ns(a)),kr(lS,i)}}function oS(a,i,c){a==="focusin"?(Ey(),jc=i,Ec=c,jc.attachEvent("onpropertychange",Sy)):a==="focusout"&&Ey()}function cS(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Md(Ec)}function uS(a,i){if(a==="click")return Md(i)}function dS(a,i){if(a==="input"||a==="change")return Md(i)}function hS(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var cs=typeof Object.is=="function"?Object.is:hS;function Sc(a,i){if(cs(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var c=Object.keys(a),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!we.call(i,g)||!cs(a[g],i[g]))return!1}return!0}function Ty(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ay(a,i){var c=Ty(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=i&&d>=i)return{node:c,offset:i-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ty(c)}}function Cy(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?Cy(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function ky(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var i=xa(a.document);i instanceof a.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)a=i.contentWindow;else break;i=xa(a.document)}return i}function Dm(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}var fS=_s&&"documentMode"in document&&11>=document.documentMode,ql=null,Mm=null,Tc=null,Om=!1;function Iy(a,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Om||ql==null||ql!==xa(d)||(d=ql,"selectionStart"in d&&Dm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Tc&&Sc(Tc,d)||(Tc=d,d=Nh(Mm,"onSelect"),0<d.length&&(i=new va("onSelect","select",null,i,c),a.push({event:i,listeners:d}),i.target=ql)))}function $i(a,i){var c={};return c[a.toLowerCase()]=i.toLowerCase(),c["Webkit"+a]="webkit"+i,c["Moz"+a]="moz"+i,c}var Hl={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Pm={},Ry={};_s&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function Gi(a){if(Pm[a])return Pm[a];if(!Hl[a])return a;var i=Hl[a],c;for(c in i)if(i.hasOwnProperty(c)&&c in Ry)return Pm[a]=i[c];return a}var Dy=Gi("animationend"),My=Gi("animationiteration"),Oy=Gi("animationstart"),mS=Gi("transitionrun"),pS=Gi("transitionstart"),gS=Gi("transitioncancel"),Py=Gi("transitionend"),Ly=new Map,Lm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lm.push("scrollEnd");function Qs(a,i){Ly.set(a,i),pa(i,[a])}var Od=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Es=[],$l=0,Vm=0;function Pd(){for(var a=$l,i=Vm=$l=0;i<a;){var c=Es[i];Es[i++]=null;var d=Es[i];Es[i++]=null;var g=Es[i];Es[i++]=null;var y=Es[i];if(Es[i++]=null,d!==null&&g!==null){var _=d.pending;_===null?g.next=g:(g.next=_.next,_.next=g),d.pending=g}y!==0&&Vy(c,g,y)}}function Ld(a,i,c,d){Es[$l++]=a,Es[$l++]=i,Es[$l++]=c,Es[$l++]=d,Vm|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function zm(a,i,c,d){return Ld(a,i,c,d),Vd(a)}function Yi(a,i){return Ld(a,null,null,i),Vd(a)}function Vy(a,i,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=a.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(g=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,g&&i!==null&&(g=31-at(c),a=y.hiddenUpdates,d=a[g],d===null?a[g]=[i]:d.push(i),i.lane=c|536870912),y):null}function Vd(a){if(50<Qc)throw Qc=0,Kp=null,Error(s(185));for(var i=a.return;i!==null;)a=i,i=a.return;return a.tag===3?a.stateNode:null}var Gl={};function xS(a,i,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(a,i,c,d){return new xS(a,i,c,d)}function Um(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ga(a,i){var c=a.alternate;return c===null?(c=us(a.tag,i,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=i,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,i=a.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function zy(a,i){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=i,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,i=c.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a}function zd(a,i,c,d,g,y){var _=0;if(d=a,typeof a=="function")Um(a)&&(_=1);else if(typeof a=="string")_=NT(a,c,Ie.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case M:return a=us(31,c,i,g),a.elementType=M,a.lanes=y,a;case V:return Ki(c.children,g,y,i);case R:_=8,g|=24;break;case z:return a=us(12,c,i,g|2),a.elementType=z,a.lanes=y,a;case se:return a=us(13,c,i,g),a.elementType=se,a.lanes=y,a;case Y:return a=us(19,c,i,g),a.elementType=Y,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case H:_=10;break e;case L:_=9;break e;case X:_=11;break e;case I:_=14;break e;case T:_=16,d=null;break e}_=29,c=Error(s(130,a===null?"null":typeof a,"")),d=null}return i=us(_,c,i,g),i.elementType=a,i.type=d,i.lanes=y,i}function Ki(a,i,c,d){return a=us(7,a,d,i),a.lanes=c,a}function Fm(a,i,c){return a=us(6,a,null,i),a.lanes=c,a}function Uy(a){var i=us(18,null,null,0);return i.stateNode=a,i}function Bm(a,i,c){return i=us(4,a.children!==null?a.children:[],a.key,i),i.lanes=c,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}var Fy=new WeakMap;function Ss(a,i){if(typeof a=="object"&&a!==null){var c=Fy.get(a);return c!==void 0?c:(i={value:a,source:i,stack:be(i)},Fy.set(a,i),i)}return{value:a,source:i,stack:be(i)}}var Yl=[],Kl=0,Ud=null,Ac=0,Ts=[],As=0,Mr=null,ja=1,Ea="";function Ya(a,i){Yl[Kl++]=Ac,Yl[Kl++]=Ud,Ud=a,Ac=i}function By(a,i,c){Ts[As++]=ja,Ts[As++]=Ea,Ts[As++]=Mr,Mr=a;var d=ja;a=Ea;var g=32-at(d)-1;d&=~(1<<g),c+=1;var y=32-at(i)+g;if(30<y){var _=g-g%5;y=(d&(1<<_)-1).toString(32),d>>=_,g-=_,ja=1<<32-at(i)+g|c<<g|d,Ea=y+a}else ja=1<<y|c<<g|d,Ea=a}function qm(a){a.return!==null&&(Ya(a,1),By(a,1,0))}function Hm(a){for(;a===Ud;)Ud=Yl[--Kl],Yl[Kl]=null,Ac=Yl[--Kl],Yl[Kl]=null;for(;a===Mr;)Mr=Ts[--As],Ts[As]=null,Ea=Ts[--As],Ts[As]=null,ja=Ts[--As],Ts[As]=null}function qy(a,i){Ts[As++]=ja,Ts[As++]=Ea,Ts[As++]=Mr,ja=i.id,Ea=i.overflow,Mr=a}var jn=null,kt=null,rt=!1,Or=null,Cs=!1,$m=Error(s(519));function Pr(a){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cc(Ss(i,a)),$m}function Hy(a){var i=a.stateNode,c=a.type,d=a.memoizedProps;switch(i[Xt]=a,i[gn]=d,c){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(c=0;c<Wc.length;c++)We(Wc[c],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":We("invalid",i),bd(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",i);break;case"textarea":We("invalid",i),Tr(i,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||l1(i.textContent,c)?(d.popover!=null&&(We("beforetoggle",i),We("toggle",i)),d.onScroll!=null&&We("scroll",i),d.onScrollEnd!=null&&We("scrollend",i),d.onClick!=null&&(i.onclick=Hs),i=!0):i=!1,i||Pr(a,!0)}function $y(a){for(jn=a.return;jn;)switch(jn.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:jn=jn.return}}function Ql(a){if(a!==jn)return!1;if(!rt)return $y(a),rt=!0,!1;var i=a.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||c0(a.type,a.memoizedProps)),c=!c),c&&kt&&Pr(a),$y(a),i===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));kt=g1(a)}else if(i===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));kt=g1(a)}else i===27?(i=kt,Xr(a.type)?(a=m0,m0=null,kt=a):kt=i):kt=jn?Is(a.stateNode.nextSibling):null;return!0}function Qi(){kt=jn=null,rt=!1}function Gm(){var a=Or;return a!==null&&(Jn===null?Jn=a:Jn.push.apply(Jn,a),Or=null),a}function Cc(a){Or===null?Or=[a]:Or.push(a)}var Ym=Se(null),Xi=null,Ka=null;function Lr(a,i,c){U(Ym,i._currentValue),i._currentValue=c}function Qa(a){a._currentValue=Ym.current,Oe(Ym)}function Km(a,i,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),a===c)break;a=a.return}}function Qm(a,i,c,d){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=g;for(var $=0;$<i.length;$++)if(C.context===i[$]){y.lanes|=c,C=y.alternate,C!==null&&(C.lanes|=c),Km(y.return,c,a),d||(_=null);break e}y=C.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(s(341));_.lanes|=c,y=_.alternate,y!==null&&(y.lanes|=c),Km(_,c,a),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===a){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function Xl(a,i,c,d){a=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var C=g.type;cs(g.pendingProps.value,_.value)||(a!==null?a.push(C):a=[C])}}else if(g===ot.current){if(_=g.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(nu):a=[nu])}g=g.return}a!==null&&Qm(i,a,c,d),i.flags|=262144}function Fd(a){for(a=a.firstContext;a!==null;){if(!cs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Wi(a){Xi=a,Ka=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function En(a){return Gy(Xi,a)}function Bd(a,i){return Xi===null&&Wi(a),Gy(a,i)}function Gy(a,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Ka===null){if(a===null)throw Error(s(308));Ka=i,a.dependencies={lanes:0,firstContext:i},a.flags|=524288}else Ka=Ka.next=i;return c}var yS=typeof AbortController<"u"?AbortController:function(){var a=[],i=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){i.aborted=!0,a.forEach(function(c){return c()})}},bS=t.unstable_scheduleCallback,vS=t.unstable_NormalPriority,Zt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xm(){return{controller:new yS,data:new Map,refCount:0}}function kc(a){a.refCount--,a.refCount===0&&bS(vS,function(){a.controller.abort()})}var Ic=null,Wm=0,Wl=0,Jl=null;function wS(a,i){if(Ic===null){var c=Ic=[];Wm=0,Wl=e0(),Jl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Wm++,i.then(Yy,Yy),i}function Yy(){if(--Wm===0&&Ic!==null){Jl!==null&&(Jl.status="fulfilled");var a=Ic;Ic=null,Wl=0,Jl=null;for(var i=0;i<a.length;i++)(0,a[i])()}}function NS(a,i){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return a.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var Ky=q.S;q.S=function(a,i){Iv=Ot(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&wS(a,i),Ky!==null&&Ky(a,i)};var Ji=Se(null);function Jm(){var a=Ji.current;return a!==null?a:Et.pooledCache}function qd(a,i){i===null?U(Ji,Ji.current):U(Ji,i.pool)}function Qy(){var a=Jm();return a===null?null:{parent:Zt._currentValue,pool:a}}var Zl=Error(s(460)),Zm=Error(s(474)),Hd=Error(s(542)),$d={then:function(){}};function Xy(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Wy(a,i,c){switch(c=a[c],c===void 0?a.push(i):c!==i&&(i.then(Hs,Hs),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Zy(a),a;default:if(typeof i.status=="string")i.then(Hs,Hs);else{if(a=Et,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=i,a.status="pending",a.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw a=i.reason,Zy(a),a}throw el=i,Zl}}function Zi(a){try{var i=a._init;return i(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(el=c,Zl):c}}var el=null;function Jy(){if(el===null)throw Error(s(459));var a=el;return el=null,a}function Zy(a){if(a===Zl||a===Hd)throw Error(s(483))}var eo=null,Rc=0;function Gd(a){var i=Rc;return Rc+=1,eo===null&&(eo=[]),Wy(eo,a,i)}function Dc(a,i){i=i.props.ref,a.ref=i!==void 0?i:null}function Yd(a,i){throw i.$$typeof===v?Error(s(525)):(a=Object.prototype.toString.call(i),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)))}function eb(a){function i(K,G){if(a){var W=K.deletions;W===null?(K.deletions=[G],K.flags|=16):W.push(G)}}function c(K,G){if(!a)return null;for(;G!==null;)i(K,G),G=G.sibling;return null}function d(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function g(K,G){return K=Ga(K,G),K.index=0,K.sibling=null,K}function y(K,G,W){return K.index=W,a?(W=K.alternate,W!==null?(W=W.index,W<G?(K.flags|=67108866,G):W):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function _(K){return a&&K.alternate===null&&(K.flags|=67108866),K}function C(K,G,W,oe){return G===null||G.tag!==6?(G=Fm(W,K.mode,oe),G.return=K,G):(G=g(G,W),G.return=K,G)}function $(K,G,W,oe){var Ce=W.type;return Ce===V?ie(K,G,W.props.children,oe,W.key):G!==null&&(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===T&&Zi(Ce)===G.type)?(G=g(G,W.props),Dc(G,W),G.return=K,G):(G=zd(W.type,W.key,W.props,null,K.mode,oe),Dc(G,W),G.return=K,G)}function J(K,G,W,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==W.containerInfo||G.stateNode.implementation!==W.implementation?(G=Bm(W,K.mode,oe),G.return=K,G):(G=g(G,W.children||[]),G.return=K,G)}function ie(K,G,W,oe,Ce){return G===null||G.tag!==7?(G=Ki(W,K.mode,oe,Ce),G.return=K,G):(G=g(G,W),G.return=K,G)}function de(K,G,W){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Fm(""+G,K.mode,W),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case N:return W=zd(G.type,G.key,G.props,null,K.mode,W),Dc(W,G),W.return=K,W;case E:return G=Bm(G,K.mode,W),G.return=K,G;case T:return G=Zi(G),de(K,G,W)}if(te(G)||P(G))return G=Ki(G,K.mode,W,null),G.return=K,G;if(typeof G.then=="function")return de(K,Gd(G),W);if(G.$$typeof===H)return de(K,Bd(K,G),W);Yd(K,G)}return null}function ee(K,G,W,oe){var Ce=G!==null?G.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ce!==null?null:C(K,G,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case N:return W.key===Ce?$(K,G,W,oe):null;case E:return W.key===Ce?J(K,G,W,oe):null;case T:return W=Zi(W),ee(K,G,W,oe)}if(te(W)||P(W))return Ce!==null?null:ie(K,G,W,oe,null);if(typeof W.then=="function")return ee(K,G,Gd(W),oe);if(W.$$typeof===H)return ee(K,G,Bd(K,W),oe);Yd(K,W)}return null}function ae(K,G,W,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(W)||null,C(G,K,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return K=K.get(oe.key===null?W:oe.key)||null,$(G,K,oe,Ce);case E:return K=K.get(oe.key===null?W:oe.key)||null,J(G,K,oe,Ce);case T:return oe=Zi(oe),ae(K,G,W,oe,Ce)}if(te(oe)||P(oe))return K=K.get(W)||null,ie(G,K,oe,Ce,null);if(typeof oe.then=="function")return ae(K,G,W,Gd(oe),Ce);if(oe.$$typeof===H)return ae(K,G,W,Bd(G,oe),Ce);Yd(G,oe)}return null}function je(K,G,W,oe){for(var Ce=null,ut=null,Ee=G,He=G=0,et=null;Ee!==null&&He<W.length;He++){Ee.index>He?(et=Ee,Ee=null):et=Ee.sibling;var dt=ee(K,Ee,W[He],oe);if(dt===null){Ee===null&&(Ee=et);break}a&&Ee&&dt.alternate===null&&i(K,Ee),G=y(dt,G,He),ut===null?Ce=dt:ut.sibling=dt,ut=dt,Ee=et}if(He===W.length)return c(K,Ee),rt&&Ya(K,He),Ce;if(Ee===null){for(;He<W.length;He++)Ee=de(K,W[He],oe),Ee!==null&&(G=y(Ee,G,He),ut===null?Ce=Ee:ut.sibling=Ee,ut=Ee);return rt&&Ya(K,He),Ce}for(Ee=d(Ee);He<W.length;He++)et=ae(Ee,K,He,W[He],oe),et!==null&&(a&&et.alternate!==null&&Ee.delete(et.key===null?He:et.key),G=y(et,G,He),ut===null?Ce=et:ut.sibling=et,ut=et);return a&&Ee.forEach(function(ti){return i(K,ti)}),rt&&Ya(K,He),Ce}function Me(K,G,W,oe){if(W==null)throw Error(s(151));for(var Ce=null,ut=null,Ee=G,He=G=0,et=null,dt=W.next();Ee!==null&&!dt.done;He++,dt=W.next()){Ee.index>He?(et=Ee,Ee=null):et=Ee.sibling;var ti=ee(K,Ee,dt.value,oe);if(ti===null){Ee===null&&(Ee=et);break}a&&Ee&&ti.alternate===null&&i(K,Ee),G=y(ti,G,He),ut===null?Ce=ti:ut.sibling=ti,ut=ti,Ee=et}if(dt.done)return c(K,Ee),rt&&Ya(K,He),Ce;if(Ee===null){for(;!dt.done;He++,dt=W.next())dt=de(K,dt.value,oe),dt!==null&&(G=y(dt,G,He),ut===null?Ce=dt:ut.sibling=dt,ut=dt);return rt&&Ya(K,He),Ce}for(Ee=d(Ee);!dt.done;He++,dt=W.next())dt=ae(Ee,K,He,dt.value,oe),dt!==null&&(a&&dt.alternate!==null&&Ee.delete(dt.key===null?He:dt.key),G=y(dt,G,He),ut===null?Ce=dt:ut.sibling=dt,ut=dt);return a&&Ee.forEach(function(DT){return i(K,DT)}),rt&&Ya(K,He),Ce}function jt(K,G,W,oe){if(typeof W=="object"&&W!==null&&W.type===V&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case N:e:{for(var Ce=W.key;G!==null;){if(G.key===Ce){if(Ce=W.type,Ce===V){if(G.tag===7){c(K,G.sibling),oe=g(G,W.props.children),oe.return=K,K=oe;break e}}else if(G.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===T&&Zi(Ce)===G.type){c(K,G.sibling),oe=g(G,W.props),Dc(oe,W),oe.return=K,K=oe;break e}c(K,G);break}else i(K,G);G=G.sibling}W.type===V?(oe=Ki(W.props.children,K.mode,oe,W.key),oe.return=K,K=oe):(oe=zd(W.type,W.key,W.props,null,K.mode,oe),Dc(oe,W),oe.return=K,K=oe)}return _(K);case E:e:{for(Ce=W.key;G!==null;){if(G.key===Ce)if(G.tag===4&&G.stateNode.containerInfo===W.containerInfo&&G.stateNode.implementation===W.implementation){c(K,G.sibling),oe=g(G,W.children||[]),oe.return=K,K=oe;break e}else{c(K,G);break}else i(K,G);G=G.sibling}oe=Bm(W,K.mode,oe),oe.return=K,K=oe}return _(K);case T:return W=Zi(W),jt(K,G,W,oe)}if(te(W))return je(K,G,W,oe);if(P(W)){if(Ce=P(W),typeof Ce!="function")throw Error(s(150));return W=Ce.call(W),Me(K,G,W,oe)}if(typeof W.then=="function")return jt(K,G,Gd(W),oe);if(W.$$typeof===H)return jt(K,G,Bd(K,W),oe);Yd(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,G!==null&&G.tag===6?(c(K,G.sibling),oe=g(G,W),oe.return=K,K=oe):(c(K,G),oe=Fm(W,K.mode,oe),oe.return=K,K=oe),_(K)):c(K,G)}return function(K,G,W,oe){try{Rc=0;var Ce=jt(K,G,W,oe);return eo=null,Ce}catch(Ee){if(Ee===Zl||Ee===Hd)throw Ee;var ut=us(29,Ee,null,K.mode);return ut.lanes=oe,ut.return=K,ut}finally{}}}var tl=eb(!0),tb=eb(!1),Vr=!1;function ep(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tp(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function zr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ur(a,i,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(mt&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=Vd(a),Vy(a,null,c),i}return Ld(a,d,i,c),Vd(a)}function Mc(a,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=a.pendingLanes,c|=d,i.lanes=c,lc(a,c)}}function np(a,i){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,c=c.next}while(c!==null);y===null?g=y=i:y=y.next=i}else g=y=i;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=i:a.next=i,c.lastBaseUpdate=i}var sp=!1;function Oc(){if(sp){var a=Jl;if(a!==null)throw a}}function Pc(a,i,c,d){sp=!1;var g=a.updateQueue;Vr=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var $=C,J=$.next;$.next=null,_===null?y=J:_.next=J,_=$;var ie=a.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==_&&(C===null?ie.firstBaseUpdate=J:C.next=J,ie.lastBaseUpdate=$))}if(y!==null){var de=g.baseState;_=0,ie=J=$=null,C=y;do{var ee=C.lane&-536870913,ae=ee!==C.lane;if(ae?(Ze&ee)===ee:(d&ee)===ee){ee!==0&&ee===Wl&&(sp=!0),ie!==null&&(ie=ie.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var je=a,Me=C;ee=i;var jt=c;switch(Me.tag){case 1:if(je=Me.payload,typeof je=="function"){de=je.call(jt,de,ee);break e}de=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Me.payload,ee=typeof je=="function"?je.call(jt,de,ee):je,ee==null)break e;de=b({},de,ee);break e;case 2:Vr=!0}}ee=C.callback,ee!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(J=ie=ae,$=de):ie=ie.next=ae,_|=ee;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);ie===null&&($=de),g.baseState=$,g.firstBaseUpdate=J,g.lastBaseUpdate=ie,y===null&&(g.shared.lanes=0),$r|=_,a.lanes=_,a.memoizedState=de}}function nb(a,i){if(typeof a!="function")throw Error(s(191,a));a.call(i)}function sb(a,i){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)nb(c[a],i)}var to=Se(null),Kd=Se(0);function ab(a,i){a=ar,U(Kd,a),U(to,i),ar=a|i.baseLanes}function ap(){U(Kd,ar),U(to,to.current)}function rp(){ar=Kd.current,Oe(to),Oe(Kd)}var ds=Se(null),ks=null;function Fr(a){var i=a.alternate;U(Bt,Bt.current&1),U(ds,a),ks===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(ks=a)}function ip(a){U(Bt,Bt.current),U(ds,a),ks===null&&(ks=a)}function rb(a){a.tag===22?(U(Bt,Bt.current),U(ds,a),ks===null&&(ks=a)):Br()}function Br(){U(Bt,Bt.current),U(ds,ds.current)}function hs(a){Oe(ds),ks===a&&(ks=null),Oe(Bt)}var Bt=Se(0);function Qd(a){for(var i=a;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||h0(c)||f0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xa=0,qe=null,Nt=null,en=null,Xd=!1,no=!1,nl=!1,Wd=0,Lc=0,so=null,_S=0;function Vt(){throw Error(s(321))}function lp(a,i){if(i===null)return!1;for(var c=0;c<i.length&&c<a.length;c++)if(!cs(a[c],i[c]))return!1;return!0}function op(a,i,c,d,g,y){return Xa=y,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=a===null||a.memoizedState===null?Bb:_p,nl=!1,y=c(d,g),nl=!1,no&&(y=lb(i,c,d,g)),ib(a),y}function ib(a){q.H=Uc;var i=Nt!==null&&Nt.next!==null;if(Xa=0,en=Nt=qe=null,Xd=!1,Lc=0,so=null,i)throw Error(s(300));a===null||tn||(a=a.dependencies,a!==null&&Fd(a)&&(tn=!0))}function lb(a,i,c,d){qe=a;var g=0;do{if(no&&(so=null),Lc=0,no=!1,25<=g)throw Error(s(301));if(g+=1,en=Nt=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=qb,y=i(c,d)}while(no);return y}function jS(){var a=q.H,i=a.useState()[0];return i=typeof i.then=="function"?Vc(i):i,a=a.useState()[0],(Nt!==null?Nt.memoizedState:null)!==a&&(qe.flags|=1024),i}function cp(){var a=Wd!==0;return Wd=0,a}function up(a,i,c){i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~c}function dp(a){if(Xd){for(a=a.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Xd=!1}Xa=0,en=Nt=qe=null,no=!1,Lc=Wd=0,so=null}function Hn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?qe.memoizedState=en=a:en=en.next=a,en}function qt(){if(Nt===null){var a=qe.alternate;a=a!==null?a.memoizedState:null}else a=Nt.next;var i=en===null?qe.memoizedState:en.next;if(i!==null)en=i,Nt=a;else{if(a===null)throw qe.alternate===null?Error(s(467)):Error(s(310));Nt=a,a={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},en===null?qe.memoizedState=en=a:en=en.next=a}return en}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vc(a){var i=Lc;return Lc+=1,so===null&&(so=[]),a=Wy(so,a,i),i=qe,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?Bb:_p),a}function Zd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Vc(a);if(a.$$typeof===H)return En(a)}throw Error(s(438,String(a)))}function hp(a){var i=null,c=qe.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=qe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=Jd(),qe.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(a),d=0;d<a;d++)c[d]=S;return i.index++,c}function Wa(a,i){return typeof i=="function"?i(a):i}function eh(a){var i=qt();return fp(i,Nt,a)}function fp(a,i,c){var d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var g=a.baseQueue,y=d.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}i.baseQueue=g=y,d.pending=null}if(y=a.baseState,g===null)a.memoizedState=y;else{i=g.next;var C=_=null,$=null,J=i,ie=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(Ze&de)===de:(Xa&de)===de){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===Wl&&(ie=!0);else if((Xa&ee)===ee){J=J.next,ee===Wl&&(ie=!0);continue}else de={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(C=$=de,_=y):$=$.next=de,qe.lanes|=ee,$r|=ee;de=J.action,nl&&c(y,de),y=J.hasEagerState?J.eagerState:c(y,de)}else ee={lane:de,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(C=$=ee,_=y):$=$.next=ee,qe.lanes|=de,$r|=de;J=J.next}while(J!==null&&J!==i);if($===null?_=y:$.next=C,!cs(y,a.memoizedState)&&(tn=!0,ie&&(c=Jl,c!==null)))throw c;a.memoizedState=y,a.baseState=_,a.baseQueue=$,d.lastRenderedState=y}return g===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function mp(a){var i=qt(),c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var d=c.dispatch,g=c.pending,y=i.memoizedState;if(g!==null){c.pending=null;var _=g=g.next;do y=a(y,_.action),_=_.next;while(_!==g);cs(y,i.memoizedState)||(tn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),c.lastRenderedState=y}return[y,d]}function ob(a,i,c){var d=qe,g=qt(),y=rt;if(y){if(c===void 0)throw Error(s(407));c=c()}else c=i();var _=!cs((Nt||g).memoizedState,c);if(_&&(g.memoizedState=c,tn=!0),g=g.queue,xp(db.bind(null,d,g,a),[a]),g.getSnapshot!==i||_||en!==null&&en.memoizedState.tag&1){if(d.flags|=2048,ao(9,{destroy:void 0},ub.bind(null,d,g,c,i),null),Et===null)throw Error(s(349));y||(Xa&127)!==0||cb(d,i,c)}return c}function cb(a,i,c){a.flags|=16384,a={getSnapshot:i,value:c},i=qe.updateQueue,i===null?(i=Jd(),qe.updateQueue=i,i.stores=[a]):(c=i.stores,c===null?i.stores=[a]:c.push(a))}function ub(a,i,c,d){i.value=c,i.getSnapshot=d,hb(i)&&fb(a)}function db(a,i,c){return c(function(){hb(i)&&fb(a)})}function hb(a){var i=a.getSnapshot;a=a.value;try{var c=i();return!cs(a,c)}catch{return!0}}function fb(a){var i=Yi(a,2);i!==null&&Zn(i,a,2)}function pp(a){var i=Hn();if(typeof a=="function"){var c=a;if(a=c(),nl){pn(!0);try{c()}finally{pn(!1)}}}return i.memoizedState=i.baseState=a,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:a},i}function mb(a,i,c,d){return a.baseState=c,fp(a,Nt,typeof d=="function"?d:Wa)}function ES(a,i,c,d,g){if(sh(a))throw Error(s(485));if(a=i.action,a!==null){var y={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};q.T!==null?c(!0):y.isTransition=!1,d(y),c=i.pending,c===null?(y.next=i.pending=y,pb(i,y)):(y.next=c.next,i.pending=c.next=y)}}function pb(a,i){var c=i.action,d=i.payload,g=a.state;if(i.isTransition){var y=q.T,_={};q.T=_;try{var C=c(g,d),$=q.S;$!==null&&$(_,C),gb(a,i,C)}catch(J){gp(a,i,J)}finally{y!==null&&_.types!==null&&(y.types=_.types),q.T=y}}else try{y=c(g,d),gb(a,i,y)}catch(J){gp(a,i,J)}}function gb(a,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){xb(a,i,d)},function(d){return gp(a,i,d)}):xb(a,i,c)}function xb(a,i,c){i.status="fulfilled",i.value=c,yb(i),a.state=c,i=a.pending,i!==null&&(c=i.next,c===i?a.pending=null:(c=c.next,i.next=c,pb(a,c)))}function gp(a,i,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,yb(i),i=i.next;while(i!==d)}a.action=null}function yb(a){a=a.listeners;for(var i=0;i<a.length;i++)(0,a[i])()}function bb(a,i){return i}function vb(a,i){if(rt){var c=Et.formState;if(c!==null){e:{var d=qe;if(rt){if(kt){t:{for(var g=kt,y=Cs;g.nodeType!==8;){if(!y){g=null;break t}if(g=Is(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){kt=Is(g.nextSibling),d=g.data==="F!";break e}}Pr(d)}d=!1}d&&(i=c[0])}}return c=Hn(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:i},c.queue=d,c=zb.bind(null,qe,d),d.dispatch=c,d=pp(!1),y=Np.bind(null,qe,!1,d.queue),d=Hn(),g={state:i,dispatch:null,action:a,pending:null},d.queue=g,c=ES.bind(null,qe,g,y,c),g.dispatch=c,d.memoizedState=a,[i,c,!1]}function wb(a){var i=qt();return Nb(i,Nt,a)}function Nb(a,i,c){if(i=fp(a,i,bb)[0],a=eh(Wa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Vc(i)}catch(_){throw _===Zl?Hd:_}else d=i;i=qt();var g=i.queue,y=g.dispatch;return c!==i.memoizedState&&(qe.flags|=2048,ao(9,{destroy:void 0},SS.bind(null,g,c),null)),[d,y,a]}function SS(a,i){a.action=i}function _b(a){var i=qt(),c=Nt;if(c!==null)return Nb(i,c,a);qt(),i=i.memoizedState,c=qt();var d=c.queue.dispatch;return c.memoizedState=a,[i,d,!1]}function ao(a,i,c,d){return a={tag:a,create:c,deps:d,inst:i,next:null},i=qe.updateQueue,i===null&&(i=Jd(),qe.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,i.lastEffect=a),a}function jb(){return qt().memoizedState}function th(a,i,c,d){var g=Hn();qe.flags|=a,g.memoizedState=ao(1|i,{destroy:void 0},c,d===void 0?null:d)}function nh(a,i,c,d){var g=qt();d=d===void 0?null:d;var y=g.memoizedState.inst;Nt!==null&&d!==null&&lp(d,Nt.memoizedState.deps)?g.memoizedState=ao(i,y,c,d):(qe.flags|=a,g.memoizedState=ao(1|i,y,c,d))}function Eb(a,i){th(8390656,8,a,i)}function xp(a,i){nh(2048,8,a,i)}function TS(a){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=Jd(),qe.updateQueue=i,i.events=[a];else{var c=i.events;c===null?i.events=[a]:c.push(a)}}function Sb(a){var i=qt().memoizedState;return TS({ref:i,nextImpl:a}),function(){if((mt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Tb(a,i){return nh(4,2,a,i)}function Ab(a,i){return nh(4,4,a,i)}function Cb(a,i){if(typeof i=="function"){a=a();var c=i(a);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function kb(a,i,c){c=c!=null?c.concat([a]):null,nh(4,4,Cb.bind(null,i,a),c)}function yp(){}function Ib(a,i){var c=qt();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&lp(i,d[1])?d[0]:(c.memoizedState=[a,i],a)}function Rb(a,i){var c=qt();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&lp(i,d[1]))return d[0];if(d=a(),nl){pn(!0);try{a()}finally{pn(!1)}}return c.memoizedState=[d,i],d}function bp(a,i,c){return c===void 0||(Xa&1073741824)!==0&&(Ze&261930)===0?a.memoizedState=i:(a.memoizedState=c,a=Dv(),qe.lanes|=a,$r|=a,c)}function Db(a,i,c,d){return cs(c,i)?c:to.current!==null?(a=bp(a,c,d),cs(a,i)||(tn=!0),a):(Xa&42)===0||(Xa&1073741824)!==0&&(Ze&261930)===0?(tn=!0,a.memoizedState=c):(a=Dv(),qe.lanes|=a,$r|=a,i)}function Mb(a,i,c,d,g){var y=Z.p;Z.p=y!==0&&8>y?y:8;var _=q.T,C={};q.T=C,Np(a,!1,i,c);try{var $=g(),J=q.S;if(J!==null&&J(C,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ie=NS($,d);zc(a,i,ie,ps(a))}else zc(a,i,d,ps(a))}catch(de){zc(a,i,{then:function(){},status:"rejected",reason:de},ps())}finally{Z.p=y,_!==null&&C.types!==null&&(_.types=C.types),q.T=_}}function AS(){}function vp(a,i,c,d){if(a.tag!==5)throw Error(s(476));var g=Ob(a).queue;Mb(a,g,i,ue,c===null?AS:function(){return Pb(a),c(d)})}function Ob(a){var i=a.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:ue},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:c},next:null},a.memoizedState=i,a=a.alternate,a!==null&&(a.memoizedState=i),i}function Pb(a){var i=Ob(a);i.next===null&&(i=a.alternate.memoizedState),zc(a,i.next.queue,{},ps())}function wp(){return En(nu)}function Lb(){return qt().memoizedState}function Vb(){return qt().memoizedState}function CS(a){for(var i=a.return;i!==null;){switch(i.tag){case 24:case 3:var c=ps();a=zr(c);var d=Ur(i,a,c);d!==null&&(Zn(d,i,c),Mc(d,i,c)),i={cache:Xm()},a.payload=i;return}i=i.return}}function kS(a,i,c){var d=ps();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sh(a)?Ub(i,c):(c=zm(a,i,c,d),c!==null&&(Zn(c,a,d),Fb(c,i,d)))}function zb(a,i,c){var d=ps();zc(a,i,c,d)}function zc(a,i,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(sh(a))Ub(i,g);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var _=i.lastRenderedState,C=y(_,c);if(g.hasEagerState=!0,g.eagerState=C,cs(C,_))return Ld(a,i,g,0),Et===null&&Pd(),!1}catch{}finally{}if(c=zm(a,i,g,d),c!==null)return Zn(c,a,d),Fb(c,i,d),!0}return!1}function Np(a,i,c,d){if(d={lane:2,revertLane:e0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},sh(a)){if(i)throw Error(s(479))}else i=zm(a,c,d,2),i!==null&&Zn(i,a,2)}function sh(a){var i=a.alternate;return a===qe||i!==null&&i===qe}function Ub(a,i){no=Xd=!0;var c=a.pending;c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i}function Fb(a,i,c){if((c&4194048)!==0){var d=i.lanes;d&=a.pendingLanes,c|=d,i.lanes=c,lc(a,c)}}var Uc={readContext:En,use:Zd,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Uc.useEffectEvent=Vt;var Bb={readContext:En,use:Zd,useCallback:function(a,i){return Hn().memoizedState=[a,i===void 0?null:i],a},useContext:En,useEffect:Eb,useImperativeHandle:function(a,i,c){c=c!=null?c.concat([a]):null,th(4194308,4,Cb.bind(null,i,a),c)},useLayoutEffect:function(a,i){return th(4194308,4,a,i)},useInsertionEffect:function(a,i){th(4,2,a,i)},useMemo:function(a,i){var c=Hn();i=i===void 0?null:i;var d=a();if(nl){pn(!0);try{a()}finally{pn(!1)}}return c.memoizedState=[d,i],d},useReducer:function(a,i,c){var d=Hn();if(c!==void 0){var g=c(i);if(nl){pn(!0);try{c(i)}finally{pn(!1)}}}else g=i;return d.memoizedState=d.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},d.queue=a,a=a.dispatch=kS.bind(null,qe,a),[d.memoizedState,a]},useRef:function(a){var i=Hn();return a={current:a},i.memoizedState=a},useState:function(a){a=pp(a);var i=a.queue,c=zb.bind(null,qe,i);return i.dispatch=c,[a.memoizedState,c]},useDebugValue:yp,useDeferredValue:function(a,i){var c=Hn();return bp(c,a,i)},useTransition:function(){var a=pp(!1);return a=Mb.bind(null,qe,a.queue,!0,!1),Hn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,i,c){var d=qe,g=Hn();if(rt){if(c===void 0)throw Error(s(407));c=c()}else{if(c=i(),Et===null)throw Error(s(349));(Ze&127)!==0||cb(d,i,c)}g.memoizedState=c;var y={value:c,getSnapshot:i};return g.queue=y,Eb(db.bind(null,d,y,a),[a]),d.flags|=2048,ao(9,{destroy:void 0},ub.bind(null,d,y,c,i),null),c},useId:function(){var a=Hn(),i=Et.identifierPrefix;if(rt){var c=Ea,d=ja;c=(d&~(1<<32-at(d)-1)).toString(32)+c,i="_"+i+"R_"+c,c=Wd++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=_S++,i="_"+i+"r_"+c.toString(32)+"_";return a.memoizedState=i},useHostTransitionStatus:wp,useFormState:vb,useActionState:vb,useOptimistic:function(a){var i=Hn();i.memoizedState=i.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Np.bind(null,qe,!0,c),c.dispatch=i,[a,i]},useMemoCache:hp,useCacheRefresh:function(){return Hn().memoizedState=CS.bind(null,qe)},useEffectEvent:function(a){var i=Hn(),c={impl:a};return i.memoizedState=c,function(){if((mt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},_p={readContext:En,use:Zd,useCallback:Ib,useContext:En,useEffect:xp,useImperativeHandle:kb,useInsertionEffect:Tb,useLayoutEffect:Ab,useMemo:Rb,useReducer:eh,useRef:jb,useState:function(){return eh(Wa)},useDebugValue:yp,useDeferredValue:function(a,i){var c=qt();return Db(c,Nt.memoizedState,a,i)},useTransition:function(){var a=eh(Wa)[0],i=qt().memoizedState;return[typeof a=="boolean"?a:Vc(a),i]},useSyncExternalStore:ob,useId:Lb,useHostTransitionStatus:wp,useFormState:wb,useActionState:wb,useOptimistic:function(a,i){var c=qt();return mb(c,Nt,a,i)},useMemoCache:hp,useCacheRefresh:Vb};_p.useEffectEvent=Sb;var qb={readContext:En,use:Zd,useCallback:Ib,useContext:En,useEffect:xp,useImperativeHandle:kb,useInsertionEffect:Tb,useLayoutEffect:Ab,useMemo:Rb,useReducer:mp,useRef:jb,useState:function(){return mp(Wa)},useDebugValue:yp,useDeferredValue:function(a,i){var c=qt();return Nt===null?bp(c,a,i):Db(c,Nt.memoizedState,a,i)},useTransition:function(){var a=mp(Wa)[0],i=qt().memoizedState;return[typeof a=="boolean"?a:Vc(a),i]},useSyncExternalStore:ob,useId:Lb,useHostTransitionStatus:wp,useFormState:_b,useActionState:_b,useOptimistic:function(a,i){var c=qt();return Nt!==null?mb(c,Nt,a,i):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:hp,useCacheRefresh:Vb};qb.useEffectEvent=Sb;function jp(a,i,c,d){i=a.memoizedState,c=c(d,i),c=c==null?i:b({},i,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ep={enqueueSetState:function(a,i,c){a=a._reactInternals;var d=ps(),g=zr(d);g.payload=i,c!=null&&(g.callback=c),i=Ur(a,g,d),i!==null&&(Zn(i,a,d),Mc(i,a,d))},enqueueReplaceState:function(a,i,c){a=a._reactInternals;var d=ps(),g=zr(d);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=Ur(a,g,d),i!==null&&(Zn(i,a,d),Mc(i,a,d))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var c=ps(),d=zr(c);d.tag=2,i!=null&&(d.callback=i),i=Ur(a,d,c),i!==null&&(Zn(i,a,c),Mc(i,a,c))}};function Hb(a,i,c,d,g,y,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,y,_):i.prototype&&i.prototype.isPureReactComponent?!Sc(c,d)||!Sc(g,y):!0}function $b(a,i,c,d){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==a&&Ep.enqueueReplaceState(i,i.state,null)}function sl(a,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(a=a.defaultProps){c===i&&(c=b({},c));for(var g in a)c[g]===void 0&&(c[g]=a[g])}return c}function Gb(a){Od(a)}function Yb(a){console.error(a)}function Kb(a){Od(a)}function ah(a,i){try{var c=a.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Qb(a,i,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Sp(a,i,c){return c=zr(c),c.tag=3,c.payload={element:null},c.callback=function(){ah(a,i)},c}function Xb(a){return a=zr(a),a.tag=3,a}function Wb(a,i,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;a.payload=function(){return g(y)},a.callback=function(){Qb(i,c,d)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){Qb(i,c,d),typeof g!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function IS(a,i,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Xl(i,c,g,!0),c=ds.current,c!==null){switch(c.tag){case 31:case 13:return ks===null?gh():c.alternate===null&&zt===0&&(zt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===$d?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),Wp(a,d,g)),!1;case 22:return c.flags|=65536,d===$d?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),Wp(a,d,g)),!1}throw Error(s(435,c.tag))}return Wp(a,d,g),gh(),!1}if(rt)return i=ds.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==$m&&(a=Error(s(422),{cause:d}),Cc(Ss(a,c)))):(d!==$m&&(i=Error(s(423),{cause:d}),Cc(Ss(i,c))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,d=Ss(d,c),g=Sp(a.stateNode,d,g),np(a,g),zt!==4&&(zt=2)),!1;var y=Error(s(520),{cause:d});if(y=Ss(y,c),Kc===null?Kc=[y]:Kc.push(y),zt!==4&&(zt=2),i===null)return!0;d=Ss(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,a=g&-g,c.lanes|=a,a=Sp(c.stateNode,d,a),np(c,a),!1;case 1:if(i=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Gr===null||!Gr.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Xb(g),Wb(g,a,c,d),np(c,g),!1}c=c.return}while(c!==null);return!1}var Tp=Error(s(461)),tn=!1;function Sn(a,i,c,d){i.child=a===null?tb(i,null,c,d):tl(i,a.child,c,d)}function Jb(a,i,c,d,g){c=c.render;var y=i.ref;if("ref"in d){var _={};for(var C in d)C!=="ref"&&(_[C]=d[C])}else _=d;return Wi(i),d=op(a,i,c,_,y,g),C=cp(),a!==null&&!tn?(up(a,i,g),Ja(a,i,g)):(rt&&C&&qm(i),i.flags|=1,Sn(a,i,d,g),i.child)}function Zb(a,i,c,d,g){if(a===null){var y=c.type;return typeof y=="function"&&!Um(y)&&y.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=y,ev(a,i,y,d,g)):(a=zd(c.type,null,d,i,i.mode,g),a.ref=i.ref,a.return=i,i.child=a)}if(y=a.child,!Op(a,g)){var _=y.memoizedProps;if(c=c.compare,c=c!==null?c:Sc,c(_,d)&&a.ref===i.ref)return Ja(a,i,g)}return i.flags|=1,a=Ga(y,d),a.ref=i.ref,a.return=i,i.child=a}function ev(a,i,c,d,g){if(a!==null){var y=a.memoizedProps;if(Sc(y,d)&&a.ref===i.ref)if(tn=!1,i.pendingProps=d=y,Op(a,g))(a.flags&131072)!==0&&(tn=!0);else return i.lanes=a.lanes,Ja(a,i,g)}return Ap(a,i,c,d,g)}function tv(a,i,c,d){var g=d.children,y=a!==null?a.memoizedState:null;if(a===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,a!==null){for(d=i.child=a.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,i.child=null;return nv(a,i,y,c,d)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},a!==null&&qd(i,y!==null?y.cachePool:null),y!==null?ab(i,y):ap(),rb(i);else return d=i.lanes=536870912,nv(a,i,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(qd(i,y.cachePool),ab(i,y),Br(),i.memoizedState=null):(a!==null&&qd(i,null),ap(),Br());return Sn(a,i,g,c),i.child}function Fc(a,i){return a!==null&&a.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function nv(a,i,c,d,g){var y=Jm();return y=y===null?null:{parent:Zt._currentValue,pool:y},i.memoizedState={baseLanes:c,cachePool:y},a!==null&&qd(i,null),ap(),rb(i),a!==null&&Xl(a,i,d,!0),i.childLanes=g,null}function rh(a,i){return i=lh({mode:i.mode,children:i.children},a.mode),i.ref=a.ref,a.child=i,i.return=a,i}function sv(a,i,c){return tl(i,a.child,null,c),a=rh(i,i.pendingProps),a.flags|=2,hs(i),i.memoizedState=null,a}function RS(a,i,c){var d=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,a===null){if(rt){if(d.mode==="hidden")return a=rh(i,d),i.lanes=536870912,Fc(null,a);if(ip(i),(a=kt)?(a=p1(a,Cs),a=a!==null&&a.data==="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:Mr!==null?{id:ja,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},c=Uy(a),c.return=i,i.child=c,jn=i,kt=null)):a=null,a===null)throw Pr(i);return i.lanes=536870912,null}return rh(i,d)}var y=a.memoizedState;if(y!==null){var _=y.dehydrated;if(ip(i),g)if(i.flags&256)i.flags&=-257,i=sv(a,i,c);else if(i.memoizedState!==null)i.child=a.child,i.flags|=128,i=null;else throw Error(s(558));else if(tn||Xl(a,i,c,!1),g=(c&a.childLanes)!==0,tn||g){if(d=Et,d!==null&&(_=oc(d,c),_!==0&&_!==y.retryLane))throw y.retryLane=_,Yi(a,_),Zn(d,a,_),Tp;gh(),i=sv(a,i,c)}else a=y.treeContext,kt=Is(_.nextSibling),jn=i,rt=!0,Or=null,Cs=!1,a!==null&&qy(i,a),i=rh(i,d),i.flags|=4096;return i}return a=Ga(a.child,{mode:d.mode,children:d.children}),a.ref=i.ref,i.child=a,a.return=i,a}function ih(a,i){var c=i.ref;if(c===null)a!==null&&a.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(a===null||a.ref!==c)&&(i.flags|=4194816)}}function Ap(a,i,c,d,g){return Wi(i),c=op(a,i,c,d,void 0,g),d=cp(),a!==null&&!tn?(up(a,i,g),Ja(a,i,g)):(rt&&d&&qm(i),i.flags|=1,Sn(a,i,c,g),i.child)}function av(a,i,c,d,g,y){return Wi(i),i.updateQueue=null,c=lb(i,d,c,g),ib(a),d=cp(),a!==null&&!tn?(up(a,i,y),Ja(a,i,y)):(rt&&d&&qm(i),i.flags|=1,Sn(a,i,c,y),i.child)}function rv(a,i,c,d,g){if(Wi(i),i.stateNode===null){var y=Gl,_=c.contextType;typeof _=="object"&&_!==null&&(y=En(_)),y=new c(d,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ep,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=d,y.state=i.memoizedState,y.refs={},ep(i),_=c.contextType,y.context=typeof _=="object"&&_!==null?En(_):Gl,y.state=i.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(jp(i,c,_,d),y.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Ep.enqueueReplaceState(y,y.state,null),Pc(i,d,y,g),Oc(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(a===null){y=i.stateNode;var C=i.memoizedProps,$=sl(c,C);y.props=$;var J=y.context,ie=c.contextType;_=Gl,typeof ie=="object"&&ie!==null&&(_=En(ie));var de=c.getDerivedStateFromProps;ie=typeof de=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||J!==_)&&$b(i,y,d,_),Vr=!1;var ee=i.memoizedState;y.state=ee,Pc(i,d,y,g),Oc(),J=i.memoizedState,C||ee!==J||Vr?(typeof de=="function"&&(jp(i,c,de,d),J=i.memoizedState),($=Vr||Hb(i,c,$,d,ee,J,_))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=J),y.props=d,y.state=J,y.context=_,d=$):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{y=i.stateNode,tp(a,i),_=i.memoizedProps,ie=sl(c,_),y.props=ie,de=i.pendingProps,ee=y.context,J=c.contextType,$=Gl,typeof J=="object"&&J!==null&&($=En(J)),C=c.getDerivedStateFromProps,(J=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==de||ee!==$)&&$b(i,y,d,$),Vr=!1,ee=i.memoizedState,y.state=ee,Pc(i,d,y,g),Oc();var ae=i.memoizedState;_!==de||ee!==ae||Vr||a!==null&&a.dependencies!==null&&Fd(a.dependencies)?(typeof C=="function"&&(jp(i,c,C,d),ae=i.memoizedState),(ie=Vr||Hb(i,c,ie,d,ee,ae,$)||a!==null&&a.dependencies!==null&&Fd(a.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,ae,$),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,ae,$)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===a.memoizedProps&&ee===a.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ee===a.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ae),y.props=d,y.state=ae,y.context=$,d=ie):(typeof y.componentDidUpdate!="function"||_===a.memoizedProps&&ee===a.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ee===a.memoizedState||(i.flags|=1024),d=!1)}return y=d,ih(a,i),d=(i.flags&128)!==0,y||d?(y=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,a!==null&&d?(i.child=tl(i,a.child,null,g),i.child=tl(i,null,c,g)):Sn(a,i,c,g),i.memoizedState=y.state,a=i.child):a=Ja(a,i,g),a}function iv(a,i,c,d){return Qi(),i.flags|=256,Sn(a,i,c,d),i.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kp(a){return{baseLanes:a,cachePool:Qy()}}function Ip(a,i,c){return a=a!==null?a.childLanes&~c:0,i&&(a|=ms),a}function lv(a,i,c){var d=i.pendingProps,g=!1,y=(i.flags&128)!==0,_;if((_=y)||(_=a!==null&&a.memoizedState===null?!1:(Bt.current&2)!==0),_&&(g=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,a===null){if(rt){if(g?Fr(i):Br(),(a=kt)?(a=p1(a,Cs),a=a!==null&&a.data!=="&"?a:null,a!==null&&(i.memoizedState={dehydrated:a,treeContext:Mr!==null?{id:ja,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},c=Uy(a),c.return=i,i.child=c,jn=i,kt=null)):a=null,a===null)throw Pr(i);return f0(a)?i.lanes=32:i.lanes=536870912,null}var C=d.children;return d=d.fallback,g?(Br(),g=i.mode,C=lh({mode:"hidden",children:C},g),d=Ki(d,g,c,null),C.return=i,d.return=i,C.sibling=d,i.child=C,d=i.child,d.memoizedState=kp(c),d.childLanes=Ip(a,_,c),i.memoizedState=Cp,Fc(null,d)):(Fr(i),Rp(i,C))}var $=a.memoizedState;if($!==null&&(C=$.dehydrated,C!==null)){if(y)i.flags&256?(Fr(i),i.flags&=-257,i=Dp(a,i,c)):i.memoizedState!==null?(Br(),i.child=a.child,i.flags|=128,i=null):(Br(),C=d.fallback,g=i.mode,d=lh({mode:"visible",children:d.children},g),C=Ki(C,g,c,null),C.flags|=2,d.return=i,C.return=i,d.sibling=C,i.child=d,tl(i,a.child,null,c),d=i.child,d.memoizedState=kp(c),d.childLanes=Ip(a,_,c),i.memoizedState=Cp,i=Fc(null,d));else if(Fr(i),f0(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var J=_.dgst;_=J,d=Error(s(419)),d.stack="",d.digest=_,Cc({value:d,source:null,stack:null}),i=Dp(a,i,c)}else if(tn||Xl(a,i,c,!1),_=(c&a.childLanes)!==0,tn||_){if(_=Et,_!==null&&(d=oc(_,c),d!==0&&d!==$.retryLane))throw $.retryLane=d,Yi(a,d),Zn(_,a,d),Tp;h0(C)||gh(),i=Dp(a,i,c)}else h0(C)?(i.flags|=192,i.child=a.child,i=null):(a=$.treeContext,kt=Is(C.nextSibling),jn=i,rt=!0,Or=null,Cs=!1,a!==null&&qy(i,a),i=Rp(i,d.children),i.flags|=4096);return i}return g?(Br(),C=d.fallback,g=i.mode,$=a.child,J=$.sibling,d=Ga($,{mode:"hidden",children:d.children}),d.subtreeFlags=$.subtreeFlags&65011712,J!==null?C=Ga(J,C):(C=Ki(C,g,c,null),C.flags|=2),C.return=i,d.return=i,d.sibling=C,i.child=d,Fc(null,d),d=i.child,C=a.child.memoizedState,C===null?C=kp(c):(g=C.cachePool,g!==null?($=Zt._currentValue,g=g.parent!==$?{parent:$,pool:$}:g):g=Qy(),C={baseLanes:C.baseLanes|c,cachePool:g}),d.memoizedState=C,d.childLanes=Ip(a,_,c),i.memoizedState=Cp,Fc(a.child,d)):(Fr(i),c=a.child,a=c.sibling,c=Ga(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,a!==null&&(_=i.deletions,_===null?(i.deletions=[a],i.flags|=16):_.push(a)),i.child=c,i.memoizedState=null,c)}function Rp(a,i){return i=lh({mode:"visible",children:i},a.mode),i.return=a,a.child=i}function lh(a,i){return a=us(22,a,null,i),a.lanes=0,a}function Dp(a,i,c){return tl(i,a.child,null,c),a=Rp(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function ov(a,i,c){a.lanes|=i;var d=a.alternate;d!==null&&(d.lanes|=i),Km(a.return,i,c)}function Mp(a,i,c,d,g,y){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=c,_.tailMode=g,_.treeForkCount=y)}function cv(a,i,c){var d=i.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var _=Bt.current,C=(_&2)!==0;if(C?(_=_&1|2,i.flags|=128):_&=1,U(Bt,_),Sn(a,i,d,c),d=rt?Ac:0,!C&&a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ov(a,c,i);else if(a.tag===19)ov(a,c,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(g){case"forwards":for(c=i.child,g=null;c!==null;)a=c.alternate,a!==null&&Qd(a)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),Mp(i,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(a=g.alternate,a!==null&&Qd(a)===null){i.child=g;break}a=g.sibling,g.sibling=c,c=g,g=a}Mp(i,!0,c,null,y,d);break;case"together":Mp(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Ja(a,i,c){if(a!==null&&(i.dependencies=a.dependencies),$r|=i.lanes,(c&i.childLanes)===0)if(a!==null){if(Xl(a,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(a!==null&&i.child!==a.child)throw Error(s(153));if(i.child!==null){for(a=i.child,c=Ga(a,a.pendingProps),i.child=c,c.return=i;a.sibling!==null;)a=a.sibling,c=c.sibling=Ga(a,a.pendingProps),c.return=i;c.sibling=null}return i.child}function Op(a,i){return(a.lanes&i)!==0?!0:(a=a.dependencies,!!(a!==null&&Fd(a)))}function DS(a,i,c){switch(i.tag){case 3:vt(i,i.stateNode.containerInfo),Lr(i,Zt,a.memoizedState.cache),Qi();break;case 27:case 5:fn(i);break;case 4:vt(i,i.stateNode.containerInfo);break;case 10:Lr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ip(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Fr(i),i.flags|=128,null):(c&i.child.childLanes)!==0?lv(a,i,c):(Fr(i),a=Ja(a,i,c),a!==null?a.sibling:null);Fr(i);break;case 19:var g=(a.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Xl(a,i,c,!1),d=(c&i.childLanes)!==0),g){if(d)return cv(a,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),U(Bt,Bt.current),d)break;return null;case 22:return i.lanes=0,tv(a,i,c,i.pendingProps);case 24:Lr(i,Zt,a.memoizedState.cache)}return Ja(a,i,c)}function uv(a,i,c){if(a!==null)if(a.memoizedProps!==i.pendingProps)tn=!0;else{if(!Op(a,c)&&(i.flags&128)===0)return tn=!1,DS(a,i,c);tn=(a.flags&131072)!==0}else tn=!1,rt&&(i.flags&1048576)!==0&&By(i,Ac,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(a=Zi(i.elementType),i.type=a,typeof a=="function")Um(a)?(d=sl(a,d),i.tag=1,i=rv(null,i,a,d,c)):(i.tag=0,i=Ap(null,i,a,d,c));else{if(a!=null){var g=a.$$typeof;if(g===X){i.tag=11,i=Jb(null,i,a,d,c);break e}else if(g===I){i.tag=14,i=Zb(null,i,a,d,c);break e}}throw i=re(a)||a,Error(s(306,i,""))}}return i;case 0:return Ap(a,i,i.type,i.pendingProps,c);case 1:return d=i.type,g=sl(d,i.pendingProps),rv(a,i,d,g,c);case 3:e:{if(vt(i,i.stateNode.containerInfo),a===null)throw Error(s(387));d=i.pendingProps;var y=i.memoizedState;g=y.element,tp(a,i),Pc(i,d,null,c);var _=i.memoizedState;if(d=_.cache,Lr(i,Zt,d),d!==y.cache&&Qm(i,[Zt],c,!0),Oc(),d=_.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=iv(a,i,d,c);break e}else if(d!==g){g=Ss(Error(s(424)),i),Cc(g),i=iv(a,i,d,c);break e}else{switch(a=i.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(kt=Is(a.firstChild),jn=i,rt=!0,Or=null,Cs=!0,c=tb(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Qi(),d===g){i=Ja(a,i,c);break e}Sn(a,i,d,c)}i=i.child}return i;case 26:return ih(a,i),a===null?(c=w1(i.type,null,i.pendingProps,null))?i.memoizedState=c:rt||(c=i.type,a=i.pendingProps,d=_h(Ye.current).createElement(c),d[Xt]=i,d[gn]=a,Tn(d,c,a),Wt(d),i.stateNode=d):i.memoizedState=w1(i.type,a.memoizedProps,i.pendingProps,a.memoizedState),null;case 27:return fn(i),a===null&&rt&&(d=i.stateNode=y1(i.type,i.pendingProps,Ye.current),jn=i,Cs=!0,g=kt,Xr(i.type)?(m0=g,kt=Is(d.firstChild)):kt=g),Sn(a,i,i.pendingProps.children,c),ih(a,i),a===null&&(i.flags|=4194304),i.child;case 5:return a===null&&rt&&((g=d=kt)&&(d=cT(d,i.type,i.pendingProps,Cs),d!==null?(i.stateNode=d,jn=i,kt=Is(d.firstChild),Cs=!1,g=!0):g=!1),g||Pr(i)),fn(i),g=i.type,y=i.pendingProps,_=a!==null?a.memoizedProps:null,d=y.children,c0(g,y)?d=null:_!==null&&c0(g,_)&&(i.flags|=32),i.memoizedState!==null&&(g=op(a,i,jS,null,null,c),nu._currentValue=g),ih(a,i),Sn(a,i,d,c),i.child;case 6:return a===null&&rt&&((a=c=kt)&&(c=uT(c,i.pendingProps,Cs),c!==null?(i.stateNode=c,jn=i,kt=null,a=!0):a=!1),a||Pr(i)),null;case 13:return lv(a,i,c);case 4:return vt(i,i.stateNode.containerInfo),d=i.pendingProps,a===null?i.child=tl(i,null,d,c):Sn(a,i,d,c),i.child;case 11:return Jb(a,i,i.type,i.pendingProps,c);case 7:return Sn(a,i,i.pendingProps,c),i.child;case 8:return Sn(a,i,i.pendingProps.children,c),i.child;case 12:return Sn(a,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Lr(i,i.type,d.value),Sn(a,i,d.children,c),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,Wi(i),g=En(g),d=d(g),i.flags|=1,Sn(a,i,d,c),i.child;case 14:return Zb(a,i,i.type,i.pendingProps,c);case 15:return ev(a,i,i.type,i.pendingProps,c);case 19:return cv(a,i,c);case 31:return RS(a,i,c);case 22:return tv(a,i,c,i.pendingProps);case 24:return Wi(i),d=En(Zt),a===null?(g=Jm(),g===null&&(g=Et,y=Xm(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),i.memoizedState={parent:d,cache:g},ep(i),Lr(i,Zt,g)):((a.lanes&c)!==0&&(tp(a,i),Pc(i,null,null,c),Oc()),g=a.memoizedState,y=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Lr(i,Zt,d)):(d=y.cache,Lr(i,Zt,d),d!==g.cache&&Qm(i,[Zt],c,!0))),Sn(a,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Za(a){a.flags|=4}function Pp(a,i,c,d,g){if((i=(a.mode&32)!==0)&&(i=!1),i){if(a.flags|=16777216,(g&335544128)===g)if(a.stateNode.complete)a.flags|=8192;else if(Lv())a.flags|=8192;else throw el=$d,Zm}else a.flags&=-16777217}function dv(a,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!S1(i))if(Lv())a.flags|=8192;else throw el=$d,Zm}function oh(a,i){i!==null&&(a.flags|=4),a.flags&16384&&(i=a.tag!==22?md():536870912,a.lanes|=i,oo|=i)}function Bc(a,i){if(!rt)switch(a.tailMode){case"hidden":i=a.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function It(a){var i=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(i)for(var g=a.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=d,a.childLanes=c,i}function MS(a,i,c){var d=i.pendingProps;switch(Hm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(i),null;case 1:return It(i),null;case 3:return c=i.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Qa(Zt),gt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ql(i)?Za(i):a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Gm())),It(i),null;case 26:var g=i.type,y=i.memoizedState;return a===null?(Za(i),y!==null?(It(i),dv(i,y)):(It(i),Pp(i,g,null,d,c))):y?y!==a.memoizedState?(Za(i),It(i),dv(i,y)):(It(i),i.flags&=-16777217):(a=a.memoizedProps,a!==d&&Za(i),It(i),Pp(i,g,a,d,c)),null;case 27:if(mn(i),c=Ye.current,g=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==d&&Za(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return It(i),null}a=Ie.current,Ql(i)?Hy(i):(a=y1(g,d,c),i.stateNode=a,Za(i))}return It(i),null;case 5:if(mn(i),g=i.type,a!==null&&i.stateNode!=null)a.memoizedProps!==d&&Za(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return It(i),null}if(y=Ie.current,Ql(i))Hy(i);else{var _=_h(Ye.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?_.createElement(g,{is:d.is}):_.createElement(g)}}y[Xt]=i,y[gn]=d;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=y;e:switch(Tn(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Za(i)}}return It(i),Pp(i,i.type,a===null?null:a.memoizedProps,i.pendingProps,c),null;case 6:if(a&&i.stateNode!=null)a.memoizedProps!==d&&Za(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(a=Ye.current,Ql(i)){if(a=i.stateNode,c=i.memoizedProps,d=null,g=jn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}a[Xt]=i,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||l1(a.nodeValue,c)),a||Pr(i,!0)}else a=_h(a).createTextNode(d),a[Xt]=i,i.stateNode=a}return It(i),null;case 31:if(c=i.memoizedState,a===null||a.memoizedState!==null){if(d=Ql(i),c!==null){if(a===null){if(!d)throw Error(s(318));if(a=i.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(557));a[Xt]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),a=!1}else c=Gm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return i.flags&256?(hs(i),i):(hs(i),null);if((i.flags&128)!==0)throw Error(s(558))}return It(i),null;case 13:if(d=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=Ql(i),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Xt]=i}else Qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;It(i),g=!1}else g=Gm(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(hs(i),i):(hs(i),null)}return hs(i),(i.flags&128)!==0?(i.lanes=c,i):(c=d!==null,a=a!==null&&a.memoizedState!==null,c&&(d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==a&&c&&(i.child.flags|=8192),oh(i,i.updateQueue),It(i),null);case 4:return gt(),a===null&&a0(i.stateNode.containerInfo),It(i),null;case 10:return Qa(i.type),It(i),null;case 19:if(Oe(Bt),d=i.memoizedState,d===null)return It(i),null;if(g=(i.flags&128)!==0,y=d.rendering,y===null)if(g)Bc(d,!1);else{if(zt!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(y=Qd(a),y!==null){for(i.flags|=128,Bc(d,!1),a=y.updateQueue,i.updateQueue=a,oh(i,a),i.subtreeFlags=0,a=c,c=i.child;c!==null;)zy(c,a),c=c.sibling;return U(Bt,Bt.current&1|2),rt&&Ya(i,d.treeForkCount),i.child}a=a.sibling}d.tail!==null&&Ot()>fh&&(i.flags|=128,g=!0,Bc(d,!1),i.lanes=4194304)}else{if(!g)if(a=Qd(y),a!==null){if(i.flags|=128,g=!0,a=a.updateQueue,i.updateQueue=a,oh(i,a),Bc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!rt)return It(i),null}else 2*Ot()-d.renderingStartTime>fh&&c!==536870912&&(i.flags|=128,g=!0,Bc(d,!1),i.lanes=4194304);d.isBackwards?(y.sibling=i.child,i.child=y):(a=d.last,a!==null?a.sibling=y:i.child=y,d.last=y)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Ot(),a.sibling=null,c=Bt.current,U(Bt,g?c&1|2:c&1),rt&&Ya(i,d.treeForkCount),a):(It(i),null);case 22:case 23:return hs(i),rp(),d=i.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(It(i),i.subtreeFlags&6&&(i.flags|=8192)):It(i),c=i.updateQueue,c!==null&&oh(i,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),a!==null&&Oe(Ji),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Qa(Zt),It(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function OS(a,i){switch(Hm(i),i.tag){case 1:return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return Qa(Zt),gt(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 26:case 27:case 5:return mn(i),null;case 31:if(i.memoizedState!==null){if(hs(i),i.alternate===null)throw Error(s(340));Qi()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 13:if(hs(i),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Qi()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return Oe(Bt),null;case 4:return gt(),null;case 10:return Qa(i.type),null;case 22:case 23:return hs(i),rp(),a!==null&&Oe(Ji),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 24:return Qa(Zt),null;case 25:return null;default:return null}}function hv(a,i){switch(Hm(i),i.tag){case 3:Qa(Zt),gt();break;case 26:case 27:case 5:mn(i);break;case 4:gt();break;case 31:i.memoizedState!==null&&hs(i);break;case 13:hs(i);break;case 19:Oe(Bt);break;case 10:Qa(i.type);break;case 22:case 23:hs(i),rp(),a!==null&&Oe(Ji);break;case 24:Qa(Zt)}}function qc(a,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&a)===a){d=void 0;var y=c.create,_=c.inst;d=y(),_.destroy=d}c=c.next}while(c!==g)}}catch(C){bt(i,i.return,C)}}function qr(a,i,c){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&a)===a){var _=d.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,g=i;var $=c,J=C;try{J()}catch(ie){bt(g,$,ie)}}}d=d.next}while(d!==y)}}catch(ie){bt(i,i.return,ie)}}function fv(a){var i=a.updateQueue;if(i!==null){var c=a.stateNode;try{sb(i,c)}catch(d){bt(a,a.return,d)}}}function mv(a,i,c){c.props=sl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){bt(a,i,d)}}function Hc(a,i){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(g){bt(a,i,g)}}function Sa(a,i){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){bt(a,i,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){bt(a,i,g)}else c.current=null}function pv(a){var i=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){bt(a,a.return,g)}}function Lp(a,i,c){try{var d=a.stateNode;sT(d,a.type,c,i),d[gn]=i}catch(g){bt(a,a.return,g)}}function gv(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Xr(a.type)||a.tag===4}function Vp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||gv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Xr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zp(a,i,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(a),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Hs));else if(d!==4&&(d===27&&Xr(a.type)&&(c=a.stateNode,i=null),a=a.child,a!==null))for(zp(a,i,c),a=a.sibling;a!==null;)zp(a,i,c),a=a.sibling}function ch(a,i,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,i?c.insertBefore(a,i):c.appendChild(a);else if(d!==4&&(d===27&&Xr(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(ch(a,i,c),a=a.sibling;a!==null;)ch(a,i,c),a=a.sibling}function xv(a){var i=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Tn(i,d,c),i[Xt]=a,i[gn]=c}catch(y){bt(a,a.return,y)}}var er=!1,nn=!1,Up=!1,yv=typeof WeakSet=="function"?WeakSet:Set,yn=null;function PS(a,i){if(a=a.containerInfo,l0=kh,a=ky(a),Dm(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var _=0,C=-1,$=-1,J=0,ie=0,de=a,ee=null;t:for(;;){for(var ae;de!==c||g!==0&&de.nodeType!==3||(C=_+g),de!==y||d!==0&&de.nodeType!==3||($=_+d),de.nodeType===3&&(_+=de.nodeValue.length),(ae=de.firstChild)!==null;)ee=de,de=ae;for(;;){if(de===a)break t;if(ee===c&&++J===g&&(C=_),ee===y&&++ie===d&&($=_),(ae=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=ae}c=C===-1||$===-1?null:{start:C,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(o0={focusedElem:a,selectionRange:c},kh=!1,yn=i;yn!==null;)if(i=yn,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,yn=a;else for(;yn!==null;){switch(i=yn,y=i.alternate,a=i.flags,i.tag){case 0:if((a&4)!==0&&(a=i.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)g=a[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,c=i,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var je=sl(c.type,g);a=d.getSnapshotBeforeUpdate(je,y),d.__reactInternalSnapshotBeforeUpdate=a}catch(Me){bt(c,c.return,Me)}}break;case 3:if((a&1024)!==0){if(a=i.stateNode.containerInfo,c=a.nodeType,c===9)d0(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":d0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=i.sibling,a!==null){a.return=i.return,yn=a;break}yn=i.return}}function bv(a,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:nr(a,c),d&4&&qc(5,c);break;case 1:if(nr(a,c),d&4)if(a=c.stateNode,i===null)try{a.componentDidMount()}catch(_){bt(c,c.return,_)}else{var g=sl(c.type,i.memoizedProps);i=i.memoizedState;try{a.componentDidUpdate(g,i,a.__reactInternalSnapshotBeforeUpdate)}catch(_){bt(c,c.return,_)}}d&64&&fv(c),d&512&&Hc(c,c.return);break;case 3:if(nr(a,c),d&64&&(a=c.updateQueue,a!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{sb(a,i)}catch(_){bt(c,c.return,_)}}break;case 27:i===null&&d&4&&xv(c);case 26:case 5:nr(a,c),i===null&&d&4&&pv(c),d&512&&Hc(c,c.return);break;case 12:nr(a,c);break;case 31:nr(a,c),d&4&&Nv(a,c);break;case 13:nr(a,c),d&4&&_v(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=$S.bind(null,c),dT(a,c))));break;case 22:if(d=c.memoizedState!==null||er,!d){i=i!==null&&i.memoizedState!==null||nn,g=er;var y=nn;er=d,(nn=i)&&!y?sr(a,c,(c.subtreeFlags&8772)!==0):nr(a,c),er=g,nn=y}break;case 30:break;default:nr(a,c)}}function vv(a){var i=a.alternate;i!==null&&(a.alternate=null,vv(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&Rl(i)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Mt=null,Qn=!1;function tr(a,i,c){for(c=c.child;c!==null;)wv(a,i,c),c=c.sibling}function wv(a,i,c){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Ut,c)}catch{}switch(c.tag){case 26:nn||Sa(c,i),tr(a,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:nn||Sa(c,i);var d=Mt,g=Qn;Xr(c.type)&&(Mt=c.stateNode,Qn=!1),tr(a,i,c),Zc(c.stateNode),Mt=d,Qn=g;break;case 5:nn||Sa(c,i);case 6:if(d=Mt,g=Qn,Mt=null,tr(a,i,c),Mt=d,Qn=g,Mt!==null)if(Qn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(c.stateNode)}catch(y){bt(c,i,y)}else try{Mt.removeChild(c.stateNode)}catch(y){bt(c,i,y)}break;case 18:Mt!==null&&(Qn?(a=Mt,f1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),xo(a)):f1(Mt,c.stateNode));break;case 4:d=Mt,g=Qn,Mt=c.stateNode.containerInfo,Qn=!0,tr(a,i,c),Mt=d,Qn=g;break;case 0:case 11:case 14:case 15:qr(2,c,i),nn||qr(4,c,i),tr(a,i,c);break;case 1:nn||(Sa(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&mv(c,i,d)),tr(a,i,c);break;case 21:tr(a,i,c);break;case 22:nn=(d=nn)||c.memoizedState!==null,tr(a,i,c),nn=d;break;default:tr(a,i,c)}}function Nv(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{xo(a)}catch(c){bt(i,i.return,c)}}}function _v(a,i){if(i.memoizedState===null&&(a=i.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{xo(a)}catch(c){bt(i,i.return,c)}}function LS(a){switch(a.tag){case 31:case 13:case 19:var i=a.stateNode;return i===null&&(i=a.stateNode=new yv),i;case 22:return a=a.stateNode,i=a._retryCache,i===null&&(i=a._retryCache=new yv),i;default:throw Error(s(435,a.tag))}}function uh(a,i){var c=LS(a);i.forEach(function(d){if(!c.has(d)){c.add(d);var g=GS.bind(null,a,d);d.then(g,g)}})}function Xn(a,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=a,_=i,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Xr(C.type)){Mt=C.stateNode,Qn=!1;break e}break;case 5:Mt=C.stateNode,Qn=!1;break e;case 3:case 4:Mt=C.stateNode.containerInfo,Qn=!0;break e}C=C.return}if(Mt===null)throw Error(s(160));wv(y,_,g),Mt=null,Qn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)jv(i,a),i=i.sibling}var Xs=null;function jv(a,i){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Xn(i,a),Wn(a),d&4&&(qr(3,a,a.return),qc(3,a),qr(5,a,a.return));break;case 1:Xn(i,a),Wn(a),d&512&&(nn||c===null||Sa(c,c.return)),d&64&&er&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Xs;if(Xn(i,a),Wn(a),d&512&&(nn||c===null||Sa(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[ha]||y[Xt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Tn(y,d,c),y[Xt]=a,Wt(y),d=y;break e;case"link":var _=j1("link","href",g).get(d+(c.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(C,1);break t}}y=g.createElement(d),Tn(y,d,c),g.head.appendChild(y);break;case"meta":if(_=j1("meta","content",g).get(d+(c.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(C,1);break t}}y=g.createElement(d),Tn(y,d,c),g.head.appendChild(y);break;default:throw Error(s(468,d))}y[Xt]=a,Wt(y),d=y}a.stateNode=d}else E1(g,a.type,a.stateNode);else a.stateNode=_1(g,d,a.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?E1(g,a.type,a.stateNode):_1(g,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Lp(a,a.memoizedProps,c.memoizedProps)}break;case 27:Xn(i,a),Wn(a),d&512&&(nn||c===null||Sa(c,c.return)),c!==null&&d&4&&Lp(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Xn(i,a),Wn(a),d&512&&(nn||c===null||Sa(c,c.return)),a.flags&32){g=a.stateNode;try{Kn(g,"")}catch(je){bt(a,a.return,je)}}d&4&&a.stateNode!=null&&(g=a.memoizedProps,Lp(a,g,c!==null?c.memoizedProps:g)),d&1024&&(Up=!0);break;case 6:if(Xn(i,a),Wn(a),d&4){if(a.stateNode===null)throw Error(s(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(je){bt(a,a.return,je)}}break;case 3:if(Sh=null,g=Xs,Xs=jh(i.containerInfo),Xn(i,a),Xs=g,Wn(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{xo(i.containerInfo)}catch(je){bt(a,a.return,je)}Up&&(Up=!1,Ev(a));break;case 4:d=Xs,Xs=jh(a.stateNode.containerInfo),Xn(i,a),Wn(a),Xs=d;break;case 12:Xn(i,a),Wn(a);break;case 31:Xn(i,a),Wn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,uh(a,d)));break;case 13:Xn(i,a),Wn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(hh=Ot()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,uh(a,d)));break;case 22:g=a.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,J=er,ie=nn;if(er=J||g,nn=ie||$,Xn(i,a),nn=ie,er=J,Wn(a),d&8192)e:for(i=a.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(c===null||$||er||nn||al(a)),c=null,i=a;;){if(i.tag===5||i.tag===26){if(c===null){$=c=i;try{if(y=$.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=$.stateNode;var de=$.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(je){bt($,$.return,je)}}}else if(i.tag===6){if(c===null){$=i;try{$.stateNode.nodeValue=g?"":$.memoizedProps}catch(je){bt($,$.return,je)}}}else if(i.tag===18){if(c===null){$=i;try{var ae=$.stateNode;g?m1(ae,!0):m1($.stateNode,!1)}catch(je){bt($,$.return,je)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===a)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,uh(a,c))));break;case 19:Xn(i,a),Wn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,uh(a,d)));break;case 30:break;case 21:break;default:Xn(i,a),Wn(a)}}function Wn(a){var i=a.flags;if(i&2){try{for(var c,d=a.return;d!==null;){if(gv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var g=c.stateNode,y=Vp(a);ch(a,y,g);break;case 5:var _=c.stateNode;c.flags&32&&(Kn(_,""),c.flags&=-33);var C=Vp(a);ch(a,C,_);break;case 3:case 4:var $=c.stateNode.containerInfo,J=Vp(a);zp(a,J,$);break;default:throw Error(s(161))}}catch(ie){bt(a,a.return,ie)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function Ev(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var i=a;Ev(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),a=a.sibling}}function nr(a,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)bv(a,i.alternate,i),i=i.sibling}function al(a){for(a=a.child;a!==null;){var i=a;switch(i.tag){case 0:case 11:case 14:case 15:qr(4,i,i.return),al(i);break;case 1:Sa(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&mv(i,i.return,c),al(i);break;case 27:Zc(i.stateNode);case 26:case 5:Sa(i,i.return),al(i);break;case 22:i.memoizedState===null&&al(i);break;case 30:al(i);break;default:al(i)}a=a.sibling}}function sr(a,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=a,y=i,_=y.flags;switch(y.tag){case 0:case 11:case 15:sr(g,y,c),qc(4,y);break;case 1:if(sr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){bt(d,d.return,J)}if(d=y,g=d.updateQueue,g!==null){var C=d.stateNode;try{var $=g.shared.hiddenCallbacks;if($!==null)for(g.shared.hiddenCallbacks=null,g=0;g<$.length;g++)nb($[g],C)}catch(J){bt(d,d.return,J)}}c&&_&64&&fv(y),Hc(y,y.return);break;case 27:xv(y);case 26:case 5:sr(g,y,c),c&&d===null&&_&4&&pv(y),Hc(y,y.return);break;case 12:sr(g,y,c);break;case 31:sr(g,y,c),c&&_&4&&Nv(g,y);break;case 13:sr(g,y,c),c&&_&4&&_v(g,y);break;case 22:y.memoizedState===null&&sr(g,y,c),Hc(y,y.return);break;case 30:break;default:sr(g,y,c)}i=i.sibling}}function Fp(a,i){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&kc(c))}function Bp(a,i){a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&kc(a))}function Ws(a,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sv(a,i,c,d),i=i.sibling}function Sv(a,i,c,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Ws(a,i,c,d),g&2048&&qc(9,i);break;case 1:Ws(a,i,c,d);break;case 3:Ws(a,i,c,d),g&2048&&(a=null,i.alternate!==null&&(a=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==a&&(i.refCount++,a!=null&&kc(a)));break;case 12:if(g&2048){Ws(a,i,c,d),a=i.stateNode;try{var y=i.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,i.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch($){bt(i,i.return,$)}}else Ws(a,i,c,d);break;case 31:Ws(a,i,c,d);break;case 13:Ws(a,i,c,d);break;case 23:break;case 22:y=i.stateNode,_=i.alternate,i.memoizedState!==null?y._visibility&2?Ws(a,i,c,d):$c(a,i):y._visibility&2?Ws(a,i,c,d):(y._visibility|=2,ro(a,i,c,d,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Fp(_,i);break;case 24:Ws(a,i,c,d),g&2048&&Bp(i.alternate,i);break;default:Ws(a,i,c,d)}}function ro(a,i,c,d,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=a,_=i,C=c,$=d,J=_.flags;switch(_.tag){case 0:case 11:case 15:ro(y,_,C,$,g),qc(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?ro(y,_,C,$,g):$c(y,_):(ie._visibility|=2,ro(y,_,C,$,g)),g&&J&2048&&Fp(_.alternate,_);break;case 24:ro(y,_,C,$,g),g&&J&2048&&Bp(_.alternate,_);break;default:ro(y,_,C,$,g)}i=i.sibling}}function $c(a,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=a,d=i,g=d.flags;switch(d.tag){case 22:$c(c,d),g&2048&&Fp(d.alternate,d);break;case 24:$c(c,d),g&2048&&Bp(d.alternate,d);break;default:$c(c,d)}i=i.sibling}}var Gc=8192;function io(a,i,c){if(a.subtreeFlags&Gc)for(a=a.child;a!==null;)Tv(a,i,c),a=a.sibling}function Tv(a,i,c){switch(a.tag){case 26:io(a,i,c),a.flags&Gc&&a.memoizedState!==null&&_T(c,Xs,a.memoizedState,a.memoizedProps);break;case 5:io(a,i,c);break;case 3:case 4:var d=Xs;Xs=jh(a.stateNode.containerInfo),io(a,i,c),Xs=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Gc,Gc=16777216,io(a,i,c),Gc=d):io(a,i,c));break;default:io(a,i,c)}}function Av(a){var i=a.alternate;if(i!==null&&(a=i.child,a!==null)){i.child=null;do i=a.sibling,a.sibling=null,a=i;while(a!==null)}}function Yc(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];yn=d,kv(d,a)}Av(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Cv(a),a=a.sibling}function Cv(a){switch(a.tag){case 0:case 11:case 15:Yc(a),a.flags&2048&&qr(9,a,a.return);break;case 3:Yc(a);break;case 12:Yc(a);break;case 22:var i=a.stateNode;a.memoizedState!==null&&i._visibility&2&&(a.return===null||a.return.tag!==13)?(i._visibility&=-3,dh(a)):Yc(a);break;default:Yc(a)}}function dh(a){var i=a.deletions;if((a.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];yn=d,kv(d,a)}Av(a)}for(a=a.child;a!==null;){switch(i=a,i.tag){case 0:case 11:case 15:qr(8,i,i.return),dh(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,dh(i));break;default:dh(i)}a=a.sibling}}function kv(a,i){for(;yn!==null;){var c=yn;switch(c.tag){case 0:case 11:case 15:qr(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:kc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,yn=d;else e:for(c=a;yn!==null;){d=yn;var g=d.sibling,y=d.return;if(vv(d),d===c){yn=null;break e}if(g!==null){g.return=y,yn=g;break e}yn=y}}}var VS={getCacheForType:function(a){var i=En(Zt),c=i.data.get(a);return c===void 0&&(c=a(),i.data.set(a,c)),c},cacheSignal:function(){return En(Zt).controller.signal}},zS=typeof WeakMap=="function"?WeakMap:Map,mt=0,Et=null,Xe=null,Ze=0,yt=0,fs=null,Hr=!1,lo=!1,qp=!1,ar=0,zt=0,$r=0,rl=0,Hp=0,ms=0,oo=0,Kc=null,Jn=null,$p=!1,hh=0,Iv=0,fh=1/0,mh=null,Gr=null,cn=0,Yr=null,co=null,rr=0,Gp=0,Yp=null,Rv=null,Qc=0,Kp=null;function ps(){return(mt&2)!==0&&Ze!==0?Ze&-Ze:q.T!==null?e0():pd()}function Dv(){if(ms===0)if((Ze&536870912)===0||rt){var a=Ri;Ri<<=1,(Ri&3932160)===0&&(Ri=262144),ms=a}else ms=536870912;return a=ds.current,a!==null&&(a.flags|=32),ms}function Zn(a,i,c){(a===Et&&(yt===2||yt===9)||a.cancelPendingCommit!==null)&&(uo(a,0),Kr(a,Ze,ms,!1)),Di(a,c),((mt&2)===0||a!==Et)&&(a===Et&&((mt&2)===0&&(rl|=c),zt===4&&Kr(a,Ze,ms,!1)),Ta(a))}function Mv(a,i,c){if((mt&6)!==0)throw Error(s(327));var d=!c&&(i&127)===0&&(i&a.expiredLanes)===0||Fs(a,i),g=d?BS(a,i):Xp(a,i,!0),y=d;do{if(g===0){lo&&!d&&Kr(a,i,0,!1);break}else{if(c=a.current.alternate,y&&!US(c)){g=Xp(a,i,!1),y=!1;continue}if(g===2){if(y=i,a.errorRecoveryDisabledLanes&y)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var C=a;g=Kc;var $=C.current.memoizedState.isDehydrated;if($&&(uo(C,_).flags|=256),_=Xp(C,_,!1),_!==2){if(qp&&!$){C.errorRecoveryDisabledLanes|=y,rl|=y,g=4;break e}y=Jn,Jn=g,y!==null&&(Jn===null?Jn=y:Jn.push.apply(Jn,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){uo(a,0),Kr(a,i,0,!0);break}e:{switch(d=a,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Kr(d,i,ms,!Hr);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=hh+300-Ot(),10<g)){if(Kr(d,i,ms,!Hr),ca(d,0,!0)!==0)break e;rr=i,d.timeoutHandle=d1(Ov.bind(null,d,c,Jn,mh,$p,i,ms,rl,oo,Hr,y,"Throttled",-0,0),g);break e}Ov(d,c,Jn,mh,$p,i,ms,rl,oo,Hr,y,null,-0,0)}}break}while(!0);Ta(a)}function Ov(a,i,c,d,g,y,_,C,$,J,ie,de,ee,ae){if(a.timeoutHandle=-1,de=i.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hs},Tv(i,y,de);var je=(y&62914560)===y?hh-Ot():(y&4194048)===y?Iv-Ot():0;if(je=jT(de,je),je!==null){rr=y,a.cancelPendingCommit=je(qv.bind(null,a,i,y,c,d,g,_,C,$,ie,de,null,ee,ae)),Kr(a,y,_,!J);return}}qv(a,i,y,c,d,g,_,C,$)}function US(a){for(var i=a;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!cs(y(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Kr(a,i,c,d){i&=~Hp,i&=~rl,a.suspendedLanes|=i,a.pingedLanes&=~i,d&&(a.warmLanes|=i),d=a.expirationTimes;for(var g=i;0<g;){var y=31-at(g),_=1<<y;d[y]=-1,g&=~_}c!==0&&Mi(a,c,i)}function ph(){return(mt&6)===0?(Xc(0),!1):!0}function Qp(){if(Xe!==null){if(yt===0)var a=Xe.return;else a=Xe,Ka=Xi=null,dp(a),eo=null,Rc=0,a=Xe;for(;a!==null;)hv(a.alternate,a),a=a.return;Xe=null}}function uo(a,i){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,iT(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),rr=0,Qp(),Et=a,Xe=c=Ga(a.current,null),Ze=i,yt=0,fs=null,Hr=!1,lo=Fs(a,i),qp=!1,oo=ms=Hp=rl=$r=zt=0,Jn=Kc=null,$p=!1,(i&8)!==0&&(i|=i&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=i;0<d;){var g=31-at(d),y=1<<g;i|=a[g],d&=~y}return ar=i,Pd(),c}function Pv(a,i){qe=null,q.H=Uc,i===Zl||i===Hd?(i=Jy(),yt=3):i===Zm?(i=Jy(),yt=4):yt=i===Tp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fs=i,Xe===null&&(zt=1,ah(a,Ss(i,a.current)))}function Lv(){var a=ds.current;return a===null?!0:(Ze&4194048)===Ze?ks===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?a===ks:!1}function Vv(){var a=q.H;return q.H=Uc,a===null?Uc:a}function zv(){var a=q.A;return q.A=VS,a}function gh(){zt=4,Hr||(Ze&4194048)!==Ze&&ds.current!==null||(lo=!0),($r&134217727)===0&&(rl&134217727)===0||Et===null||Kr(Et,Ze,ms,!1)}function Xp(a,i,c){var d=mt;mt|=2;var g=Vv(),y=zv();(Et!==a||Ze!==i)&&(mh=null,uo(a,i)),i=!1;var _=zt;e:do try{if(yt!==0&&Xe!==null){var C=Xe,$=fs;switch(yt){case 8:Qp(),_=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(i=!0);var J=yt;if(yt=0,fs=null,ho(a,C,$,J),c&&lo){_=0;break e}break;default:J=yt,yt=0,fs=null,ho(a,C,$,J)}}FS(),_=zt;break}catch(ie){Pv(a,ie)}while(!0);return i&&a.shellSuspendCounter++,Ka=Xi=null,mt=d,q.H=g,q.A=y,Xe===null&&(Et=null,Ze=0,Pd()),_}function FS(){for(;Xe!==null;)Uv(Xe)}function BS(a,i){var c=mt;mt|=2;var d=Vv(),g=zv();Et!==a||Ze!==i?(mh=null,fh=Ot()+500,uo(a,i)):lo=Fs(a,i);e:do try{if(yt!==0&&Xe!==null){i=Xe;var y=fs;t:switch(yt){case 1:yt=0,fs=null,ho(a,i,y,1);break;case 2:case 9:if(Xy(y)){yt=0,fs=null,Fv(i);break}i=function(){yt!==2&&yt!==9||Et!==a||(yt=7),Ta(a)},y.then(i,i);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Xy(y)?(yt=0,fs=null,Fv(i)):(yt=0,fs=null,ho(a,i,y,7));break;case 5:var _=null;switch(Xe.tag){case 26:_=Xe.memoizedState;case 5:case 27:var C=Xe;if(_?S1(_):C.stateNode.complete){yt=0,fs=null;var $=C.sibling;if($!==null)Xe=$;else{var J=C.return;J!==null?(Xe=J,xh(J)):Xe=null}break t}}yt=0,fs=null,ho(a,i,y,5);break;case 6:yt=0,fs=null,ho(a,i,y,6);break;case 8:Qp(),zt=6;break e;default:throw Error(s(462))}}qS();break}catch(ie){Pv(a,ie)}while(!0);return Ka=Xi=null,q.H=d,q.A=g,mt=c,Xe!==null?0:(Et=null,Ze=0,Pd(),zt)}function qS(){for(;Xe!==null&&!Nn();)Uv(Xe)}function Uv(a){var i=uv(a.alternate,a,ar);a.memoizedProps=a.pendingProps,i===null?xh(a):Xe=i}function Fv(a){var i=a,c=i.alternate;switch(i.tag){case 15:case 0:i=av(c,i,i.pendingProps,i.type,void 0,Ze);break;case 11:i=av(c,i,i.pendingProps,i.type.render,i.ref,Ze);break;case 5:dp(i);default:hv(c,i),i=Xe=zy(i,ar),i=uv(c,i,ar)}a.memoizedProps=a.pendingProps,i===null?xh(a):Xe=i}function ho(a,i,c,d){Ka=Xi=null,dp(i),eo=null,Rc=0;var g=i.return;try{if(IS(a,g,i,c,Ze)){zt=1,ah(a,Ss(c,a.current)),Xe=null;return}}catch(y){if(g!==null)throw Xe=g,y;zt=1,ah(a,Ss(c,a.current)),Xe=null;return}i.flags&32768?(rt||d===1?a=!0:lo||(Ze&536870912)!==0?a=!1:(Hr=a=!0,(d===2||d===9||d===3||d===6)&&(d=ds.current,d!==null&&d.tag===13&&(d.flags|=16384))),Bv(i,a)):xh(i)}function xh(a){var i=a;do{if((i.flags&32768)!==0){Bv(i,Hr);return}a=i.return;var c=MS(i.alternate,i,ar);if(c!==null){Xe=c;return}if(i=i.sibling,i!==null){Xe=i;return}Xe=i=a}while(i!==null);zt===0&&(zt=5)}function Bv(a,i){do{var c=OS(a.alternate,a);if(c!==null){c.flags&=32767,Xe=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(a=a.sibling,a!==null)){Xe=a;return}Xe=a=c}while(a!==null);zt=6,Xe=null}function qv(a,i,c,d,g,y,_,C,$){a.cancelPendingCommit=null;do yh();while(cn!==0);if((mt&6)!==0)throw Error(s(327));if(i!==null){if(i===a.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=Vm,Cm(a,c,y,_,C,$),a===Et&&(Xe=Et=null,Ze=0),co=i,Yr=a,rr=c,Gp=y,Yp=g,Rv=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,YS(Re,function(){return Kv(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,g=Z.p,Z.p=2,_=mt,mt|=4;try{PS(a,i,c)}finally{mt=_,Z.p=g,q.T=d}}cn=1,Hv(),$v(),Gv()}}function Hv(){if(cn===1){cn=0;var a=Yr,i=co,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var d=Z.p;Z.p=2;var g=mt;mt|=4;try{jv(i,a);var y=o0,_=ky(a.containerInfo),C=y.focusedElem,$=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&Cy(C.ownerDocument.documentElement,C)){if($!==null&&Dm(C)){var J=$.start,ie=$.end;if(ie===void 0&&(ie=J),"selectionStart"in C)C.selectionStart=J,C.selectionEnd=Math.min(ie,C.value.length);else{var de=C.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),je=C.textContent.length,Me=Math.min($.start,je),jt=$.end===void 0?Me:Math.min($.end,je);!ae.extend&&Me>jt&&(_=jt,jt=Me,Me=_);var K=Ay(C,Me),G=Ay(C,jt);if(K&&G&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==G.node||ae.focusOffset!==G.offset)){var W=de.createRange();W.setStart(K.node,K.offset),ae.removeAllRanges(),Me>jt?(ae.addRange(W),ae.extend(G.node,G.offset)):(W.setEnd(G.node,G.offset),ae.addRange(W))}}}}for(de=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var oe=de[C];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}kh=!!l0,o0=l0=null}finally{mt=g,Z.p=d,q.T=c}}a.current=i,cn=2}}function $v(){if(cn===2){cn=0;var a=Yr,i=co,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var d=Z.p;Z.p=2;var g=mt;mt|=4;try{bv(a,i.alternate,i)}finally{mt=g,Z.p=d,q.T=c}}cn=3}}function Gv(){if(cn===4||cn===3){cn=0,on();var a=Yr,i=co,c=rr,d=Rv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,co=Yr=null,Yv(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Gr=null),Ba(c),i=i.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Ut,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=q.T,g=Z.p,Z.p=2,q.T=null;try{for(var y=a.onRecoverableError,_=0;_<d.length;_++){var C=d[_];y(C.value,{componentStack:C.stack})}}finally{q.T=i,Z.p=g}}(rr&3)!==0&&yh(),Ta(a),g=a.pendingLanes,(c&261930)!==0&&(g&42)!==0?a===Kp?Qc++:(Qc=0,Kp=a):Qc=0,Xc(0)}}function Yv(a,i){(a.pooledCacheLanes&=i)===0&&(i=a.pooledCache,i!=null&&(a.pooledCache=null,kc(i)))}function yh(){return Hv(),$v(),Gv(),Kv()}function Kv(){if(cn!==5)return!1;var a=Yr,i=Gp;Gp=0;var c=Ba(rr),d=q.T,g=Z.p;try{Z.p=32>c?32:c,q.T=null,c=Yp,Yp=null;var y=Yr,_=rr;if(cn=0,co=Yr=null,rr=0,(mt&6)!==0)throw Error(s(331));var C=mt;if(mt|=4,Cv(y.current),Sv(y,y.current,_,c),mt=C,Xc(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Ut,y)}catch{}return!0}finally{Z.p=g,q.T=d,Yv(a,i)}}function Qv(a,i,c){i=Ss(c,i),i=Sp(a.stateNode,i,2),a=Ur(a,i,2),a!==null&&(Di(a,2),Ta(a))}function bt(a,i,c){if(a.tag===3)Qv(a,a,c);else for(;i!==null;){if(i.tag===3){Qv(i,a,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))){a=Ss(c,a),c=Xb(2),d=Ur(i,c,2),d!==null&&(Wb(c,d,i,a),Di(d,2),Ta(d));break}}i=i.return}}function Wp(a,i,c){var d=a.pingCache;if(d===null){d=a.pingCache=new zS;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(c)||(qp=!0,g.add(c),a=HS.bind(null,a,i,c),i.then(a,a))}function HS(a,i,c){var d=a.pingCache;d!==null&&d.delete(i),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Et===a&&(Ze&c)===c&&(zt===4||zt===3&&(Ze&62914560)===Ze&&300>Ot()-hh?(mt&2)===0&&uo(a,0):Hp|=c,oo===Ze&&(oo=0)),Ta(a)}function Xv(a,i){i===0&&(i=md()),a=Yi(a,i),a!==null&&(Di(a,i),Ta(a))}function $S(a){var i=a.memoizedState,c=0;i!==null&&(c=i.retryLane),Xv(a,c)}function GS(a,i){var c=0;switch(a.tag){case 31:case 13:var d=a.stateNode,g=a.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Xv(a,c)}function YS(a,i){return Te(a,i)}var bh=null,fo=null,Jp=!1,vh=!1,Zp=!1,Qr=0;function Ta(a){a!==fo&&a.next===null&&(fo===null?bh=fo=a:fo=fo.next=a),vh=!0,Jp||(Jp=!0,QS())}function Xc(a,i){if(!Zp&&vh){Zp=!0;do for(var c=!1,d=bh;d!==null;){if(a!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var _=d.suspendedLanes,C=d.pingedLanes;y=(1<<31-at(42|a)+1)-1,y&=g&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,e1(d,y))}else y=Ze,y=ca(d,d===Et?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Fs(d,y)||(c=!0,e1(d,y));d=d.next}while(c);Zp=!1}}function KS(){Wv()}function Wv(){vh=Jp=!1;var a=0;Qr!==0&&rT()&&(a=Qr);for(var i=Ot(),c=null,d=bh;d!==null;){var g=d.next,y=Jv(d,i);y===0?(d.next=null,c===null?bh=g:c.next=g,g===null&&(fo=c)):(c=d,(a!==0||(y&3)!==0)&&(vh=!0)),d=g}cn!==0&&cn!==5||Xc(a),Qr!==0&&(Qr=0)}function Jv(a,i){for(var c=a.suspendedLanes,d=a.pingedLanes,g=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var _=31-at(y),C=1<<_,$=g[_];$===-1?((C&c)===0||(C&d)!==0)&&(g[_]=Am(C,i)):$<=i&&(a.expiredLanes|=C),y&=~C}if(i=Et,c=Ze,c=ca(a,a===i?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===i&&(yt===2||yt===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Qe(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Fs(a,c)){if(i=c&-c,i===a.callbackPriority)return i;switch(d!==null&&Qe(d),Ba(c)){case 2:case 8:c=xe;break;case 32:c=Re;break;case 268435456:c=ct;break;default:c=Re}return d=Zv.bind(null,a),c=Te(c,d),a.callbackPriority=i,a.callbackNode=c,i}return d!==null&&d!==null&&Qe(d),a.callbackPriority=2,a.callbackNode=null,2}function Zv(a,i){if(cn!==0&&cn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(yh()&&a.callbackNode!==c)return null;var d=Ze;return d=ca(a,a===Et?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(Mv(a,d,i),Jv(a,Ot()),a.callbackNode!=null&&a.callbackNode===c?Zv.bind(null,a):null)}function e1(a,i){if(yh())return null;Mv(a,i,!0)}function QS(){lT(function(){(mt&6)!==0?Te(le,KS):Wv()})}function e0(){if(Qr===0){var a=Wl;a===0&&(a=la,la<<=1,(la&261888)===0&&(la=256)),Qr=a}return Qr}function t1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Pl(""+a)}function n1(a,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,a.id&&c.setAttribute("form",a.id),i.parentNode.insertBefore(c,i),a=new FormData(a),c.parentNode.removeChild(c),a}function XS(a,i,c,d,g){if(i==="submit"&&c&&c.stateNode===g){var y=t1((g[gn]||null).action),_=d.submitter;_&&(i=(i=_[gn]||null)?t1(i.formAction):_.getAttribute("formAction"),i!==null&&(y=i,_=null));var C=new va("action","action",null,d,g);a.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Qr!==0){var $=_?n1(g,_):new FormData(g);vp(c,{pending:!0,data:$,method:g.method,action:y},null,$)}}else typeof y=="function"&&(C.preventDefault(),$=_?n1(g,_):new FormData(g),vp(c,{pending:!0,data:$,method:g.method,action:y},y,$))},currentTarget:g}]})}}for(var t0=0;t0<Lm.length;t0++){var n0=Lm[t0],WS=n0.toLowerCase(),JS=n0[0].toUpperCase()+n0.slice(1);Qs(WS,"on"+JS)}Qs(Dy,"onAnimationEnd"),Qs(My,"onAnimationIteration"),Qs(Oy,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(mS,"onTransitionRun"),Qs(pS,"onTransitionStart"),Qs(gS,"onTransitionCancel"),Qs(Py,"onTransitionEnd"),ga("onMouseEnter",["mouseout","mouseover"]),ga("onMouseLeave",["mouseout","mouseover"]),ga("onPointerEnter",["pointerout","pointerover"]),ga("onPointerLeave",["pointerout","pointerover"]),pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function s1(a,i){i=(i&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],g=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var _=d.length-1;0<=_;_--){var C=d[_],$=C.instance,J=C.currentTarget;if(C=C.listener,$!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=J;try{y(g)}catch(ie){Od(ie)}g.currentTarget=null,y=$}else for(_=0;_<d.length;_++){if(C=d[_],$=C.instance,J=C.currentTarget,C=C.listener,$!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=J;try{y(g)}catch(ie){Od(ie)}g.currentTarget=null,y=$}}}}function We(a,i){var c=i[Il];c===void 0&&(c=i[Il]=new Set);var d=a+"__bubble";c.has(d)||(a1(i,a,2,!1),c.add(d))}function s0(a,i,c){var d=0;i&&(d|=4),a1(c,a,d,i)}var wh="_reactListening"+Math.random().toString(36).slice(2);function a0(a){if(!a[wh]){a[wh]=!0,cc.forEach(function(c){c!=="selectionchange"&&(ZS.has(c)||s0(c,!1,a),s0(c,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[wh]||(i[wh]=!0,s0("selectionchange",!1,i))}}function a1(a,i,c,d){switch(D1(i)){case 2:var g=TT;break;case 8:g=AT;break;default:g=b0}c=g.bind(null,i,c,a),g=void 0,!zi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?a.addEventListener(i,c,{capture:!0,passive:g}):a.addEventListener(i,c,!0):g!==void 0?a.addEventListener(i,c,{passive:g}):a.addEventListener(i,c,!1)}function r0(a,i,c,d,g){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var C=d.stateNode.containerInfo;if(C===g)break;if(_===4)for(_=d.return;_!==null;){var $=_.tag;if(($===3||$===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;C!==null;){if(_=fa(C),_===null)return;if($=_.tag,$===5||$===6||$===26||$===27){d=y=_;continue e}C=C.parentNode}}d=d.return}kr(function(){var J=y,ie=Ns(c),de=[];e:{var ee=Ly.get(a);if(ee!==void 0){var ae=va,je=a;switch(a){case"keypress":if(Fi(c)===0)break e;case"keydown":case"keyup":ae=Rd;break;case"focusin":je="focus",ae=qi;break;case"focusout":je="blur",ae=qi;break;case"beforeblur":case"afterblur":ae=qi;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=w;break;case Dy:case My:case Oy:ae=Ed;break;case Py:ae=O;break;case"scroll":case"scrollend":ae=wc;break;case"wheel":ae=ne;break;case"copy":case"cut":case"paste":ae=Sd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=$a;break;case"toggle":case"beforetoggle":ae=Be}var Me=(i&4)!==0,jt=!Me&&(a==="scroll"||a==="scrollend"),K=Me?ee!==null?ee+"Capture":null:ee;Me=[];for(var G=J,W;G!==null;){var oe=G;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||K===null||(oe=$s(G,K),oe!=null&&Me.push(Jc(G,oe,W))),jt)break;G=G.return}0<Me.length&&(ee=new ae(ee,je,null,c,ie),de.push({event:ee,listeners:Me}))}}if((i&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",ee&&c!==yc&&(je=c.relatedTarget||c.fromElement)&&(fa(je)||je[da]))break e;if((ae||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(je=c.relatedTarget||c.toElement,ae=J,je=je?fa(je):null,je!==null&&(jt=o(je),Me=je.tag,je!==jt||Me!==5&&Me!==27&&Me!==6)&&(je=null)):(ae=null,je=J),ae!==je)){if(Me=Nc,oe="onMouseLeave",K="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Me=$a,oe="onPointerLeave",K="onPointerEnter",G="pointer"),jt=ae==null?ee:ls(ae),W=je==null?ee:ls(je),ee=new Me(oe,G+"leave",ae,c,ie),ee.target=jt,ee.relatedTarget=W,oe=null,fa(ie)===J&&(Me=new Me(K,G+"enter",je,c,ie),Me.target=W,Me.relatedTarget=jt,oe=Me),jt=oe,ae&&je)t:{for(Me=eT,K=ae,G=je,W=0,oe=K;oe;oe=Me(oe))W++;oe=0;for(var Ce=G;Ce;Ce=Me(Ce))oe++;for(;0<W-oe;)K=Me(K),W--;for(;0<oe-W;)G=Me(G),oe--;for(;W--;){if(K===G||G!==null&&K===G.alternate){Me=K;break t}K=Me(K),G=Me(G)}Me=null}else Me=null;ae!==null&&r1(de,ee,ae,Me,!1),je!==null&&jt!==null&&r1(de,jt,je,Me,!0)}}e:{if(ee=J?ls(J):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var ut=Ny;else if(vy(ee))if(_y)ut=dS;else{ut=cS;var Ee=oS}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Ol(J.elementType)&&(ut=Ny):ut=uS;if(ut&&(ut=ut(a,J))){wy(de,ut,c,ie);break e}Ee&&Ee(a,ee,J),a==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&pc(ee,"number",ee.value)}switch(Ee=J?ls(J):window,a){case"focusin":(vy(Ee)||Ee.contentEditable==="true")&&(ql=Ee,Mm=J,Tc=null);break;case"focusout":Tc=Mm=ql=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,Iy(de,c,ie);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":Iy(de,c,ie)}var He;if(ft)e:{switch(a){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Bl?Hi(a,c)&&(et="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(et="onCompositionStart");et&&(_a&&c.locale!=="ko"&&(Bl||et!=="onCompositionStart"?et==="onCompositionEnd"&&Bl&&(He=vc()):(ba=ie,bc="value"in ba?ba.value:ba.textContent,Bl=!0)),Ee=Nh(J,et),0<Ee.length&&(et=new Na(et,a,null,c,ie),de.push({event:et,listeners:Ee}),He?et.data=He:(He=Fl(c),He!==null&&(et.data=He)))),(He=js?aS(a,c):rS(a,c))&&(et=Nh(J,"onBeforeInput"),0<et.length&&(Ee=new Na("onBeforeInput","beforeinput",null,c,ie),de.push({event:Ee,listeners:et}),Ee.data=He)),XS(de,a,J,c,ie)}s1(de,i)})}function Jc(a,i,c){return{instance:a,listener:i,currentTarget:c}}function Nh(a,i){for(var c=i+"Capture",d=[];a!==null;){var g=a,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=$s(a,c),g!=null&&d.unshift(Jc(a,g,y)),g=$s(a,i),g!=null&&d.push(Jc(a,g,y))),a.tag===3)return d;a=a.return}return[]}function eT(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function r1(a,i,c,d,g){for(var y=i._reactName,_=[];c!==null&&c!==d;){var C=c,$=C.alternate,J=C.stateNode;if(C=C.tag,$!==null&&$===d)break;C!==5&&C!==26&&C!==27||J===null||($=J,g?(J=$s(c,y),J!=null&&_.unshift(Jc(c,J,$))):g||(J=$s(c,y),J!=null&&_.push(Jc(c,J,$)))),c=c.return}_.length!==0&&a.push({event:i,listeners:_})}var tT=/\r\n?/g,nT=/\u0000|\uFFFD/g;function i1(a){return(typeof a=="string"?a:""+a).replace(tT,`
`).replace(nT,"")}function l1(a,i){return i=i1(i),i1(a)===i}function _t(a,i,c,d,g,y){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Kn(a,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Kn(a,""+d);break;case"className":os(a,"class",d);break;case"tabIndex":os(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":os(a,c,d);break;case"style":xc(a,d,y);break;case"data":if(i!=="object"){os(a,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=Pl(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(i!=="input"&&_t(a,i,"name",g.name,g,null),_t(a,i,"formEncType",g.formEncType,g,null),_t(a,i,"formMethod",g.formMethod,g,null),_t(a,i,"formTarget",g.formTarget,g,null)):(_t(a,i,"encType",g.encType,g,null),_t(a,i,"method",g.method,g,null),_t(a,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=Pl(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=Hs);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=Pl(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":We("beforetoggle",a),We("toggle",a),Dl(a,"popover",d);break;case"xlinkActuate":Jt(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jt(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jt(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jt(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jt(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jt(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jt(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Dl(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Nd.get(c)||c,Dl(a,c,d))}}function i0(a,i,c,d,g,y){switch(c){case"style":xc(a,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));a.innerHTML=c}}break;case"children":typeof d=="string"?Kn(a,d):(typeof d=="number"||typeof d=="bigint")&&Kn(a,""+d);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),y=a[gn]||null,y=y!=null?y[c]:null,typeof y=="function"&&a.removeEventListener(i,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(i,d,g);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):Dl(a,c,d)}}}function Tn(a,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var _=c[y];if(_!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(a,i,y,_,c,null)}}g&&_t(a,i,"srcSet",c.srcSet,c,null),d&&_t(a,i,"src",c.src,c,null);return;case"input":We("invalid",a);var C=y=_=g=null,$=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var ie=c[d];if(ie!=null)switch(d){case"name":g=ie;break;case"type":_=ie;break;case"checked":$=ie;break;case"defaultChecked":J=ie;break;case"value":y=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,i));break;default:_t(a,i,d,ie,c,null)}}bd(a,y,C,$,J,_,g,!1);return;case"select":We("invalid",a),d=_=y=null;for(g in c)if(c.hasOwnProperty(g)&&(C=c[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":d=C;default:_t(a,i,g,C,c,null)}i=y,c=_,a.multiple=!!d,i!=null?Sr(a,!!d,i,!1):c!=null&&Sr(a,!!d,c,!0);return;case"textarea":We("invalid",a),y=g=d=null;for(_ in c)if(c.hasOwnProperty(_)&&(C=c[_],C!=null))switch(_){case"value":d=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:_t(a,i,_,C,c,null)}Tr(a,d,g,y);return;case"option":for($ in c)if(c.hasOwnProperty($)&&(d=c[$],d!=null))switch($){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:_t(a,i,$,d,c,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(d=0;d<Wc.length;d++)We(Wc[d],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(a,i,J,d,c,null)}return;default:if(Ol(i)){for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!==void 0&&i0(a,i,ie,d,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(d=c[C],d!=null&&_t(a,i,C,d,c,null))}function sT(a,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,C=null,$=null,J=null,ie=null;for(ae in c){var de=c[ae];if(c.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":$=de;default:d.hasOwnProperty(ae)||_t(a,i,ae,null,d,de)}}for(var ee in d){var ae=d[ee];if(de=c[ee],d.hasOwnProperty(ee)&&(ae!=null||de!=null))switch(ee){case"type":y=ae;break;case"name":g=ae;break;case"checked":J=ae;break;case"defaultChecked":ie=ae;break;case"value":_=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:ae!==de&&_t(a,i,ee,ae,d,de)}}Ml(a,_,C,$,J,ie,y,g);return;case"select":ae=_=C=ee=null;for(y in c)if($=c[y],c.hasOwnProperty(y)&&$!=null)switch(y){case"value":break;case"multiple":ae=$;default:d.hasOwnProperty(y)||_t(a,i,y,null,d,$)}for(g in d)if(y=d[g],$=c[g],d.hasOwnProperty(g)&&(y!=null||$!=null))switch(g){case"value":ee=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==$&&_t(a,i,g,y,d,$)}i=C,c=_,d=ae,ee!=null?Sr(a,!!c,ee,!1):!!d!=!!c&&(i!=null?Sr(a,!!c,i,!0):Sr(a,!!c,c?[]:"",!1));return;case"textarea":ae=ee=null;for(C in c)if(g=c[C],c.hasOwnProperty(C)&&g!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:_t(a,i,C,null,d,g)}for(_ in d)if(g=d[_],y=c[_],d.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":ee=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&_t(a,i,_,g,d,y)}vd(a,ee,ae);return;case"option":for(var je in c)if(ee=c[je],c.hasOwnProperty(je)&&ee!=null&&!d.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:_t(a,i,je,null,d,ee)}for($ in d)if(ee=d[$],ae=c[$],d.hasOwnProperty($)&&ee!==ae&&(ee!=null||ae!=null))switch($){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:_t(a,i,$,ee,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in c)ee=c[Me],c.hasOwnProperty(Me)&&ee!=null&&!d.hasOwnProperty(Me)&&_t(a,i,Me,null,d,ee);for(J in d)if(ee=d[J],ae=c[J],d.hasOwnProperty(J)&&ee!==ae&&(ee!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:_t(a,i,J,ee,d,ae)}return;default:if(Ol(i)){for(var jt in c)ee=c[jt],c.hasOwnProperty(jt)&&ee!==void 0&&!d.hasOwnProperty(jt)&&i0(a,i,jt,void 0,d,ee);for(ie in d)ee=d[ie],ae=c[ie],!d.hasOwnProperty(ie)||ee===ae||ee===void 0&&ae===void 0||i0(a,i,ie,ee,d,ae);return}}for(var K in c)ee=c[K],c.hasOwnProperty(K)&&ee!=null&&!d.hasOwnProperty(K)&&_t(a,i,K,null,d,ee);for(de in d)ee=d[de],ae=c[de],!d.hasOwnProperty(de)||ee===ae||ee==null&&ae==null||_t(a,i,de,ee,d,ae)}function o1(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aT(){if(typeof performance.getEntriesByType=="function"){for(var a=0,i=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,_=g.initiatorType,C=g.duration;if(y&&C&&o1(_)){for(_=0,C=g.responseEnd,d+=1;d<c.length;d++){var $=c[d],J=$.startTime;if(J>C)break;var ie=$.transferSize,de=$.initiatorType;ie&&o1(de)&&($=$.responseEnd,_+=ie*($<C?1:(C-J)/($-J)))}if(--d,i+=8*(y+_)/(g.duration/1e3),a++,10<a)break}}if(0<a)return i/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var l0=null,o0=null;function _h(a){return a.nodeType===9?a:a.ownerDocument}function c1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u1(a,i){if(a===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&i==="foreignObject"?0:a}function c0(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var u0=null;function rT(){var a=window.event;return a&&a.type==="popstate"?a===u0?!1:(u0=a,!0):(u0=null,!1)}var d1=typeof setTimeout=="function"?setTimeout:void 0,iT=typeof clearTimeout=="function"?clearTimeout:void 0,h1=typeof Promise=="function"?Promise:void 0,lT=typeof queueMicrotask=="function"?queueMicrotask:typeof h1<"u"?function(a){return h1.resolve(null).then(a).catch(oT)}:d1;function oT(a){setTimeout(function(){throw a})}function Xr(a){return a==="head"}function f1(a,i){var c=i,d=0;do{var g=c.nextSibling;if(a.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){a.removeChild(g),xo(i);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Zc(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,Zc(c);for(var y=c.firstChild;y;){var _=y.nextSibling,C=y.nodeName;y[ha]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=_}}else c==="body"&&Zc(a.ownerDocument.body);c=g}while(c);xo(i)}function m1(a,i){var c=a;a=0;do{var d=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=d}while(c)}function d0(a){var i=a.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":d0(c),Rl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function cT(a,i,c,d){for(;a.nodeType===1;){var g=c;if(a.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[ha])switch(i){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(i==="input"&&a.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=Is(a.nextSibling),a===null)break}return null}function uT(a,i,c){if(i==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Is(a.nextSibling),a===null))return null;return a}function p1(a,i){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!i||(a=Is(a.nextSibling),a===null))return null;return a}function h0(a){return a.data==="$?"||a.data==="$~"}function f0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function dT(a,i){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=i;else if(a.data!=="$?"||c.readyState!=="loading")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Is(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return a}var m0=null;function g1(a){a=a.nextSibling;for(var i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(i===0)return Is(a.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}a=a.nextSibling}return null}function x1(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return a;i--}else c!=="/$"&&c!=="/&"||i++}a=a.previousSibling}return null}function y1(a,i,c){switch(i=_h(c),a){case"html":if(a=i.documentElement,!a)throw Error(s(452));return a;case"head":if(a=i.head,!a)throw Error(s(453));return a;case"body":if(a=i.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Zc(a){for(var i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Rl(a)}var Rs=new Map,b1=new Set;function jh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ir=Z.d;Z.d={f:hT,r:fT,D:mT,C:pT,L:gT,m:xT,X:bT,S:yT,M:vT};function hT(){var a=ir.f(),i=ph();return a||i}function fT(a){var i=ws(a);i!==null&&i.tag===5&&i.type==="form"?Pb(i):ir.r(a)}var mo=typeof document>"u"?null:document;function v1(a,i,c){var d=mo;if(d&&typeof i=="string"&&i){var g=Yn(i);g='link[rel="'+a+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),b1.has(g)||(b1.add(g),a={rel:a,crossOrigin:c,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),Tn(i,"link",a),Wt(i),d.head.appendChild(i)))}}function mT(a){ir.D(a),v1("dns-prefetch",a,null)}function pT(a,i){ir.C(a,i),v1("preconnect",a,i)}function gT(a,i,c){ir.L(a,i,c);var d=mo;if(d&&a&&i){var g='link[rel="preload"][as="'+Yn(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Yn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Yn(c.imageSizes)+'"]')):g+='[href="'+Yn(a)+'"]';var y=g;switch(i){case"style":y=po(a);break;case"script":y=go(a)}Rs.has(y)||(a=b({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:a,as:i},c),Rs.set(y,a),d.querySelector(g)!==null||i==="style"&&d.querySelector(eu(y))||i==="script"&&d.querySelector(tu(y))||(i=d.createElement("link"),Tn(i,"link",a),Wt(i),d.head.appendChild(i)))}}function xT(a,i){ir.m(a,i);var c=mo;if(c&&a){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Yn(d)+'"][href="'+Yn(a)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=go(a)}if(!Rs.has(y)&&(a=b({rel:"modulepreload",href:a},i),Rs.set(y,a),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(tu(y)))return}d=c.createElement("link"),Tn(d,"link",a),Wt(d),c.head.appendChild(d)}}}function yT(a,i,c){ir.S(a,i,c);var d=mo;if(d&&a){var g=ma(d).hoistableStyles,y=po(a);i=i||"default";var _=g.get(y);if(!_){var C={loading:0,preload:null};if(_=d.querySelector(eu(y)))C.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":i},c),(c=Rs.get(y))&&p0(a,c);var $=_=d.createElement("link");Wt($),Tn($,"link",a),$._p=new Promise(function(J,ie){$.onload=J,$.onerror=ie}),$.addEventListener("load",function(){C.loading|=1}),$.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Eh(_,i,d)}_={type:"stylesheet",instance:_,count:1,state:C},g.set(y,_)}}}function bT(a,i){ir.X(a,i);var c=mo;if(c&&a){var d=ma(c).hoistableScripts,g=go(a),y=d.get(g);y||(y=c.querySelector(tu(g)),y||(a=b({src:a,async:!0},i),(i=Rs.get(g))&&g0(a,i),y=c.createElement("script"),Wt(y),Tn(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function vT(a,i){ir.M(a,i);var c=mo;if(c&&a){var d=ma(c).hoistableScripts,g=go(a),y=d.get(g);y||(y=c.querySelector(tu(g)),y||(a=b({src:a,async:!0,type:"module"},i),(i=Rs.get(g))&&g0(a,i),y=c.createElement("script"),Wt(y),Tn(y,"link",a),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function w1(a,i,c,d){var g=(g=Ye.current)?jh(g):null;if(!g)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=po(c.href),c=ma(g).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=po(c.href);var y=ma(g).hoistableStyles,_=y.get(a);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,_),(y=g.querySelector(eu(a)))&&!y._p&&(_.instance=y,_.state.loading=5),Rs.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rs.set(a,c),y||wT(g,a,c,_.state))),i&&d===null)throw Error(s(528,""));return _}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=go(c),c=ma(g).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function po(a){return'href="'+Yn(a)+'"'}function eu(a){return'link[rel="stylesheet"]['+a+"]"}function N1(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function wT(a,i,c,d){a.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=a.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Tn(i,"link",c),Wt(i),a.head.appendChild(i))}function go(a){return'[src="'+Yn(a)+'"]'}function tu(a){return"script[async]"+a}function _1(a,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=a.querySelector('style[data-href~="'+Yn(c.href)+'"]');if(d)return i.instance=d,Wt(d),d;var g=b({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),Wt(d),Tn(d,"style",g),Eh(d,c.precedence,a),i.instance=d;case"stylesheet":g=po(c.href);var y=a.querySelector(eu(g));if(y)return i.state.loading|=4,i.instance=y,Wt(y),y;d=N1(c),(g=Rs.get(g))&&p0(d,g),y=(a.ownerDocument||a).createElement("link"),Wt(y);var _=y;return _._p=new Promise(function(C,$){_.onload=C,_.onerror=$}),Tn(y,"link",d),i.state.loading|=4,Eh(y,c.precedence,a),i.instance=y;case"script":return y=go(c.src),(g=a.querySelector(tu(y)))?(i.instance=g,Wt(g),g):(d=c,(g=Rs.get(y))&&(d=b({},c),g0(d,g)),a=a.ownerDocument||a,g=a.createElement("script"),Wt(g),Tn(g,"link",d),a.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Eh(d,c.precedence,a));return i.instance}function Eh(a,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,_=0;_<d.length;_++){var C=d[_];if(C.dataset.precedence===i)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(a,y.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(a,i.firstChild))}function p0(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.title==null&&(a.title=i.title)}function g0(a,i){a.crossOrigin==null&&(a.crossOrigin=i.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=i.referrerPolicy),a.integrity==null&&(a.integrity=i.integrity)}var Sh=null;function j1(a,i,c){if(Sh===null){var d=new Map,g=Sh=new Map;g.set(c,d)}else g=Sh,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),g=0;g<c.length;g++){var y=c[g];if(!(y[ha]||y[Xt]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(i)||"";_=a+_;var C=d.get(_);C?C.push(y):d.set(_,[y])}}return d}function E1(a,i,c){a=a.ownerDocument||a,a.head.insertBefore(c,i==="title"?a.querySelector("head > title"):null)}function NT(a,i,c){if(c===1||i.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return a=i.disabled,typeof i.precedence=="string"&&a==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function S1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function _T(a,i,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=po(d.href),y=i.querySelector(eu(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(a.count++,a=Th.bind(a),i.then(a,a)),c.state.loading|=4,c.instance=y,Wt(y);return}y=i.ownerDocument||i,d=N1(d),(g=Rs.get(g))&&p0(d,g),y=y.createElement("link"),Wt(y);var _=y;_._p=new Promise(function(C,$){_.onload=C,_.onerror=$}),Tn(y,"link",d),c.instance=y}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=Th.bind(a),i.addEventListener("load",c),i.addEventListener("error",c))}}var x0=0;function jT(a,i){return a.stylesheets&&a.count===0&&Ch(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var d=setTimeout(function(){if(a.stylesheets&&Ch(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4+i);0<a.imgBytes&&x0===0&&(x0=62500*aT());var g=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ch(a,a.stylesheets),a.unsuspend)){var y=a.unsuspend;a.unsuspend=null,y()}},(a.imgBytes>x0?50:800)+i);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Ah=null;function Ch(a,i){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Ah=new Map,i.forEach(ET,a),Ah=null,Th.call(a))}function ET(a,i){if(!(i.state.loading&4)){var c=Ah.get(a);if(c)var d=c.get(null);else{c=new Map,Ah.set(a,c);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),d=_)}d&&c.set(null,d)}g=i.instance,_=g.getAttribute("data-precedence"),y=c.get(_)||d,y===d&&c.set(null,g),c.set(_,g),this.count++,d=Th.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),i.state.loading|=4}}var nu={$$typeof:H,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function ST(a,i,c,d,g,y,_,C,$){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.hiddenUpdates=ua(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function T1(a,i,c,d,g,y,_,C,$,J,ie,de){return a=new ST(a,i,c,_,$,J,ie,de,C),i=1,y===!0&&(i|=24),y=us(3,null,null,i),a.current=y,y.stateNode=a,i=Xm(),i.refCount++,a.pooledCache=i,i.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:i},ep(y),a}function A1(a){return a?(a=Gl,a):Gl}function C1(a,i,c,d,g,y){g=A1(g),d.context===null?d.context=g:d.pendingContext=g,d=zr(i),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Ur(a,d,i),c!==null&&(Zn(c,a,i),Mc(c,a,i))}function k1(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<i?c:i}}function y0(a,i){k1(a,i),(a=a.alternate)&&k1(a,i)}function I1(a){if(a.tag===13||a.tag===31){var i=Yi(a,67108864);i!==null&&Zn(i,a,67108864),y0(a,67108864)}}function R1(a){if(a.tag===13||a.tag===31){var i=ps();i=Oi(i);var c=Yi(a,i);c!==null&&Zn(c,a,i),y0(a,i)}}var kh=!0;function TT(a,i,c,d){var g=q.T;q.T=null;var y=Z.p;try{Z.p=2,b0(a,i,c,d)}finally{Z.p=y,q.T=g}}function AT(a,i,c,d){var g=q.T;q.T=null;var y=Z.p;try{Z.p=8,b0(a,i,c,d)}finally{Z.p=y,q.T=g}}function b0(a,i,c,d){if(kh){var g=v0(d);if(g===null)r0(a,i,d,Ih,c),M1(a,d);else if(kT(g,a,i,c,d))d.stopPropagation();else if(M1(a,d),i&4&&-1<CT.indexOf(a)){for(;g!==null;){var y=ws(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=oa(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var $=1<<31-at(_);C.entanglements[1]|=$,_&=~$}Ta(y),(mt&6)===0&&(fh=Ot()+500,Xc(0))}}break;case 31:case 13:C=Yi(y,2),C!==null&&Zn(C,y,2),ph(),y0(y,2)}if(y=v0(d),y===null&&r0(a,i,d,Ih,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else r0(a,i,d,null,c)}}function v0(a){return a=Ns(a),w0(a)}var Ih=null;function w0(a){if(Ih=null,a=fa(a),a!==null){var i=o(a);if(i===null)a=null;else{var c=i.tag;if(c===13){if(a=u(i),a!==null)return a;a=null}else if(c===31){if(a=h(i),a!==null)return a;a=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Ih=a,null}function D1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fa()){case le:return 2;case xe:return 8;case Re:case Ke:return 32;case ct:return 268435456;default:return 32}default:return 32}}var N0=!1,Wr=null,Jr=null,Zr=null,su=new Map,au=new Map,ei=[],CT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M1(a,i){switch(a){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":su.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(i.pointerId)}}function ru(a,i,c,d,g,y){return a===null||a.nativeEvent!==y?(a={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},i!==null&&(i=ws(i),i!==null&&I1(i)),a):(a.eventSystemFlags|=d,i=a.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),a)}function kT(a,i,c,d,g){switch(i){case"focusin":return Wr=ru(Wr,a,i,c,d,g),!0;case"dragenter":return Jr=ru(Jr,a,i,c,d,g),!0;case"mouseover":return Zr=ru(Zr,a,i,c,d,g),!0;case"pointerover":var y=g.pointerId;return su.set(y,ru(su.get(y)||null,a,i,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,au.set(y,ru(au.get(y)||null,a,i,c,d,g)),!0}return!1}function O1(a){var i=fa(a.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=u(c),i!==null){a.blockedOn=i,Bs(a.priority,function(){R1(c)});return}}else if(i===31){if(i=h(c),i!==null){a.blockedOn=i,Bs(a.priority,function(){R1(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rh(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var c=v0(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);yc=d,c.target.dispatchEvent(d),yc=null}else return i=ws(c),i!==null&&I1(i),a.blockedOn=c,!1;i.shift()}return!0}function P1(a,i,c){Rh(a)&&c.delete(i)}function IT(){N0=!1,Wr!==null&&Rh(Wr)&&(Wr=null),Jr!==null&&Rh(Jr)&&(Jr=null),Zr!==null&&Rh(Zr)&&(Zr=null),su.forEach(P1),au.forEach(P1)}function Dh(a,i){a.blockedOn===i&&(a.blockedOn=null,N0||(N0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,IT)))}var Mh=null;function L1(a){Mh!==a&&(Mh=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mh===a&&(Mh=null);for(var i=0;i<a.length;i+=3){var c=a[i],d=a[i+1],g=a[i+2];if(typeof d!="function"){if(w0(d||c)===null)continue;break}var y=ws(c);y!==null&&(a.splice(i,3),i-=3,vp(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function xo(a){function i($){return Dh($,a)}Wr!==null&&Dh(Wr,a),Jr!==null&&Dh(Jr,a),Zr!==null&&Dh(Zr,a),su.forEach(i),au.forEach(i);for(var c=0;c<ei.length;c++){var d=ei[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<ei.length&&(c=ei[0],c.blockedOn===null);)O1(c),c.blockedOn===null&&ei.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],_=g[gn]||null;if(typeof y=="function")_||L1(c);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[gn]||null)C=_.formAction;else if(w0(g)!==null)continue}else C=_.action;typeof C=="function"?c[d+1]=C:(c.splice(d,3),d-=3),L1(c)}}}function V1(){function a(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function _0(a){this._internalRoot=a}Oh.prototype.render=_0.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(s(409));var c=i.current,d=ps();C1(c,d,a,i,null,null)},Oh.prototype.unmount=_0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;C1(a.current,2,null,a,null,null),ph(),i[da]=null}};function Oh(a){this._internalRoot=a}Oh.prototype.unstable_scheduleHydration=function(a){if(a){var i=pd();a={blockedOn:null,target:a,priority:i};for(var c=0;c<ei.length&&i!==0&&i<ei[c].priority;c++);ei.splice(c,0,a),c===0&&O1(a)}};var z1=e.version;if(z1!=="19.2.0")throw Error(s(527,z1,"19.2.0"));Z.findDOMNode=function(a){var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=m(i),a=a!==null?x(a):null,a=a===null?null:a.stateNode,a};var RT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{Ut=Ph.inject(RT),Pt=Ph}catch{}}return iu.createRoot=function(a,i){if(!l(a))throw Error(s(299));var c=!1,d="",g=Gb,y=Yb,_=Kb;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=T1(a,1,!1,null,null,c,d,null,g,y,_,V1),a[da]=i.current,a0(a),new _0(i)},iu.hydrateRoot=function(a,i,c){if(!l(a))throw Error(s(299));var d=!1,g="",y=Gb,_=Yb,C=Kb,$=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&($=c.formState)),i=T1(a,1,!0,i,c??null,d,g,$,y,_,C,V1),i.context=A1(null),c=i.current,d=ps(),d=Oi(d),g=zr(d),g.callback=null,Ur(c,g,d),c=d,i.current.lanes=c,Di(i,c),Ta(i),a[da]=i.current,a0(a),new Oh(i)},iu.version="19.2.0",iu}var q1;function zT(){if(q1)return j0.exports;q1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),j0.exports=VT(),j0.exports}var UT=zT();const FT=Gg(UT);const BT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),H1=t=>{const e=qT(t);return e.charAt(0).toUpperCase()+e.slice(1)},BN=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),HT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var $T={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GT=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:o,iconNode:u,...h},f)=>k.createElement("svg",{ref:f,...$T,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:BN("lucide",l),...!o&&!HT(h)&&{"aria-hidden":"true"},...h},[...u.map(([m,x])=>k.createElement(m,x)),...Array.isArray(o)?o:[o]]));const he=(t,e)=>{const n=k.forwardRef(({className:s,...l},o)=>k.createElement(GT,{ref:o,iconNode:e,className:BN(`lucide-${BT(H1(t))}`,`lucide-${t}`,s),...l}));return n.displayName=H1(t),n};const YT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Cu=he("activity",YT);const KT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hf=he("arrow-right",KT);const QT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],XT=he("award",QT);const WT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],JT=he("bell",WT);const ZT=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],e4=he("book-marked",ZT);const t4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wl=he("book-open",t4);const n4=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Do=he("brain",n4);const s4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ci=he("calendar",s4);const a4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ss=he("chart-column",a4);const r4=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],$1=he("chart-pie",r4);const i4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ka=he("check",i4);const l4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mo=he("chevron-down",l4);const o4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Un=he("chevron-right",o4);const c4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],qN=he("chevron-left",c4);const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ls=he("circle-alert",u4);const d4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ff=he("circle-check-big",d4);const h4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fr=he("circle-check",h4);const f4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yg=he("circle-question-mark",f4);const m4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],p4=he("circle",m4);const g4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fn=he("clock",g4);const x4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vr=he("copy",x4);const y4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],b4=he("credit-card",y4);const v4=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Kg=he("crown",v4);const w4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bf=he("download",w4);const N4=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],_4=he("dumbbell",N4);const j4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],E4=he("ellipsis-vertical",j4);const S4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],G1=he("ellipsis",S4);const T4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],A4=he("external-link",T4);const C4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],k4=he("eye-off",C4);const I4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qg=he("eye",I4);const R4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],D4=he("file-down",R4);const M4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],as=he("file-text",M4);const O4=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],HN=he("flame",O4);const P4=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Xg=he("folder-open",P4);const L4=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],xi=he("gavel",L4);const V4=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],qf=he("git-branch",V4);const z4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$N=he("grid-3x3",z4);const U4=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GN=he("grip-vertical",U4);const F4=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],B4=he("hand",F4);const q4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],H4=he("heart",q4);const $4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Va=he("history",$4);const G4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],mf=he("image",G4);const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Hf=he("info",Y4);const K4=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],YN=he("keyboard",K4);const Q4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],X4=he("layers",Q4);const W4=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Nl=he("lightbulb",W4);const J4=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],$f=he("link-2",J4);const Z4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],KN=he("list",Z4);const eA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Si=he("loader-circle",eA);const tA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],nA=he("lock",tA);const sA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aA=he("log-out",sA);const rA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],iA=he("mail",rA);const lA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Yu=he("map-pin",lA);const oA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],QN=he("maximize-2",oA);const cA=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],uA=he("medal",cA);const dA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],_l=he("message-square",dA);const hA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],fA=he("mic-off",hA);const mA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Ia=he("mic",mA);const pA=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],gA=he("minimize-2",pA);const xA=[["path",{d:"M5 12h14",key:"1ays0h"}]],Wg=he("minus",xA);const yA=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],bA=he("mouse-pointer",yA);const vA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],wA=he("panels-top-left",vA);const NA=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],_A=he("paperclip",NA);const jA=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gf=he("pause",jA);const EA=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Yf=he("pen-line",EA);const SA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],TA=he("pen",SA);const AA=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],CA=he("phone",AA);const kA=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],XN=he("plane",kA);const IA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yi=he("play",IA);const RA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vn=he("plus",RA);const DA=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],WN=he("printer",DA);const MA=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],OA=he("quote",MA);const PA=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],JN=he("radio",PA);const LA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jg=he("refresh-cw",LA);const VA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ku=he("rotate-ccw",VA);const zA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zg=he("save",zA);const UA=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],ZN=he("scale",UA);const FA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Oo=he("search",FA);const BA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Kf=he("send",BA);const qA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ku=he("settings",qA);const HA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qu=he("shield",HA);const $A=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],e_=he("shuffle",$A);const GA=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],na=he("sparkles",GA);const YA=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],t_=he("square-check-big",YA);const KA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],n_=he("square",KA);const QA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mr=he("star",QA);const XA=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],WA=he("sticky-note",XA);const JA=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],ZA=he("sword",JA);const eC=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],tC=he("swords",eC);const nC=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ex=he("tag",nC);const sC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Gt=he("target",sC);const aC=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],rC=he("thumbs-down",aC);const iC=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],lC=he("thumbs-up",iC);const oC=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],s_=he("timer",oC);const cC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ia=he("trash-2",cC);const uC=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],a_=he("trending-down",uC);const dC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Iu=he("trending-up",dC);const hC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ui=he("triangle-alert",hC);const fC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Gn=he("trophy",fC);const mC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Qf=he("upload",mC);const pC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gC=he("user-minus",pC);const xC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y1=he("user-plus",xC);const yC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xf=he("user",yC);const bC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ra=he("users",bC);const vC=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],wC=he("video",vC);const NC=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],r_=he("volume-2",NC);const _C=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],jC=he("volume-x",_C);const EC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],SC=he("wand-sparkles",EC);const TC=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],AC=he("waves",TC);const CC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zs=he("x",CC);const kC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],IC=he("zoom-in",kC);const RC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pf=he("zap",RC);const DC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],MC=he("zoom-out",DC),OC=()=>{};var K1={};const i_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},PC=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const o=t[n++];e[s++]=String.fromCharCode((l&31)<<6|o&63)}else if(l>239&&l<365){const o=t[n++],u=t[n++],h=t[n++],f=((l&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],u=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(o&63)<<6|u&63)}}return e.join("")},l_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const o=t[l],u=l+1<t.length,h=u?t[l+1]:0,f=l+2<t.length,m=f?t[l+2]:0,x=o>>2,b=(o&3)<<4|h>>4;let v=(h&15)<<2|m>>6,N=m&63;f||(N=64,u||(v=64)),s.push(n[x],n[b],n[v],n[N])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const o=n[t.charAt(l++)],h=l<t.length?n[t.charAt(l)]:0;++l;const m=l<t.length?n[t.charAt(l)]:64;++l;const b=l<t.length?n[t.charAt(l)]:64;if(++l,o==null||h==null||m==null||b==null)throw new LC;const v=o<<2|h>>4;if(s.push(v),m!==64){const N=h<<4&240|m>>2;if(s.push(N),b!==64){const E=m<<6&192|b;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VC=function(t){const e=i_(t);return l_.encodeByteArray(e,!0)},gf=function(t){return VC(t).replace(/\./g,"")},o_=function(t){try{return l_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UC=()=>zC().__FIREBASE_DEFAULTS__,FC=()=>{if(typeof process>"u"||typeof K1>"u")return;const t=K1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o_(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return OC()||UC()||FC()||BC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c_=t=>Wf()?.emulatorHosts?.[t],qC=t=>{const e=c_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},u_=()=>Wf()?.config,d_=t=>Wf()?.[`_${t}`];class HC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Yo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h_(t){return(await fetch(t,{credentials:"include"})).ok}function $C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gf(JSON.stringify(n)),gf(JSON.stringify(u)),""].join(".")}const bu={};function GC(){const t={prod:[],emulator:[]};for(const e of Object.keys(bu))bu[e]?t.emulator.push(e):t.prod.push(e);return t}function YC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Q1=!1;function f_(t,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||bu[t]===e||bu[t]||Q1)return;bu[t]=e;function n(v){return`__firebase__banner__${v}`}const s="__firebase__banner",o=GC().prod.length>0;function u(){const v=document.getElementById(s);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,N){v.setAttribute("width","24"),v.setAttribute("id",N),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Q1=!0,u()},v}function x(v,N){v.setAttribute("id",N),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function b(){const v=YC(s),N=n("text"),E=document.getElementById(N)||document.createElement("span"),V=n("learnmore"),R=document.getElementById(V)||document.createElement("a"),z=n("preprendIcon"),L=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const H=v.element;h(H),x(R,V);const X=m();f(L,z),H.append(L,E,R,X),document.body.appendChild(H)}o?(E.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function QC(){const t=Wf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZC(){const t=zn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ek(){return!QC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tk(){try{return typeof indexedDB=="object"}catch{return!1}}function nk(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const sk="FirebaseError";class wr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=sk,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xu.prototype.create)}}class Xu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,o=this.errors[e],u=o?ak(o,s):"Error",h=`${this.serviceName}: ${u} (${l}).`;return new wr(l,h,s)}}function ak(t,e){return t.replace(rk,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const rk=/\{\$([^}]+)}/g;function ik(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const o=t[l],u=e[l];if(X1(o)&&X1(u)){if(!bi(o,u))return!1}else if(o!==u)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function X1(t){return t!==null&&typeof t=="object"}function Wu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,o]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(o)}}),e}function mu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lk(t,e){const n=new ok(t,e);return n.subscribe.bind(n)}class ok{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ck(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=T0),l.error===void 0&&(l.error=T0),l.complete===void 0&&(l.complete=T0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ck(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function T0(){}function dn(t){return t&&t._delegate?t._delegate:t}class fl{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cl="[DEFAULT]";class uk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new HC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hk(e))try{this.getOrInitializeService({instanceIdentifier:cl})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:l});s.resolve(o)}catch{}}}}clearInstance(e=cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cl){return this.instances.has(e)}getOptions(e=cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);s===h&&u.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const o=this.instances.get(s);return o&&e(o,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dk(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=cl){return this.component?this.component.multipleInstances?e:cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dk(t){return t===cl?void 0:t}function hk(t){return t.instantiationMode==="EAGER"}class fk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const mk={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},pk=tt.INFO,gk={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},xk=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=gk[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tx{constructor(e){this.name=e,this._logLevel=pk,this._logHandler=xk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const yk=(t,e)=>e.some(n=>t instanceof n);let W1,J1;function bk(){return W1||(W1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vk(){return J1||(J1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,lg=new WeakMap,p_=new WeakMap,A0=new WeakMap,nx=new WeakMap;function wk(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(di(t.result)),l()},u=()=>{s(t.error),l()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),nx.set(e,t),e}function Nk(t){if(lg.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),l()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});lg.set(t,e)}let og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _k(t){og=t(og)}function jk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(C0(this),e,...n);return p_.set(s,e.sort?e.sort():[e]),di(s)}:vk().includes(t)?function(...e){return t.apply(C0(this),e),di(m_.get(this))}:function(...e){return di(t.apply(C0(this),e))}}function Ek(t){return typeof t=="function"?jk(t):(t instanceof IDBTransaction&&Nk(t),yk(t,bk())?new Proxy(t,og):t)}function di(t){if(t instanceof IDBRequest)return wk(t);if(A0.has(t))return A0.get(t);const e=Ek(t);return e!==t&&(A0.set(t,e),nx.set(e,t)),e}const C0=t=>nx.get(t);function Sk(t,e,{blocked:n,upgrade:s,blocking:l,terminated:o}={}){const u=indexedDB.open(t,e),h=di(u);return s&&u.addEventListener("upgradeneeded",f=>{s(di(u.result),f.oldVersion,f.newVersion,di(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),l&&f.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Tk=["get","getKey","getAll","getAllKeys","count"],Ak=["put","add","delete","clear"],k0=new Map;function Z1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(k0.get(e))return k0.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=Ak.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Tk.includes(n)))return;const o=async function(u,...h){const f=this.transaction(u,l?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),l&&f.done]))[0]};return k0.set(e,o),o}_k(t=>({...t,get:(e,n,s)=>Z1(e,n)||t.get(e,n,s),has:(e,n)=>!!Z1(e,n)||t.has(e,n)}));class Ck{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kk(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kk(t){return t.getComponent()?.type==="VERSION"}const cg="@firebase/app",ew="0.14.6";const pr=new tx("@firebase/app"),Ik="@firebase/app-compat",Rk="@firebase/analytics-compat",Dk="@firebase/analytics",Mk="@firebase/app-check-compat",Ok="@firebase/app-check",Pk="@firebase/auth",Lk="@firebase/auth-compat",Vk="@firebase/database",zk="@firebase/data-connect",Uk="@firebase/database-compat",Fk="@firebase/functions",Bk="@firebase/functions-compat",qk="@firebase/installations",Hk="@firebase/installations-compat",$k="@firebase/messaging",Gk="@firebase/messaging-compat",Yk="@firebase/performance",Kk="@firebase/performance-compat",Qk="@firebase/remote-config",Xk="@firebase/remote-config-compat",Wk="@firebase/storage",Jk="@firebase/storage-compat",Zk="@firebase/firestore",e3="@firebase/ai",t3="@firebase/firestore-compat",n3="firebase",s3="12.6.0";const ug="[DEFAULT]",a3={[cg]:"fire-core",[Ik]:"fire-core-compat",[Dk]:"fire-analytics",[Rk]:"fire-analytics-compat",[Ok]:"fire-app-check",[Mk]:"fire-app-check-compat",[Pk]:"fire-auth",[Lk]:"fire-auth-compat",[Vk]:"fire-rtdb",[zk]:"fire-data-connect",[Uk]:"fire-rtdb-compat",[Fk]:"fire-fn",[Bk]:"fire-fn-compat",[qk]:"fire-iid",[Hk]:"fire-iid-compat",[$k]:"fire-fcm",[Gk]:"fire-fcm-compat",[Yk]:"fire-perf",[Kk]:"fire-perf-compat",[Qk]:"fire-rc",[Xk]:"fire-rc-compat",[Wk]:"fire-gcs",[Jk]:"fire-gcs-compat",[Zk]:"fire-fst",[t3]:"fire-fst-compat",[e3]:"fire-vertex","fire-js":"fire-js",[n3]:"fire-js-all"};const xf=new Map,r3=new Map,dg=new Map;function tw(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Po(t){const e=t.name;if(dg.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of xf.values())tw(n,t);for(const n of r3.values())tw(n,t);return!0}function sx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xs(t){return t==null?!1:t.settings!==void 0}const i3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new Xu("app","Firebase",i3);class l3{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}const Ko=s3;function g_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:ug,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw hi.create("bad-app-name",{appName:String(l)});if(n||(n=u_()),!n)throw hi.create("no-options");const o=xf.get(l);if(o){if(bi(n,o.options)&&bi(s,o.config))return o;throw hi.create("duplicate-app",{appName:l})}const u=new fk(l);for(const f of dg.values())u.addComponent(f);const h=new l3(n,s,u);return xf.set(l,h),h}function x_(t=ug){const e=xf.get(t);if(!e&&t===ug&&u_())return g_();if(!e)throw hi.create("no-app",{appName:t});return e}function fi(t,e,n){let s=a3[t]??t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),o=e.match(/\s|\//);if(l||o){const u=[`Unable to register library "${s}" with version "${e}":`];l&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(u.join(" "));return}Po(new fl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const o3="firebase-heartbeat-database",c3=1,Ru="firebase-heartbeat-store";let I0=null;function y_(){return I0||(I0=Sk(o3,c3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ru)}catch(n){console.warn(n)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),I0}async function u3(t){try{const n=(await y_()).transaction(Ru),s=await n.objectStore(Ru).get(b_(t));return await n.done,s}catch(e){if(e instanceof wr)pr.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e?.message});pr.warn(n.message)}}}async function nw(t,e){try{const s=(await y_()).transaction(Ru,"readwrite");await s.objectStore(Ru).put(e,b_(t)),await s.done}catch(n){if(n instanceof wr)pr.warn(n.message);else{const s=hi.create("idb-set",{originalErrorMessage:n?.message});pr.warn(s.message)}}}function b_(t){return`${t.name}!${t.options.appId}`}const d3=1024,h3=30;class f3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p3(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>h3){const l=g3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sw(),{heartbeatsToSend:n,unsentEntries:s}=m3(this._heartbeatsCache.heartbeats),l=gf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return pr.warn(e),""}}}function sw(){return new Date().toISOString().substring(0,10)}function m3(t,e=d3){const n=[];let s=t.slice();for(const l of t){const o=n.find(u=>u.agent===l.agent);if(o){if(o.dates.push(l.date),aw(n)>e){o.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),aw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class p3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tk()?nk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return nw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aw(t){return gf(JSON.stringify({version:2,heartbeats:t})).length}function g3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function x3(t){Po(new fl("platform-logger",e=>new Ck(e),"PRIVATE")),Po(new fl("heartbeat",e=>new f3(e),"PRIVATE")),fi(cg,ew,t),fi(cg,ew,"esm2020"),fi("fire-js","")}x3("");var y3="firebase",b3="12.6.0";fi(y3,b3,"app");function v_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v3=v_,w_=new Xu("auth","Firebase",v_());const yf=new tx("@firebase/auth");function w3(t,...e){yf.logLevel<=tt.WARN&&yf.warn(`Auth (${Ko}): ${t}`,...e)}function Zh(t,...e){yf.logLevel<=tt.ERROR&&yf.error(`Auth (${Ko}): ${t}`,...e)}function Vs(t,...e){throw rx(t,...e)}function ea(t,...e){return rx(t,...e)}function ax(t,e,n){const s={...v3(),[e]:n};return new Xu("auth","Firebase",s).create(e,{appName:t.name})}function dr(t){return ax(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N3(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Vs(t,"argument-error"),ax(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return w_.create(t,...e)}function Pe(t,e,...n){if(!t)throw rx(e,...n)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function gr(t,e){t||cr(e)}function hg(){return typeof self<"u"&&self.location?.href||""}function _3(){return rw()==="http:"||rw()==="https:"}function rw(){return typeof self<"u"&&self.location?.protocol||null}function j3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_3()||WC()||"connection"in navigator)?navigator.onLine:!0}function E3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=KC()||JC()}get(){return j3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ix(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class N_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const S3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const T3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A3=new Ju(3e4,6e4);function Nr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _r(t,e,n,s,l={}){return __(t,l,async()=>{let o={},u={};s&&(e==="GET"?u=s:o={body:JSON.stringify(s)});const h=Wu({key:t.config.apiKey,...u}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:f,...o};return XC()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(m.credentials="include"),N_.fetch()(await j_(t,t.config.apiHost,n,h),m)})}async function __(t,e,n){t._canInitEmulator=!1;const s={...S3,...e};try{const l=new k3(t),o=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Lh(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Lh(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw Lh(t,"user-disabled",u);const x=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw ax(t,x,m);Vs(t,x)}}catch(l){if(l instanceof wr)throw l;Vs(t,"network-request-failed",{message:String(l)})}}async function Zu(t,e,n,s,l={}){const o=await _r(t,e,n,s,l);return"mfaPendingCredential"in o&&Vs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function j_(t,e,n,s){const l=`${e}${n}?${s}`,o=t,u=o.config.emulator?ix(t.config,l):`${t.config.apiScheme}://${l}`;return T3.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function C3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ea(this.auth,"network-request-failed")),A3.get())})}}function Lh(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=ea(t,e,s);return l.customData._tokenResponse=n,l}function iw(t){return t!==void 0&&t.enterprise!==void 0}class I3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return C3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function R3(t,e){return _r(t,"GET","/v2/recaptchaConfig",Nr(t,e))}async function D3(t,e){return _r(t,"POST","/v1/accounts:delete",e)}async function bf(t,e){return _r(t,"POST","/v1/accounts:lookup",e)}function vu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M3(t,e=!1){const n=dn(t),s=await n.getIdToken(e),l=lx(s);Pe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const o=typeof l.firebase=="object"?l.firebase:void 0,u=o?.sign_in_provider;return{claims:l,token:s,authTime:vu(R0(l.auth_time)),issuedAtTime:vu(R0(l.iat)),expirationTime:vu(R0(l.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function R0(t){return Number(t)*1e3}function lx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const l=o_(n);return l?JSON.parse(l):(Zh("Failed to decode base64 JWT payload"),null)}catch(l){return Zh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function lw(t){const e=lx(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Du(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wr&&O3(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function O3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class P3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class fg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vf(t){const e=t.auth,n=await t.getIdToken(),s=await Du(t,bf(e,{idToken:n}));Pe(s?.users.length,e,"internal-error");const l=s.users[0];t._notifyReloadListener(l);const o=l.providerUserInfo?.length?E_(l.providerUserInfo):[],u=V3(t.providerData,o),h=t.isAnonymous,f=!(t.email&&l.passwordHash)&&!u?.length,m=h?f:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new fg(l.createdAt,l.lastLoginAt),isAnonymous:m};Object.assign(t,x)}async function L3(t){const e=dn(t);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V3(t,e){return[...t.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function E_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function z3(t,e){const n=await __(t,{},async()=>{const s=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:o}=t.config,u=await j_(t,l,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:s};return t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(f.credentials="include"),N_.fetch()(u,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U3(t,e){return _r(t,"POST","/v2/accounts:revokeToken",Nr(t,e))}class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=lw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:o}=await z3(e,n);this.updateTokensAndExpiration(s,l,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:o}=n,u=new To;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),l&&(Pe(typeof l=="string","internal-error",{appName:e}),u.accessToken=l),o&&(Pe(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return cr("not implemented")}}function ni(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new P3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new fg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M3(this,e)}reload(){return L3(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await vf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xs(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await Du(this,D3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,o=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,f=n._redirectEventId??void 0,m=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:b,emailVerified:v,isAnonymous:N,providerData:E,stsTokenManager:V}=n;Pe(b&&V,e,"internal-error");const R=To.fromJSON(this.name,V);Pe(typeof b=="string",e,"internal-error"),ni(s,e.name),ni(l,e.name),Pe(typeof v=="boolean",e,"internal-error"),Pe(typeof N=="boolean",e,"internal-error"),ni(o,e.name),ni(u,e.name),ni(h,e.name),ni(f,e.name),ni(m,e.name),ni(x,e.name);const z=new Zs({uid:b,auth:e,email:l,emailVerified:v,displayName:s,isAnonymous:N,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:R,createdAt:m,lastLoginAt:x});return E&&Array.isArray(E)&&(z.providerData=E.map(L=>({...L}))),f&&(z._redirectEventId=f),z}static async _fromIdTokenResponse(e,n,s=!1){const l=new To;l.updateFromServerResponse(n);const o=new Zs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await vf(o),o}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Pe(l.localId!==void 0,"internal-error");const o=l.providerUserInfo!==void 0?E_(l.providerUserInfo):[],u=!(l.email&&l.passwordHash)&&!o?.length,h=new To;h.updateFromIdToken(s);const f=new Zs({uid:l.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:o,metadata:new fg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!o?.length};return Object.assign(f,m),f}}const ow=new Map;function ur(t){gr(t instanceof Function,"Expected a class definition");let e=ow.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ow.set(t,e),e)}class S_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}S_.type="NONE";const cw=S_;function ef(t,e,n){return`firebase:${t}:${e}:${n}`}class Ao{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:o}=this.auth;this.fullUserKey=ef(this.userKey,l.apiKey,o),this.fullPersistenceKey=ef("persistence",l.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bf(this.auth,{idToken:e}).catch(()=>{});return n?Zs._fromGetAccountInfoResponse(this.auth,n,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ao(ur(cw),e,s);const l=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=l[0]||ur(cw);const u=ef(s,e.config.apiKey,e.name);let h=null;for(const m of n)try{const x=await m._get(u);if(x){let b;if(typeof x=="string"){const v=await bf(e,{idToken:x}).catch(()=>{});if(!v)break;b=await Zs._fromGetAccountInfoResponse(e,v,x)}else b=Zs._fromJSON(e,x);m!==o&&(h=b),o=m;break}}catch{}const f=l.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Ao(o,e,s):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new Ao(o,e,s))}}function uw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(k_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R_(e))return"Blackberry";if(D_(e))return"Webos";if(A_(e))return"Safari";if((e.includes("chrome/")||C_(e))&&!e.includes("edge/"))return"Chrome";if(I_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function T_(t=zn()){return/firefox\//i.test(t)}function A_(t=zn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C_(t=zn()){return/crios\//i.test(t)}function k_(t=zn()){return/iemobile/i.test(t)}function I_(t=zn()){return/android/i.test(t)}function R_(t=zn()){return/blackberry/i.test(t)}function D_(t=zn()){return/webos/i.test(t)}function ox(t=zn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F3(t=zn()){return ox(t)&&!!window.navigator?.standalone}function B3(){return ZC()&&document.documentMode===10}function M_(t=zn()){return ox(t)||I_(t)||D_(t)||R_(t)||/windows phone/i.test(t)||k_(t)}function O_(t,e=[]){let n;switch(t){case"Browser":n=uw(zn());break;case"Worker":n=`${uw(zn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ko}/${s}`}class q3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function H3(t,e={}){return _r(t,"GET","/v2/passwordPolicy",Nr(t,e))}const $3=6;class G3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Y3{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dw(this),this.idTokenSubscription=new dw(this),this.beforeStateQueue=new q3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bf(this,{idToken:e}),s=await Zs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&h?.user&&(s=h.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xs(this.app))return Promise.reject(dr(this));const n=e?dn(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xs(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xs(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H3(this),n=new G3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await U3(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,s,l);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(xs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&w3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ti(t){return dn(t)}class dw{constructor(e){this.auth=e,this.observer=null,this.addObserver=lk(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K3(t){Jf=t}function P_(t){return Jf.loadJS(t)}function Q3(){return Jf.recaptchaEnterpriseScript}function X3(){return Jf.gapiScript}function W3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class J3{constructor(){this.enterprise=new Z3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Z3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const eI="recaptcha-enterprise",L_="NO_RECAPTCHA";class tI{constructor(e){this.type=eI,this.auth=Ti(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{R3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new I3(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function l(o,u,h){const f=window.grecaptcha;iw(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(L_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J3().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{s(this.auth).then(h=>{if(!n&&iw(window.grecaptcha))l(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Q3();f.length!==0&&(f+=h),P_(f).then(()=>{l(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function hw(t,e,n,s=!1,l=!1){const o=new tI(t);let u;if(l)u=L_;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function mg(t,e,n,s,l){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await hw(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await hw(t,e,n,n==="getOobCode");return s(t,u)}else return Promise.reject(o)})}function nI(t,e){const n=sx(t,"auth");if(n.isInitialized()){const l=n.getImmediate(),o=n.getOptions();if(bi(o,e??{}))return l;Vs(l,"already-initialized")}return n.initialize({options:e})}function sI(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ur);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function aI(t,e,n){const s=Ti(t);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,o=V_(e),{host:u,port:h}=rI(e),f=h===null?"":`:${h}`,m={url:`${o}//${u}${f}/`},x=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(bi(m,s.config.emulator)&&bi(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,Yo(u)?(h_(`${o}//${u}${f}`),f_("Auth",!0)):iI()}function V_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rI(t){const e=V_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const o=l[1];return{host:o,port:fw(s.substr(o.length+1))}}else{const[o,u]=s.split(":");return{host:o,port:fw(u)}}}function fw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class cx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function lI(t,e){return _r(t,"POST","/v1/accounts:signUp",e)}async function oI(t,e){return Zu(t,"POST","/v1/accounts:signInWithPassword",Nr(t,e))}async function cI(t,e){return _r(t,"POST","/v1/accounts:sendOobCode",Nr(t,e))}async function uI(t,e){return cI(t,e)}async function dI(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}async function hI(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Nr(t,e))}class Mu extends cx{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Mu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Mu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,n,"signInWithPassword",oI);case"emailLink":return dI(e,{email:this._email,oobCode:this._password});default:Vs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,s,"signUpPassword",lI);case"emailLink":return hI(e,{idToken:n,email:this._email,oobCode:this._password});default:Vs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Co(t,e){return Zu(t,"POST","/v1/accounts:signInWithIdp",Nr(t,e))}const fI="http://localhost";class ml extends cx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ml(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...o}=n;if(!s||!l)return null;const u=new ml(s,l);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:fI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wu(n)}return e}}function mI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pI(t){const e=fu(mu(t)).link,n=e?fu(mu(e)).deep_link_id:null,s=fu(mu(t)).deep_link_id;return(s?fu(mu(s)).link:null)||s||n||e||t}class ux{constructor(e){const n=fu(mu(e)),s=n.apiKey??null,l=n.oobCode??null,o=mI(n.mode??null);Pe(s&&l&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pI(e);try{return new ux(n)}catch{return null}}}class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Mu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=ux.parseLink(n);return Pe(s,"argument-error"),Mu._fromEmailAndCode(e,s.code,s.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ed extends dx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ri extends ed{constructor(){super("facebook.com")}static credential(e){return ml._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";class or extends ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ml._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return or.credential(n,s)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";class ii extends ed{constructor(){super("github.com")}static credential(e){return ml._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.GITHUB_SIGN_IN_METHOD="github.com";ii.PROVIDER_ID="github.com";class li extends ed{constructor(){super("twitter.com")}static credential(e,n){return ml._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return li.credential(n,s)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";async function gI(t,e){return Zu(t,"POST","/v1/accounts:signUp",Nr(t,e))}class pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const o=await Zs._fromIdTokenResponse(e,s,l),u=mw(s);return new pl({user:o,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=mw(s);return new pl({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function mw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class wf extends wr{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,wf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new wf(e,n,s,l)}}function z_(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wf._fromErrorAndOperation(t,o,e,s):o})}async function xI(t,e,n=!1){const s=await Du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pl._forOperation(t,"link",s)}async function yI(t,e,n=!1){const{auth:s}=t;if(xs(s.app))return Promise.reject(dr(s));const l="reauthenticate";try{const o=await Du(t,z_(s,l,e,t),n);Pe(o.idToken,s,"internal-error");const u=lx(o.idToken);Pe(u,s,"internal-error");const{sub:h}=u;return Pe(t.uid===h,s,"user-mismatch"),pl._forOperation(t,l,o)}catch(o){throw o?.code==="auth/user-not-found"&&Vs(s,"user-mismatch"),o}}async function U_(t,e,n=!1){if(xs(t.app))return Promise.reject(dr(t));const s="signIn",l=await z_(t,s,e),o=await pl._fromIdTokenResponse(t,s,l);return n||await t._updateCurrentUser(o.user),o}async function bI(t,e){return U_(Ti(t),e)}async function F_(t){const e=Ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vI(t,e,n){if(xs(t.app))return Promise.reject(dr(t));const s=Ti(t),u=await mg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gI).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&F_(t),f}),h=await pl._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function wI(t,e,n){return xs(t.app)?Promise.reject(dr(t)):bI(dn(t),Qo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&F_(t),s})}async function NI(t,e){const n=dn(t),l={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await uI(n.auth,l);o!==t.email&&await t.reload()}function _I(t,e,n,s){return dn(t).onIdTokenChanged(e,n,s)}function jI(t,e,n){return dn(t).beforeAuthStateChanged(e,n)}function EI(t,e,n,s){return dn(t).onAuthStateChanged(e,n,s)}function SI(t){return dn(t).signOut()}const Nf="__sak";class B_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TI=1e3,AI=10;class q_ extends B_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},o=this.storage.getItem(s);B3()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,AI):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},TI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q_.type="LOCAL";const CI=q_;class H_ extends B_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}H_.type="SESSION";const $_=H_;function kI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Zf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:o}=n.data,u=this.handlersMap[l];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const h=Array.from(u).map(async m=>m(n.origin,o)),f=await kI(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];function hx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class II{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const m=hx("",20);l.port1.start();const x=setTimeout(()=>{f(new Error("unsupported_event"))},s);u={messageChannel:l,onMessage(b){const v=b;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(x),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(v.data.response);break;default:clearTimeout(x),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),l.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[l.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Da(){return window}function RI(t){Da().location.href=t}function G_(){return typeof Da().WorkerGlobalScope<"u"&&typeof Da().importScripts=="function"}async function DI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MI(){return navigator?.serviceWorker?.controller||null}function OI(){return G_()?self:null}const Y_="firebaseLocalStorageDb",PI=1,_f="firebaseLocalStorage",K_="fbase_key";class td{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function em(t,e){return t.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function LI(){const t=indexedDB.deleteDatabase(Y_);return new td(t).toPromise()}function pg(){const t=indexedDB.open(Y_,PI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(_f,{keyPath:K_})}catch(l){n(l)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(_f)?e(s):(s.close(),await LI(),e(await pg()))})})}async function pw(t,e,n){const s=em(t,!0).put({[K_]:e,value:n});return new td(s).toPromise()}async function VI(t,e){const n=em(t,!1).get(e),s=await new td(n).toPromise();return s===void 0?null:s.value}function gw(t,e){const n=em(t,!0).delete(e);return new td(n).toPromise()}const zI=800,UI=3;class Q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>UI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(OI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DI(),!this.activeServiceWorker)return;this.sender=new II(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await pw(e,Nf,"1"),await gw(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>pw(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>VI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const o=em(l,!1).getAll();return new td(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:o}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(o)&&(this.notifyListeners(l,o),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q_.type="LOCAL";const FI=Q_;new Ju(3e4,6e4);function X_(t,e){return e?ur(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class fx extends cx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BI(t){return U_(t.auth,new fx(t),t.bypassAuthState)}function qI(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),yI(n,new fx(t),t.bypassAuthState)}async function HI(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),xI(n,new fx(t),t.bypassAuthState)}class W_{constructor(e,n,s,l,o=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return HI;case"reauthViaPopup":case"reauthViaRedirect":return qI;default:Vs(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $I=new Ju(2e3,1e4);async function GI(t,e,n){if(xs(t.app))return Promise.reject(ea(t,"operation-not-supported-in-this-environment"));const s=Ti(t);N3(t,e,dx);const l=X_(s,n);return new ul(s,"signInViaPopup",e,l).executeNotNull()}class ul extends W_{constructor(e,n,s,l,o){super(e,n,l,o),this.provider=s,this.authWindow=null,this.pollId=null,ul.currentPopupAction&&ul.currentPopupAction.cancel(),ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$I.get())};e()}}ul.currentPopupAction=null;const YI="pendingRedirect",tf=new Map;class KI extends W_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=tf.get(this.auth._key());if(!e){try{const s=await QI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}tf.set(this.auth._key(),e)}return this.bypassAuthState||tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QI(t,e){const n=JI(e),s=WI(t);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function XI(t,e){tf.set(t._key(),e)}function WI(t){return ur(t._redirectPersistence)}function JI(t){return ef(YI,t.config.apiKey,t.name)}async function ZI(t,e,n=!1){if(xs(t.app))return Promise.reject(dr(t));const s=Ti(t),l=X_(s,e),u=await new KI(s,l,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}const eR=600*1e3;class tR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!J_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ea(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eR&&this.cachedEventUids.clear(),this.cachedEventUids.has(xw(e))}saveEventToCache(e){this.cachedEventUids.add(xw(e)),this.lastProcessedEventTime=Date.now()}}function xw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function nR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J_(t);default:return!1}}async function sR(t,e={}){return _r(t,"GET","/v1/projects",e)}const aR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rR=/^https?/;async function iR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sR(t);for(const n of e)try{if(lR(n))return}catch{}Vs(t,"unauthorized-domain")}function lR(t){const e=hg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!rR.test(n))return!1;if(aR.test(t))return s===t;const l=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const oR=new Ju(3e4,6e4);function yw(){const t=Da().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cR(t){return new Promise((e,n)=>{function s(){yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yw(),n(ea(t,"network-request-failed"))},timeout:oR.get()})}if(Da().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Da().gapi?.load)s();else{const l=W3("iframefcb");return Da()[l]=()=>{gapi.load?s():n(ea(t,"network-request-failed"))},P_(`${X3()}?onload=${l}`).catch(o=>n(o))}}).catch(e=>{throw nf=null,e})}let nf=null;function uR(t){return nf=nf||cR(t),nf}const dR=new Ju(5e3,15e3),hR="__/auth/iframe",fR="emulator/auth/iframe",mR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gR(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ix(e,fR):`https://${t.config.authDomain}/${hR}`,s={apiKey:e.apiKey,appName:t.name,v:Ko},l=pR.get(t.config.apiHost);l&&(s.eid=l);const o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${Wu(s).slice(1)}`}async function xR(t){const e=await uR(t),n=Da().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:gR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mR,dontclear:!0},s=>new Promise(async(l,o)=>{await s.restyle({setHideOnLeave:!1});const u=ea(t,"network-request-failed"),h=Da().setTimeout(()=>{o(u)},dR.get());function f(){Da().clearTimeout(h),l(s)}s.ping(f).then(f,()=>{o(u)})}))}const yR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bR=500,vR=600,wR="_blank",NR="http://localhost";class bw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _R(t,e,n,s=bR,l=vR){const o=Math.max((window.screen.availHeight-l)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const f={...yR,width:s.toString(),height:l.toString(),top:o,left:u},m=zn().toLowerCase();n&&(h=C_(m)?wR:n),T_(m)&&(e=e||NR,f.scrollbars="yes");const x=Object.entries(f).reduce((v,[N,E])=>`${v}${N}=${E},`,"");if(F3(m)&&h!=="_self")return jR(e||"",h),new bw(null);const b=window.open(e||"",h,x);Pe(b,t,"popup-blocked");try{b.focus()}catch{}return new bw(b)}function jR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const ER="__/auth/handler",SR="emulator/auth/handler",TR=encodeURIComponent("fac");async function vw(t,e,n,s,l,o){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ko,eventId:l};if(e instanceof dx){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",ik(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,b]of Object.entries({}))u[x]=b}if(e instanceof ed){const x=e.getScopes().filter(b=>b!=="");x.length>0&&(u.scopes=x.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const x of Object.keys(h))h[x]===void 0&&delete h[x];const f=await t._getAppCheckToken(),m=f?`#${TR}=${encodeURIComponent(f)}`:"";return`${AR(t)}?${Wu(h).slice(1)}${m}`}function AR({config:t}){return t.emulator?ix(t,SR):`https://${t.authDomain}/${ER}`}const D0="webStorageSupport";class CR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$_,this._completeRedirectFn=ZI,this._overrideRedirectResult=XI}async _openPopup(e,n,s,l){gr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await vw(e,n,s,hg(),l);return _R(e,o,hx())}async _openRedirect(e,n,s,l){await this._originValidation(e);const o=await vw(e,n,s,hg(),l);return RI(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:o}=this.eventManagers[n];return l?Promise.resolve(l):(gr(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await xR(e),s=new tR(e);return n.register("authEvent",l=>(Pe(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(D0,{type:D0},l=>{const o=l?.[0]?.[D0];o!==void 0&&n(!!o),Vs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M_()||A_()||ox()}}const kR=CR;var ww="@firebase/auth",Nw="1.11.1";class IR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function RR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DR(t){Po(new fl("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O_(t)},m=new Y3(s,l,o,f);return sI(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Po(new fl("auth-internal",e=>{const n=Ti(e.getProvider("auth").getImmediate());return(s=>new IR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(ww,Nw,RR(t)),fi(ww,Nw,"esm2020")}const MR=300,OR=d_("authIdTokenMaxAge")||MR;let _w=null;const PR=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OR)return;const l=n?.token;_w!==l&&(_w=l,await fetch(t,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function LR(t=x_()){const e=sx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nI(t,{popupRedirectResolver:kR,persistence:[FI,CI,$_]}),s=d_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const u=PR(o.toString());jI(n,u,()=>u(n.currentUser)),_I(n,h=>u(h))}}const l=c_("auth");return l&&aI(n,`http://${l}`),n}function VR(){return document.getElementsByTagName("head")?.[0]??document}K3({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=l=>{const o=ea("internal-error");o.customData=l,n(o)},s.type="text/javascript",s.charset="UTF-8",VR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DR("Browser");var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mi,Z_;(function(){var t;function e(I,T){function M(){}M.prototype=T.prototype,I.F=T.prototype,I.prototype=new M,I.prototype.constructor=I,I.D=function(S,A,P){for(var D=Array(arguments.length-2),re=2;re<arguments.length;re++)D[re-2]=arguments[re];return T.prototype[A].apply(S,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,T,M){M||(M=0);const S=Array(16);if(typeof T=="string")for(var A=0;A<16;++A)S[A]=T.charCodeAt(M++)|T.charCodeAt(M++)<<8|T.charCodeAt(M++)<<16|T.charCodeAt(M++)<<24;else for(A=0;A<16;++A)S[A]=T[M++]|T[M++]<<8|T[M++]<<16|T[M++]<<24;T=I.g[0],M=I.g[1],A=I.g[2];let P=I.g[3],D;D=T+(P^M&(A^P))+S[0]+3614090360&4294967295,T=M+(D<<7&4294967295|D>>>25),D=P+(A^T&(M^A))+S[1]+3905402710&4294967295,P=T+(D<<12&4294967295|D>>>20),D=A+(M^P&(T^M))+S[2]+606105819&4294967295,A=P+(D<<17&4294967295|D>>>15),D=M+(T^A&(P^T))+S[3]+3250441966&4294967295,M=A+(D<<22&4294967295|D>>>10),D=T+(P^M&(A^P))+S[4]+4118548399&4294967295,T=M+(D<<7&4294967295|D>>>25),D=P+(A^T&(M^A))+S[5]+1200080426&4294967295,P=T+(D<<12&4294967295|D>>>20),D=A+(M^P&(T^M))+S[6]+2821735955&4294967295,A=P+(D<<17&4294967295|D>>>15),D=M+(T^A&(P^T))+S[7]+4249261313&4294967295,M=A+(D<<22&4294967295|D>>>10),D=T+(P^M&(A^P))+S[8]+1770035416&4294967295,T=M+(D<<7&4294967295|D>>>25),D=P+(A^T&(M^A))+S[9]+2336552879&4294967295,P=T+(D<<12&4294967295|D>>>20),D=A+(M^P&(T^M))+S[10]+4294925233&4294967295,A=P+(D<<17&4294967295|D>>>15),D=M+(T^A&(P^T))+S[11]+2304563134&4294967295,M=A+(D<<22&4294967295|D>>>10),D=T+(P^M&(A^P))+S[12]+1804603682&4294967295,T=M+(D<<7&4294967295|D>>>25),D=P+(A^T&(M^A))+S[13]+4254626195&4294967295,P=T+(D<<12&4294967295|D>>>20),D=A+(M^P&(T^M))+S[14]+2792965006&4294967295,A=P+(D<<17&4294967295|D>>>15),D=M+(T^A&(P^T))+S[15]+1236535329&4294967295,M=A+(D<<22&4294967295|D>>>10),D=T+(A^P&(M^A))+S[1]+4129170786&4294967295,T=M+(D<<5&4294967295|D>>>27),D=P+(M^A&(T^M))+S[6]+3225465664&4294967295,P=T+(D<<9&4294967295|D>>>23),D=A+(T^M&(P^T))+S[11]+643717713&4294967295,A=P+(D<<14&4294967295|D>>>18),D=M+(P^T&(A^P))+S[0]+3921069994&4294967295,M=A+(D<<20&4294967295|D>>>12),D=T+(A^P&(M^A))+S[5]+3593408605&4294967295,T=M+(D<<5&4294967295|D>>>27),D=P+(M^A&(T^M))+S[10]+38016083&4294967295,P=T+(D<<9&4294967295|D>>>23),D=A+(T^M&(P^T))+S[15]+3634488961&4294967295,A=P+(D<<14&4294967295|D>>>18),D=M+(P^T&(A^P))+S[4]+3889429448&4294967295,M=A+(D<<20&4294967295|D>>>12),D=T+(A^P&(M^A))+S[9]+568446438&4294967295,T=M+(D<<5&4294967295|D>>>27),D=P+(M^A&(T^M))+S[14]+3275163606&4294967295,P=T+(D<<9&4294967295|D>>>23),D=A+(T^M&(P^T))+S[3]+4107603335&4294967295,A=P+(D<<14&4294967295|D>>>18),D=M+(P^T&(A^P))+S[8]+1163531501&4294967295,M=A+(D<<20&4294967295|D>>>12),D=T+(A^P&(M^A))+S[13]+2850285829&4294967295,T=M+(D<<5&4294967295|D>>>27),D=P+(M^A&(T^M))+S[2]+4243563512&4294967295,P=T+(D<<9&4294967295|D>>>23),D=A+(T^M&(P^T))+S[7]+1735328473&4294967295,A=P+(D<<14&4294967295|D>>>18),D=M+(P^T&(A^P))+S[12]+2368359562&4294967295,M=A+(D<<20&4294967295|D>>>12),D=T+(M^A^P)+S[5]+4294588738&4294967295,T=M+(D<<4&4294967295|D>>>28),D=P+(T^M^A)+S[8]+2272392833&4294967295,P=T+(D<<11&4294967295|D>>>21),D=A+(P^T^M)+S[11]+1839030562&4294967295,A=P+(D<<16&4294967295|D>>>16),D=M+(A^P^T)+S[14]+4259657740&4294967295,M=A+(D<<23&4294967295|D>>>9),D=T+(M^A^P)+S[1]+2763975236&4294967295,T=M+(D<<4&4294967295|D>>>28),D=P+(T^M^A)+S[4]+1272893353&4294967295,P=T+(D<<11&4294967295|D>>>21),D=A+(P^T^M)+S[7]+4139469664&4294967295,A=P+(D<<16&4294967295|D>>>16),D=M+(A^P^T)+S[10]+3200236656&4294967295,M=A+(D<<23&4294967295|D>>>9),D=T+(M^A^P)+S[13]+681279174&4294967295,T=M+(D<<4&4294967295|D>>>28),D=P+(T^M^A)+S[0]+3936430074&4294967295,P=T+(D<<11&4294967295|D>>>21),D=A+(P^T^M)+S[3]+3572445317&4294967295,A=P+(D<<16&4294967295|D>>>16),D=M+(A^P^T)+S[6]+76029189&4294967295,M=A+(D<<23&4294967295|D>>>9),D=T+(M^A^P)+S[9]+3654602809&4294967295,T=M+(D<<4&4294967295|D>>>28),D=P+(T^M^A)+S[12]+3873151461&4294967295,P=T+(D<<11&4294967295|D>>>21),D=A+(P^T^M)+S[15]+530742520&4294967295,A=P+(D<<16&4294967295|D>>>16),D=M+(A^P^T)+S[2]+3299628645&4294967295,M=A+(D<<23&4294967295|D>>>9),D=T+(A^(M|~P))+S[0]+4096336452&4294967295,T=M+(D<<6&4294967295|D>>>26),D=P+(M^(T|~A))+S[7]+1126891415&4294967295,P=T+(D<<10&4294967295|D>>>22),D=A+(T^(P|~M))+S[14]+2878612391&4294967295,A=P+(D<<15&4294967295|D>>>17),D=M+(P^(A|~T))+S[5]+4237533241&4294967295,M=A+(D<<21&4294967295|D>>>11),D=T+(A^(M|~P))+S[12]+1700485571&4294967295,T=M+(D<<6&4294967295|D>>>26),D=P+(M^(T|~A))+S[3]+2399980690&4294967295,P=T+(D<<10&4294967295|D>>>22),D=A+(T^(P|~M))+S[10]+4293915773&4294967295,A=P+(D<<15&4294967295|D>>>17),D=M+(P^(A|~T))+S[1]+2240044497&4294967295,M=A+(D<<21&4294967295|D>>>11),D=T+(A^(M|~P))+S[8]+1873313359&4294967295,T=M+(D<<6&4294967295|D>>>26),D=P+(M^(T|~A))+S[15]+4264355552&4294967295,P=T+(D<<10&4294967295|D>>>22),D=A+(T^(P|~M))+S[6]+2734768916&4294967295,A=P+(D<<15&4294967295|D>>>17),D=M+(P^(A|~T))+S[13]+1309151649&4294967295,M=A+(D<<21&4294967295|D>>>11),D=T+(A^(M|~P))+S[4]+4149444226&4294967295,T=M+(D<<6&4294967295|D>>>26),D=P+(M^(T|~A))+S[11]+3174756917&4294967295,P=T+(D<<10&4294967295|D>>>22),D=A+(T^(P|~M))+S[2]+718787259&4294967295,A=P+(D<<15&4294967295|D>>>17),D=M+(P^(A|~T))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.v=function(I,T){T===void 0&&(T=I.length);const M=T-this.blockSize,S=this.C;let A=this.h,P=0;for(;P<T;){if(A==0)for(;P<=M;)l(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<T;)if(S[A++]=I.charCodeAt(P++),A==this.blockSize){l(this,S),A=0;break}}else for(;P<T;)if(S[A++]=I[P++],A==this.blockSize){l(this,S),A=0;break}}this.h=A,this.o+=T},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;T=this.o*8;for(var M=I.length-8;M<I.length;++M)I[M]=T&255,T/=256;for(this.v(I),I=Array(16),T=0,M=0;M<4;++M)for(let S=0;S<32;S+=8)I[T++]=this.g[M]>>>S&255;return I};function o(I,T){var M=h;return Object.prototype.hasOwnProperty.call(M,I)?M[I]:M[I]=T(I)}function u(I,T){this.h=T;const M=[];let S=!0;for(let A=I.length-1;A>=0;A--){const P=I[A]|0;S&&P==T||(M[A]=P,S=!1)}this.g=M}var h={};function f(I){return-128<=I&&I<128?o(I,function(T){return new u([T|0],T<0?-1:0)}):new u([I|0],I<0?-1:0)}function m(I){if(isNaN(I)||!isFinite(I))return b;if(I<0)return R(m(-I));const T=[];let M=1;for(let S=0;I>=M;S++)T[S]=I/M|0,M*=4294967296;return new u(T,0)}function x(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return R(x(I.substring(1),T));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(T,8));let S=b;for(let P=0;P<I.length;P+=8){var A=Math.min(8,I.length-P);const D=parseInt(I.substring(P,P+A),T);A<8?(A=m(Math.pow(T,A)),S=S.j(A).add(m(D))):(S=S.j(M),S=S.add(m(D)))}return S}var b=f(0),v=f(1),N=f(16777216);t=u.prototype,t.m=function(){if(V(this))return-R(this).m();let I=0,T=1;for(let M=0;M<this.g.length;M++){const S=this.i(M);I+=(S>=0?S:4294967296+S)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(V(this))return"-"+R(this).toString(I);const T=m(Math.pow(I,6));var M=this;let S="";for(;;){const A=X(M,T).g;M=z(M,A.j(T));let P=((M.g.length>0?M.g[0]:M.h)>>>0).toString(I);if(M=A,E(M))return P+S;for(;P.length<6;)P="0"+P;S=P+S}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(let T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function V(I){return I.h==-1}t.l=function(I){return I=z(this,I),V(I)?-1:E(I)?0:1};function R(I){const T=I.g.length,M=[];for(let S=0;S<T;S++)M[S]=~I.g[S];return new u(M,~I.h).add(v)}t.abs=function(){return V(this)?R(this):this},t.add=function(I){const T=Math.max(this.g.length,I.g.length),M=[];let S=0;for(let A=0;A<=T;A++){let P=S+(this.i(A)&65535)+(I.i(A)&65535),D=(P>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);S=D>>>16,P&=65535,D&=65535,M[A]=D<<16|P}return new u(M,M[M.length-1]&-2147483648?-1:0)};function z(I,T){return I.add(R(T))}t.j=function(I){if(E(this)||E(I))return b;if(V(this))return V(I)?R(this).j(R(I)):R(R(this).j(I));if(V(I))return R(this.j(R(I)));if(this.l(N)<0&&I.l(N)<0)return m(this.m()*I.m());const T=this.g.length+I.g.length,M=[];for(var S=0;S<2*T;S++)M[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<I.g.length;A++){const P=this.i(S)>>>16,D=this.i(S)&65535,re=I.i(A)>>>16,te=I.i(A)&65535;M[2*S+2*A]+=D*te,L(M,2*S+2*A),M[2*S+2*A+1]+=P*te,L(M,2*S+2*A+1),M[2*S+2*A+1]+=D*re,L(M,2*S+2*A+1),M[2*S+2*A+2]+=P*re,L(M,2*S+2*A+2)}for(I=0;I<T;I++)M[I]=M[2*I+1]<<16|M[2*I];for(I=T;I<2*T;I++)M[I]=0;return new u(M,0)};function L(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function H(I,T){this.g=I,this.h=T}function X(I,T){if(E(T))throw Error("division by zero");if(E(I))return new H(b,b);if(V(I))return T=X(R(I),T),new H(R(T.g),R(T.h));if(V(T))return T=X(I,R(T)),new H(R(T.g),T.h);if(I.g.length>30){if(V(I)||V(T))throw Error("slowDivide_ only works with positive integers.");for(var M=v,S=T;S.l(I)<=0;)M=se(M),S=se(S);var A=Y(M,1),P=Y(S,1);for(S=Y(S,2),M=Y(M,2);!E(S);){var D=P.add(S);D.l(I)<=0&&(A=A.add(M),P=D),S=Y(S,1),M=Y(M,1)}return T=z(I,A.j(T)),new H(A,T)}for(A=b;I.l(T)>=0;){for(M=Math.max(1,Math.floor(I.m()/T.m())),S=Math.ceil(Math.log(M)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),P=m(M),D=P.j(T);V(D)||D.l(I)>0;)M-=S,P=m(M),D=P.j(T);E(P)&&(P=v),A=A.add(P),I=z(I,D)}return new H(A,I)}t.B=function(I){return X(this,I).h},t.and=function(I){const T=Math.max(this.g.length,I.g.length),M=[];for(let S=0;S<T;S++)M[S]=this.i(S)&I.i(S);return new u(M,this.h&I.h)},t.or=function(I){const T=Math.max(this.g.length,I.g.length),M=[];for(let S=0;S<T;S++)M[S]=this.i(S)|I.i(S);return new u(M,this.h|I.h)},t.xor=function(I){const T=Math.max(this.g.length,I.g.length),M=[];for(let S=0;S<T;S++)M[S]=this.i(S)^I.i(S);return new u(M,this.h^I.h)};function se(I){const T=I.g.length+1,M=[];for(let S=0;S<T;S++)M[S]=I.i(S)<<1|I.i(S-1)>>>31;return new u(M,I.h)}function Y(I,T){const M=T>>5;T%=32;const S=I.g.length-M,A=[];for(let P=0;P<S;P++)A[P]=T>0?I.i(P+M)>>>T|I.i(P+M+1)<<32-T:I.i(P+M);return new u(A,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Z_=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=x,mi=u}).apply(typeof jw<"u"?jw:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ej,pu,tj,sf,gg,nj,sj,aj;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var w=0;w<p.length;++w){var j=p[w];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var s=n(this);function l(p,w){if(w)e:{var j=s;p=p.split(".");for(var O=0;O<p.length-1;O++){var Q=p[O];if(!(Q in j))break e;j=j[Q]}p=p[p.length-1],O=j[p],w=w(O),w!=O&&w!=null&&e(j,p,{configurable:!0,writable:!0,value:w})}}l("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(p){return p||function(w){var j=[],O;for(O in w)Object.prototype.hasOwnProperty.call(w,O)&&j.push([O,w[O]]);return j}});var o=o||{},u=this||self;function h(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function f(p,w,j){return p.call.apply(p.bind,arguments)}function m(p,w,j){return m=f,m.apply(null,arguments)}function x(p,w){var j=Array.prototype.slice.call(arguments,1);return function(){var O=j.slice();return O.push.apply(O,arguments),p.apply(this,O)}}function b(p,w){function j(){}j.prototype=w.prototype,p.Z=w.prototype,p.prototype=new j,p.prototype.constructor=p,p.Ob=function(O,Q,ne){for(var ve=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ve[Be-2]=arguments[Be];return w.prototype[Q].apply(O,ve)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function N(p){const w=p.length;if(w>0){const j=Array(w);for(let O=0;O<w;O++)j[O]=p[O];return j}return[]}function E(p,w){for(let O=1;O<arguments.length;O++){const Q=arguments[O];var j=typeof Q;if(j=j!="object"?j:Q?Array.isArray(Q)?"array":j:"null",j=="array"||j=="object"&&typeof Q.length=="number"){j=p.length||0;const ne=Q.length||0;p.length=j+ne;for(let ve=0;ve<ne;ve++)p[j+ve]=Q[ve]}else p.push(Q)}}class V{constructor(w,j){this.i=w,this.j=j,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function R(p){u.setTimeout(()=>{throw p},0)}function z(){var p=I;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class L{constructor(){this.h=this.g=null}add(w,j){const O=H.get();O.set(w,j),this.h?this.h.next=O:this.g=O,this.h=O}}var H=new V(()=>new X,p=>p.reset());class X{constructor(){this.next=this.g=this.h=null}set(w,j){this.h=w,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Y=!1,I=new L,T=()=>{const p=Promise.resolve(void 0);se=()=>{p.then(M)}};function M(){for(var p;p=z();){try{p.h.call(p.g)}catch(j){R(j)}var w=H;w.j(p),w.h<100&&(w.h++,p.next=w.g,w.g=p)}Y=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const j=()=>{};u.addEventListener("test",j,w),u.removeEventListener("test",j,w)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function re(p,w){A.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,w)}b(re,A),re.prototype.init=function(p,w){const j=this.type=p.type,O=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget,w||(j=="mouseover"?w=p.fromElement:j=="mouseout"&&(w=p.toElement)),this.relatedTarget=w,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),q=0;function Z(p,w,j,O,Q){this.listener=p,this.proxy=null,this.src=w,this.type=j,this.capture=!!O,this.ha=Q,this.key=++q,this.da=this.fa=!1}function ue(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ye(p,w,j){for(const O in p)w.call(j,p[O],O,p)}function B(p,w){for(const j in p)w.call(void 0,p[j],j,p)}function Se(p){const w={};for(const j in p)w[j]=p[j];return w}const Oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,w){let j,O;for(let Q=1;Q<arguments.length;Q++){O=arguments[Q];for(j in O)p[j]=O[j];for(let ne=0;ne<Oe.length;ne++)j=Oe[ne],Object.prototype.hasOwnProperty.call(O,j)&&(p[j]=O[j])}}function Ie(p){this.src=p,this.g={},this.h=0}Ie.prototype.add=function(p,w,j,O,Q){const ne=p.toString();p=this.g[ne],p||(p=this.g[ne]=[],this.h++);const ve=Ye(p,w,O,Q);return ve>-1?(w=p[ve],j||(w.fa=!1)):(w=new Z(w,this.src,ne,!!O,Q),w.fa=j,p.push(w)),w};function Ge(p,w){const j=w.type;if(j in p.g){var O=p.g[j],Q=Array.prototype.indexOf.call(O,w,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(O,Q,1),ne&&(ue(w),p.g[j].length==0&&(delete p.g[j],p.h--))}}function Ye(p,w,j,O){for(let Q=0;Q<p.length;++Q){const ne=p[Q];if(!ne.da&&ne.listener==w&&ne.capture==!!j&&ne.ha==O)return Q}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),vt={};function gt(p,w,j,O,Q){if(Array.isArray(w)){for(let ne=0;ne<w.length;ne++)gt(p,w[ne],j,O,Q);return null}return j=be(j),p&&p[te]?p.J(w,j,h(O)?!!O.capture:!1,Q):fn(p,w,j,!1,O,Q)}function fn(p,w,j,O,Q,ne){if(!w)throw Error("Invalid event type");const ve=h(Q)?!!Q.capture:!!Q;let Be=Fe(p);if(Be||(p[ot]=Be=new Ie(p)),j=Be.add(w,j,O,ve,ne),j.proxy)return j;if(O=mn(),j.proxy=O,O.src=p,O.listener=j,p.addEventListener)P||(Q=ve),Q===void 0&&(Q=!1),p.addEventListener(w.toString(),O,Q);else if(p.attachEvent)p.attachEvent(ge(w.toString()),O);else if(p.addListener&&p.removeListener)p.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return j}function mn(){function p(j){return w.call(p.src,p.listener,j)}const w=Ae;return p}function wn(p,w,j,O,Q){if(Array.isArray(w))for(var ne=0;ne<w.length;ne++)wn(p,w[ne],j,O,Q);else O=h(O)?!!O.capture:!!O,j=be(j),p&&p[te]?(p=p.i,ne=String(w).toString(),ne in p.g&&(w=p.g[ne],j=Ye(w,j,O,Q),j>-1&&(ue(w[j]),Array.prototype.splice.call(w,j,1),w.length==0&&(delete p.g[ne],p.h--)))):p&&(p=Fe(p))&&(w=p.g[w.toString()],p=-1,w&&(p=Ye(w,j,O,Q)),(j=p>-1?w[p]:null)&&me(j))}function me(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[te])Ge(w.i,p);else{var j=p.type,O=p.proxy;w.removeEventListener?w.removeEventListener(j,O,p.capture):w.detachEvent?w.detachEvent(ge(j),O):w.addListener&&w.removeListener&&w.removeListener(O),(j=Fe(w))?(Ge(j,p),j.h==0&&(j.src=null,w[ot]=null)):ue(p)}}}function ge(p){return p in vt?vt[p]:vt[p]="on"+p}function Ae(p,w){if(p.da)p=!0;else{w=new re(w,this);const j=p.listener,O=p.ha||p.src;p.fa&&me(p),p=j.call(O,w)}return p}function Fe(p){return p=p[ot],p instanceof Ie?p:null}var Kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(p){return typeof p=="function"?p:(p[Kt]||(p[Kt]=function(w){return p.handleEvent(w)}),p[Kt])}function we(){S.call(this),this.i=new Ie(this),this.M=this,this.G=null}b(we,S),we.prototype[te]=!0,we.prototype.removeEventListener=function(p,w,j,O){wn(this,p,w,j,O)};function Te(p,w){var j,O=p.G;if(O)for(j=[];O;O=O.G)j.push(O);if(p=p.M,O=w.type||w,typeof w=="string")w=new A(w,p);else if(w instanceof A)w.target=w.target||p;else{var Q=w;w=new A(O,p),U(w,Q)}Q=!0;let ne,ve;if(j)for(ve=j.length-1;ve>=0;ve--)ne=w.g=j[ve],Q=Qe(ne,O,!0,w)&&Q;if(ne=w.g=p,Q=Qe(ne,O,!0,w)&&Q,Q=Qe(ne,O,!1,w)&&Q,j)for(ve=0;ve<j.length;ve++)ne=w.g=j[ve],Q=Qe(ne,O,!1,w)&&Q}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var p=this.i;for(const w in p.g){const j=p.g[w];for(let O=0;O<j.length;O++)ue(j[O]);delete p.g[w],p.h--}}this.G=null},we.prototype.J=function(p,w,j,O){return this.i.add(String(p),w,!1,j,O)},we.prototype.K=function(p,w,j,O){return this.i.add(String(p),w,!0,j,O)};function Qe(p,w,j,O){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();let Q=!0;for(let ne=0;ne<w.length;++ne){const ve=w[ne];if(ve&&!ve.da&&ve.capture==j){const Be=ve.listener,Ft=ve.ha||ve.src;ve.fa&&Ge(p.i,ve),Q=Be.call(Ft,O)!==!1&&Q}}return Q&&!O.defaultPrevented}function Nn(p,w){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:u.setTimeout(p,w||0)}function on(p){p.g=Nn(()=>{p.g=null,p.i&&(p.i=!1,on(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class Ot extends S{constructor(w,j){super(),this.m=w,this.l=j,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fa(p){S.call(this),this.h=p,this.g={}}b(Fa,S);var le=[];function xe(p){ye(p.g,function(w,j){this.g.hasOwnProperty(j)&&me(w)},p),p.g={}}Fa.prototype.N=function(){Fa.Z.N.call(this),xe(this)},Fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=u.JSON.stringify,Ke=u.JSON.parse,ct=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Rn(){}function vs(){}var Ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){A.call(this,"d")}b(Pt,A);function pn(){A.call(this,"c")}b(pn,A);var at={},Us=null;function Dn(){return Us=Us||new we}at.Ia="serverreachability";function fd(p){A.call(this,at.Ia,p)}b(fd,A);function la(p){const w=Dn();Te(w,new fd(w))}at.STAT_EVENT="statevent";function Ri(p,w){A.call(this,at.STAT_EVENT,p),this.stat=w}b(Ri,A);function Qt(p){const w=Dn();Te(w,new Ri(w,p))}at.Ja="timingevent";function oa(p,w){A.call(this,at.Ja,p),this.size=w}b(oa,A);function ca(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},w)}function Fs(){this.g=!0}Fs.prototype.ua=function(){this.g=!1};function Am(p,w,j,O,Q,ne){p.info(function(){if(p.g)if(ne){var ve="",Be=ne.split("&");for(let ft=0;ft<Be.length;ft++){var Ft=Be[ft].split("=");if(Ft.length>1){const Dt=Ft[0];Ft=Ft[1];const js=Dt.split("_");ve=js.length>=2&&js[1]=="type"?ve+(Dt+"="+Ft+"&"):ve+(Dt+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+O+") [attempt "+Q+"]: "+w+`
`+j+`
`+ve})}function md(p,w,j,O,Q,ne,ve){p.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+Q+"]: "+w+`
`+j+`
`+ne+" "+ve})}function ua(p,w,j,O){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+Cm(p,j)+(O?" "+O:"")})}function Di(p,w){p.info(function(){return"TIMEOUT: "+w})}Fs.prototype.info=function(){};function Cm(p,w){if(!p.g)return w;if(!w)return null;try{const ne=JSON.parse(w);if(ne){for(p=0;p<ne.length;p++)if(Array.isArray(ne[p])){var j=ne[p];if(!(j.length<2)){var O=j[1];if(Array.isArray(O)&&!(O.length<1)){var Q=O[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ve=1;ve<O.length;ve++)O[ve]=""}}}}return Re(ne)}catch{return w}}var Mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oc;function Oi(){}b(Oi,Rn),Oi.prototype.g=function(){return new XMLHttpRequest},oc=new Oi;function Ba(p){return encodeURIComponent(String(p))}function pd(p){var w=1;p=p.split(":");const j=[];for(;w>0&&p.length;)j.push(p.shift()),w--;return p.length&&j.push(p.join(":")),j}function Bs(p,w,j,O){this.j=p,this.i=w,this.l=j,this.S=O||1,this.V=new Fa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qs}function qs(){this.i=null,this.g="",this.h=!1}var Xt={},gn={};function da(p,w,j){p.M=1,p.A=Pi(Jt(w)),p.u=j,p.R=!0,Il(p,null)}function Il(p,w){p.F=Date.now(),ha(p),p.B=Jt(p.A);var j=p.B,O=p.S;Array.isArray(O)||(O=[String(O)]),Ol(j.i,"t",O),p.C=0,j=p.j.L,p.h=new qs,p.g=kd(p.j,j?w:null,!p.u),p.P>0&&(p.O=new Ot(m(p.Y,p,p.g),p.P)),w=p.V,j=p.g,O=p.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(le[0]=Q.toString()),Q=le);for(let ne=0;ne<Q.length;ne++){const ve=gt(j,Q[ne],O||w.handleEvent,!1,w.h||w);if(!ve)break;w.g[ve.key]=ve}w=p.J?Se(p.J):{},p.u?(p.v||(p.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,w)):(p.v="GET",p.g.ea(p.B,p.v,null,w)),la(),Am(p.i,p.v,p.B,p.l,p.S,p.u)}Bs.prototype.ba=function(p){p=p.target;const w=this.O;w&&Gs(p)==3?w.j():this.Y(p)},Bs.prototype.Y=function(p){try{if(p==this.g)e:{const Be=Gs(this.g),Ft=this.g.ya(),ft=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||_n(this.g)))){this.K||Be!=4||Ft==7||(Ft==8||ft<=0?la(3):la(2)),fa(this);var w=this.g.ca();this.X=w;var j=km(this);if(this.o=w==200,md(this.i,this.v,this.B,this.l,this.S,Be,w),this.o){if(this.U&&!this.L){t:{if(this.g){var O,Q=this.g;if((O=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(O)){var ne=O;break t}}ne=null}if(p=ne)ua(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ma(this,p);else{this.o=!1,this.m=3,Qt(12),ls(this),ws(this);break e}}if(this.R){p=!0;let Dt;for(;!this.K&&this.C<j.length;)if(Dt=xd(this,j),Dt==gn){Be==4&&(this.m=4,Qt(14),p=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Xt){this.m=4,Qt(15),ua(this.i,this.l,j,"[Invalid Chunk]"),p=!1;break}else ua(this.i,this.l,Dt,null),ma(this,Dt);if(gd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||j.length!=0||this.h.h||(this.m=1,Qt(16),p=!1),this.o=this.o&&p,!p)ua(this.i,this.l,j,"[Invalid Chunked Response]"),ls(this),ws(this);else if(j.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),_c(ve),ve.P=!0,Qt(11))}}else ua(this.i,this.l,j,null),ma(this,j);Be==4&&ls(this),this.o&&!this.K&&(Be==4?Sd(this.j,this):(this.o=!1,ha(this)))}else Ha(this.g),w==400&&j.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),ls(this),ws(this)}}}catch{}finally{}};function km(p){if(!gd(p))return p.g.la();const w=_n(p.g);if(w==="")return"";let j="";const O=w.length,Q=Gs(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return ls(p),ws(p),"";p.h.i=new u.TextDecoder}for(let ne=0;ne<O;ne++)p.h.h=!0,j+=p.h.i.decode(w[ne],{stream:!(Q&&ne==O-1)});return w.length=0,p.h.g+=j,p.C=0,p.h.g}function gd(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function xd(p,w){var j=p.C,O=w.indexOf(`
`,j);return O==-1?gn:(j=Number(w.substring(j,O)),isNaN(j)?Xt:(O+=1,O+j>w.length?gn:(w=w.slice(O,O+j),p.C=O+j,w)))}Bs.prototype.cancel=function(){this.K=!0,ls(this)};function ha(p){p.T=Date.now()+p.H,Rl(p,p.H)}function Rl(p,w){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ca(m(p.aa,p),w)}function fa(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Bs.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Di(this.i,this.B),this.M!=2&&(la(),Qt(17)),ls(this),this.m=2,ws(this)):Rl(this,this.T-p)};function ws(p){p.j.I==0||p.K||Sd(p.j,p)}function ls(p){fa(p);var w=p.O;w&&typeof w.dispose=="function"&&w.dispose(),p.O=null,xe(p.V),p.g&&(w=p.g,p.g=null,w.abort(),w.dispose())}function ma(p,w){try{var j=p.j;if(j.I!=0&&(j.g==p||ga(j.h,p))){if(!p.L&&ga(j.h,p)&&j.I==3){try{var O=j.Ba.g.parse(w)}catch{O=null}if(Array.isArray(O)&&O.length==3){var Q=O;if(Q[0]==0){e:if(!j.v){if(j.g)if(j.g.F+3e3<p.F)Ul(j),Rr(j);else break e;qi(j),Qt(18)}}else j.xa=Q[1],0<j.xa-j.K&&Q[2]<37500&&j.F&&j.A==0&&!j.C&&(j.C=ca(m(j.Va,j),6e3));pa(j.h)<=1&&j.ta&&(j.ta=void 0)}else Na(j,11)}else if((p.L||j.g==p)&&Ul(j),!D(w))for(Q=j.Ba.g.parse(w),w=0;w<Q.length;w++){let ft=Q[w];const Dt=ft[0];if(!(Dt<=j.K))if(j.K=Dt,ft=ft[1],j.I==2)if(ft[0]=="c"){j.M=ft[1],j.ba=ft[2];const js=ft[3];js!=null&&(j.ka=js,j.j.info("VER="+j.ka));const _a=ft[4];_a!=null&&(j.za=_a,j.j.info("SVER="+j.za));const Ys=ft[5];Ys!=null&&typeof Ys=="number"&&Ys>0&&(O=1.5*Ys,j.O=O,j.j.info("backChannelRequestTimeoutMs_="+O)),O=j;const Ks=p.g;if(Ks){const Hi=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hi){var ne=O.h;ne.g||Hi.indexOf("spdy")==-1&&Hi.indexOf("quic")==-1&&Hi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(dc(ne,ne.h),ne.h=null))}if(O.G){const Fl=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(O.wa=Fl,xt(O.J,O.G,Fl))}}j.I=3,j.l&&j.l.ra(),j.aa&&(j.T=Date.now()-p.F,j.j.info("Handshake RTT: "+j.T+"ms")),O=j;var ve=p;if(O.na=Cd(O,O.L?O.ba:null,O.W),ve.L){hc(O.h,ve);var Be=ve,Ft=O.O;Ft&&(Be.H=Ft),Be.D&&(fa(Be),ha(Be)),O.g=ve}else jd(O);j.i.length>0&&wa(j)}else ft[0]!="stop"&&ft[0]!="close"||Na(j,7);else j.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Na(j,7):wc(j):ft[0]!="noop"&&j.l&&j.l.qa(ft),j.A=0)}}la(4)}catch{}}var Wt=class{constructor(p,w){this.g=p,this.map=w}};function cc(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uc(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function pa(p){return p.h?1:p.g?p.g.size:0}function ga(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function dc(p,w){p.g?p.g.add(w):p.h=w}function hc(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}cc.prototype.cancel=function(){if(this.i=fc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function fc(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const j of p.g.values())w=w.concat(j.G);return w}return N(p.i)}var yd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dl(p,w){if(p){p=p.split("&");for(let j=0;j<p.length;j++){const O=p[j].indexOf("=");let Q,ne=null;O>=0?(Q=p[j].substring(0,O),ne=p[j].substring(O+1)):Q=p[j],w(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function os(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;p instanceof os?(this.l=p.l,xn(this,p.j),this.o=p.o,this.g=p.g,Er(this,p.u),this.h=p.h,mc(this,Nd(p.i)),this.m=p.m):p&&(w=String(p).match(yd))?(this.l=!1,xn(this,w[1]||"",!0),this.o=xa(w[2]||""),this.g=xa(w[3]||"",!0),Er(this,w[4]),this.h=xa(w[5]||"",!0),mc(this,w[6]||"",!0),this.m=xa(w[7]||"")):(this.l=!1,this.i=new Tr(null,this.l))}os.prototype.toString=function(){const p=[];var w=this.j;w&&p.push(Li(w,Ml,!0),":");var j=this.g;return(j||w=="file")&&(p.push("//"),(w=this.o)&&p.push(Li(w,Ml,!0),"@"),p.push(Ba(j).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.u,j!=null&&p.push(":",String(j))),(j=this.h)&&(this.g&&j.charAt(0)!="/"&&p.push("/"),p.push(Li(j,j.charAt(0)=="/"?pc:bd,!0))),(j=this.i.toString())&&p.push("?",j),(j=this.m)&&p.push("#",Li(j,vd)),p.join("")},os.prototype.resolve=function(p){const w=Jt(this);let j=!!p.j;j?xn(w,p.j):j=!!p.o,j?w.o=p.o:j=!!p.g,j?w.g=p.g:j=p.u!=null;var O=p.h;if(j)Er(w,p.u);else if(j=!!p.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(O=w.h.slice(0,Q+1)+O)}if(Q=O,Q==".."||Q==".")O="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){O=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let ve=0;ve<Q.length;){const Be=Q[ve++];Be=="."?O&&ve==Q.length&&ne.push(""):Be==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),O&&ve==Q.length&&ne.push("")):(ne.push(Be),O=!0)}O=ne.join("/")}else O=Q}return j?w.h=O:j=p.i.toString()!=="",j?mc(w,Nd(p.i)):j=!!p.m,j&&(w.m=p.m),w};function Jt(p){return new os(p)}function xn(p,w,j){p.j=j?xa(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function Er(p,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);p.u=w}else p.u=null}function mc(p,w,j){w instanceof Tr?(p.i=w,Pl(p.i,p.l)):(j||(w=Li(w,Sr)),p.i=new Tr(w,p.l))}function xt(p,w,j){p.i.set(w,j)}function Pi(p){return xt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function xa(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Li(p,w,j){return typeof p=="string"?(p=encodeURI(p).replace(w,Yn),j&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Yn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ml=/[#\/\?@]/g,bd=/[#\?:]/g,pc=/[#\?]/g,Sr=/[#\?@]/g,vd=/#/g;function Tr(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function Kn(p){p.g||(p.g=new Map,p.h=0,p.i&&Dl(p.i,function(w,j){p.add(decodeURIComponent(w.replace(/\+/g," ")),j)}))}t=Tr.prototype,t.add=function(p,w){Kn(this),this.i=null,p=Ar(this,p);let j=this.g.get(p);return j||this.g.set(p,j=[]),j.push(w),this.h+=1,this};function wd(p,w){Kn(p),w=Ar(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function gc(p,w){return Kn(p),w=Ar(p,w),p.g.has(w)}t.forEach=function(p,w){Kn(this),this.g.forEach(function(j,O){j.forEach(function(Q){p.call(w,Q,O,this)},this)},this)};function xc(p,w){Kn(p);let j=[];if(typeof w=="string")gc(p,w)&&(j=j.concat(p.g.get(Ar(p,w))));else for(p=Array.from(p.g.values()),w=0;w<p.length;w++)j=j.concat(p[w]);return j}t.set=function(p,w){return Kn(this),this.i=null,p=Ar(this,p),gc(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},t.get=function(p,w){return p?(p=xc(this,p),p.length>0?String(p[0]):w):w};function Ol(p,w,j){wd(p,w),j.length>0&&(p.i=null,p.g.set(Ar(p,w),N(j)),p.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(let O=0;O<w.length;O++){var j=w[O];const Q=Ba(j);j=xc(this,j);for(let ne=0;ne<j.length;ne++){let ve=Q;j[ne]!==""&&(ve+="="+Ba(j[ne])),p.push(ve)}}return this.i=p.join("&")};function Nd(p){const w=new Tr;return w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),w}function Ar(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function Pl(p,w){w&&!p.j&&(Kn(p),p.i=null,p.g.forEach(function(j,O){const Q=O.toLowerCase();O!=Q&&(wd(this,O),Ol(this,Q,j))},p)),p.j=w}function Hs(p,w){const j=new Fs;if(u.Image){const O=new Image;O.onload=x(Ns,j,"TestLoadImage: loaded",!0,w,O),O.onerror=x(Ns,j,"TestLoadImage: error",!1,w,O),O.onabort=x(Ns,j,"TestLoadImage: abort",!1,w,O),O.ontimeout=x(Ns,j,"TestLoadImage: timeout",!1,w,O),u.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=p}else w(!1)}function yc(p,w){const j=new Fs,O=new AbortController,Q=setTimeout(()=>{O.abort(),Ns(j,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:O.signal}).then(ne=>{clearTimeout(Q),ne.ok?Ns(j,"TestPingServer: ok",!0,w):Ns(j,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),Ns(j,"TestPingServer: error",!1,w)})}function Ns(p,w,j,O,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),O(j)}catch{}}function Cr(){this.g=new ct}function ya(p){this.i=p.Sb||null,this.h=p.ab||!1}b(ya,Rn),ya.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(p,w){we.call(this),this.H=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Vi,we),t=Vi.prototype,t.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=w,this.readyState=1,$s(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(w.body=p),(this.H||u).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?kr(this):$s(this),this.readyState==3&&Ll(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,kr(this))},t.Na=function(p){this.g&&(this.response=p,kr(this))},t.ga=function(){this.g&&kr(this)};function kr(p){p.readyState=4,p.l=null,p.j=null,p.B=null,$s(p)}t.setRequestHeader=function(p,w){this.A.append(p,w)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var j=w.next();!j.done;)j=j.value,p.push(j[0]+": "+j[1]),j=w.next();return p.join(`\r
`)};function $s(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function _s(p){let w="";return ye(p,function(j,O){w+=O,w+=":",w+=j,w+=`\r
`}),w}function zi(p,w,j){e:{for(O in j){var O=!1;break e}O=!0}O||(j=_s(j),typeof p=="string"?j!=null&&Ba(j):xt(p,w,j))}function wt(p){we.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(wt,we);var ba=/^https?$/i,bc=["POST","PUT"];t=wt.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,w,j,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oc.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(ne){Ui(this,ne);return}if(p=j||"",j=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var Q in O)j.set(Q,O[Q]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ne of O.keys())j.set(ne,O.get(ne));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(j.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(bc,w,void 0)>=0)||O||Q||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of j)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ne){Ui(this,ne)}};function Ui(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.o=5,vc(p),qa(p)}function vc(p){p.A||(p.A=!0,Te(p,"complete"),Te(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Te(this,"complete"),Te(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Fi(this):this.Xa())},t.Xa=function(){Fi(this)};function Fi(p){if(p.h&&typeof o<"u"){if(p.v&&Gs(p)==4)setTimeout(p.Ca.bind(p),0);else if(Te(p,"readystatechange"),Gs(p)==4){p.h=!1;try{const ne=p.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var j;if(!(j=w)){var O;if(O=ne===0){let ve=String(p.D).match(yd)[1]||null;!ve&&u.self&&u.self.location&&(ve=u.self.location.protocol.slice(0,-1)),O=!ba.test(ve?ve.toLowerCase():"")}j=O}if(j)Te(p,"complete"),Te(p,"success");else{p.o=6;try{var Q=Gs(p)>2?p.g.statusText:""}catch{Q=""}p.l=Q+" ["+p.ca()+"]",vc(p)}}finally{qa(p)}}}}function qa(p,w){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const j=p.g;p.g=null,w||Te(p,"ready");try{j.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gs(p){return p.g?p.g.readyState:0}t.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),Ke(w)}};function _n(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(p){const w={};p=(p.g&&Gs(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<p.length;O++){if(D(p[O]))continue;var j=pd(p[O]);const Q=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ne=w[Q]||[];w[Q]=ne,ne.push(j)}B(w,function(O){return O.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(p,w,j){return j&&j.internalChannelParams&&j.internalChannelParams[p]||w}function Ir(p){this.za=0,this.i=[],this.j=new Fs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=va("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=va("baseRetryDelayMs",5e3,p),this.Za=va("retryDelaySeedMs",1e4,p),this.Ta=va("forwardChannelMaxRetries",2,p),this.va=va("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new cc(p&&p.concurrentRequestLimit),this.Ba=new Cr,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ir.prototype,t.ka=8,t.I=1,t.connect=function(p,w,j,O){Qt(0),this.W=p,this.H=w||{},j&&O!==void 0&&(this.H.OSID=j,this.H.OAID=O),this.F=this.X,this.J=Cd(this,null,this.W),wa(this)};function wc(p){if(Vl(p),p.I==3){var w=p.V++,j=Jt(p.J);if(xt(j,"SID",p.M),xt(j,"RID",w),xt(j,"TYPE","terminate"),Bi(p,j),w=new Bs(p,p.j,w),w.M=2,w.A=Pi(Jt(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(w.A.toString(),"")}catch{}!j&&u.Image&&(new Image().src=w.A,j=!0),j||(w.g=kd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),ha(w)}Ad(p)}function Rr(p){p.g&&(_c(p),p.g.cancel(),p.g=null)}function Vl(p){Rr(p),p.v&&(u.clearTimeout(p.v),p.v=null),Ul(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function wa(p){if(!uc(p.h)&&!p.m){p.m=!0;var w=p.Ea;se||T(),Y||(se(),Y=!0),I.add(w,p),p.D=0}}function zl(p,w){return pa(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=w.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ca(m(p.Ea,p,w),Td(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const Q=new Bs(this,this.j,p);let ne=this.o;if(this.U&&(ne?(ne=Se(ne),U(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var w=0,j=0;j<this.i.length;j++){t:{var O=this.i[j];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(w+=O,w>4096){w=j;break e}if(w===4096||j===this.i.length-1){w=j+1;break e}}w=1e3}else w=1e3;w=_d(this,Q,w),j=Jt(this.J),xt(j,"RID",p),xt(j,"CVER",22),this.G&&xt(j,"X-HTTP-Session-Id",this.G),Bi(this,j),ne&&(this.R?w="headers="+Ba(_s(ne))+"&"+w:this.u&&zi(j,this.u,ne)),dc(this.h,Q),this.Ra&&xt(j,"TYPE","init"),this.S?(xt(j,"$req",w),xt(j,"SID","null"),Q.U=!0,da(Q,j,null)):da(Q,j,w),this.I=2}}else this.I==3&&(p?Nc(this,p):this.i.length==0||uc(this.h)||Nc(this))};function Nc(p,w){var j;w?j=w.l:j=p.V++;const O=Jt(p.J);xt(O,"SID",p.M),xt(O,"RID",j),xt(O,"AID",p.K),Bi(p,O),p.u&&p.o&&zi(O,p.u,p.o),j=new Bs(p,p.j,j,p.D+1),p.u===null&&(j.J=p.o),w&&(p.i=w.G.concat(p.i)),w=_d(p,j,1e3),j.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),dc(p.h,j),da(j,O,w)}function Bi(p,w){p.H&&ye(p.H,function(j,O){xt(w,O,j)}),p.l&&ye({},function(j,O){xt(w,O,j)})}function _d(p,w,j){j=Math.min(p.i.length,j);const O=p.l?m(p.l.Ka,p.l,p):null;e:{var Q=p.i;let Be=-1;for(;;){const Ft=["count="+j];Be==-1?j>0?(Be=Q[0].g,Ft.push("ofs="+Be)):Be=0:Ft.push("ofs="+Be);let ft=!0;for(let Dt=0;Dt<j;Dt++){var ne=Q[Dt].g;const js=Q[Dt].map;if(ne-=Be,ne<0)Be=Math.max(0,Q[Dt].g-100),ft=!1;else try{ne="req"+ne+"_"||"";try{var ve=js instanceof Map?js:Object.entries(js);for(const[_a,Ys]of ve){let Ks=Ys;h(Ys)&&(Ks=Re(Ys)),Ft.push(ne+_a+"="+encodeURIComponent(Ks))}}catch(_a){throw Ft.push(ne+"type="+encodeURIComponent("_badmap")),_a}}catch{O&&O(js)}}if(ft){ve=Ft.join("&");break e}}ve=void 0}return p=p.i.splice(0,j),w.G=p,ve}function jd(p){if(!p.g&&!p.v){p.Y=1;var w=p.Da;se||T(),Y||(se(),Y=!0),I.add(w,p),p.A=0}}function qi(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ca(m(p.Da,p),Td(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,Ed(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ca(m(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Rr(this),Ed(this))};function _c(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function Ed(p){p.g=new Bs(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var w=Jt(p.na);xt(w,"RID","rpc"),xt(w,"SID",p.M),xt(w,"AID",p.K),xt(w,"CI",p.F?"0":"1"),!p.F&&p.ia&&xt(w,"TO",p.ia),xt(w,"TYPE","xmlhttp"),Bi(p,w),p.u&&p.o&&zi(w,p.u,p.o),p.O&&(p.g.H=p.O);var j=p.g;p=p.ba,j.M=1,j.A=Pi(Jt(w)),j.u=null,j.R=!0,Il(j,p)}t.Va=function(){this.C!=null&&(this.C=null,Rr(this),qi(this),Qt(19))};function Ul(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Sd(p,w){var j=null;if(p.g==w){Ul(p),_c(p),p.g=null;var O=2}else if(ga(p.h,w))j=w.G,hc(p.h,w),O=1;else return;if(p.I!=0){if(w.o)if(O==1){j=w.u?w.u.length:0,w=Date.now()-w.F;var Q=p.D;O=Dn(),Te(O,new oa(O,j)),wa(p)}else jd(p);else if(Q=w.m,Q==3||Q==0&&w.X>0||!(O==1&&zl(p,w)||O==2&&qi(p)))switch(j&&j.length>0&&(w=p.h,w.i=w.i.concat(j)),Q){case 1:Na(p,5);break;case 4:Na(p,10);break;case 3:Na(p,6);break;default:Na(p,2)}}}function Td(p,w){let j=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(j*=2),j*w}function Na(p,w){if(p.j.info("Error code "+w),w==2){var j=m(p.bb,p),O=p.Ua;const Q=!O;O=new os(O||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xn(O,"https"),Pi(O),Q?Hs(O.toString(),j):yc(O.toString(),j)}else Qt(2);p.I=0,p.l&&p.l.pa(w),Ad(p),Vl(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Ad(p){if(p.I=0,p.ja=[],p.l){const w=fc(p.h);(w.length!=0||p.i.length!=0)&&(E(p.ja,w),E(p.ja,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.oa()}}function Cd(p,w,j){var O=j instanceof os?Jt(j):new os(j);if(O.g!="")w&&(O.g=w+"."+O.g),Er(O,O.u);else{var Q=u.location;O=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new os(null);O&&xn(ne,O),w&&(ne.g=w),Q&&Er(ne,Q),j&&(ne.h=j),O=ne}return j=p.G,w=p.wa,j&&w&&xt(O,j,w),xt(O,"VER",p.ka),Bi(p,O),O}function kd(p,w,j){if(w&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Aa&&!p.ma?new wt(new ya({ab:j})):new wt(p.ma),w.Fa(p.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Id(){}t=Id.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Dr(){}Dr.prototype.g=function(p,w){return new qn(p,w)};function qn(p,w){we.call(this),this.g=new Ir(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(p?p["X-WebChannel-Client-Profile"]=w.sa:p={"X-WebChannel-Client-Profile":w.sa}),this.g.U=p,(p=w&&w.Qb)&&!D(p)&&(this.g.u=p),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!D(w)&&(this.g.G=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new $a(this)}b(qn,we),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){wc(this.g)},qn.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var j={};j.__data__=p,p=j}else this.v&&(j={},j.__data__=Re(p),p=j);w.i.push(new Wt(w.Ya++,p)),w.I==3&&wa(w)},qn.prototype.N=function(){this.g.l=null,delete this.j,wc(this.g),delete this.g,qn.Z.N.call(this)};function Rd(p){Pt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const j in w){p=j;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}b(Rd,Pt);function Dd(){pn.call(this),this.status=1}b(Dd,pn);function $a(p){this.g=p}b($a,Id),$a.prototype.ra=function(){Te(this.g,"a")},$a.prototype.qa=function(p){Te(this.g,new Rd(p))},$a.prototype.pa=function(p){Te(this.g,new Dd)},$a.prototype.oa=function(){Te(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,aj=function(){return new Dr},sj=function(){return Dn()},nj=at,gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,sf=Mi,lc.COMPLETE="complete",tj=lc,vs.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",we.prototype.listen=we.prototype.J,pu=vs,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,ej=wt}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const Ew="@firebase/firestore",Sw="4.9.2";class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");let Xo="12.3.0";const gl=new tx("@firebase/firestore");function No(){return gl.logLevel}function _e(t,...e){if(gl.logLevel<=tt.DEBUG){const n=e.map(mx);gl.debug(`Firestore (${Xo}): ${t}`,...n)}}function xr(t,...e){if(gl.logLevel<=tt.ERROR){const n=e.map(mx);gl.error(`Firestore (${Xo}): ${t}`,...n)}}function Lo(t,...e){if(gl.logLevel<=tt.WARN){const n=e.map(mx);gl.warn(`Firestore (${Xo}): ${t}`,...n)}}function mx(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Le(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,rj(t,s,n)}function rj(t,e,n){let s=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xr(s),new Error(s)}function pt(t,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,t||rj(e,l,s)}function ze(t,e){return t}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ij{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(On.UNAUTHENTICATED)))}shutdown(){}}class UR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FR{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0,42304);let s=this.i;const l=f=>this.i!==s?(s=this.i,n(f)):Promise.resolve();let o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable((()=>l(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await l(this.currentUser)}))},h=f=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt(typeof s.accessToken=="string",31837,{l:s}),new ij(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class BR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new BR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pt(this.o===void 0,3512);const s=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const l=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>l(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?l(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $R(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class px{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=$R(40);for(let o=0;o<l.length;++o)s.length<20&&l[o]<n&&(s+=e.charAt(l[o]%62))}return s}}function nt(t,e){return t<e?-1:t>e?1:0}function xg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const l=t.charAt(s),o=e.charAt(s);if(l!==o)return M0(l)===M0(o)?nt(l,o):M0(l)?1:-1}return nt(t.length,e.length)}const GR=55296,YR=57343;function M0(t){const e=t.charCodeAt(0);return e>=GR&&e<=YR}function Vo(t,e,n){return t.length===e.length&&t.every(((s,l)=>n(s,e[l])))}const Aw="__name__";class Ca{constructor(e,n,s){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const o=Ca.compareSegments(e.get(l),n.get(l));if(o!==0)return o}return nt(e.length,n.length)}static compareSegments(e,n){const s=Ca.isNumericId(e),l=Ca.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Ca.extractNumericId(e).compare(Ca.extractNumericId(n)):xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mi.fromString(e.substring(4,e.length-2))}}class Ct extends Ca{construct(e,n,s){return new Ct(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Ct(n)}static emptyPath(){return new Ct([])}}const KR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends Ca{construct(e,n,s){return new Cn(e,n,s)}static isValidIdentifier(e){return KR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Aw}static keyField(){return new Cn([Aw])}static fromServerFormat(e){const n=[];let s="",l=0;const o=()=>{if(s.length===0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;l<e.length;){const h=e[l];if(h==="\\"){if(l+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[l+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,l+=2}else h==="`"?(u=!u,l++):h!=="."||u?(s+=h,l++):(o(),l++)}if(o(),u)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Ct.fromString(e))}static fromName(e){return new ke(Ct.fromString(e).popFirst(5))}static empty(){return new ke(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Ct(e.slice()))}}function lj(t,e,n){if(!n)throw new Ne(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QR(t,e,n,s){if(e===!0&&s===!0)throw new Ne(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cw(t){if(!ke.isDocumentKey(t))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kw(t){if(ke.isDocumentKey(t))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function tm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le(12329,{type:typeof t})}function sa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tm(t);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XR(t,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function ln(t,e){const n={typeString:t};return e&&(n.value=e),n}function nd(t,e){if(!oj(t))throw new Ne(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const u=t[s];if(l&&typeof u!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${s}' field to equal '${o.value}'`;break}}if(n)throw new Ne(ce.INVALID_ARGUMENT,n);return!0}const Iw=-62135596800,Rw=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Rw);return new Rt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Iw)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rw}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nd(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:ln("string",Rt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Rt(0,0))}static max(){return new Ve(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ou=-1;function WR(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new Rt(n+1,0):new Rt(n,s));return new vi(l,ke.empty(),e)}function JR(t){return new vi(t.readTime,t.key,Ou)}class vi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new vi(Ve.min(),ke.empty(),Ou)}static max(){return new vi(Ve.max(),ke.empty(),Ou)}}function ZR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}const e6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wo(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==e6)throw t;_e("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((s,l)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,l)},this.catchCallback=o=>{this.wrapFailure(n,o).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,s)=>{n(e)}))}static reject(e){return new fe(((n,s)=>{s(e)}))}static waitFor(e){return new fe(((n,s)=>{let l=0,o=0,u=!1;e.forEach((h=>{++l,h.next((()=>{++o,u&&o===l&&n()}),(f=>s(f)))})),u=!0,o===l&&n()}))}static or(e){let n=fe.resolve(!1);for(const s of e)n=n.next((l=>l?fe.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,o)=>{s.push(n.call(this,l,o))})),this.waitFor(s)}static mapArray(e,n){return new fe(((s,l)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;n(e[m]).next((x=>{u[m]=x,++h,h===o&&s(u)}),(x=>l(x)))}}))}static doWhile(e,n){return new fe(((s,l)=>{const o=()=>{e()===!0?n().next((()=>{o()}),l):s()};o()}))}}function n6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(t){return t.name==="IndexedDbTransactionError"}class nm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nm.ce=-1;const gx=-1;function sm(t){return t==null}function jf(t){return t===0&&1/t==-1/0}function s6(t){return typeof t=="number"&&Number.isInteger(t)&&!jf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const cj="";function a6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Dw(e)),e=r6(t.get(n),e);return Dw(e)}function r6(t,e){let n=e;const s=t.length;for(let l=0;l<s;l++){const o=t.charAt(l);switch(o){case"\0":n+="";break;case cj:n+="";break;default:n+=o}}return n}function Dw(t){return t+cj+""}function Mw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Lt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?s(e.key,n):1,n&&l&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,s,l,o){this.key=e,this.value=n,this.color=s??An.RED,this.left=l??An.EMPTY,this.right=o??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,o){return new An(e??this.key,n??this.value,s??this.color,l??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const o=s(e,l.key);return l=o<0?l.copy(null,null,null,l.left.insert(e,n,s),null):o===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return An.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,s,l,o){return this}insert(e,n,s){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ow(this.data.getIterator())}getIteratorFrom(e){return new Ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,o=s.getNext().key;if(this.comparator(l,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class Ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ys{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new ys([])}unionWith(e){let n=new un(Cn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ys(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class dj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dj("Invalid base64 string: "+o):o}})(e);return new kn(n)}static fromUint8Array(e){const n=(function(l){let o="";for(let u=0;u<l.length;++u)o+=String.fromCharCode(l[u]);return o})(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const i6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(t){if(pt(!!t,39018),typeof t=="string"){let e=0;const n=i6.exec(t);if(pt(!!n,46558,{timestamp:t}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ni(t){return typeof t=="string"?kn.fromBase64String(t):kn.fromUint8Array(t)}const hj="server_timestamp",fj="__type__",mj="__previous_value__",pj="__local_write_time__";function xx(t){return(t?.mapValue?.fields||{})[fj]?.stringValue===hj}function am(t){const e=t.mapValue.fields[mj];return xx(e)?am(e):e}function Pu(t){const e=wi(t.mapValue.fields[pj].timestampValue);return new Rt(e.seconds,e.nanos)}class l6{constructor(e,n,s,l,o,u,h,f,m,x){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=x}}const Ef="(default)";class Lu{constructor(e,n){this.projectId=e,this.database=n||Ef}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}const gj="__type__",o6="__max__",Uh={mapValue:{}},xj="__vector__",Sf="value";function _i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xx(t)?4:u6(t)?9007199254740991:c6(t)?10:11:Le(28295,{value:t})}function za(t,e){if(t===e)return!0;const n=_i(t);if(n!==_i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pu(t).isEqual(Pu(e));case 3:return(function(l,o){if(typeof l.timestampValue=="string"&&typeof o.timestampValue=="string"&&l.timestampValue.length===o.timestampValue.length)return l.timestampValue===o.timestampValue;const u=wi(l.timestampValue),h=wi(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(l,o){return Ni(l.bytesValue).isEqual(Ni(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(l,o){return Ht(l.geoPointValue.latitude)===Ht(o.geoPointValue.latitude)&&Ht(l.geoPointValue.longitude)===Ht(o.geoPointValue.longitude)})(t,e);case 2:return(function(l,o){if("integerValue"in l&&"integerValue"in o)return Ht(l.integerValue)===Ht(o.integerValue);if("doubleValue"in l&&"doubleValue"in o){const u=Ht(l.doubleValue),h=Ht(o.doubleValue);return u===h?jf(u)===jf(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],za);case 10:case 11:return(function(l,o){const u=l.mapValue.fields||{},h=o.mapValue.fields||{};if(Mw(u)!==Mw(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!za(u[f],h[f])))return!1;return!0})(t,e);default:return Le(52216,{left:t})}}function Vu(t,e){return(t.values||[]).find((n=>za(n,e)))!==void 0}function zo(t,e){if(t===e)return 0;const n=_i(t),s=_i(e);if(n!==s)return nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=Ht(o.integerValue||o.doubleValue),f=Ht(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(t,e);case 3:return Pw(t.timestampValue,e.timestampValue);case 4:return Pw(Pu(t),Pu(e));case 5:return xg(t.stringValue,e.stringValue);case 6:return(function(o,u){const h=Ni(o),f=Ni(u);return h.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const x=nt(h[m],f[m]);if(x!==0)return x}return nt(h.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=nt(Ht(o.latitude),Ht(u.latitude));return h!==0?h:nt(Ht(o.longitude),Ht(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Lw(t.arrayValue,e.arrayValue);case 10:return(function(o,u){const h=o.fields||{},f=u.fields||{},m=h[Sf]?.arrayValue,x=f[Sf]?.arrayValue,b=nt(m?.values?.length||0,x?.values?.length||0);return b!==0?b:Lw(m,x)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Uh.mapValue&&u===Uh.mapValue)return 0;if(o===Uh.mapValue)return 1;if(u===Uh.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=u.fields||{},x=Object.keys(m);f.sort(),x.sort();for(let b=0;b<f.length&&b<x.length;++b){const v=xg(f[b],x[b]);if(v!==0)return v;const N=zo(h[f[b]],m[x[b]]);if(N!==0)return N}return nt(f.length,x.length)})(t.mapValue,e.mapValue);default:throw Le(23264,{he:n})}}function Pw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=wi(t),s=wi(e),l=nt(n.seconds,s.seconds);return l!==0?l:nt(n.nanos,s.nanos)}function Lw(t,e){const n=t.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const o=zo(n[l],s[l]);if(o)return o}return nt(n.length,s.length)}function Uo(t){return yg(t)}function yg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=wi(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ni(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ke.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",l=!0;for(const o of n.values||[])l?l=!1:s+=",",s+=yg(o);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",o=!0;for(const u of s)o?o=!1:l+=",",l+=`${u}:${yg(n.fields[u])}`;return l+"}"})(t.mapValue):Le(61005,{value:t})}function af(t){switch(_i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=am(t);return e?16+af(e):16;case 5:return 2*t.stringValue.length;case 6:return Ni(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,o)=>l+af(o)),0)})(t.arrayValue);case 10:case 11:return(function(s){let l=0;return Ai(s.fields,((o,u)=>{l+=o.length+af(u)})),l})(t.mapValue);default:throw Le(13486,{value:t})}}function Vw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function yx(t){return!!t&&"arrayValue"in t}function zw(t){return!!t&&"nullValue"in t}function Uw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rf(t){return!!t&&"mapValue"in t}function c6(t){return(t?.mapValue?.fields||{})[gj]?.stringValue===xj}function wu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=wu(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return{...t}}function u6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===o6}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!rf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=Cn.emptyPath(),s={},l=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,s,l),s={},l=[],n=h.popLast()}u?s[h.lastSegment()]=wu(u):l.push(h.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,s,l)}delete(e){const n=this.field(e.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return za(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];rf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){Ai(n,((l,o)=>e[l]=o));for(const l of s)delete e[l]}clone(){return new ns(wu(this.value))}}function yj(t){const e=[];return Ai(t.fields,((n,s)=>{const l=new Cn([n]);if(rf(s)){const o=yj(s.mapValue).fields;if(o.length===0)e.push(l);else for(const u of o)e.push(l.child(u))}else e.push(l)})),new ys(e)}class Pn{constructor(e,n,s,l,o,u,h){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Pn(e,0,Ve.min(),Ve.min(),Ve.min(),ns.empty(),0)}static newFoundDocument(e,n,s,l){return new Pn(e,1,n,Ve.min(),s,l,0)}static newNoDocument(e,n){return new Pn(e,2,n,Ve.min(),Ve.min(),ns.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Ve.min(),Ve.min(),ns.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tf{constructor(e,n){this.position=e,this.inclusive=n}}function Fw(t,e,n){let s=0;for(let l=0;l<t.position.length;l++){const o=e[l],u=t.position[l];if(o.field.isKeyField()?s=ke.comparator(ke.fromName(u.referenceValue),n.key):s=zo(u,n.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function Bw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!za(t.position[n],e.position[n]))return!1;return!0}class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function d6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class bj{}class rn extends bj{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new f6(e,n,s):n==="array-contains"?new g6(e,s):n==="in"?new x6(e,s):n==="not-in"?new y6(e,s):n==="array-contains-any"?new b6(e,s):new rn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new m6(e,s):new p6(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zo(n,this.value)):n!==null&&_i(this.value)===_i(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class aa extends bj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new aa(e,n)}matches(e){return vj(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vj(t){return t.op==="and"}function wj(t){return h6(t)&&vj(t)}function h6(t){for(const e of t.filters)if(e instanceof aa)return!1;return!0}function vg(t){if(t instanceof rn)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(wj(t))return t.filters.map((e=>vg(e))).join(",");{const e=t.filters.map((n=>vg(n))).join(",");return`${t.op}(${e})`}}function Nj(t,e){return t instanceof rn?(function(s,l){return l instanceof rn&&s.op===l.op&&s.field.isEqual(l.field)&&za(s.value,l.value)})(t,e):t instanceof aa?(function(s,l){return l instanceof aa&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((o,u,h)=>o&&Nj(u,l.filters[h])),!0):!1})(t,e):void Le(19439)}function _j(t){return t instanceof rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`})(t):t instanceof aa?(function(n){return n.op.toString()+" {"+n.getFilters().map(_j).join(" ,")+"}"})(t):"Filter"}class f6 extends rn{constructor(e,n,s){super(e,n,s),this.key=ke.fromName(s.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class m6 extends rn{constructor(e,n){super(e,"in",n),this.keys=jj("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class p6 extends rn{constructor(e,n){super(e,"not-in",n),this.keys=jj("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function jj(t,e){return(e.arrayValue?.values||[]).map((n=>ke.fromName(n.referenceValue)))}class g6 extends rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yx(n)&&Vu(n.arrayValue,this.value)}}class x6 extends rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vu(this.value.arrayValue,n)}}class y6 extends rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vu(this.value.arrayValue,n)}}class b6 extends rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Vu(this.value.arrayValue,s)))}}class v6{constructor(e,n=null,s=[],l=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function qw(t,e=null,n=[],s=[],l=null,o=null,u=null){return new v6(t,e,n,s,l,o,u)}function bx(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>vg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),sm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Uo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Uo(s))).join(",")),e.Te=n}return e.Te}function vx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bw(t.startAt,e.startAt)&&Bw(t.endAt,e.endAt)}function wg(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Zo{constructor(e,n=null,s=[],l=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function w6(t,e,n,s,l,o,u,h){return new Zo(t,e,n,s,l,o,u,h)}function wx(t){return new Zo(t)}function Hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ej(t){return t.collectionGroup!==null}function Nu(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new un(Cn.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zu(o,s))})),n.has(Cn.keyField().canonicalString())||e.Ie.push(new zu(Cn.keyField(),s))}return e.Ie}function Ma(t){const e=ze(t);return e.Ee||(e.Ee=N6(e,Nu(t))),e.Ee}function N6(t,e){if(t.limitType==="F")return qw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((l=>{const o=l.dir==="desc"?"asc":"desc";return new zu(l.field,o)}));const n=t.endAt?new Tf(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Tf(t.startAt.position,t.startAt.inclusive):null;return qw(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ng(t,e){const n=t.filters.concat([e]);return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,n){return new Zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rm(t,e){return vx(Ma(t),Ma(e))&&t.limitType===e.limitType}function Sj(t){return`${bx(Ma(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>_j(l))).join(", ")}]`),sm(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Uo(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Uo(l))).join(",")),`Target(${s})`})(Ma(t))}; limitType=${t.limitType})`}function im(t,e){return e.isFoundDocument()&&(function(s,l){const o=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):ke.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(t,e)&&(function(s,l){for(const o of Nu(s))if(!o.field.isKeyField()&&l.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(s,l){for(const o of s.filters)if(!o.matches(l))return!1;return!0})(t,e)&&(function(s,l){return!(s.startAt&&!(function(u,h,f){const m=Fw(u,h,f);return u.inclusive?m<=0:m<0})(s.startAt,Nu(s),l)||s.endAt&&!(function(u,h,f){const m=Fw(u,h,f);return u.inclusive?m>=0:m>0})(s.endAt,Nu(s),l))})(t,e)}function _6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Tj(t){return(e,n)=>{let s=!1;for(const l of Nu(t)){const o=j6(l,e,n);if(o!==0)return o;s=s||l.field.isKeyField()}return 0}}function j6(t,e,n){const s=t.field.isKeyField()?ke.comparator(e.key,n.key):(function(o,u,h){const f=u.data.field(o),m=h.data.field(o);return f!==null&&m!==null?zo(f,m):Le(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Le(19790,{direction:t.dir})}}class jl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,o]of s)if(this.equalsFn(l,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let o=0;o<l.length;o++)if(this.equalsFn(l[o][0],e))return void(l[o]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,((n,s)=>{for(const[l,o]of s)e(l,o)}))}isEmpty(){return uj(this.inner)}size(){return this.innerSize}}const E6=new Lt(ke.comparator);function yr(){return E6}const Aj=new Lt(ke.comparator);function gu(...t){let e=Aj;for(const n of t)e=e.insert(n.key,n);return e}function Cj(t){let e=Aj;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function dl(){return _u()}function kj(){return _u()}function _u(){return new jl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const S6=new Lt(ke.comparator),T6=new un(ke.comparator);function st(...t){let e=T6;for(const n of t)e=e.add(n);return e}const A6=new un(nt);function C6(){return A6}function Nx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jf(e)?"-0":e}}function Ij(t){return{integerValue:""+t}}function k6(t,e){return s6(e)?Ij(e):Nx(t,e)}class lm{constructor(){this._=void 0}}function I6(t,e,n){return t instanceof Uu?(function(l,o){const u={fields:{[fj]:{stringValue:hj},[pj]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return o&&xx(o)&&(o=am(o)),o&&(u.fields[mj]=o),{mapValue:u}})(n,e):t instanceof Fo?Dj(t,e):t instanceof Fu?Mj(t,e):(function(l,o){const u=Rj(l,o),h=$w(u)+$w(l.Ae);return bg(u)&&bg(l.Ae)?Ij(h):Nx(l.serializer,h)})(t,e)}function R6(t,e,n){return t instanceof Fo?Dj(t,e):t instanceof Fu?Mj(t,e):n}function Rj(t,e){return t instanceof Cf?(function(s){return bg(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class Uu extends lm{}class Fo extends lm{constructor(e){super(),this.elements=e}}function Dj(t,e){const n=Oj(e);for(const s of t.elements)n.some((l=>za(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Fu extends lm{constructor(e){super(),this.elements=e}}function Mj(t,e){let n=Oj(e);for(const s of t.elements)n=n.filter((l=>!za(l,s)));return{arrayValue:{values:n}}}class Cf extends lm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $w(t){return Ht(t.integerValue||t.doubleValue)}function Oj(t){return yx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Pj{constructor(e,n){this.field=e,this.transform=n}}function D6(t,e){return t.field.isEqual(e.field)&&(function(s,l){return s instanceof Fo&&l instanceof Fo||s instanceof Fu&&l instanceof Fu?Vo(s.elements,l.elements,za):s instanceof Cf&&l instanceof Cf?za(s.Ae,l.Ae):s instanceof Uu&&l instanceof Uu})(t.transform,e.transform)}class M6{constructor(e,n){this.version=e,this.transformResults=n}}class Os{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class om{}function Lj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _x(t.key,Os.none()):new sd(t.key,t.data,Os.none());{const n=t.data,s=ns.empty();let l=new un(Cn.comparator);for(let o of e.fields)if(!l.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?s.delete(o):s.set(o,u),l=l.add(o)}return new Ci(t.key,s,new ys(l.toArray()),Os.none())}}function O6(t,e,n){t instanceof sd?(function(l,o,u){const h=l.value.clone(),f=Yw(l.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Ci?(function(l,o,u){if(!lf(l.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Yw(l.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(Vj(l)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):(function(l,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ju(t,e,n,s){return t instanceof sd?(function(o,u,h,f){if(!lf(o.precondition,u))return h;const m=o.value.clone(),x=Kw(o.fieldTransforms,f,u);return m.setAll(x),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(t,e,n,s):t instanceof Ci?(function(o,u,h,f){if(!lf(o.precondition,u))return h;const m=Kw(o.fieldTransforms,f,u),x=u.data;return x.setAll(Vj(o)),x.setAll(m),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,s):(function(o,u,h){return lf(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function P6(t,e){let n=null;for(const s of t.fieldTransforms){const l=e.data.field(s.field),o=Rj(s.transform,l||null);o!=null&&(n===null&&(n=ns.empty()),n.set(s.field,o))}return n||null}function Gw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Vo(s,l,((o,u)=>D6(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sd extends om{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Ci extends om{constructor(e,n,s,l,o=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Vj(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Yw(t,e,n){const s=new Map;pt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let l=0;l<n.length;l++){const o=t[l],u=o.transform,h=e.data.field(o.field);s.set(o.field,R6(u,h,n[l]))}return s}function Kw(t,e,n){const s=new Map;for(const l of t){const o=l.transform,u=n.data.field(l.field);s.set(l.field,I6(o,u,e))}return s}class _x extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L6 extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class V6{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const o=this.mutations[l];o.key.isEqual(e.key)&&O6(o,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ju(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ju(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=kj();return this.mutations.forEach((l=>{const o=e.get(l.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=n.has(l.key)?null:h;const f=Lj(u,h);f!==null&&s.set(l.key,f),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),st())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((n,s)=>Gw(n,s)))&&Vo(this.baseMutations,e.baseMutations,((n,s)=>Gw(n,s)))}}class jx{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return S6})();const o=e.mutations;for(let u=0;u<o.length;u++)l=l.insert(o[u].key,s[u].version);return new jx(e,n,s,l)}}class z6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class U6{constructor(e,n){this.count=e,this.unchangedNames=n}}var sn,it;function F6(t){switch(t){case ce.OK:return Le(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Le(15467,{code:t})}}function zj(t){if(t===void 0)return xr("GRPC error has no .code"),ce.UNKNOWN;switch(t){case sn.OK:return ce.OK;case sn.CANCELLED:return ce.CANCELLED;case sn.UNKNOWN:return ce.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ce.INTERNAL;case sn.UNAVAILABLE:return ce.UNAVAILABLE;case sn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case sn.NOT_FOUND:return ce.NOT_FOUND;case sn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case sn.ABORTED:return ce.ABORTED;case sn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case sn.DATA_LOSS:return ce.DATA_LOSS;default:return Le(39323,{code:t})}}(it=sn||(sn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";function B6(){return new TextEncoder}const q6=new mi([4294967295,4294967295],0);function Qw(t){const e=B6().encode(t),n=new Z_;return n.update(e),new Uint8Array(n.digest())}function Xw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mi([n,s],0),new mi([l,o],0)]}class Ex{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new xu(`Invalid padding: ${n}`);if(s<0)throw new xu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new xu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mi.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(mi.fromNumber(s)));return l.compare(q6)===1&&(l=new mi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qw(e),[s,l]=Xw(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,l,o);if(!this.we(u))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Ex(o,l,n);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=Qw(e),[s,l]=Xw(n);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,l,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cm{constructor(e,n,s,l,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,ad.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new cm(Ve.min(),l,new Lt(nt),yr(),st())}}class ad{constructor(e,n,s,l,o){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ad(s,n,st(),st(),st())}}class of{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class Uj{constructor(e,n){this.targetId=e,this.Ce=n}}class Fj{constructor(e,n,s=kn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Ww{constructor(){this.ve=0,this.Fe=Jw(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),n=st(),s=st();return this.Fe.forEach(((l,o)=>{switch(o){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Le(38017,{changeType:o})}})),new ad(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Jw()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class H6{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.Je=Fh(),this.He=Fh(),this.Ye=new Lt(nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const o=l.target;if(wg(o))if(s===0){const u=new ke(o.path);this.et(n,u,Pn.newNoDocument(u,Ve.min()))}else pt(s===1,20013,{expectedCount:s});else{const u=this._t(n);if(u!==s){const h=this.ut(e),f=h?this.ct(h,e,u):1;if(f!==0){this.it(n);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:o=0}=n;let u,h;try{u=Ni(s).toUint8Array()}catch(f){if(f instanceof dj)return Lo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Ex(u,l,o)}catch(f){return Lo(f instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&wg(h.target)){const f=new ke(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Pn.newNoDocument(f,e))}o.Be&&(n.set(u,o.ke()),o.qe())}}));let s=st();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const l=new cm(e,n,this.Ye,this.je,s);return this.je=yr(),this.Je=Fh(),this.He=Fh(),this.Ye=new Lt(nt),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ww,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new un(nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new un(nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ww),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fh(){return new Lt(ke.comparator)}function Jw(){return new Lt(ke.comparator)}const $6={asc:"ASCENDING",desc:"DESCENDING"},G6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y6={and:"AND",or:"OR"};class K6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _g(t,e){return t.useProto3Json||sm(e)?e:{value:e}}function kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q6(t,e){return kf(t,e.toTimestamp())}function Oa(t){return pt(!!t,49232),Ve.fromTimestamp((function(n){const s=wi(n);return new Rt(s.seconds,s.nanos)})(t))}function Sx(t,e){return jg(t,e).canonicalString()}function jg(t,e){const n=(function(l){return new Ct(["projects",l.projectId,"databases",l.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qj(t){const e=Ct.fromString(t);return pt(Kj(e),10190,{key:e.toString()}),e}function Eg(t,e){return Sx(t.databaseId,e.path)}function O0(t,e){const n=qj(e);if(n.get(1)!==t.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke($j(n))}function Hj(t,e){return Sx(t.databaseId,e)}function X6(t){const e=qj(t);return e.length===4?Ct.emptyPath():$j(e)}function Sg(t){return new Ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $j(t){return pt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zw(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function W6(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Le(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],o=(function(m,x){return m.useProto3Json?(pt(x===void 0||typeof x=="string",58123),kn.fromBase64String(x||"")):(pt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),kn.fromUint8Array(x||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(m){const x=m.code===void 0?ce.UNKNOWN:zj(m.code);return new Ne(x,m.message||"")})(u);n=new Fj(s,l,o,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=O0(t,s.document.name),o=Oa(s.document.updateTime),u=s.document.createTime?Oa(s.document.createTime):Ve.min(),h=new ns({mapValue:{fields:s.document.fields}}),f=Pn.newFoundDocument(l,o,u,h),m=s.targetIds||[],x=s.removedTargetIds||[];n=new of(m,x,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=O0(t,s.document),o=s.readTime?Oa(s.readTime):Ve.min(),u=Pn.newNoDocument(l,o),h=s.removedTargetIds||[];n=new of([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=O0(t,s.document),o=s.removedTargetIds||[];n=new of([],o,l,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:o}=s,u=new U6(l,o),h=s.targetId;n=new Uj(h,u)}}return n}function J6(t,e){let n;if(e instanceof sd)n={update:Zw(t,e.key,e.value)};else if(e instanceof _x)n={delete:Eg(t,e.key)};else if(e instanceof Ci)n={update:Zw(t,e.key,e.data),updateMask:lD(e.fieldMask)};else{if(!(e instanceof L6))return Le(16599,{Vt:e.type});n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(o,u){const h=u.transform;if(h instanceof Uu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cf)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Le(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,o){return o.updateTime!==void 0?{updateTime:Q6(l,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(t,e.precondition)),n}function Z6(t,e){return t&&t.length>0?(pt(e!==void 0,14353),t.map((n=>(function(l,o){let u=l.updateTime?Oa(l.updateTime):Oa(o);return u.isEqual(Ve.min())&&(u=Oa(o)),new M6(u,l.transformResults||[])})(n,e)))):[]}function eD(t,e){return{documents:[Hj(t,e.path)]}}function tD(t,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Hj(t,l);const o=(function(m){if(m.length!==0)return Yj(aa.create(m,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(m){if(m.length!==0)return m.map((x=>(function(v){return{field:jo(v.field),direction:aD(v.dir)}})(x)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=_g(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:l}}function nD(t){let e=X6(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){pt(s===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let o=[];n.where&&(o=(function(b){const v=Gj(b);return v instanceof aa&&wj(v)?v.getFilters():[v]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((v=>(function(E){return new zu(Eo(E.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(v)))})(n.orderBy));let h=null;n.limit&&(h=(function(b){let v;return v=typeof b=="object"?b.value:b,sm(v)?null:v})(n.limit));let f=null;n.startAt&&(f=(function(b){const v=!!b.before,N=b.values||[];return new Tf(N,v)})(n.startAt));let m=null;return n.endAt&&(m=(function(b){const v=!b.before,N=b.values||[];return new Tf(N,v)})(n.endAt)),w6(e,l,u,o,h,"F",f,m)}function sD(t,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Gj(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Eo(n.unaryFilter.field);return rn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Eo(n.unaryFilter.field);return rn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Eo(n.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Eo(n.unaryFilter.field);return rn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rn.create(Eo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return aa.create(n.compositeFilter.filters.map((s=>Gj(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(t):Le(30097,{filter:t})}function aD(t){return $6[t]}function rD(t){return G6[t]}function iD(t){return Y6[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return Cn.fromServerFormat(t.fieldPath)}function Yj(t){return t instanceof rn?(function(n){if(n.op==="=="){if(Uw(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(zw(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uw(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(zw(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:rD(n.op),value:n.value}}})(t):t instanceof aa?(function(n){const s=n.getFilters().map((l=>Yj(l)));return s.length===1?s[0]:{compositeFilter:{op:iD(n.op),filters:s}}})(t):Le(54877,{filter:t})}function lD(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Kj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class oi{constructor(e,n,s,l,o=Ve.min(),u=Ve.min(),h=kn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oD{constructor(e){this.yt=e}}function cD(t){const e=nD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}class uD{constructor(){this.Cn=new dD}addToCollectionParentIndex(e,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(vi.min())}updateCollectionGroup(e,n,s){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class dD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new un(Ct.comparator),o=!l.has(s);return this.index[n]=l.add(s),o}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new un(Ct.comparator)).toArray()}}const e2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qj=41943040;class ts{static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(Qj,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}const t2="LruGarbageCollector",hD=1048576;function n2([t,e],[n,s]){const l=nt(t,n);return l===0?nt(e,s):l}class fD{constructor(e){this.Ir=e,this.buffer=new un(n2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();n2(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(t2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?_e(t2,"Ignoring IndexedDB error during garbage collection: ",n):await Wo(n)}await this.Vr(3e5)}))}}class pD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(nm.ce);const s=new fD(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(e2)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e2):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,o,u,h,f,m;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,u=Date.now(),this.nthSequenceNumber(e,l)))).next((b=>(s=b,h=Date.now(),this.removeTargets(e,s,n)))).next((b=>(o=b,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(m=Date.now(),No()<=tt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${l} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${b} documents in `+(m-f)+`ms
Total Duration: ${m-x}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:o,documentsRemoved:b}))))}}function gD(t,e){return new pD(t,e)}class xD{constructor(){this.changes=new jl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?fe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class bD{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&ju(s.mutation,l,ys.empty(),Rt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,st()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=st()){const l=dl();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((o=>{let u=gu();return o.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=dl();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,st())))}populateOverlays(e,n,s){const l=[];return s.forEach((o=>{n.has(o)||l.push(o)})),this.documentOverlayCache.getOverlays(e,l).next((o=>{o.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,s,l){let o=yr();const u=_u(),h=(function(){return _u()})();return n.forEach(((f,m)=>{const x=s.get(m.key);l.has(m.key)&&(x===void 0||x.mutation instanceof Ci)?o=o.insert(m.key,m):x!==void 0?(u.set(m.key,x.mutation.getFieldMask()),ju(x.mutation,m,x.mutation.getFieldMask(),Rt.now())):u.set(m.key,ys.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,x)=>u.set(m,x))),n.forEach(((m,x)=>h.set(m,new yD(x,u.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,n){const s=_u();let l=new Lt(((u,h)=>u-h)),o=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((f=>{const m=n.get(f);if(m===null)return;let x=s.get(f)||ys.empty();x=h.applyToLocalView(m,x),s.set(f,x);const b=(l.get(h.batchId)||st()).add(f);l=l.insert(h.batchId,b)}))})).next((()=>{const u=[],h=l.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,x=f.value,b=kj();x.forEach((v=>{if(!o.has(v)){const N=Lj(n.get(v),s.get(v));N!==null&&b.set(v,N),o=o.add(v)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,b))}return fe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ej(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((o=>{const u=l-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-o.size):fe.resolve(dl());let h=Ou,f=o;return u.next((m=>fe.forEach(m,((x,b)=>(h<b.largestBatchId&&(h=b.largestBatchId),o.get(x)?fe.resolve():this.remoteDocumentCache.getEntry(e,x).next((v=>{f=f.insert(x,v)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,st()))).next((x=>({batchId:h,changes:Cj(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((s=>{let l=gu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const o=n.collectionGroup;let u=gu();return this.indexManager.getCollectionParents(e,o).next((h=>fe.forEach(h,(f=>{const m=(function(b,v){return new Zo(v,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,l).next((x=>{x.forEach(((b,v)=>{u=u.insert(b,v)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,o,l)))).next((u=>{o.forEach(((f,m)=>{const x=m.getKey();u.get(x)===null&&(u=u.insert(x,Pn.newInvalidDocument(x)))}));let h=gu();return u.forEach(((f,m)=>{const x=o.get(f);x!==void 0&&ju(x.mutation,m,ys.empty(),Rt.now()),im(n,m)&&(h=h.insert(f,m))})),h}))}}class vD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Oa(l.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:cD(l.bundledQuery),readTime:Oa(l.readTime)}})(n)),fe.resolve()}}class wD{constructor(){this.overlays=new Lt(ke.comparator),this.qr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=dl();return fe.forEach(n,(l=>this.getOverlay(e,l).next((o=>{o!==null&&s.set(l,o)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,o)=>{this.St(e,n,o)})),fe.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),fe.resolve()}getOverlaysForCollection(e,n,s){const l=dl(),o=n.length+1,u=new ke(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>s&&l.set(f.getKey(),f)}return fe.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let o=new Lt(((m,x)=>m-x));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let x=o.get(m.largestBatchId);x===null&&(x=dl(),o=o.insert(m.largestBatchId,x)),x.set(m.getKey(),m)}}const h=dl(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,x)=>h.set(m,x))),!(h.size()>=l)););return fe.resolve(h)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const u=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new z6(n,s));let o=this.qr.get(n);o===void 0&&(o=st(),this.qr.set(n,o)),this.qr.set(n,o.add(s.key))}}class ND{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class Tx{constructor(){this.Qr=new un(bn.$r),this.Ur=new un(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new bn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new bn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ke(new Ct([])),s=new bn(n,e),l=new bn(n,e+1),o=[];return this.Ur.forEachInRange([s,l],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ke(new Ct([])),s=new bn(n,e),l=new bn(n,e+1);let o=st();return this.Ur.forEachInRange([s,l],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new bn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ke.comparator(e.key,n.key)||nt(e.Yr,n.Yr)}static Kr(e,n){return nt(e.Yr,n.Yr)||ke.comparator(e.key,n.key)}}class _D{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new un(bn.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new V6(o,n,s,l);this.mutationQueue.push(u);for(const h of l)this.Zr=this.Zr.add(new bn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),o=l<0?0:l;return fe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?gx:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new bn(n,0),l=new bn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,l],(u=>{const h=this.Xr(u.Yr);o.push(h)})),fe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new un(nt);return n.forEach((l=>{const o=new bn(l,0),u=new bn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{s=s.add(h.Yr)}))})),fe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let o=s;ke.isDocumentKey(o)||(o=o.child(""));const u=new bn(new ke(o),0);let h=new un(nt);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===l&&(h=h.add(f.Yr)),!0)}),u),fe.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return fe.forEach(n.mutations,(l=>{const o=new bn(l.key,n.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new bn(n,0),l=this.Zr.firstAfterOrEqual(s);return fe.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class jD{constructor(e){this.ri=e,this.docs=(function(){return new Lt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),o=l?l.size:0,u=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return fe.resolve(s?s.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let s=yr();return n.forEach((l=>{const o=this.docs.get(l);s=s.insert(l,o?o.document.mutableCopy():Pn.newInvalidDocument(l))})),fe.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let o=yr();const u=n.path,h=new ke(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:x}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||ZR(JR(x),s)<=0||(l.has(x.key)||im(n,x))&&(o=o.insert(x.key,x.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,n,s,l){Le(9500)}ii(e,n){return fe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new ED(this)}getSize(e){return fe.resolve(this.size)}}class ED extends xD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class SD{constructor(e){this.persistence=e,this.si=new jl((n=>bx(n)),vx),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Tx,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Bo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Pr(n),fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,s){let l=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),l++)})),fe.waitFor(o).next((()=>l))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return fe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),fe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,o=[];return l&&n.forEach((u=>{o.push(l.markPotentiallyOrphaned(e,u))})),fe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return fe.resolve(s)}containsKey(e,n){return fe.resolve(this._i.containsKey(n))}}class Xj{constructor(e,n){this.ui={},this.overlays={},this.ci=new nm(0),this.li=!1,this.li=!0,this.hi=new ND,this.referenceDelegate=e(this),this.Pi=new SD(this),this.indexManager=new uD,this.remoteDocumentCache=(function(l){return new jD(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new oD(n),this.Ii=new vD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new _D(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){_e("MemoryPersistence","Starting transaction:",e);const l=new TD(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((o=>this.referenceDelegate.di(l).next((()=>o)))).toPromise().then((o=>(l.raiseOnCommittedEvent(),o)))}Ai(e,n){return fe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class TD extends t6{constructor(e){super(),this.currentSequenceNumber=e}}class Ax{constructor(e){this.persistence=e,this.Ri=new Tx,this.Vi=null}static mi(e){return new Ax(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),fe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(s=>{const l=ke.fromPath(s);return this.gi(e,l).next((o=>{o||n.removeEntry(l,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class If{constructor(e,n){this.persistence=e,this.pi=new jl((s=>a6(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=gD(this,n)}static mi(e,n){return new If(e,n)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return fe.forEach(this.pi,((s,l)=>this.br(e,s,l).next((o=>o?fe.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),o=l.newChangeBuffer();return l.ii(e,(u=>this.br(e,u,n).next((h=>{h||(s++,o.removeEntry(u,Ve.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}br(e,n,s){return fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return fe.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cx{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=st(),l=st();for(const o of n.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:l=l.add(o.doc.key)}return new Cx(e,n.fromCache,s,l)}}class AD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ek()?8:n6(zn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const o={result:null};return this.ys(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,n,l,s).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new AD;return this.Ss(e,n,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>o.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(No()<=tt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(No()<=tt.DEBUG&&_e("QueryEngine","Query:",_o(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(No()<=tt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ma(n))):fe.resolve())}ys(e,n){if(Hw(n))return fe.resolve(null);let s=Ma(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Af(n,null,"F"),s=Ma(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const u=st(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((f=>{const m=this.Ds(n,h);return this.Cs(n,m,u,f.readTime)?this.ys(e,Af(n,null,"F")):this.vs(e,m,n,f)}))))})))))}ws(e,n,s,l){return Hw(n)||l.isEqual(Ve.min())?fe.resolve(null):this.ps.getDocuments(e,s).next((o=>{const u=this.Ds(n,o);return this.Cs(n,u,s,l)?fe.resolve(null):(No()<=tt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),_o(n)),this.vs(e,u,n,WR(l,Ou)).next((h=>h)))}))}Ds(e,n){let s=new un(Tj(e));return n.forEach(((l,o)=>{im(e,o)&&(s=s.add(o))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(l)>0)}Ss(e,n,s){return No()<=tt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",_o(n)),this.ps.getDocumentsMatchingQuery(e,n,vi.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const kx="LocalStore",kD=3e8;class ID{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Lt(nt),this.xs=new jl((o=>bx(o)),vx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function RD(t,e,n,s){return new ID(t,e,n,s)}async function Wj(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((o=>(l=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((o=>{const u=[],h=[];let f=st();for(const m of l){u.push(m.batchId);for(const x of m.mutations)f=f.add(x.key)}for(const m of o){h.push(m.batchId);for(const x of m.mutations)f=f.add(x.key)}return n.localDocuments.getDocuments(s,f).next((m=>({Ls:m,removedBatchIds:u,addedBatchIds:h})))}))}))}function DD(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,x){const b=m.batch,v=b.keys();let N=fe.resolve();return v.forEach((E=>{N=N.next((()=>x.getEntry(f,E))).next((V=>{const R=m.docVersions.get(E);pt(R!==null,48541),V.version.compareTo(R)<0&&(b.applyToRemoteDocument(V,m),V.isValidDocument()&&(V.setReadTime(m.commitVersion),x.addEntry(V)))}))})),N.next((()=>h.mutationQueue.removeMutationBatch(f,b)))})(n,s,e,o).next((()=>o.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let f=st();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function Jj(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function MD(t,e){const n=ze(t),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const h=[];e.targetChanges.forEach(((x,b)=>{const v=l.get(b);if(!v)return;h.push(n.Pi.removeMatchingKeys(o,x.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(o,x.addedDocuments,b))));let N=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(kn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,s)),l=l.insert(b,N),(function(V,R,z){return V.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=kD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(v,N,x)&&h.push(n.Pi.updateTargetData(o,N))}));let f=yr(),m=st();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,x))})),h.push(OD(o,u,e.documentUpdates).next((x=>{f=x.ks,m=x.qs}))),!s.isEqual(Ve.min())){const x=n.Pi.getLastRemoteSnapshotVersion(o).next((b=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));h.push(x)}return fe.waitFor(h).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(n.Ms=l,o)))}function OD(t,e,n){let s=st(),l=st();return n.forEach((o=>s=s.add(o))),e.getEntries(t,s).next((o=>{let u=yr();return n.forEach(((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(l=l.add(h)),f.isNoDocument()&&f.version.isEqual(Ve.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):_e(kx,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:u,qs:l}}))}function PD(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gx),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function LD(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((o=>o?(l=o,fe.resolve(l)):n.Pi.allocateTargetId(s).next((u=>(l=new oi(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Tg(t,e,n){const s=ze(t),l=s.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",o,(u=>s.persistence.referenceDelegate.removeTarget(u,l)))}catch(u){if(!Jo(u))throw u;_e(kx,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function s2(t,e,n){const s=ze(t);let l=Ve.min(),o=st();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,x){const b=ze(f),v=b.xs.get(x);return v!==void 0?fe.resolve(b.Ms.get(v)):b.Pi.getTargetData(m,x)})(s,u,Ma(e)).next((h=>{if(h)return l=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{o=f}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,n?l:Ve.min(),n?o:st()))).next((h=>(VD(s,_6(e),h),{documents:h,Qs:o})))))}function VD(t,e,n){let s=t.Os.get(e)||Ve.min();n.forEach(((l,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),t.Os.set(e,s)}class a2{constructor(){this.activeTargetIds=C6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(){this.Mo=new a2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new a2,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UD{Oo(e){}shutdown(){}}const r2="ConnectivityMonitor";class i2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(r2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(r2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bh=null;function Ag(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}const P0="RestConnection",FD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Ef?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,o){const u=Ag(),h=this.zo(e,n.toUriEncodedString());_e(P0,`Sending RPC '${e}' ${u}:`,h,s);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,l,o);const{host:m}=new URL(h),x=Yo(m);return this.Jo(e,h,f,s,x).then((b=>(_e(P0,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Lo(P0,`RPC '${e}' ${u} failed with error: `,b,"url: ",h,"request:",s),b}))}Ho(e,n,s,l,o,u){return this.Go(e,n,s,l,o)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,o)=>e[o]=l)),s&&s.headers.forEach(((l,o)=>e[o]=l))}zo(e,n){const s=FD[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class qD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Mn="WebChannelConnection";class HD extends BD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,o){const u=Ag();return new Promise(((h,f)=>{const m=new ej;m.setWithCredentials(!0),m.listenOnce(tj.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case sf.NO_ERROR:const b=m.getResponseJson();_e(Mn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),h(b);break;case sf.TIMEOUT:_e(Mn,`RPC '${e}' ${u} timed out`),f(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const v=m.getStatus();if(_e(Mn,`RPC '${e}' ${u} failed with status:`,v,"response text:",m.getResponseText()),v>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const E=N?.error;if(E&&E.status&&E.message){const V=(function(z){const L=z.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(L)>=0?L:ce.UNKNOWN})(E.status);f(new Ne(V,E.message))}else f(new Ne(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{_e(Mn,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(l);_e(Mn,`RPC '${e}' ${u} sending request:`,l),m.send(n,"POST",x,s,15)}))}T_(e,n,s){const l=Ag(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=aj(),h=sj(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,s),f.encodeInitMessageHeaders=!0;const x=o.join("");_e(Mn,`Creating RPC '${e}' stream ${l}: ${x}`,f);const b=u.createWebChannel(x,f);this.I_(b);let v=!1,N=!1;const E=new qD({Yo:R=>{N?_e(Mn,`Not sending because RPC '${e}' stream ${l} is closed:`,R):(v||(_e(Mn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),v=!0),_e(Mn,`RPC '${e}' stream ${l} sending:`,R),b.send(R))},Zo:()=>b.close()}),V=(R,z,L)=>{R.listen(z,(H=>{try{L(H)}catch(X){setTimeout((()=>{throw X}),0)}}))};return V(b,pu.EventType.OPEN,(()=>{N||(_e(Mn,`RPC '${e}' stream ${l} transport opened.`),E.o_())})),V(b,pu.EventType.CLOSE,(()=>{N||(N=!0,_e(Mn,`RPC '${e}' stream ${l} transport closed`),E.a_(),this.E_(b))})),V(b,pu.EventType.ERROR,(R=>{N||(N=!0,Lo(Mn,`RPC '${e}' stream ${l} transport errored. Name:`,R.name,"Message:",R.message),E.a_(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))})),V(b,pu.EventType.MESSAGE,(R=>{if(!N){const z=R.data[0];pt(!!z,16349);const L=z,H=L?.error||L[0]?.error;if(H){_e(Mn,`RPC '${e}' stream ${l} received error:`,H);const X=H.status;let se=(function(T){const M=sn[T];if(M!==void 0)return zj(M)})(X),Y=H.message;se===void 0&&(se=ce.INTERNAL,Y="Unknown error status: "+X+" with message "+H.message),N=!0,E.a_(new Ne(se,Y)),b.close()}else _e(Mn,`RPC '${e}' stream ${l} received:`,z),E.u_(z)}})),V(h,nj.STAT_EVENT,(R=>{R.stat===gg.PROXY?_e(Mn,`RPC '${e}' stream ${l} detected buffering proxy`):R.stat===gg.NOPROXY&&_e(Mn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function L0(){return typeof document<"u"?document:null}function um(t){return new K6(t,!0)}class Zj{constructor(e,n,s=1e3,l=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&_e("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const l2="PersistentStream";class e5{constructor(e,n,s,l,o,u,h,f){this.Mi=e,this.S_=s,this.b_=l,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(l2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(_e(l2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $D extends e5{constructor(e,n,s,l,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,u),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=W6(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Ve.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Oa(u.readTime):Ve.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Sg(this.serializer),n.addTarget=(function(o,u){let h;const f=u.target;if(h=wg(f)?{documents:eD(o,f)}:{query:tD(o,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Bj(o,u.resumeToken);const m=_g(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ve.min())>0){h.readTime=kf(o,u.snapshotVersion.toTimestamp());const m=_g(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=sD(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.q_(n)}}class GD extends e5{constructor(e,n,s,l,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Z6(e.writeResults,e.commitTime),s=Oa(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Sg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>J6(this.serializer,s)))};this.q_(n)}}class YD{}class KD extends YD{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,jg(n,s),l,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ce.UNKNOWN,o.toString())}))}Ho(e,n,s,l,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,jg(n,s),l,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xr(n),this.aa=!1):_e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const xl="RemoteStore";class XD{constructor(e,n,s,l,o){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{El(this)&&(_e(xl,"Restarting streams for network reachability change."),await(async function(f){const m=ze(f);m.Ea.add(4),await rd(m),m.Ra.set("Unknown"),m.Ea.delete(4),await dm(m)})(this))}))})),this.Ra=new QD(s,l)}}async function dm(t){if(El(t))for(const e of t.da)await e(!0)}async function rd(t){for(const e of t.da)await e(!1)}function t5(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Mx(n)?Dx(n):ec(n).O_()&&Rx(n,e))}function Ix(t,e){const n=ze(t),s=ec(n);n.Ia.delete(e),s.O_()&&n5(n,e),n.Ia.size===0&&(s.O_()?s.L_():El(n)&&n.Ra.set("Unknown"))}function Rx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ec(t).Y_(e)}function n5(t,e){t.Va.Ue(e),ec(t).Z_(e)}function Dx(t){t.Va=new H6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ec(t).start(),t.Ra.ua()}function Mx(t){return El(t)&&!ec(t).x_()&&t.Ia.size>0}function El(t){return ze(t).Ea.size===0}function s5(t){t.Va=void 0}async function WD(t){t.Ra.set("Online")}async function JD(t){t.Ia.forEach(((e,n)=>{Rx(t,e)}))}async function ZD(t,e){s5(t),Mx(t)?(t.Ra.ha(e),Dx(t)):t.Ra.set("Unknown")}async function e8(t,e,n){if(t.Ra.set("Online"),e instanceof Fj&&e.state===2&&e.cause)try{await(async function(l,o){const u=o.cause;for(const h of o.targetIds)l.Ia.has(h)&&(await l.remoteSyncer.rejectListen(h,u),l.Ia.delete(h),l.Va.removeTarget(h))})(t,e)}catch(s){_e(xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Rf(t,s)}else if(e instanceof of?t.Va.Ze(e):e instanceof Uj?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const s=await Jj(t.localStore);n.compareTo(s)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const x=o.Ia.get(m);x&&o.Ia.set(m,x.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,m)=>{const x=o.Ia.get(f);if(!x)return;o.Ia.set(f,x.withResumeToken(kn.EMPTY_BYTE_STRING,x.snapshotVersion)),n5(o,f);const b=new oi(x.target,f,m,x.sequenceNumber);Rx(o,b)})),o.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(s){_e(xl,"Failed to raise snapshot:",s),await Rf(t,s)}}async function Rf(t,e,n){if(!Jo(e))throw e;t.Ea.add(1),await rd(t),t.Ra.set("Offline"),n||(n=()=>Jj(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(xl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dm(t)}))}function a5(t,e){return e().catch((n=>Rf(t,n,e)))}async function hm(t){const e=ze(t),n=ji(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gx;for(;t8(e);)try{const l=await PD(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,n8(e,l)}catch(l){await Rf(e,l)}r5(e)&&i5(e)}function t8(t){return El(t)&&t.Ta.length<10}function n8(t,e){t.Ta.push(e);const n=ji(t);n.O_()&&n.X_&&n.ea(e.mutations)}function r5(t){return El(t)&&!ji(t).x_()&&t.Ta.length>0}function i5(t){ji(t).start()}async function s8(t){ji(t).ra()}async function a8(t){const e=ji(t);for(const n of t.Ta)e.ea(n.mutations)}async function r8(t,e,n){const s=t.Ta.shift(),l=jx.from(s,e,n);await a5(t,(()=>t.remoteSyncer.applySuccessfulWrite(l))),await hm(t)}async function i8(t,e){e&&ji(t).X_&&await(async function(s,l){if((function(u){return F6(u)&&u!==ce.ABORTED})(l.code)){const o=s.Ta.shift();ji(s).B_(),await a5(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,l))),await hm(s)}})(t,e),r5(t)&&i5(t)}async function o2(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),_e(xl,"RemoteStore received new credentials");const s=El(n);n.Ea.add(3),await rd(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dm(n)}async function l8(t,e){const n=ze(t);e?(n.Ea.delete(2),await dm(n)):e||(n.Ea.add(2),await rd(n),n.Ra.set("Unknown"))}function ec(t){return t.ma||(t.ma=(function(n,s,l){const o=ze(n);return o.sa(),new $D(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,l)})(t.datastore,t.asyncQueue,{Xo:WD.bind(null,t),t_:JD.bind(null,t),r_:ZD.bind(null,t),H_:e8.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Mx(t)?Dx(t):t.Ra.set("Unknown")):(await t.ma.stop(),s5(t))}))),t.ma}function ji(t){return t.fa||(t.fa=(function(n,s,l){const o=ze(n);return o.sa(),new GD(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,l)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:s8.bind(null,t),r_:i8.bind(null,t),ta:a8.bind(null,t),na:r8.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await hm(t)):(await t.fa.stop(),t.Ta.length>0&&(_e(xl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class Ox{constructor(e,n,s,l,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,o){const u=Date.now()+s,h=new Ox(e,n,u,l,o);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Px(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Jo(t))return new Ne(ce.UNAVAILABLE,`${e}: ${t}`);throw t}class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ke.comparator(n.key,s.key):(n,s)=>ke.comparator(n.key,s.key),this.keyedMap=gu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,o=s.getNext().key;if(!l.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ko;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class c2{constructor(){this.ga=new Lt(ke.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class qo{constructor(e,n,s,l,o,u,h,f,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,l,o){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new qo(e,n,ko.emptySet(n),u,s,l,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class o8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class c8{constructor(){this.queries=u2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=ze(n),o=l.queries;l.queries=u2(),o.forEach(((u,h)=>{for(const f of h.Sa)f.onError(s)}))})(this,new Ne(ce.ABORTED,"Firestore shutting down"))}}function u2(){return new jl((t=>Sj(t)),rm)}async function l5(t,e){const n=ze(t);let s=3;const l=e.query;let o=n.queries.get(l);o?!o.ba()&&e.Da()&&(s=2):(o=new o8,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await n.onListen(l,!0);break;case 1:o.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(u){const h=Px(u,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(h)}n.queries.set(l,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Lx(n)}async function o5(t,e){const n=ze(t),s=e.query;let l=3;const o=n.queries.get(s);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?l=e.Da()?0:1:!o.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function u8(t,e){const n=ze(t);let s=!1;for(const l of e){const o=l.query,u=n.queries.get(o);if(u){for(const h of u.Sa)h.Fa(l)&&(s=!0);u.wa=l}}s&&Lx(n)}function d8(t,e,n){const s=ze(t),l=s.queries.get(e);if(l)for(const o of l.Sa)o.onError(n);s.queries.delete(e)}function Lx(t){t.Ca.forEach((e=>{e.next()}))}var Cg,d2;(d2=Cg||(Cg={})).Ma="default",d2.Cache="cache";class c5{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new qo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cg.Cache}}class u5{constructor(e){this.key=e}}class d5{constructor(e){this.key=e}}class h8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=Tj(e),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new c2,l=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,u=l,h=!1;const f=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,m=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,b)=>{const v=l.get(x),N=im(this.query,b)?b:null,E=!!v&&this.mutatedKeys.has(v.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let R=!1;v&&N?v.data.isEqual(N.data)?E!==V&&(s.track({type:3,doc:N}),R=!0):this.su(v,N)||(s.track({type:2,doc:N}),R=!0,(f&&this.eu(N,f)>0||m&&this.eu(N,m)<0)&&(h=!0)):!v&&N?(s.track({type:0,doc:N}),R=!0):v&&!N&&(s.track({type:1,doc:v}),R=!0,(f||m)&&(h=!0)),R&&(N?(u=u.add(N),o=V?o.add(x):o.delete(x)):(u=u.delete(x),o=o.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),o=o.delete(x.key),s.track({type:1,doc:x})}return{tu:u,iu:s,Cs:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,b)=>(function(N,E){const V=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:R})}};return V(N)-V(E)})(x.type,b.type)||this.eu(x.doc,b.doc))),this.ou(s),l=l??!1;const h=n&&!l?this._u():[],f=this.Xa.size===0&&this.current&&!l?1:0,m=f!==this.Za;return this.Za=f,u.length!==0||m?{snapshot:new qo(this.query,e.tu,o,u,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new d5(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new u5(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=st();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vx="SyncEngine";class f8{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class m8{constructor(e){this.key=e,this.hu=!1}}class p8{constructor(e,n,s,l,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new jl((h=>Sj(h)),rm),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(ke.comparator),this.Au=new Map,this.Ru=new Tx,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g8(t,e,n=!0){const s=x5(t);let l;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),l=o.view.lu()):l=await h5(s,e,n,!0),l}async function x8(t,e){const n=x5(t);await h5(n,e,!0,!1)}async function h5(t,e,n,s){const l=await LD(t.localStore,Ma(e)),o=l.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let h;return s&&(h=await y8(t,e,o,u==="current",l.resumeToken)),t.isPrimaryClient&&n&&t5(t.remoteStore,l),h}async function y8(t,e,n,s,l){t.pu=(b,v,N)=>(async function(V,R,z,L){let H=R.view.ru(z);H.Cs&&(H=await s2(V.localStore,R.query,!1).then((({documents:I})=>R.view.ru(I,H))));const X=L&&L.targetChanges.get(R.targetId),se=L&&L.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(H,V.isPrimaryClient,X,se);return f2(V,R.targetId,Y.au),Y.snapshot})(t,b,v,N);const o=await s2(t.localStore,e,!0),u=new h8(e,o.Qs),h=u.ru(o.documents),f=ad.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",l),m=u.applyChanges(h,t.isPrimaryClient,f);f2(t,n,m.au);const x=new f8(e,n,u);return t.Tu.set(e,x),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function b8(t,e,n){const s=ze(t),l=s.Tu.get(e),o=s.Iu.get(l.targetId);if(o.length>1)return s.Iu.set(l.targetId,o.filter((u=>!rm(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Tg(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Ix(s.remoteStore,l.targetId),kg(s,l.targetId)})).catch(Wo)):(kg(s,l.targetId),await Tg(s.localStore,l.targetId,!0))}async function v8(t,e){const n=ze(t),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ix(n.remoteStore,s.targetId))}async function w8(t,e,n){const s=A8(t);try{const l=await(function(u,h){const f=ze(u),m=Rt.now(),x=h.reduce(((N,E)=>N.add(E.key)),st());let b,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let E=yr(),V=st();return f.Ns.getEntries(N,x).next((R=>{E=R,E.forEach(((z,L)=>{L.isValidDocument()||(V=V.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(N,E))).next((R=>{b=R;const z=[];for(const L of h){const H=P6(L,b.get(L.key).overlayedDocument);H!=null&&z.push(new Ci(L.key,H,yj(H.value.mapValue),Os.exists(!0)))}return f.mutationQueue.addMutationBatch(N,m,z,h)})).next((R=>{v=R;const z=R.applyToLocalDocumentSet(b,V);return f.documentOverlayCache.saveOverlays(N,R.batchId,z)}))})).then((()=>({batchId:v.batchId,changes:Cj(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(u,h,f){let m=u.Vu[u.currentUser.toKey()];m||(m=new Lt(nt)),m=m.insert(h,f),u.Vu[u.currentUser.toKey()]=m})(s,l.batchId,n),await id(s,l.changes),await hm(s.remoteStore)}catch(l){const o=Px(l,"Failed to persist write");n.reject(o)}}async function f5(t,e){const n=ze(t);try{const s=await MD(n.localStore,e);e.targetChanges.forEach(((l,o)=>{const u=n.Au.get(o);u&&(pt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?u.hu=!0:l.modifiedDocuments.size>0?pt(u.hu,14607):l.removedDocuments.size>0&&(pt(u.hu,42227),u.hu=!1))})),await id(n,s,e)}catch(s){await Wo(s)}}function h2(t,e,n){const s=ze(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&l.push(h.snapshot)})),(function(u,h){const f=ze(u);f.onlineState=h;let m=!1;f.queries.forEach(((x,b)=>{for(const v of b.Sa)v.va(h)&&(m=!0)})),m&&Lx(f)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function N8(t,e,n){const s=ze(t);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),o=l&&l.key;if(o){let u=new Lt(ke.comparator);u=u.insert(o,Pn.newNoDocument(o,Ve.min()));const h=st().add(o),f=new cm(Ve.min(),new Map,new Lt(nt),u,h);await f5(s,f),s.du=s.du.remove(o),s.Au.delete(e),zx(s)}else await Tg(s.localStore,e,!1).then((()=>kg(s,e,n))).catch(Wo)}async function _8(t,e){const n=ze(t),s=e.batch.batchId;try{const l=await DD(n.localStore,e);p5(n,s,null),m5(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await id(n,l)}catch(l){await Wo(l)}}async function j8(t,e,n){const s=ze(t);try{const l=await(function(u,h){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let x;return f.mutationQueue.lookupMutationBatch(m,h).next((b=>(pt(b!==null,37113),x=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,x,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,x))).next((()=>f.localDocuments.getDocuments(m,x)))}))})(s.localStore,e);p5(s,e,n),m5(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await id(s,l)}catch(l){await Wo(l)}}function m5(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function p5(t,e,n){const s=ze(t);let l=s.Vu[s.currentUser.toKey()];if(l){const o=l.get(e);o&&(n?o.reject(n):o.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||g5(t,s)}))}function g5(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ix(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zx(t))}function f2(t,e,n){for(const s of n)s instanceof u5?(t.Ru.addReference(s.key,e),E8(t,s)):s instanceof d5?(_e(Vx,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||g5(t,s.key)):Le(19791,{wu:s})}function E8(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(_e(Vx,"New document in limbo: "+n),t.Eu.add(s),zx(t))}function zx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ke(Ct.fromString(e)),s=t.fu.next();t.Au.set(s,new m8(n)),t.du=t.du.insert(n,s),t5(t.remoteStore,new oi(Ma(wx(n.path)),s,"TargetPurposeLimboResolution",nm.ce))}}async function id(t,e,n){const s=ze(t),l=[],o=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,f)=>{u.push(s.pu(f,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const x=m?!m.fromCache:n?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,x?"current":"not-current")}if(m){l.push(m);const x=Cx.As(f.targetId,m);o.push(x)}})))})),await Promise.all(u),s.Pu.H_(l),await(async function(f,m){const x=ze(f);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>fe.forEach(m,(v=>fe.forEach(v.Es,(N=>x.persistence.referenceDelegate.addReference(b,v.targetId,N))).next((()=>fe.forEach(v.ds,(N=>x.persistence.referenceDelegate.removeReference(b,v.targetId,N)))))))))}catch(b){if(!Jo(b))throw b;_e(kx,"Failed to update sequence numbers: "+b)}for(const b of m){const v=b.targetId;if(!b.fromCache){const N=x.Ms.get(v),E=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(E);x.Ms=x.Ms.insert(v,V)}}})(s.localStore,o))}async function S8(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){_e(Vx,"User change. New user:",e.toKey());const s=await Wj(n.localStore,e);n.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new Ne(ce.CANCELLED,u))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await id(n,s.Ls)}}function T8(t,e){const n=ze(t),s=n.Au.get(e);if(s&&s.hu)return st().add(s.key);{let l=st();const o=n.Iu.get(e);if(!o)return l;for(const u of o){const h=n.Tu.get(u);l=l.unionWith(h.view.nu)}return l}}function x5(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N8.bind(null,e),e.Pu.H_=u8.bind(null,e.eventManager),e.Pu.yu=d8.bind(null,e.eventManager),e}function A8(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j8.bind(null,e),e}class Df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RD(this.persistence,new CD,e.initialUser,this.serializer)}Cu(e){return new Xj(Ax.mi,this.serializer)}Du(e){return new zD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Df.provider={build:()=>new Df};class C8 extends Df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pt(this.persistence.referenceDelegate instanceof If,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new mD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new Xj((s=>If.mi(s,n)),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>h2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=S8.bind(null,this.syncEngine),await l8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c8})()}createDatastore(e){const n=um(e.databaseInfo.databaseId),s=(function(o){return new HD(o)})(e.databaseInfo);return(function(o,u,h,f){return new KD(o,u,h,f)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,o,u,h){return new XD(s,l,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>h2(this.syncEngine,n,0)),(function(){return i2.v()?new i2:new UD})())}createSyncEngine(e,n){return(function(l,o,u,h,f,m,x){const b=new p8(l,o,u,h,f,m);return x&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ze(n);_e(xl,"RemoteStore shutting down."),s.Ea.add(5),await rd(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ig.provider={build:()=>new Ig};class y5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ei="FirestoreClient";class k8{constructor(e,n,s,l,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=On.UNAUTHENTICATED,this.clientId=px.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async u=>{_e(Ei,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(_e(Ei,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Px(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function V0(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async l=>{s.isEqual(l)||(await Wj(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function m2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I8(t);_e(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>o2(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,l)=>o2(e.remoteStore,l))),t._onlineComponents=e}async function I8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Ei,"Using user provided OfflineComponentProvider");try{await V0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await V0(t,new Df)}}else _e(Ei,"Using default OfflineComponentProvider"),await V0(t,new C8(void 0));return t._offlineComponents}async function b5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Ei,"Using user provided OnlineComponentProvider"),await m2(t,t._uninitializedComponentsProvider._online)):(_e(Ei,"Using default OnlineComponentProvider"),await m2(t,new Ig))),t._onlineComponents}function R8(t){return b5(t).then((e=>e.syncEngine))}async function v5(t){const e=await b5(t),n=e.eventManager;return n.onListen=g8.bind(null,e.syncEngine),n.onUnlisten=b8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v8.bind(null,e.syncEngine),n}function D8(t,e,n={}){const s=new hr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const x=new y5({next:v=>{x.Nu(),u.enqueueAndForget((()=>o5(o,b)));const N=v.docs.has(h);!N&&v.fromCache?m.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&v.fromCache&&f&&f.source==="server"?m.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),b=new c5(wx(h.path),x,{includeMetadataChanges:!0,qa:!0});return l5(o,b)})(await v5(t),t.asyncQueue,e,n,s))),s.promise}function M8(t,e,n={}){const s=new hr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,f,m){const x=new y5({next:v=>{x.Nu(),u.enqueueAndForget((()=>o5(o,b))),v.fromCache&&f.source==="server"?m.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(v)},error:v=>m.reject(v)}),b=new c5(h,x,{includeMetadataChanges:!0,qa:!0});return l5(o,b)})(await v5(t),t.asyncQueue,e,n,s))),s.promise}function w5(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const p2=new Map;const N5="firestore.googleapis.com",g2=!0;class x2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=N5,this.ssl=g2}else this.host=e.host,this.ssl=e.ssl??g2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hD)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w5(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fm{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zR;switch(s.type){case"firstParty":return new qR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=p2.get(n);s&&(_e("ComponentProvider","Removing Datastore"),p2.delete(n),s.terminate())})(this),Promise.resolve()}}function O8(t,e,n,s={}){t=sa(t,fm);const l=Yo(e),o=t._getSettings(),u={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;l&&(h_(`https://${h}`),f_("Firestore",!0)),o.host!==N5&&o.host!==h&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:l,emulatorOptions:s};if(!bi(f,u)&&(t._setSettings(f),s.mockUserToken)){let m,x;if(typeof s.mockUserToken=="string")m=s.mockUserToken,x=On.MOCK_USER;else{m=$C(s.mockUserToken,t._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new On(b)}t._authCredentials=new UR(new ij(m,x))}}class ki{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class $t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(nd(n,$t._jsonSchema))return new $t(e,s||null,new ke(Ct.fromString(n.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ln("string",$t._jsonSchemaVersion),referencePath:ln("string")};class pi extends ki{constructor(e,n,s){super(e,n,wx(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ke(e))}withConverter(e){return new pi(this.firestore,e,this._path)}}function rs(t,e,...n){if(t=dn(t),lj("collection","path",e),t instanceof fm){const s=Ct.fromString(e,...n);return kw(s),new pi(t,null,s)}{if(!(t instanceof $t||t instanceof pi))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ct.fromString(e,...n));return kw(s),new pi(t.firestore,null,s)}}function hn(t,e,...n){if(t=dn(t),arguments.length===1&&(e=px.newId()),lj("doc","path",e),t instanceof fm){const s=Ct.fromString(e,...n);return Cw(s),new $t(t,null,new ke(s))}{if(!(t instanceof $t||t instanceof pi))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ct.fromString(e,...n));return Cw(s),new $t(t.firestore,t instanceof pi?t.converter:null,new ke(s))}}const y2="AsyncQueue";class b2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zj(this,"async_queue_retry"),this._c=()=>{const s=L0();s&&_e(y2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=L0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=L0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jo(e))throw e;_e(y2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,xr("INTERNAL UNHANDLED ERROR: ",v2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Ox.createAndSchedule(this,e,n,s,(o=>this.hc(o)));return this.tc.push(l),l}uc(){this.nc&&Le(47125,{Pc:v2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function v2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sl extends fm{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new b2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b2(e),this._firestoreClient=void 0,await e}}}function P8(t,e){const n=typeof t=="object"?t:x_(),s=typeof t=="string"?t:Ef,l=sx(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const o=qC("firestore");o&&O8(l,...o)}return l}function Ux(t){if(t._terminated)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||L8(t),t._firestoreClient}function L8(t){const e=t._freezeSettings(),n=(function(l,o,u,h){return new l6(l,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,w5(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new k8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const o=l?._online.build();return{_offline:l?._offline.build(o),_online:o}})(t._componentsProvider))}class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(kn.fromBase64String(e))}catch(n){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ms(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nd(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:ln("string",Ms._jsonSchemaVersion),bytes:ln("string")};class mm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ld{constructor(e){this._methodName=e}}class Pa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(e){if(nd(e,Pa._jsonSchema))return new Pa(e.latitude,e.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:ln("string",Pa._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class La{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==l[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nd(e,La._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new La(e.vectorValues);throw new Ne(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:ln("string",La._jsonSchemaVersion),vectorValues:ln("object")};const V8=/^__.*__$/;class z8{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new sd(e,this.data,n,this.fieldTransforms)}}class _5{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ci(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:t})}}class pm{constructor(e,n,s,l,o,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(j5(this.Ac)&&V8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class U8{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||um(e)}Cc(e,n,s,l=!1){return new pm({Ac:e,methodName:n,Dc:s,path:Cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(t){const e=t._freezeSettings(),n=um(t._databaseId);return new U8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E5(t,e,n,s,l,o={}){const u=t.Cc(o.merge||o.mergeFields?2:0,e,n,l);qx("Data must be an object, but it was:",u,s);const h=S5(s,u);let f,m;if(o.merge)f=new ys(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const x=[];for(const b of o.mergeFields){const v=Rg(e,b,n);if(!u.contains(v))throw new Ne(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);A5(x,v)||x.push(v)}f=new ys(x),m=u.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,m=u.fieldTransforms;return new z8(new ns(h),f,m)}class xm extends ld{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xm}}function F8(t,e,n){return new pm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fx extends ld{_toFieldTransform(e){return new Pj(e.path,new Uu)}isEqual(e){return e instanceof Fx}}class Bx extends ld{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=F8(this,e,!0),s=this.vc.map((o=>tc(o,n))),l=new Fo(s);return new Pj(e.path,l)}isEqual(e){return e instanceof Bx&&bi(this.vc,e.vc)}}function B8(t,e,n,s){const l=t.Cc(1,e,n);qx("Data must be an object, but it was:",l,s);const o=[],u=ns.empty();Ai(s,((f,m)=>{const x=Hx(e,f,n);m=dn(m);const b=l.yc(x);if(m instanceof xm)o.push(x);else{const v=tc(m,b);v!=null&&(o.push(x),u.set(x,v))}}));const h=new ys(o);return new _5(u,h,l.fieldTransforms)}function q8(t,e,n,s,l,o){const u=t.Cc(1,e,n),h=[Rg(e,s,n)],f=[l];if(o.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)h.push(Rg(e,o[v])),f.push(o[v+1]);const m=[],x=ns.empty();for(let v=h.length-1;v>=0;--v)if(!A5(m,h[v])){const N=h[v];let E=f[v];E=dn(E);const V=u.yc(N);if(E instanceof xm)m.push(N);else{const R=tc(E,V);R!=null&&(m.push(N),x.set(N,R))}}const b=new ys(m);return new _5(x,b,u.fieldTransforms)}function H8(t,e,n,s=!1){return tc(n,t.Cc(s?4:3,e))}function tc(t,e){if(T5(t=dn(t)))return qx("Unsupported field value:",e,t),S5(t,e);if(t instanceof ld)return(function(s,l){if(!j5(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(l);o&&l.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const o=[];let u=0;for(const h of s){let f=tc(h,l.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(t,e)}return(function(s,l){if((s=dn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return k6(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Rt.fromDate(s);return{timestampValue:kf(l.serializer,o)}}if(s instanceof Rt){const o=new Rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kf(l.serializer,o)}}if(s instanceof Pa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ms)return{bytesValue:Bj(l.serializer,s._byteString)};if(s instanceof $t){const o=l.databaseId,u=s.firestore._databaseId;if(!u.isEqual(o))throw l.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Sx(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof La)return(function(u,h){return{mapValue:{fields:{[gj]:{stringValue:xj},[Sf]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Nx(h.serializer,m)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${tm(s)}`)})(t,e)}function S5(t,e){const n={};return uj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,((s,l)=>{const o=tc(l,e.mc(s));o!=null&&(n[s]=o)})),{mapValue:{fields:n}}}function T5(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof Pa||t instanceof Ms||t instanceof $t||t instanceof ld||t instanceof La)}function qx(t,e,n){if(!T5(n)||!oj(n)){const s=tm(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Rg(t,e,n){if((e=dn(e))instanceof mm)return e._internalPath;if(typeof e=="string")return Hx(t,e);throw Mf("Field path arguments must be of type string or ",t,!1,void 0,n)}const $8=new RegExp("[~\\*/\\[\\]]");function Hx(t,e,n){if(e.search($8)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mm(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mf(t,e,n,s,l){const o=s&&!s.isEmpty(),u=l!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${s}`),u&&(f+=` in document ${l}`),f+=")"),new Ne(ce.INVALID_ARGUMENT,h+t+f)}function A5(t,e){return t.some((n=>n.isEqual(e)))}class C5{constructor(e,n,s,l,o){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ym("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G8 extends C5{data(){return super.data()}}function ym(t,e){return typeof e=="string"?Hx(t,e):e instanceof mm?e._internalPath:e._delegate._internalPath}function Y8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class Gx extends $x{}function Ps(t,e,...n){let s=[];e instanceof $x&&s.push(e),s=s.concat(n),(function(o){const u=o.filter((f=>f instanceof Kx)).length,h=o.filter((f=>f instanceof bm)).length;if(u>1||u>0&&h>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)t=l._apply(t);return t}class bm extends Gx{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new bm(e,n,s)}_apply(e){const n=this._parse(e);return k5(e._query,n),new ki(e.firestore,e.converter,Ng(e._query,n))}_parse(e){const n=gm(e.firestore);return(function(o,u,h,f,m,x,b){let v;if(m.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){N2(b,x);const E=[];for(const V of b)E.push(w2(f,o,V));v={arrayValue:{values:E}}}else v=w2(f,o,b)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||N2(b,x),v=H8(h,u,b,x==="in"||x==="not-in");return rn.create(m,x,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yx(t,e,n){const s=e,l=ym("where",t);return bm._create(l,s,n)}class Kx extends $x{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kx(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:aa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,o){let u=l;const h=o.getFlattenedFilters();for(const f of h)k5(u,f),u=Ng(u,f)})(e._query,n),new ki(e.firestore,e.converter,Ng(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qx extends Gx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qx(e,n)}_apply(e){const n=(function(l,o,u){if(l.startAt!==null)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(o,u)})(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,(function(l,o){const u=l.explicitOrderBy.concat([o]);return new Zo(l.path,l.collectionGroup,u,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function nc(t,e="asc"){const n=e,s=ym("orderBy",t);return Qx._create(s,n)}class Xx extends Gx{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Xx(e,n,s)}_apply(e){return new ki(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function Wx(t){return XR("limit",t),Xx._create("limit",t,"F")}function w2(t,e,n){if(typeof(n=dn(n))=="string"){if(n==="")throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ej(e)&&n.indexOf("/")!==-1)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Ct.fromString(n));if(!ke.isDocumentKey(s))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vw(t,new ke(s))}if(n instanceof $t)return Vw(t,n._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(n)}.`)}function N2(t,e){if(!Array.isArray(t)||t.length===0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k5(t,e){const n=(function(l,o){for(const u of l)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ne(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class K8{convertValue(e,n="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ai(e,((l,o)=>{s[l]=this.convertValue(o,n)})),s}convertVectorValue(e){const n=e.fields?.[Sf].arrayValue?.values?.map((s=>Ht(s.doubleValue)));return new La(n)}convertGeoPoint(e){return new Pa(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=am(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const n=wi(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ct.fromString(e);pt(Kj(s),9688,{name:e});const l=new Lu(s.get(1),s.get(3)),o=new ke(s.popFirst(5));return l.isEqual(n)||xr(`Document ${o} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function I5(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hl extends C5{constructor(e,n,s,l,o,u){super(e,n,s,l,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ym("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",hl._jsonSchema={type:ln("string",hl._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class cf extends hl{data(e={}){return super.data(e)}}class Io{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new yu(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new cf(this._firestore,this._userDataWriter,s.key,s,new yu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,o){if(l._snapshot.oldDocs.isEmpty()){let u=0;return l._snapshot.docChanges.map((h=>{const f=new cf(l._firestore,l._userDataWriter,h.doc.key,h.doc,new yu(l._snapshot.mutatedKeys.has(h.doc.key),l._snapshot.fromCache),l.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new cf(l._firestore,l._userDataWriter,h.doc.key,h.doc,new yu(l._snapshot.mutatedKeys.has(h.doc.key),l._snapshot.fromCache),l.query.converter);let m=-1,x=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),x=u.indexOf(h.doc.key)),{type:Q8(h.type),doc:f,oldIndex:m,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=px.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),l.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:t})}}function vm(t){t=sa(t,$t);const e=sa(t.firestore,Sl);return D8(Ux(e),t._key).then((n=>W8(e,t,n)))}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:ln("string",Io._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class R5 extends K8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function Tl(t){t=sa(t,ki);const e=sa(t.firestore,Sl),n=Ux(e),s=new R5(e);return Y8(t._query),M8(n,t._query).then((l=>new Io(e,s,t,l)))}function X8(t,e,n){t=sa(t,$t);const s=sa(t.firestore,Sl),l=I5(t.converter,e,n);return wm(s,[E5(gm(s),"setDoc",t._key,l,t.converter!==null,n).toMutation(t._key,Os.none())])}function ra(t,e,n,...s){t=sa(t,$t);const l=sa(t.firestore,Sl),o=gm(l);let u;return u=typeof(e=dn(e))=="string"||e instanceof mm?q8(o,"updateDoc",t._key,e,n,s):B8(o,"updateDoc",t._key,e),wm(l,[u.toMutation(t._key,Os.exists(!0))])}function Jx(t){return wm(sa(t.firestore,Sl),[new _x(t._key,Os.none())])}function Al(t,e){const n=sa(t.firestore,Sl),s=hn(t),l=I5(t.converter,e);return wm(n,[E5(gm(t.firestore),"addDoc",s._key,l,t.converter!==null,{}).toMutation(s._key,Os.exists(!1))]).then((()=>s))}function wm(t,e){return(function(s,l){const o=new hr;return s.asyncQueue.enqueueAndForget((async()=>w8(await R8(s),l,o))),o.promise})(Ux(t),e)}function W8(t,e,n){const s=n.docs.get(e._key),l=new R5(t);return new hl(t,l,e._key,s,new yu(n.hasPendingWrites,n.fromCache),e.converter)}function Yt(){return new Fx("serverTimestamp")}function Ho(...t){return new Bx("arrayUnion",t)}(function(e,n=!0){(function(l){Xo=l})(Ko),Po(new fl("firestore",((s,{instanceIdentifier:l,options:o})=>{const u=s.getProvider("app").getImmediate(),h=new Sl(new FR(s.getProvider("auth-internal")),new HR(u,s.getProvider("app-check-internal")),(function(m,x){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(m.options.projectId,x)})(u,l),u);return o={useFetchStreams:n,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),fi(Ew,Sw,e),fi(Ew,Sw,"esm2020")})();const J8={apiKey:"AIzaSyAgGkHhRcdGatNvRsm5BQv_RerjG8qt70M",authDomain:"adjucator-ai.firebaseapp.com",projectId:"adjucator-ai",storageBucket:"adjucator-ai.firebasestorage.app",messagingSenderId:"82725691768",appId:"1:82725691768:web:6186a5b41b8a0aa1e7688d",measurementId:"G-N92VEHSKDE"},D5=g_(J8),od=LR(D5),ht=P8(D5),Z8=new or,eM=async(t,e)=>{const n=await vI(od,t,e);return await NI(n.user),n},tM=async(t,e)=>await wI(od,t,e),nM=async()=>await GI(od,Z8),sM=async()=>await SI(od),aM=t=>EI(od,t),z0=async(t,e)=>{const n=hn(ht,"users",t);await X8(n,{...e,createdAt:new Date().toISOString(),history:[]},{merge:!0})},_2=async t=>{const e=hn(ht,"users",t),n=await vm(e);return n.exists()?n.data():null},rM=async(t,e)=>{const n=hn(ht,"users",t);await ra(n,e)},M5=k.createContext(null),In=()=>{const t=k.useContext(M5);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},iM=({children:t})=>{const[e,n]=k.useState(null),[s,l]=k.useState(null),[o,u]=k.useState(!0),[h,f]=k.useState(null);k.useEffect(()=>{const R=aM(async z=>{if(n(z),z)try{let L=await _2(z.uid);L||(L={email:z.email,displayName:z.displayName||"",photoURL:z.photoURL||"",preferredEvents:[],settings:{theme:"dark",autoSaveHistory:!0}},await z0(z.uid,L)),l(L)}catch(L){console.error("Error fetching user profile:",L)}else l(null);u(!1)});return()=>R()},[]);const V={user:e,userProfile:s,loading:o,error:h,login:async(R,z)=>{f(null);try{return await tM(R,z)}catch(L){throw f(qh(L.code)),L}},register:async(R,z,L)=>{f(null);try{const H=await eM(R,z);return await z0(H.user.uid,{email:R,displayName:L,photoURL:"",preferredEvents:[],settings:{theme:"dark",autoSaveHistory:!0}}),H}catch(H){throw f(qh(H.code)),H}},loginWithGoogle:async()=>{f(null);try{const R=await nM();return await _2(R.user.uid)||await z0(R.user.uid,{email:R.user.email,displayName:R.user.displayName||"",photoURL:R.user.photoURL||"",preferredEvents:[],settings:{theme:"dark",autoSaveHistory:!0}}),R}catch(R){throw f(qh(R.code)),R}},logout:async()=>{f(null);try{await sM()}catch(R){throw f(qh(R.code)),R}},updateProfile:async R=>{if(e)try{await rM(e.uid,R),l(z=>({...z,...R}))}catch(z){throw f("Failed to update profile"),z}},clearError:()=>f(null),isAuthenticated:!!e};return r.jsx(M5.Provider,{value:V,children:t})};function qh(t){return{"auth/email-already-in-use":"This email is already registered. Try logging in instead.","auth/invalid-email":"Please enter a valid email address.","auth/operation-not-allowed":"This sign-in method is not enabled.","auth/weak-password":"Password should be at least 6 characters.","auth/user-disabled":"This account has been disabled.","auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-credential":"Invalid credentials. Please check your email and password.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/popup-closed-by-user":"Sign-in popup was closed. Please try again.","auth/popup-blocked":"Sign-in popup was blocked. Please enable popups.","auth/network-request-failed":"Network error. Please check your connection."}[t]||"An error occurred. Please try again."}const lu={dark:{id:"dark",name:"Dark",icon:"",colors:{bgPrimary:"#020617",bgSecondary:"#0f172a",bgTertiary:"#1e293b",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",primary:"#06b6d4",primaryHover:"#22d3ee",accent:"#a855f7",border:"rgba(51, 65, 85, 0.5)",glass:"rgba(15, 23, 42, 0.8)",cardBg:"rgba(15, 23, 42, 0.5)",inputBg:"#020617",success:"#22c55e",warning:"#f59e0b",error:"#ef4444"}},light:{id:"light",name:"Light",icon:"",colors:{bgPrimary:"#ffffff",bgSecondary:"#f8fafc",bgTertiary:"#e2e8f0",textPrimary:"#0f172a",textSecondary:"#334155",textMuted:"#64748b",primary:"#0891b2",primaryHover:"#0e7490",accent:"#7c3aed",border:"rgba(15, 23, 42, 0.15)",glass:"rgba(255, 255, 255, 0.95)",cardBg:"rgba(248, 250, 252, 0.9)",inputBg:"#ffffff",success:"#16a34a",warning:"#d97706",error:"#dc2626"}}},O5=k.createContext(null),lM=()=>{const t=k.useContext(O5);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},oM=({children:t})=>{const[e,n]=k.useState(()=>localStorage.getItem("theme")||"dark"),s=lu[e]||lu.dark;k.useEffect(()=>{const h=document.documentElement,f=s.colors;h.style.setProperty("--bg-primary",f.bgPrimary),h.style.setProperty("--bg-secondary",f.bgSecondary),h.style.setProperty("--bg-tertiary",f.bgTertiary),h.style.setProperty("--text-primary",f.textPrimary),h.style.setProperty("--text-secondary",f.textSecondary),h.style.setProperty("--text-muted",f.textMuted),h.style.setProperty("--primary",f.primary),h.style.setProperty("--primary-hover",f.primaryHover),h.style.setProperty("--accent",f.accent),h.style.setProperty("--border",f.border),h.style.setProperty("--glass",f.glass),h.style.setProperty("--card-bg",f.cardBg),h.style.setProperty("--input-bg",f.inputBg),h.style.setProperty("--success",f.success),h.style.setProperty("--warning",f.warning),h.style.setProperty("--error",f.error),h.className=`theme-${e}`,localStorage.setItem("theme",e)},[e,s]);const u={theme:s,themeId:e,setTheme:h=>{lu[h]&&n(h)},cycleTheme:()=>{const h=Object.keys(lu),m=(h.indexOf(e)+1)%h.length;n(h[m])},themes:lu};return r.jsx(O5.Provider,{value:u,children:t})},cM=({activeTab:t,setActiveTab:e,onSettingsClick:n})=>{const[s,l]=k.useState(!1),[o,u]=k.useState(!1),[h,f]=k.useState(!1),{user:m,logout:x,isAuthenticated:b}=In(),{theme:v,setTheme:N}=lM(),E=[{id:"dashboard",label:"Dashboard",icon:ss},{id:"analytics",label:"Analytics",icon:ss},{id:"judge",label:"Analyze",icon:Ia},{id:"coach",label:"Live Coach",icon:Do},{id:"practice",label:"Practice",icon:_4},{id:"tournaments",label:"Tournaments",icon:Gn}],V=[{id:"flowchart",label:"Flowchart",icon:qf},{id:"voice",label:"Voice Analysis",icon:Ia},{id:"timer",label:"Debate Timer",icon:s_},{id:"outline",label:"Outline Builder",icon:KN},{id:"scheduler",label:"Round Scheduler",icon:ci},{id:"opponents",label:"Opponents",icon:Gt},{id:"evidence",label:"Evidence Library",icon:wl},{id:"team",label:"Team",icon:Ra},{id:"strategy",label:"Strategy",icon:Nl},{id:"extemp",label:"Extemp",icon:as},{id:"tone",label:"Tone Analysis",icon:Ia},{id:"history",label:"History",icon:Va}],R=[{id:1,title:"Analysis Complete",message:"Your PF speech analysis is ready",time:"2m ago",unread:!0},{id:2,title:"New Feature",message:"Team collaboration now available",time:"1h ago",unread:!0},{id:3,title:"Weekly Report",message:"Your performance summary is ready",time:"1d ago",unread:!1}],z=R.filter(L=>L.unread).length;return r.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 h-16 border-b border-slate-800/60 bg-slate-950/95 backdrop-blur-xl",children:[r.jsxs("div",{className:"h-full max-w-[1800px] mx-auto px-6 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-3 group",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-xl blur opacity-40 group-hover:opacity-60 transition-opacity"}),r.jsx("div",{className:"relative w-9 h-9 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx(xi,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("span",{className:"text-lg font-bold text-white tracking-tight",children:"Adjudicator"}),r.jsx("span",{className:"text-lg font-light text-slate-400 ml-1",children:"AI"})]})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[r.jsx("div",{className:"flex items-center bg-slate-900/50 rounded-xl p-1 border border-slate-800/50",children:E.map(L=>r.jsxs("button",{onClick:()=>e(L.id),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${t===L.id?"bg-slate-800 text-white shadow-sm":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[r.jsx(L.icon,{className:"w-4 h-4"}),L.label]},L.id))}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>f(!h),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 border ${V.some(L=>L.id===t)?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:text-white hover:bg-slate-800/50 border-slate-800/50"}`,children:[r.jsx(G1,{className:"w-4 h-4"}),"More",r.jsx(Mo,{className:"w-3 h-3"})]}),h&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),r.jsx("div",{className:"absolute left-0 top-full mt-2 w-56 bg-slate-900 border border-slate-800 rounded-xl shadow-2xl shadow-black/50 overflow-hidden z-50",children:r.jsx("div",{className:"p-2",children:V.map(L=>r.jsxs("button",{onClick:()=>{e(L.id),f(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-left ${t===L.id?"bg-cyan-500/10 text-cyan-400":"text-slate-300 hover:text-white hover:bg-slate-800/50"}`,children:[r.jsx(L.icon,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:L.label})]},L.id))})})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{className:"hidden md:flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-900/50 border border-slate-800/50 text-slate-500 hover:text-slate-300 hover:border-slate-700 transition-all",children:[r.jsx(Oo,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Search..."}),r.jsx("kbd",{className:"ml-2 px-1.5 py-0.5 text-xs bg-slate-800 rounded border border-slate-700",children:"K"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>u(!o),className:"relative p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all",children:[r.jsx(JT,{className:"w-5 h-5"}),z>0&&r.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-cyan-500 rounded-full ring-2 ring-slate-950"})]}),o&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-slate-900 border border-slate-800 rounded-xl shadow-2xl shadow-black/50 overflow-hidden z-50",children:[r.jsx("div",{className:"p-4 border-b border-slate-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-white",children:"Notifications"}),z>0&&r.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-cyan-500/10 text-cyan-400 rounded-full",children:[z," new"]})]})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:R.map(L=>r.jsx("div",{className:`p-4 border-b border-slate-800/50 hover:bg-slate-800/30 transition-colors cursor-pointer ${L.unread?"bg-slate-800/20":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[L.unread&&r.jsx("span",{className:"w-2 h-2 mt-2 bg-cyan-500 rounded-full flex-shrink-0"}),r.jsxs("div",{className:L.unread?"":"ml-5",children:[r.jsx("p",{className:"text-sm font-medium text-white",children:L.title}),r.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:L.message}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:L.time})]})]})},L.id))}),r.jsx("div",{className:"p-3 border-t border-slate-800",children:r.jsx("button",{className:"w-full py-2 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:"View all notifications"})})]})]})]}),r.jsx("button",{onClick:n,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all",children:r.jsx(Ku,{className:"w-5 h-5"})}),r.jsxs("div",{className:"relative ml-2",children:[r.jsxs("button",{onClick:()=>l(!s),className:"flex items-center gap-3 p-1.5 pr-3 rounded-xl hover:bg-slate-800/50 transition-all",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-semibold text-sm shadow-lg",children:m?.displayName?.[0]||m?.email?.[0]?.toUpperCase()||"G"}),r.jsx(Mo,{className:"w-4 h-4 text-slate-400"})]}),s&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-slate-900 border border-slate-800 rounded-xl shadow-2xl shadow-black/50 overflow-hidden z-50",children:[r.jsx("div",{className:"p-4 border-b border-slate-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-semibold shadow-lg",children:m?.displayName?.[0]||m?.email?.[0]?.toUpperCase()||"G"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-white truncate",children:m?.displayName||"Guest User"}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:m?.email||"guest@adjudicator.ai"})]})]})}),r.jsxs("div",{className:"p-2",children:[r.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800/50 transition-all text-left",children:[r.jsx(Xf,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Profile Settings"})]}),r.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800/50 transition-all text-left",children:[r.jsx(b4,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Subscription"})]}),r.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800/50 transition-all text-left",children:[r.jsx(Yg,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Help & Support"})]}),r.jsx("div",{className:"px-3 py-2.5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Dark Mode"}),r.jsx("button",{onClick:()=>N(v==="dark"?"light":"dark"),className:`relative w-11 h-6 rounded-full transition-colors ${v==="dark"?"bg-cyan-500":"bg-slate-700"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${v==="dark"?"left-6":"left-1"}`})})]})})]}),b&&r.jsx("div",{className:"p-2 border-t border-slate-800",children:r.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-all text-left",children:[r.jsx(aA,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Sign Out"})]})})]})]})]})]})]}),r.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-slate-950/95 backdrop-blur-xl border-t border-slate-800/60 px-2 py-2 z-50",children:r.jsxs("div",{className:"flex items-center justify-around",children:[E.slice(0,5).map(L=>r.jsxs("button",{onClick:()=>e(L.id),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg transition-all ${t===L.id?"text-cyan-400":"text-slate-500 hover:text-slate-300"}`,children:[r.jsx(L.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-medium",children:L.label})]},L.id)),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>f(!h),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg transition-all ${V.some(L=>L.id===t)?"text-cyan-400":"text-slate-500 hover:text-slate-300"}`,children:[r.jsx(G1,{className:"w-5 h-5"}),r.jsx("span",{className:"text-[10px] font-medium",children:"More"})]}),h&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),r.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-slate-900 border border-slate-800 rounded-xl shadow-2xl shadow-black/50 overflow-hidden z-50",children:r.jsx("div",{className:"p-2 max-h-64 overflow-y-auto",children:V.map(L=>r.jsxs("button",{onClick:()=>{e(L.id),f(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all text-left ${t===L.id?"bg-cyan-500/10 text-cyan-400":"text-slate-300 hover:text-white hover:bg-slate-800/50"}`,children:[r.jsx(L.icon,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:L.label})]},L.id))})})]})]})]})})]})},uM=({children:t,activeTab:e,setActiveTab:n,onSettingsClick:s})=>r.jsxs("div",{className:"min-h-screen bg-slate-950",children:[r.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-cyan-500/5 rounded-full blur-[120px]"}),r.jsx("div",{className:"absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-purple-500/5 rounded-full blur-[120px]"}),r.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`
              linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)
            `,backgroundSize:"64px 64px"}})]}),r.jsx(cM,{activeTab:e,setActiveTab:n,onSettingsClick:s}),r.jsx("main",{className:"relative pt-16 pb-20 lg:pb-8 min-h-screen",children:r.jsx("div",{className:"max-w-[1800px] mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})})]}),dM=({setActiveTab:t})=>{const e=[{label:"Speech Analysis",icon:Ia,color:"cyan",title:"No speeches analyzed yet",description:"Upload or record a speech to get AI-powered feedback on delivery, structure, and argumentation.",action:"Analyze First Speech",tab:"judge"},{label:"Live Coaching",icon:Cu,color:"purple",title:"No coaching sessions yet",description:"Start a live session to get real-time feedback as you practice your speech or debate.",action:"Start Coaching",tab:"coach"},{label:"Strategy Builder",icon:Gt,color:"orange",title:"No strategies created yet",description:"Build winning debate strategies with AI-powered case analysis and argument mapping.",action:"Build Strategy",tab:"strategy"},{label:"Tone Analysis",icon:_l,color:"emerald",title:"No tone analyses yet",description:"Analyze the rhetorical tone and persuasive elements of your speeches.",action:"Analyze Tone",tab:"tone"}],n=[{label:"New Analysis",icon:as,tab:"judge",color:"from-cyan-500 to-blue-500"},{label:"Start Coaching",icon:yi,tab:"coach",color:"from-purple-500 to-pink-500"},{label:"Build Strategy",icon:Gt,tab:"strategy",color:"from-orange-500 to-red-500"},{label:"View History",icon:Va,tab:"history",color:"from-emerald-500 to-teal-500"}];return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"Dashboard"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Welcome! Let's get started on improving your debate skills."})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.map((s,l)=>{const o=s.icon;return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl"}),r.jsxs("div",{className:"relative p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm hover:border-slate-700/60 transition-all h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("div",{className:`p-3 rounded-xl bg-${s.color}-500/10 border border-${s.color}-500/20`,children:r.jsx(o,{className:`w-6 h-6 text-${s.color}-400`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:s.label}),r.jsx("p",{className:"text-lg font-semibold text-white mt-0.5",children:s.title})]})]}),r.jsx("p",{className:"text-slate-400 text-sm flex-1 mb-4",children:s.description}),r.jsxs("button",{onClick:()=>t(s.tab),className:`w-full py-2.5 px-4 rounded-lg bg-${s.color}-500/10 border border-${s.color}-500/30 text-${s.color}-400 font-medium hover:bg-${s.color}-500/20 transition-all flex items-center justify-center gap-2`,children:[r.jsx(na,{className:"w-4 h-4"}),s.action]})]})]},s.label)})}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm h-full",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Performance Trend"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Track your improvement over time"})]})}),r.jsxs("div",{className:"relative h-48 mt-4 flex flex-col items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 flex items-end justify-between gap-2 px-2 opacity-20",children:[40,55,45,60,50,65,58,70,63,75,68,80].map((s,l)=>r.jsx("div",{className:"flex-1 flex flex-col items-center gap-2",children:r.jsx("div",{style:{height:`${s}%`},className:"w-full bg-gradient-to-t from-slate-700/50 to-slate-600/30 rounded-t-lg"})},l))}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("div",{className:"p-4 rounded-full bg-slate-800/50 border border-slate-700/50 mb-4 mx-auto w-fit",children:r.jsx(ss,{className:"w-8 h-8 text-slate-500"})}),r.jsx("p",{className:"text-slate-400 font-medium",children:"No performance data yet"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Complete your first analysis to start tracking progress"})]})]})]})}),r.jsx("div",{children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm h-full",children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),r.jsx("div",{className:"space-y-3",children:n.map((s,l)=>{const o=s.icon;return r.jsxs("button",{onClick:()=>t(s.tab),className:"w-full flex items-center gap-4 p-4 rounded-xl border border-slate-800/60 bg-slate-900/50 hover:bg-slate-800/50 hover:border-slate-700 transition-all group",children:[r.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br ${s.color} shadow-lg`,children:r.jsx(o,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"flex-1 text-left text-white font-medium",children:s.label}),r.jsx(Un,{className:"w-5 h-5 text-slate-500 group-hover:text-slate-300 group-hover:translate-x-1 transition-all"})]},s.label)})})]})})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Activity"})}),r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx("div",{className:"p-4 rounded-full bg-slate-800/50 border border-slate-700/50 mb-4",children:r.jsx(Va,{className:"w-8 h-8 text-slate-500"})}),r.jsx("p",{className:"text-slate-400 font-medium",children:"No recent activity"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1 text-center max-w-md",children:"Your recent analyses, coaching sessions, and strategies will appear here as you use the platform."}),r.jsxs("button",{onClick:()=>t("judge"),className:"mt-6 px-5 py-2.5 rounded-lg bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 font-medium hover:bg-cyan-500/20 transition-all flex items-center gap-2",children:[r.jsx(as,{className:"w-4 h-4"}),"Start Your First Analysis"]})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"relative overflow-hidden rounded-2xl border border-slate-800/60",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-purple-500/10 to-cyan-500/10"}),r.jsxs("div",{className:"relative p-6 flex items-center gap-6",children:[r.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-cyan-500 to-purple-600 shadow-lg",children:r.jsx(Nl,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Getting Started"}),r.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Start by analyzing your first speech. Upload a recording or paste your speech text to get detailed AI-powered feedback."})]}),r.jsx("button",{onClick:()=>t("judge"),className:"px-5 py-2.5 rounded-lg bg-white text-slate-900 font-semibold hover:bg-slate-100 transition-colors",children:"Get Started"})]})]})]})};function hM(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const fM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,mM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pM={};function j2(t,e){return(pM.jsx?mM:fM).test(t)}const gM=/[ \t\n\f\r]/g;function xM(t){return typeof t=="object"?t.type==="text"?E2(t.value):!1:E2(t)}function E2(t){return t.replace(gM,"")===""}class cd{constructor(e,n,s){this.normal=n,this.property=e,s&&(this.space=s)}}cd.prototype.normal={};cd.prototype.property={};cd.prototype.space=void 0;function P5(t,e){const n={},s={};for(const l of t)Object.assign(n,l.property),Object.assign(s,l.normal);return new cd(n,s,e)}function Dg(t){return t.toLowerCase()}class is{constructor(e,n){this.attribute=n,this.property=e}}is.prototype.attribute="";is.prototype.booleanish=!1;is.prototype.boolean=!1;is.prototype.commaOrSpaceSeparated=!1;is.prototype.commaSeparated=!1;is.prototype.defined=!1;is.prototype.mustUseProperty=!1;is.prototype.number=!1;is.prototype.overloadedBoolean=!1;is.prototype.property="";is.prototype.spaceSeparated=!1;is.prototype.space=void 0;let yM=0;const $e=Cl(),an=Cl(),Mg=Cl(),pe=Cl(),At=Cl(),Ro=Cl(),gs=Cl();function Cl(){return 2**++yM}const Og=Object.freeze(Object.defineProperty({__proto__:null,boolean:$e,booleanish:an,commaOrSpaceSeparated:gs,commaSeparated:Ro,number:pe,overloadedBoolean:Mg,spaceSeparated:At},Symbol.toStringTag,{value:"Module"})),U0=Object.keys(Og);class Zx extends is{constructor(e,n,s,l){let o=-1;if(super(e,n),S2(this,"space",l),typeof s=="number")for(;++o<U0.length;){const u=U0[o];S2(this,U0[o],(s&Og[u])===Og[u])}}}Zx.prototype.defined=!0;function S2(t,e,n){n&&(t[e]=n)}function sc(t){const e={},n={};for(const[s,l]of Object.entries(t.properties)){const o=new Zx(s,t.transform(t.attributes||{},s),l,t.space);t.mustUseProperty&&t.mustUseProperty.includes(s)&&(o.mustUseProperty=!0),e[s]=o,n[Dg(s)]=s,n[Dg(o.attribute)]=s}return new cd(e,n,t.space)}const L5=sc({properties:{ariaActiveDescendant:null,ariaAtomic:an,ariaAutoComplete:null,ariaBusy:an,ariaChecked:an,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:At,ariaCurrent:null,ariaDescribedBy:At,ariaDetails:null,ariaDisabled:an,ariaDropEffect:At,ariaErrorMessage:null,ariaExpanded:an,ariaFlowTo:At,ariaGrabbed:an,ariaHasPopup:null,ariaHidden:an,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:At,ariaLevel:pe,ariaLive:null,ariaModal:an,ariaMultiLine:an,ariaMultiSelectable:an,ariaOrientation:null,ariaOwns:At,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:an,ariaReadOnly:an,ariaRelevant:null,ariaRequired:an,ariaRoleDescription:At,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:an,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function V5(t,e){return e in t?t[e]:e}function z5(t,e){return V5(t,e.toLowerCase())}const bM=sc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ro,acceptCharset:At,accessKey:At,action:null,allow:null,allowFullScreen:$e,allowPaymentRequest:$e,allowUserMedia:$e,alt:null,as:null,async:$e,autoCapitalize:null,autoComplete:At,autoFocus:$e,autoPlay:$e,blocking:At,capture:null,charSet:null,checked:$e,cite:null,className:At,cols:pe,colSpan:null,content:null,contentEditable:an,controls:$e,controlsList:At,coords:pe|Ro,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$e,defer:$e,dir:null,dirName:null,disabled:$e,download:Mg,draggable:an,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$e,formTarget:null,headers:At,height:pe,hidden:Mg,high:pe,href:null,hrefLang:null,htmlFor:At,httpEquiv:At,id:null,imageSizes:null,imageSrcSet:null,inert:$e,inputMode:null,integrity:null,is:null,isMap:$e,itemId:null,itemProp:At,itemRef:At,itemScope:$e,itemType:At,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$e,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:$e,muted:$e,name:null,nonce:null,noModule:$e,noValidate:$e,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$e,optimum:pe,pattern:null,ping:At,placeholder:null,playsInline:$e,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$e,referrerPolicy:null,rel:At,required:$e,reversed:$e,rows:pe,rowSpan:pe,sandbox:At,scope:null,scoped:$e,seamless:$e,selected:$e,shadowRootClonable:$e,shadowRootDelegatesFocus:$e,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:an,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:$e,useMap:null,value:an,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:At,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$e,declare:$e,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:$e,noHref:$e,noShade:$e,noWrap:$e,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:an,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$e,disableRemotePlayback:$e,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:z5}),vM=sc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:gs,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:At,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:$e,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ro,g2:Ro,glyphName:Ro,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:gs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:At,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gs,rev:gs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gs,requiredFeatures:gs,requiredFonts:gs,requiredFormats:gs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:gs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gs,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:V5}),U5=sc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),F5=sc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:z5}),B5=sc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),wM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},NM=/[A-Z]/g,T2=/-[a-z]/g,_M=/^data[-\w.:]+$/i;function jM(t,e){const n=Dg(e);let s=e,l=is;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_M.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(T2,SM);s="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!T2.test(o)){let u=o.replace(NM,EM);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}l=Zx}return new l(s,e)}function EM(t){return"-"+t.toLowerCase()}function SM(t){return t.charAt(1).toUpperCase()}const TM=P5([L5,bM,U5,F5,B5],"html"),ey=P5([L5,vM,U5,F5,B5],"svg");function AM(t){return t.join(" ").trim()}var yo={},F0,A2;function CM(){if(A2)return F0;A2=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,h=/^\s+|\s+$/g,f=`
`,m="/",x="*",b="",v="comment",N="declaration";function E(R,z){if(typeof R!="string")throw new TypeError("First argument must be a string");if(!R)return[];z=z||{};var L=1,H=1;function X(re){var te=re.match(e);te&&(L+=te.length);var q=re.lastIndexOf(f);H=~q?re.length-q:H+re.length}function se(){var re={line:L,column:H};return function(te){return te.position=new Y(re),M(),te}}function Y(re){this.start=re,this.end={line:L,column:H},this.source=z.source}Y.prototype.content=R;function I(re){var te=new Error(z.source+":"+L+":"+H+": "+re);if(te.reason=re,te.filename=z.source,te.line=L,te.column=H,te.source=R,!z.silent)throw te}function T(re){var te=re.exec(R);if(te){var q=te[0];return X(q),R=R.slice(q.length),te}}function M(){T(n)}function S(re){var te;for(re=re||[];te=A();)te!==!1&&re.push(te);return re}function A(){var re=se();if(!(m!=R.charAt(0)||x!=R.charAt(1))){for(var te=2;b!=R.charAt(te)&&(x!=R.charAt(te)||m!=R.charAt(te+1));)++te;if(te+=2,b===R.charAt(te-1))return I("End of comment missing");var q=R.slice(2,te-2);return H+=2,X(q),R=R.slice(te),H+=2,re({type:v,comment:q})}}function P(){var re=se(),te=T(s);if(te){if(A(),!T(l))return I("property missing ':'");var q=T(o),Z=re({type:N,property:V(te[0].replace(t,b)),value:q?V(q[0].replace(t,b)):b});return T(u),Z}}function D(){var re=[];S(re);for(var te;te=P();)te!==!1&&(re.push(te),S(re));return re}return M(),D()}function V(R){return R?R.replace(h,b):b}return F0=E,F0}var C2;function kM(){if(C2)return yo;C2=1;var t=yo&&yo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yo,"__esModule",{value:!0}),yo.default=n;const e=t(CM());function n(s,l){let o=null;if(!s||typeof s!="string")return o;const u=(0,e.default)(s),h=typeof l=="function";return u.forEach(f=>{if(f.type!=="declaration")return;const{property:m,value:x}=f;h?l(m,x,f):x&&(o=o||{},o[m]=x)}),o}return yo}var ou={},k2;function IM(){if(k2)return ou;k2=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(m){return!m||n.test(m)||t.test(m)},u=function(m,x){return x.toUpperCase()},h=function(m,x){return"".concat(x,"-")},f=function(m,x){return x===void 0&&(x={}),o(m)?m:(m=m.toLowerCase(),x.reactCompat?m=m.replace(l,h):m=m.replace(s,h),m.replace(e,u))};return ou.camelCase=f,ou}var cu,I2;function RM(){if(I2)return cu;I2=1;var t=cu&&cu.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},e=t(kM()),n=IM();function s(l,o){var u={};return!l||typeof l!="string"||(0,e.default)(l,function(h,f){h&&f&&(u[(0,n.camelCase)(h,o)]=f)}),u}return s.default=s,cu=s,cu}var DM=RM();const MM=Gg(DM),q5=H5("end"),ty=H5("start");function H5(t){return e;function e(n){const s=n&&n.position&&n.position[t]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function OM(t){const e=ty(t),n=q5(t);if(e&&n)return{start:e,end:n}}function Eu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?R2(t.position):"start"in t||"end"in t?R2(t):"line"in t||"column"in t?Pg(t):""}function Pg(t){return D2(t&&t.line)+":"+D2(t&&t.column)}function R2(t){return Pg(t&&t.start)+"-"+Pg(t&&t.end)}function D2(t){return t&&typeof t=="number"?t:1}class Bn extends Error{constructor(e,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let l="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?l=e:!o.cause&&e&&(u=!0,l=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof s=="string"){const f=s.indexOf(":");f===-1?o.ruleId=s:(o.source=s.slice(0,f),o.ruleId=s.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const h=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=h?h.line:void 0,this.name=Eu(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Bn.prototype.file="";Bn.prototype.name="";Bn.prototype.reason="";Bn.prototype.message="";Bn.prototype.stack="";Bn.prototype.column=void 0;Bn.prototype.line=void 0;Bn.prototype.ancestors=void 0;Bn.prototype.cause=void 0;Bn.prototype.fatal=void 0;Bn.prototype.place=void 0;Bn.prototype.ruleId=void 0;Bn.prototype.source=void 0;const ny={}.hasOwnProperty,PM=new Map,LM=/[A-Z]/g,VM=new Set(["table","tbody","thead","tfoot","tr"]),zM=new Set(["td","th"]),$5="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function UM(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let s;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=KM(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=YM(n,e.jsx,e.jsxs)}const l={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:s,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?ey:TM,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=G5(l,t,void 0);return o&&typeof o!="string"?o:l.create(t,l.Fragment,{children:o||void 0},void 0)}function G5(t,e,n){if(e.type==="element")return FM(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return BM(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return HM(t,e,n);if(e.type==="mdxjsEsm")return qM(t,e);if(e.type==="root")return $M(t,e,n);if(e.type==="text")return GM(t,e)}function FM(t,e,n){const s=t.schema;let l=s;e.tagName.toLowerCase()==="svg"&&s.space==="html"&&(l=ey,t.schema=l),t.ancestors.push(e);const o=K5(t,e.tagName,!1),u=QM(t,e);let h=ay(t,e);return VM.has(e.tagName)&&(h=h.filter(function(f){return typeof f=="string"?!xM(f):!0})),Y5(t,u,o,e),sy(u,h),t.ancestors.pop(),t.schema=s,t.create(e,o,u,n)}function BM(t,e){if(e.data&&e.data.estree&&t.evaluater){const s=e.data.estree.body[0];return s.type,t.evaluater.evaluateExpression(s.expression)}Bu(t,e.position)}function qM(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Bu(t,e.position)}function HM(t,e,n){const s=t.schema;let l=s;e.name==="svg"&&s.space==="html"&&(l=ey,t.schema=l),t.ancestors.push(e);const o=e.name===null?t.Fragment:K5(t,e.name,!0),u=XM(t,e),h=ay(t,e);return Y5(t,u,o,e),sy(u,h),t.ancestors.pop(),t.schema=s,t.create(e,o,u,n)}function $M(t,e,n){const s={};return sy(s,ay(t,e)),t.create(e,t.Fragment,s,n)}function GM(t,e){return e.value}function Y5(t,e,n,s){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=s)}function sy(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function YM(t,e,n){return s;function s(l,o,u,h){const m=Array.isArray(u.children)?n:e;return h?m(o,u,h):m(o,u)}}function KM(t,e){return n;function n(s,l,o,u){const h=Array.isArray(o.children),f=ty(s);return e(l,o,u,h,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function QM(t,e){const n={};let s,l;for(l in e.properties)if(l!=="children"&&ny.call(e.properties,l)){const o=WM(t,l,e.properties[l]);if(o){const[u,h]=o;t.tableCellAlignToStyle&&u==="align"&&typeof h=="string"&&zM.has(e.tagName)?s=h:n[u]=h}}if(s){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function XM(t,e){const n={};for(const s of e.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&t.evaluater){const o=s.data.estree.body[0];o.type;const u=o.expression;u.type;const h=u.properties[0];h.type,Object.assign(n,t.evaluater.evaluateExpression(h.argument))}else Bu(t,e.position);else{const l=s.name;let o;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&t.evaluater){const h=s.value.data.estree.body[0];h.type,o=t.evaluater.evaluateExpression(h.expression)}else Bu(t,e.position);else o=s.value===null?!0:s.value;n[l]=o}return n}function ay(t,e){const n=[];let s=-1;const l=t.passKeys?new Map:PM;for(;++s<e.children.length;){const o=e.children[s];let u;if(t.passKeys){const f=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(f){const m=l.get(f)||0;u=f+"-"+m,l.set(f,m+1)}}const h=G5(t,o,u);h!==void 0&&n.push(h)}return n}function WM(t,e,n){const s=jM(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?hM(n):AM(n)),s.property==="style"){let l=typeof n=="object"?n:JM(t,String(n));return t.stylePropertyNameCase==="css"&&(l=ZM(l)),["style",l]}return[t.elementAttributeNameCase==="react"&&s.space?wM[s.property]||s.property:s.attribute,n]}}function JM(t,e){try{return MM(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const s=n,l=new Bn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=t.filePath||void 0,l.url=$5+"#cannot-parse-style-attribute",l}}function K5(t,e,n){let s;if(!n)s={type:"Literal",value:e};else if(e.includes(".")){const l=e.split(".");let o=-1,u;for(;++o<l.length;){const h=j2(l[o])?{type:"Identifier",name:l[o]}:{type:"Literal",value:l[o]};u=u?{type:"MemberExpression",object:u,property:h,computed:!!(o&&h.type==="Literal"),optional:!1}:h}s=u}else s=j2(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(s.type==="Literal"){const l=s.value;return ny.call(t.components,l)?t.components[l]:l}if(t.evaluater)return t.evaluater.evaluateExpression(s);Bu(t)}function Bu(t,e){const n=new Bn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=$5+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ZM(t){const e={};let n;for(n in t)ny.call(t,n)&&(e[eO(n)]=t[n]);return e}function eO(t){let e=t.replace(LM,tO);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function tO(t){return"-"+t.toLowerCase()}const B0={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nO={};function ry(t,e){const n=nO,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Q5(t,s,l)}function Q5(t,e,n){if(sO(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return M2(t.children,e,n)}return Array.isArray(t)?M2(t,e,n):""}function M2(t,e,n){const s=[];let l=-1;for(;++l<t.length;)s[l]=Q5(t[l],e,n);return s.join("")}function sO(t){return!!(t&&typeof t=="object")}const O2=document.createElement("i");function iy(t){const e="&"+t+";";O2.innerHTML=e;const n=O2.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function bs(t,e,n,s){const l=t.length;let o=0,u;if(e<0?e=-e>l?0:l+e:e=e>l?l:e,n=n>0?n:0,s.length<1e4)u=Array.from(s),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<s.length;)u=s.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function Ds(t,e){return t.length>0?(bs(t,t.length,0,e),t):e}const P2={}.hasOwnProperty;function X5(t){const e={};let n=-1;for(;++n<t.length;)aO(e,t[n]);return e}function aO(t,e){let n;for(n in e){const l=(P2.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){P2.call(l,u)||(l[u]=[]);const h=o[u];rO(l[u],Array.isArray(h)?h:h?[h]:[])}}}function rO(t,e){let n=-1;const s=[];for(;++n<e.length;)(e[n].add==="after"?t:s).push(e[n]);bs(t,0,0,s)}function W5(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ta(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $n=Ii(/[A-Za-z]/),Vn=Ii(/[\dA-Za-z]/),iO=Ii(/[#-'*+\--9=?A-Z^-~]/);function Of(t){return t!==null&&(t<32||t===127)}const Lg=Ii(/\d/),lO=Ii(/[\dA-Fa-f]/),oO=Ii(/[!-/:-@[-`{-~]/);function De(t){return t!==null&&t<-2}function Tt(t){return t!==null&&(t<0||t===32)}function Je(t){return t===-2||t===-1||t===32}const Nm=Ii(new RegExp("\\p{P}|\\p{S}","u")),yl=Ii(/\s/);function Ii(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function ac(t){const e=[];let n=-1,s=0,l=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&Vn(t.charCodeAt(n+1))&&Vn(t.charCodeAt(n+2)))l=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const h=t.charCodeAt(n+1);o<56320&&h>56319&&h<57344?(u=String.fromCharCode(o,h),l=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(s,n),encodeURIComponent(u)),s=n+l+1,u=""),l&&(n+=l,l=0)}return e.join("")+t.slice(s)}function lt(t,e,n,s){const l=s?s-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(f){return Je(f)?(t.enter(n),h(f)):e(f)}function h(f){return Je(f)&&o++<l?(t.consume(f),h):(t.exit(n),e(f))}}const cO={tokenize:uO};function uO(t){const e=t.attempt(this.parser.constructs.contentInitial,s,l);let n;return e;function s(h){if(h===null){t.consume(h);return}return t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),lt(t,e,"linePrefix")}function l(h){return t.enter("paragraph"),o(h)}function o(h){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,u(h)}function u(h){if(h===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(h);return}return De(h)?(t.consume(h),t.exit("chunkText"),o):(t.consume(h),u)}}const dO={tokenize:hO},L2={tokenize:fO};function hO(t){const e=this,n=[];let s=0,l,o,u;return h;function h(H){if(s<n.length){const X=n[s];return e.containerState=X[1],t.attempt(X[0].continuation,f,m)(H)}return m(H)}function f(H){if(s++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,l&&L();const X=e.events.length;let se=X,Y;for(;se--;)if(e.events[se][0]==="exit"&&e.events[se][1].type==="chunkFlow"){Y=e.events[se][1].end;break}z(s);let I=X;for(;I<e.events.length;)e.events[I][1].end={...Y},I++;return bs(e.events,se+1,0,e.events.slice(X)),e.events.length=I,m(H)}return h(H)}function m(H){if(s===n.length){if(!l)return v(H);if(l.currentConstruct&&l.currentConstruct.concrete)return E(H);e.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(L2,x,b)(H)}function x(H){return l&&L(),z(s),v(H)}function b(H){return e.parser.lazy[e.now().line]=s!==n.length,u=e.now().offset,E(H)}function v(H){return e.containerState={},t.attempt(L2,N,E)(H)}function N(H){return s++,n.push([e.currentConstruct,e.containerState]),v(H)}function E(H){if(H===null){l&&L(),z(0),t.consume(H);return}return l=l||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:o}),V(H)}function V(H){if(H===null){R(t.exit("chunkFlow"),!0),z(0),t.consume(H);return}return De(H)?(t.consume(H),R(t.exit("chunkFlow")),s=0,e.interrupt=void 0,h):(t.consume(H),V)}function R(H,X){const se=e.sliceStream(H);if(X&&se.push(null),H.previous=o,o&&(o.next=H),o=H,l.defineSkip(H.start),l.write(se),e.parser.lazy[H.start.line]){let Y=l.events.length;for(;Y--;)if(l.events[Y][1].start.offset<u&&(!l.events[Y][1].end||l.events[Y][1].end.offset>u))return;const I=e.events.length;let T=I,M,S;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(M){S=e.events[T][1].end;break}M=!0}for(z(s),Y=I;Y<e.events.length;)e.events[Y][1].end={...S},Y++;bs(e.events,T+1,0,e.events.slice(I)),e.events.length=Y}}function z(H){let X=n.length;for(;X-- >H;){const se=n[X];e.containerState=se[1],se[0].exit.call(e,t)}n.length=H}function L(){l.write([null]),o=void 0,l=void 0,e.containerState._closeFlow=void 0}}function fO(t,e,n){return lt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $o(t){if(t===null||Tt(t)||yl(t))return 1;if(Nm(t))return 2}function _m(t,e,n){const s=[];let l=-1;for(;++l<t.length;){const o=t[l].resolveAll;o&&!s.includes(o)&&(e=o(e,n),s.push(o))}return e}const Vg={name:"attention",resolveAll:mO,tokenize:pO};function mO(t,e){let n=-1,s,l,o,u,h,f,m,x;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(s=n;s--;)if(t[s][0]==="exit"&&t[s][1].type==="attentionSequence"&&t[s][1]._open&&e.sliceSerialize(t[s][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[s][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[s][1].end.offset-t[s][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[s][1].end.offset-t[s][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const b={...t[s][1].end},v={...t[n][1].start};V2(b,-f),V2(v,f),u={type:f>1?"strongSequence":"emphasisSequence",start:b,end:{...t[s][1].end}},h={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},o={type:f>1?"strongText":"emphasisText",start:{...t[s][1].end},end:{...t[n][1].start}},l={type:f>1?"strong":"emphasis",start:{...u.start},end:{...h.end}},t[s][1].end={...u.start},t[n][1].start={...h.end},m=[],t[s][1].end.offset-t[s][1].start.offset&&(m=Ds(m,[["enter",t[s][1],e],["exit",t[s][1],e]])),m=Ds(m,[["enter",l,e],["enter",u,e],["exit",u,e],["enter",o,e]]),m=Ds(m,_m(e.parser.constructs.insideSpan.null,t.slice(s+1,n),e)),m=Ds(m,[["exit",o,e],["enter",h,e],["exit",h,e],["exit",l,e]]),t[n][1].end.offset-t[n][1].start.offset?(x=2,m=Ds(m,[["enter",t[n][1],e],["exit",t[n][1],e]])):x=0,bs(t,s-1,n-s+3,m),n=s+m.length-x-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function pO(t,e){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,l=$o(s);let o;return u;function u(f){return o=f,t.enter("attentionSequence"),h(f)}function h(f){if(f===o)return t.consume(f),h;const m=t.exit("attentionSequence"),x=$o(f),b=!x||x===2&&l||n.includes(f),v=!l||l===2&&x||n.includes(s);return m._open=!!(o===42?b:b&&(l||!v)),m._close=!!(o===42?v:v&&(x||!b)),e(f)}}function V2(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const gO={name:"autolink",tokenize:xO};function xO(t,e,n){let s=0;return l;function l(N){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(N),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(N){return $n(N)?(t.consume(N),u):N===64?n(N):m(N)}function u(N){return N===43||N===45||N===46||Vn(N)?(s=1,h(N)):m(N)}function h(N){return N===58?(t.consume(N),s=0,f):(N===43||N===45||N===46||Vn(N))&&s++<32?(t.consume(N),h):(s=0,m(N))}function f(N){return N===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(N),t.exit("autolinkMarker"),t.exit("autolink"),e):N===null||N===32||N===60||Of(N)?n(N):(t.consume(N),f)}function m(N){return N===64?(t.consume(N),x):iO(N)?(t.consume(N),m):n(N)}function x(N){return Vn(N)?b(N):n(N)}function b(N){return N===46?(t.consume(N),s=0,x):N===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(N),t.exit("autolinkMarker"),t.exit("autolink"),e):v(N)}function v(N){if((N===45||Vn(N))&&s++<63){const E=N===45?v:b;return t.consume(N),E}return n(N)}}const ud={partial:!0,tokenize:yO};function yO(t,e,n){return s;function s(o){return Je(o)?lt(t,l,"linePrefix")(o):l(o)}function l(o){return o===null||De(o)?e(o):n(o)}}const J5={continuation:{tokenize:vO},exit:wO,name:"blockQuote",tokenize:bO};function bO(t,e,n){const s=this;return l;function l(u){if(u===62){const h=s.containerState;return h.open||(t.enter("blockQuote",{_container:!0}),h.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return Je(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function vO(t,e,n){const s=this;return l;function l(u){return Je(u)?lt(t,o,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt(J5,e,n)(u)}}function wO(t){t.exit("blockQuote")}const Z5={name:"characterEscape",tokenize:NO};function NO(t,e,n){return s;function s(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),l}function l(o){return oO(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const eE={name:"characterReference",tokenize:_O};function _O(t,e,n){const s=this;let l=0,o,u;return h;function h(b){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(b),t.exit("characterReferenceMarker"),f}function f(b){return b===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(b),t.exit("characterReferenceMarkerNumeric"),m):(t.enter("characterReferenceValue"),o=31,u=Vn,x(b))}function m(b){return b===88||b===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(b),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=lO,x):(t.enter("characterReferenceValue"),o=7,u=Lg,x(b))}function x(b){if(b===59&&l){const v=t.exit("characterReferenceValue");return u===Vn&&!iy(s.sliceSerialize(v))?n(b):(t.enter("characterReferenceMarker"),t.consume(b),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(b)&&l++<o?(t.consume(b),x):n(b)}}const z2={partial:!0,tokenize:EO},U2={concrete:!0,name:"codeFenced",tokenize:jO};function jO(t,e,n){const s=this,l={partial:!0,tokenize:se};let o=0,u=0,h;return f;function f(Y){return m(Y)}function m(Y){const I=s.events[s.events.length-1];return o=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,h=Y,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),x(Y)}function x(Y){return Y===h?(u++,t.consume(Y),x):u<3?n(Y):(t.exit("codeFencedFenceSequence"),Je(Y)?lt(t,b,"whitespace")(Y):b(Y))}function b(Y){return Y===null||De(Y)?(t.exit("codeFencedFence"),s.interrupt?e(Y):t.check(z2,V,X)(Y)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(Y))}function v(Y){return Y===null||De(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),b(Y)):Je(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),lt(t,N,"whitespace")(Y)):Y===96&&Y===h?n(Y):(t.consume(Y),v)}function N(Y){return Y===null||De(Y)?b(Y):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),E(Y))}function E(Y){return Y===null||De(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),b(Y)):Y===96&&Y===h?n(Y):(t.consume(Y),E)}function V(Y){return t.attempt(l,X,R)(Y)}function R(Y){return t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),z}function z(Y){return o>0&&Je(Y)?lt(t,L,"linePrefix",o+1)(Y):L(Y)}function L(Y){return Y===null||De(Y)?t.check(z2,V,X)(Y):(t.enter("codeFlowValue"),H(Y))}function H(Y){return Y===null||De(Y)?(t.exit("codeFlowValue"),L(Y)):(t.consume(Y),H)}function X(Y){return t.exit("codeFenced"),e(Y)}function se(Y,I,T){let M=0;return S;function S(te){return Y.enter("lineEnding"),Y.consume(te),Y.exit("lineEnding"),A}function A(te){return Y.enter("codeFencedFence"),Je(te)?lt(Y,P,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(te):P(te)}function P(te){return te===h?(Y.enter("codeFencedFenceSequence"),D(te)):T(te)}function D(te){return te===h?(M++,Y.consume(te),D):M>=u?(Y.exit("codeFencedFenceSequence"),Je(te)?lt(Y,re,"whitespace")(te):re(te)):T(te)}function re(te){return te===null||De(te)?(Y.exit("codeFencedFence"),I(te)):T(te)}}}function EO(t,e,n){const s=this;return l;function l(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return s.parser.lazy[s.now().line]?n(u):e(u)}}const q0={name:"codeIndented",tokenize:TO},SO={partial:!0,tokenize:AO};function TO(t,e,n){const s=this;return l;function l(m){return t.enter("codeIndented"),lt(t,o,"linePrefix",5)(m)}function o(m){const x=s.events[s.events.length-1];return x&&x[1].type==="linePrefix"&&x[2].sliceSerialize(x[1],!0).length>=4?u(m):n(m)}function u(m){return m===null?f(m):De(m)?t.attempt(SO,u,f)(m):(t.enter("codeFlowValue"),h(m))}function h(m){return m===null||De(m)?(t.exit("codeFlowValue"),u(m)):(t.consume(m),h)}function f(m){return t.exit("codeIndented"),e(m)}}function AO(t,e,n){const s=this;return l;function l(u){return s.parser.lazy[s.now().line]?n(u):De(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),l):lt(t,o,"linePrefix",5)(u)}function o(u){const h=s.events[s.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(u):De(u)?l(u):n(u)}}const CO={name:"codeText",previous:IO,resolve:kO,tokenize:RO};function kO(t){let e=t.length-4,n=3,s,l;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(s=n;++s<e;)if(t[s][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(s=n-1,e++;++s<=e;)l===void 0?s!==e&&t[s][1].type!=="lineEnding"&&(l=s):(s===e||t[s][1].type==="lineEnding")&&(t[l][1].type="codeTextData",s!==l+2&&(t[l][1].end=t[s-1][1].end,t.splice(l+2,s-l-2),e-=s-l-2,s=l+2),l=void 0);return t}function IO(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function RO(t,e,n){let s=0,l,o;return u;function u(b){return t.enter("codeText"),t.enter("codeTextSequence"),h(b)}function h(b){return b===96?(t.consume(b),s++,h):(t.exit("codeTextSequence"),f(b))}function f(b){return b===null?n(b):b===32?(t.enter("space"),t.consume(b),t.exit("space"),f):b===96?(o=t.enter("codeTextSequence"),l=0,x(b)):De(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),f):(t.enter("codeTextData"),m(b))}function m(b){return b===null||b===32||b===96||De(b)?(t.exit("codeTextData"),f(b)):(t.consume(b),m)}function x(b){return b===96?(t.consume(b),l++,x):l===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(b)):(o.type="codeTextData",m(b))}}class DO{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(e,s):e>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(e,n,s){const l=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return s&&uu(this.left,s),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),uu(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),uu(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);uu(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);uu(this.left,n.reverse())}}}function uu(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function tE(t){const e={};let n=-1,s,l,o,u,h,f,m;const x=new DO(t);for(;++n<x.length;){for(;n in e;)n=e[n];if(s=x.get(n),n&&s[1].type==="chunkFlow"&&x.get(n-1)[1].type==="listItemPrefix"&&(f=s[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(s[0]==="enter")s[1].contentType&&(Object.assign(e,MO(x,n)),n=e[n],m=!0);else if(s[1]._container){for(o=n,l=void 0;o--;)if(u=x.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(l&&(x.get(l)[1].type="lineEndingBlank"),u[1].type="lineEnding",l=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;l&&(s[1].end={...x.get(l)[1].start},h=x.slice(l,n),h.unshift(s),x.splice(l,n-l+1,h))}}return bs(t,0,Number.POSITIVE_INFINITY,x.slice(0)),!m}function MO(t,e){const n=t.get(e)[1],s=t.get(e)[2];let l=e-1;const o=[];let u=n._tokenizer;u||(u=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const h=u.events,f=[],m={};let x,b,v=-1,N=n,E=0,V=0;const R=[V];for(;N;){for(;t.get(++l)[1]!==N;);o.push(l),N._tokenizer||(x=s.sliceStream(N),N.next||x.push(null),b&&u.defineSkip(N.start),N._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(x),N._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),b=N,N=N.next}for(N=n;++v<h.length;)h[v][0]==="exit"&&h[v-1][0]==="enter"&&h[v][1].type===h[v-1][1].type&&h[v][1].start.line!==h[v][1].end.line&&(V=v+1,R.push(V),N._tokenizer=void 0,N.previous=void 0,N=N.next);for(u.events=[],N?(N._tokenizer=void 0,N.previous=void 0):R.pop(),v=R.length;v--;){const z=h.slice(R[v],R[v+1]),L=o.pop();f.push([L,L+z.length-1]),t.splice(L,2,z)}for(f.reverse(),v=-1;++v<f.length;)m[E+f[v][0]]=E+f[v][1],E+=f[v][1]-f[v][0]-1;return m}const OO={resolve:LO,tokenize:VO},PO={partial:!0,tokenize:zO};function LO(t){return tE(t),t}function VO(t,e){let n;return s;function s(h){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),l(h)}function l(h){return h===null?o(h):De(h)?t.check(PO,u,o)(h):(t.consume(h),l)}function o(h){return t.exit("chunkContent"),t.exit("content"),e(h)}function u(h){return t.consume(h),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function zO(t,e,n){const s=this;return l;function l(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),lt(t,o,"linePrefix")}function o(u){if(u===null||De(u))return n(u);const h=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(u):t.interrupt(s.parser.constructs.flow,n,e)(u)}}function nE(t,e,n,s,l,o,u,h,f){const m=f||Number.POSITIVE_INFINITY;let x=0;return b;function b(z){return z===60?(t.enter(s),t.enter(l),t.enter(o),t.consume(z),t.exit(o),v):z===null||z===32||z===41||Of(z)?n(z):(t.enter(s),t.enter(u),t.enter(h),t.enter("chunkString",{contentType:"string"}),V(z))}function v(z){return z===62?(t.enter(o),t.consume(z),t.exit(o),t.exit(l),t.exit(s),e):(t.enter(h),t.enter("chunkString",{contentType:"string"}),N(z))}function N(z){return z===62?(t.exit("chunkString"),t.exit(h),v(z)):z===null||z===60||De(z)?n(z):(t.consume(z),z===92?E:N)}function E(z){return z===60||z===62||z===92?(t.consume(z),N):N(z)}function V(z){return!x&&(z===null||z===41||Tt(z))?(t.exit("chunkString"),t.exit(h),t.exit(u),t.exit(s),e(z)):x<m&&z===40?(t.consume(z),x++,V):z===41?(t.consume(z),x--,V):z===null||z===32||z===40||Of(z)?n(z):(t.consume(z),z===92?R:V)}function R(z){return z===40||z===41||z===92?(t.consume(z),V):V(z)}}function sE(t,e,n,s,l,o){const u=this;let h=0,f;return m;function m(N){return t.enter(s),t.enter(l),t.consume(N),t.exit(l),t.enter(o),x}function x(N){return h>999||N===null||N===91||N===93&&!f||N===94&&!h&&"_hiddenFootnoteSupport"in u.parser.constructs?n(N):N===93?(t.exit(o),t.enter(l),t.consume(N),t.exit(l),t.exit(s),e):De(N)?(t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),x):(t.enter("chunkString",{contentType:"string"}),b(N))}function b(N){return N===null||N===91||N===93||De(N)||h++>999?(t.exit("chunkString"),x(N)):(t.consume(N),f||(f=!Je(N)),N===92?v:b)}function v(N){return N===91||N===92||N===93?(t.consume(N),h++,b):b(N)}}function aE(t,e,n,s,l,o){let u;return h;function h(v){return v===34||v===39||v===40?(t.enter(s),t.enter(l),t.consume(v),t.exit(l),u=v===40?41:v,f):n(v)}function f(v){return v===u?(t.enter(l),t.consume(v),t.exit(l),t.exit(s),e):(t.enter(o),m(v))}function m(v){return v===u?(t.exit(o),f(u)):v===null?n(v):De(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),lt(t,m,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),x(v))}function x(v){return v===u||v===null||De(v)?(t.exit("chunkString"),m(v)):(t.consume(v),v===92?b:x)}function b(v){return v===u||v===92?(t.consume(v),x):x(v)}}function Su(t,e){let n;return s;function s(l){return De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),n=!0,s):Je(l)?lt(t,s,n?"linePrefix":"lineSuffix")(l):e(l)}}const UO={name:"definition",tokenize:BO},FO={partial:!0,tokenize:qO};function BO(t,e,n){const s=this;let l;return o;function o(N){return t.enter("definition"),u(N)}function u(N){return sE.call(s,t,h,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(N)}function h(N){return l=ta(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),N===58?(t.enter("definitionMarker"),t.consume(N),t.exit("definitionMarker"),f):n(N)}function f(N){return Tt(N)?Su(t,m)(N):m(N)}function m(N){return nE(t,x,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(N)}function x(N){return t.attempt(FO,b,b)(N)}function b(N){return Je(N)?lt(t,v,"whitespace")(N):v(N)}function v(N){return N===null||De(N)?(t.exit("definition"),s.parser.defined.push(l),e(N)):n(N)}}function qO(t,e,n){return s;function s(h){return Tt(h)?Su(t,l)(h):n(h)}function l(h){return aE(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function o(h){return Je(h)?lt(t,u,"whitespace")(h):u(h)}function u(h){return h===null||De(h)?e(h):n(h)}}const HO={name:"hardBreakEscape",tokenize:$O};function $O(t,e,n){return s;function s(o){return t.enter("hardBreakEscape"),t.consume(o),l}function l(o){return De(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const GO={name:"headingAtx",resolve:YO,tokenize:KO};function YO(t,e){let n=t.length-2,s=3,l,o;return t[s][1].type==="whitespace"&&(s+=2),n-2>s&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&t[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(l={type:"atxHeadingText",start:t[s][1].start,end:t[n][1].end},o={type:"chunkText",start:t[s][1].start,end:t[n][1].end,contentType:"text"},bs(t,s,n-s+1,[["enter",l,e],["enter",o,e],["exit",o,e],["exit",l,e]])),t}function KO(t,e,n){let s=0;return l;function l(x){return t.enter("atxHeading"),o(x)}function o(x){return t.enter("atxHeadingSequence"),u(x)}function u(x){return x===35&&s++<6?(t.consume(x),u):x===null||Tt(x)?(t.exit("atxHeadingSequence"),h(x)):n(x)}function h(x){return x===35?(t.enter("atxHeadingSequence"),f(x)):x===null||De(x)?(t.exit("atxHeading"),e(x)):Je(x)?lt(t,h,"whitespace")(x):(t.enter("atxHeadingText"),m(x))}function f(x){return x===35?(t.consume(x),f):(t.exit("atxHeadingSequence"),h(x))}function m(x){return x===null||x===35||Tt(x)?(t.exit("atxHeadingText"),h(x)):(t.consume(x),m)}}const QO=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],F2=["pre","script","style","textarea"],XO={concrete:!0,name:"htmlFlow",resolveTo:ZO,tokenize:e9},WO={partial:!0,tokenize:n9},JO={partial:!0,tokenize:t9};function ZO(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function e9(t,e,n){const s=this;let l,o,u,h,f;return m;function m(U){return x(U)}function x(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),b}function b(U){return U===33?(t.consume(U),v):U===47?(t.consume(U),o=!0,V):U===63?(t.consume(U),l=3,s.interrupt?e:B):$n(U)?(t.consume(U),u=String.fromCharCode(U),R):n(U)}function v(U){return U===45?(t.consume(U),l=2,N):U===91?(t.consume(U),l=5,h=0,E):$n(U)?(t.consume(U),l=4,s.interrupt?e:B):n(U)}function N(U){return U===45?(t.consume(U),s.interrupt?e:B):n(U)}function E(U){const Ie="CDATA[";return U===Ie.charCodeAt(h++)?(t.consume(U),h===Ie.length?s.interrupt?e:P:E):n(U)}function V(U){return $n(U)?(t.consume(U),u=String.fromCharCode(U),R):n(U)}function R(U){if(U===null||U===47||U===62||Tt(U)){const Ie=U===47,Ge=u.toLowerCase();return!Ie&&!o&&F2.includes(Ge)?(l=1,s.interrupt?e(U):P(U)):QO.includes(u.toLowerCase())?(l=6,Ie?(t.consume(U),z):s.interrupt?e(U):P(U)):(l=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(U):o?L(U):H(U))}return U===45||Vn(U)?(t.consume(U),u+=String.fromCharCode(U),R):n(U)}function z(U){return U===62?(t.consume(U),s.interrupt?e:P):n(U)}function L(U){return Je(U)?(t.consume(U),L):S(U)}function H(U){return U===47?(t.consume(U),S):U===58||U===95||$n(U)?(t.consume(U),X):Je(U)?(t.consume(U),H):S(U)}function X(U){return U===45||U===46||U===58||U===95||Vn(U)?(t.consume(U),X):se(U)}function se(U){return U===61?(t.consume(U),Y):Je(U)?(t.consume(U),se):H(U)}function Y(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),f=U,I):Je(U)?(t.consume(U),Y):T(U)}function I(U){return U===f?(t.consume(U),f=null,M):U===null||De(U)?n(U):(t.consume(U),I)}function T(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||Tt(U)?se(U):(t.consume(U),T)}function M(U){return U===47||U===62||Je(U)?H(U):n(U)}function S(U){return U===62?(t.consume(U),A):n(U)}function A(U){return U===null||De(U)?P(U):Je(U)?(t.consume(U),A):n(U)}function P(U){return U===45&&l===2?(t.consume(U),q):U===60&&l===1?(t.consume(U),Z):U===62&&l===4?(t.consume(U),Se):U===63&&l===3?(t.consume(U),B):U===93&&l===5?(t.consume(U),ye):De(U)&&(l===6||l===7)?(t.exit("htmlFlowData"),t.check(WO,Oe,D)(U)):U===null||De(U)?(t.exit("htmlFlowData"),D(U)):(t.consume(U),P)}function D(U){return t.check(JO,re,Oe)(U)}function re(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),te}function te(U){return U===null||De(U)?D(U):(t.enter("htmlFlowData"),P(U))}function q(U){return U===45?(t.consume(U),B):P(U)}function Z(U){return U===47?(t.consume(U),u="",ue):P(U)}function ue(U){if(U===62){const Ie=u.toLowerCase();return F2.includes(Ie)?(t.consume(U),Se):P(U)}return $n(U)&&u.length<8?(t.consume(U),u+=String.fromCharCode(U),ue):P(U)}function ye(U){return U===93?(t.consume(U),B):P(U)}function B(U){return U===62?(t.consume(U),Se):U===45&&l===2?(t.consume(U),B):P(U)}function Se(U){return U===null||De(U)?(t.exit("htmlFlowData"),Oe(U)):(t.consume(U),Se)}function Oe(U){return t.exit("htmlFlow"),e(U)}}function t9(t,e,n){const s=this;return l;function l(u){return De(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return s.parser.lazy[s.now().line]?n(u):e(u)}}function n9(t,e,n){return s;function s(l){return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),t.attempt(ud,e,n)}}const s9={name:"htmlText",tokenize:a9};function a9(t,e,n){const s=this;let l,o,u;return h;function h(B){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(B),f}function f(B){return B===33?(t.consume(B),m):B===47?(t.consume(B),se):B===63?(t.consume(B),H):$n(B)?(t.consume(B),T):n(B)}function m(B){return B===45?(t.consume(B),x):B===91?(t.consume(B),o=0,E):$n(B)?(t.consume(B),L):n(B)}function x(B){return B===45?(t.consume(B),N):n(B)}function b(B){return B===null?n(B):B===45?(t.consume(B),v):De(B)?(u=b,Z(B)):(t.consume(B),b)}function v(B){return B===45?(t.consume(B),N):b(B)}function N(B){return B===62?q(B):B===45?v(B):b(B)}function E(B){const Se="CDATA[";return B===Se.charCodeAt(o++)?(t.consume(B),o===Se.length?V:E):n(B)}function V(B){return B===null?n(B):B===93?(t.consume(B),R):De(B)?(u=V,Z(B)):(t.consume(B),V)}function R(B){return B===93?(t.consume(B),z):V(B)}function z(B){return B===62?q(B):B===93?(t.consume(B),z):V(B)}function L(B){return B===null||B===62?q(B):De(B)?(u=L,Z(B)):(t.consume(B),L)}function H(B){return B===null?n(B):B===63?(t.consume(B),X):De(B)?(u=H,Z(B)):(t.consume(B),H)}function X(B){return B===62?q(B):H(B)}function se(B){return $n(B)?(t.consume(B),Y):n(B)}function Y(B){return B===45||Vn(B)?(t.consume(B),Y):I(B)}function I(B){return De(B)?(u=I,Z(B)):Je(B)?(t.consume(B),I):q(B)}function T(B){return B===45||Vn(B)?(t.consume(B),T):B===47||B===62||Tt(B)?M(B):n(B)}function M(B){return B===47?(t.consume(B),q):B===58||B===95||$n(B)?(t.consume(B),S):De(B)?(u=M,Z(B)):Je(B)?(t.consume(B),M):q(B)}function S(B){return B===45||B===46||B===58||B===95||Vn(B)?(t.consume(B),S):A(B)}function A(B){return B===61?(t.consume(B),P):De(B)?(u=A,Z(B)):Je(B)?(t.consume(B),A):M(B)}function P(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),l=B,D):De(B)?(u=P,Z(B)):Je(B)?(t.consume(B),P):(t.consume(B),re)}function D(B){return B===l?(t.consume(B),l=void 0,te):B===null?n(B):De(B)?(u=D,Z(B)):(t.consume(B),D)}function re(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||Tt(B)?M(B):(t.consume(B),re)}function te(B){return B===47||B===62||Tt(B)?M(B):n(B)}function q(B){return B===62?(t.consume(B),t.exit("htmlTextData"),t.exit("htmlText"),e):n(B)}function Z(B){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),ue}function ue(B){return Je(B)?lt(t,ye,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):ye(B)}function ye(B){return t.enter("htmlTextData"),u(B)}}const ly={name:"labelEnd",resolveAll:o9,resolveTo:c9,tokenize:u9},r9={tokenize:d9},i9={tokenize:h9},l9={tokenize:f9};function o9(t){let e=-1;const n=[];for(;++e<t.length;){const s=t[e][1];if(n.push(t[e]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const l=s.type==="labelImage"?4:2;s.type="data",e+=l}}return t.length!==n.length&&bs(t,0,t.length,n),t}function c9(t,e){let n=t.length,s=0,l,o,u,h;for(;n--;)if(l=t[n][1],o){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;t[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(o=n,l.type!=="labelLink")){s=2;break}}else l.type==="labelEnd"&&(u=n);const f={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},m={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},x={type:"labelText",start:{...t[o+s+2][1].end},end:{...t[u-2][1].start}};return h=[["enter",f,e],["enter",m,e]],h=Ds(h,t.slice(o+1,o+s+3)),h=Ds(h,[["enter",x,e]]),h=Ds(h,_m(e.parser.constructs.insideSpan.null,t.slice(o+s+4,u-3),e)),h=Ds(h,[["exit",x,e],t[u-2],t[u-1],["exit",m,e]]),h=Ds(h,t.slice(u+1)),h=Ds(h,[["exit",f,e]]),bs(t,o,t.length,h),t}function u9(t,e,n){const s=this;let l=s.events.length,o,u;for(;l--;)if((s.events[l][1].type==="labelImage"||s.events[l][1].type==="labelLink")&&!s.events[l][1]._balanced){o=s.events[l][1];break}return h;function h(v){return o?o._inactive?b(v):(u=s.parser.defined.includes(ta(s.sliceSerialize({start:o.end,end:s.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),f):n(v)}function f(v){return v===40?t.attempt(r9,x,u?x:b)(v):v===91?t.attempt(i9,x,u?m:b)(v):u?x(v):b(v)}function m(v){return t.attempt(l9,x,b)(v)}function x(v){return e(v)}function b(v){return o._balanced=!0,n(v)}}function d9(t,e,n){return s;function s(b){return t.enter("resource"),t.enter("resourceMarker"),t.consume(b),t.exit("resourceMarker"),l}function l(b){return Tt(b)?Su(t,o)(b):o(b)}function o(b){return b===41?x(b):nE(t,u,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(b)}function u(b){return Tt(b)?Su(t,f)(b):x(b)}function h(b){return n(b)}function f(b){return b===34||b===39||b===40?aE(t,m,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(b):x(b)}function m(b){return Tt(b)?Su(t,x)(b):x(b)}function x(b){return b===41?(t.enter("resourceMarker"),t.consume(b),t.exit("resourceMarker"),t.exit("resource"),e):n(b)}}function h9(t,e,n){const s=this;return l;function l(h){return sE.call(s,t,o,u,"reference","referenceMarker","referenceString")(h)}function o(h){return s.parser.defined.includes(ta(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?e(h):n(h)}function u(h){return n(h)}}function f9(t,e,n){return s;function s(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),l}function l(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const m9={name:"labelStartImage",resolveAll:ly.resolveAll,tokenize:p9};function p9(t,e,n){const s=this;return l;function l(h){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(h),t.exit("labelImageMarker"),o}function o(h){return h===91?(t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelImage"),u):n(h)}function u(h){return h===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):e(h)}}const g9={name:"labelStartLink",resolveAll:ly.resolveAll,tokenize:x9};function x9(t,e,n){const s=this;return l;function l(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(u):e(u)}}const H0={name:"lineEnding",tokenize:y9};function y9(t,e){return n;function n(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),lt(t,e,"linePrefix")}}const uf={name:"thematicBreak",tokenize:b9};function b9(t,e,n){let s=0,l;return o;function o(m){return t.enter("thematicBreak"),u(m)}function u(m){return l=m,h(m)}function h(m){return m===l?(t.enter("thematicBreakSequence"),f(m)):s>=3&&(m===null||De(m))?(t.exit("thematicBreak"),e(m)):n(m)}function f(m){return m===l?(t.consume(m),s++,f):(t.exit("thematicBreakSequence"),Je(m)?lt(t,h,"whitespace")(m):h(m))}}const es={continuation:{tokenize:_9},exit:E9,name:"list",tokenize:N9},v9={partial:!0,tokenize:S9},w9={partial:!0,tokenize:j9};function N9(t,e,n){const s=this,l=s.events[s.events.length-1];let o=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,u=0;return h;function h(N){const E=s.containerState.type||(N===42||N===43||N===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!s.containerState.marker||N===s.containerState.marker:Lg(N)){if(s.containerState.type||(s.containerState.type=E,t.enter(E,{_container:!0})),E==="listUnordered")return t.enter("listItemPrefix"),N===42||N===45?t.check(uf,n,m)(N):m(N);if(!s.interrupt||N===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(N)}return n(N)}function f(N){return Lg(N)&&++u<10?(t.consume(N),f):(!s.interrupt||u<2)&&(s.containerState.marker?N===s.containerState.marker:N===41||N===46)?(t.exit("listItemValue"),m(N)):n(N)}function m(N){return t.enter("listItemMarker"),t.consume(N),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||N,t.check(ud,s.interrupt?n:x,t.attempt(v9,v,b))}function x(N){return s.containerState.initialBlankLine=!0,o++,v(N)}function b(N){return Je(N)?(t.enter("listItemPrefixWhitespace"),t.consume(N),t.exit("listItemPrefixWhitespace"),v):n(N)}function v(N){return s.containerState.size=o+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(N)}}function _9(t,e,n){const s=this;return s.containerState._closeFlow=void 0,t.check(ud,l,o);function l(h){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,lt(t,e,"listItemIndent",s.containerState.size+1)(h)}function o(h){return s.containerState.furtherBlankLines||!Je(h)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,u(h)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,t.attempt(w9,e,u)(h))}function u(h){return s.containerState._closeFlow=!0,s.interrupt=void 0,lt(t,t.attempt(es,e,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function j9(t,e,n){const s=this;return lt(t,l,"listItemIndent",s.containerState.size+1);function l(o){const u=s.events[s.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===s.containerState.size?e(o):n(o)}}function E9(t){t.exit(this.containerState.type)}function S9(t,e,n){const s=this;return lt(t,l,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(o){const u=s.events[s.events.length-1];return!Je(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const B2={name:"setextUnderline",resolveTo:T9,tokenize:A9};function T9(t,e){let n=t.length,s,l,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){s=n;break}t[n][1].type==="paragraph"&&(l=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[l][1].type="setextHeadingText",o?(t.splice(l,0,["enter",u,e]),t.splice(o+1,0,["exit",t[s][1],e]),t[s][1].end={...t[o][1].end}):t[s][1]=u,t.push(["exit",u,e]),t}function A9(t,e,n){const s=this;let l;return o;function o(m){let x=s.events.length,b;for(;x--;)if(s.events[x][1].type!=="lineEnding"&&s.events[x][1].type!=="linePrefix"&&s.events[x][1].type!=="content"){b=s.events[x][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||b)?(t.enter("setextHeadingLine"),l=m,u(m)):n(m)}function u(m){return t.enter("setextHeadingLineSequence"),h(m)}function h(m){return m===l?(t.consume(m),h):(t.exit("setextHeadingLineSequence"),Je(m)?lt(t,f,"lineSuffix")(m):f(m))}function f(m){return m===null||De(m)?(t.exit("setextHeadingLine"),e(m)):n(m)}}const C9={tokenize:k9};function k9(t){const e=this,n=t.attempt(ud,s,t.attempt(this.parser.constructs.flowInitial,l,lt(t,t.attempt(this.parser.constructs.flow,l,t.attempt(OO,l)),"linePrefix")));return n;function s(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function l(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const I9={resolveAll:iE()},R9=rE("string"),D9=rE("text");function rE(t){return{resolveAll:iE(t==="text"?M9:void 0),tokenize:e};function e(n){const s=this,l=this.parser.constructs[t],o=n.attempt(l,u,h);return u;function u(x){return m(x)?o(x):h(x)}function h(x){if(x===null){n.consume(x);return}return n.enter("data"),n.consume(x),f}function f(x){return m(x)?(n.exit("data"),o(x)):(n.consume(x),f)}function m(x){if(x===null)return!0;const b=l[x];let v=-1;if(b)for(;++v<b.length;){const N=b[v];if(!N.previous||N.previous.call(s,s.previous))return!0}return!1}}}function iE(t){return e;function e(n,s){let l=-1,o;for(;++l<=n.length;)o===void 0?n[l]&&n[l][1].type==="data"&&(o=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==o+2&&(n[o][1].end=n[l-1][1].end,n.splice(o+2,l-o-2),l=o+2),o=void 0);return t?t(n,s):n}}function M9(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const s=t[n-1][1],l=e.sliceStream(s);let o=l.length,u=-1,h=0,f;for(;o--;){const m=l[o];if(typeof m=="string"){for(u=m.length;m.charCodeAt(u-1)===32;)h++,u--;if(u)break;u=-1}else if(m===-2)f=!0,h++;else if(m!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(h=0),h){const m={type:n===t.length||f||h<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:s.start._bufferIndex+u,_index:s.start._index+o,line:s.end.line,column:s.end.column-h,offset:s.end.offset-h},end:{...s.end}};s.end={...m.start},s.start.offset===s.end.offset?Object.assign(s,m):(t.splice(n,0,["enter",m,e],["exit",m,e]),n+=2)}n++}return t}const O9={42:es,43:es,45:es,48:es,49:es,50:es,51:es,52:es,53:es,54:es,55:es,56:es,57:es,62:J5},P9={91:UO},L9={[-2]:q0,[-1]:q0,32:q0},V9={35:GO,42:uf,45:[B2,uf],60:XO,61:B2,95:uf,96:U2,126:U2},z9={38:eE,92:Z5},U9={[-5]:H0,[-4]:H0,[-3]:H0,33:m9,38:eE,42:Vg,60:[gO,s9],91:g9,92:[HO,Z5],93:ly,95:Vg,96:CO},F9={null:[Vg,I9]},B9={null:[42,95]},q9={null:[]},H9=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:B9,contentInitial:P9,disable:q9,document:O9,flow:V9,flowInitial:L9,insideSpan:F9,string:z9,text:U9},Symbol.toStringTag,{value:"Module"}));function $9(t,e,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},o=[];let u=[],h=[];const f={attempt:I(se),check:I(Y),consume:L,enter:H,exit:X,interrupt:I(Y,{interrupt:!0})},m={code:null,containerState:{},defineSkip:V,events:[],now:E,parser:t,previous:null,sliceSerialize:v,sliceStream:N,write:b};let x=e.tokenize.call(m,f);return e.resolveAll&&o.push(e),m;function b(A){return u=Ds(u,A),R(),u[u.length-1]!==null?[]:(T(e,0),m.events=_m(o,m.events,m),m.events)}function v(A,P){return Y9(N(A),P)}function N(A){return G9(u,A)}function E(){const{_bufferIndex:A,_index:P,line:D,column:re,offset:te}=s;return{_bufferIndex:A,_index:P,line:D,column:re,offset:te}}function V(A){l[A.line]=A.column,S()}function R(){let A;for(;s._index<u.length;){const P=u[s._index];if(typeof P=="string")for(A=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===A&&s._bufferIndex<P.length;)z(P.charCodeAt(s._bufferIndex));else z(P)}}function z(A){x=x(A)}function L(A){De(A)?(s.line++,s.column=1,s.offset+=A===-3?2:1,S()):A!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===u[s._index].length&&(s._bufferIndex=-1,s._index++)),m.previous=A}function H(A,P){const D=P||{};return D.type=A,D.start=E(),m.events.push(["enter",D,m]),h.push(D),D}function X(A){const P=h.pop();return P.end=E(),m.events.push(["exit",P,m]),P}function se(A,P){T(A,P.from)}function Y(A,P){P.restore()}function I(A,P){return D;function D(re,te,q){let Z,ue,ye,B;return Array.isArray(re)?Oe(re):"tokenize"in re?Oe([re]):Se(re);function Se(Ye){return ot;function ot(vt){const gt=vt!==null&&Ye[vt],fn=vt!==null&&Ye.null,mn=[...Array.isArray(gt)?gt:gt?[gt]:[],...Array.isArray(fn)?fn:fn?[fn]:[]];return Oe(mn)(vt)}}function Oe(Ye){return Z=Ye,ue=0,Ye.length===0?q:U(Ye[ue])}function U(Ye){return ot;function ot(vt){return B=M(),ye=Ye,Ye.partial||(m.currentConstruct=Ye),Ye.name&&m.parser.constructs.disable.null.includes(Ye.name)?Ge():Ye.tokenize.call(P?Object.assign(Object.create(m),P):m,f,Ie,Ge)(vt)}}function Ie(Ye){return A(ye,B),te}function Ge(Ye){return B.restore(),++ue<Z.length?U(Z[ue]):q}}}function T(A,P){A.resolveAll&&!o.includes(A)&&o.push(A),A.resolve&&bs(m.events,P,m.events.length-P,A.resolve(m.events.slice(P),m)),A.resolveTo&&(m.events=A.resolveTo(m.events,m))}function M(){const A=E(),P=m.previous,D=m.currentConstruct,re=m.events.length,te=Array.from(h);return{from:re,restore:q};function q(){s=A,m.previous=P,m.currentConstruct=D,m.events.length=re,h=te,S()}}function S(){s.line in l&&s.column<2&&(s.column=l[s.line],s.offset+=l[s.line]-1)}}function G9(t,e){const n=e.start._index,s=e.start._bufferIndex,l=e.end._index,o=e.end._bufferIndex;let u;if(n===l)u=[t[n].slice(s,o)];else{if(u=t.slice(n,l),s>-1){const h=u[0];typeof h=="string"?u[0]=h.slice(s):u.shift()}o>0&&u.push(t[l].slice(0,o))}return u}function Y9(t,e){let n=-1;const s=[];let l;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&l)continue;u=" ";break}default:u=String.fromCharCode(o)}l=o===-2,s.push(u)}return s.join("")}function K9(t){const s={constructs:X5([H9,...(t||{}).extensions||[]]),content:l(cO),defined:[],document:l(dO),flow:l(C9),lazy:{},string:l(R9),text:l(D9)};return s;function l(o){return u;function u(h){return $9(s,o,h)}}}function Q9(t){for(;!tE(t););return t}const q2=/[\0\t\n\r]/g;function X9(){let t=1,e="",n=!0,s;return l;function l(o,u,h){const f=[];let m,x,b,v,N;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),b=0,e="",n&&(o.charCodeAt(0)===65279&&b++,n=void 0);b<o.length;){if(q2.lastIndex=b,m=q2.exec(o),v=m&&m.index!==void 0?m.index:o.length,N=o.charCodeAt(v),!m){e=o.slice(b);break}if(N===10&&b===v&&s)f.push(-3),s=void 0;else switch(s&&(f.push(-5),s=void 0),b<v&&(f.push(o.slice(b,v)),t+=v-b),N){case 0:{f.push(65533),t++;break}case 9:{for(x=Math.ceil(t/4)*4,f.push(-2);t++<x;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:s=!0,t=1}b=v+1}return h&&(s&&f.push(-5),e&&f.push(e),f.push(null)),f}}const W9=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function J9(t){return t.replace(W9,Z9)}function Z9(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),o=l===120||l===88;return W5(n.slice(o?2:1),o?16:10)}return iy(n)||t}const lE={}.hasOwnProperty;function eP(t,e,n){return typeof e!="string"&&(n=e,e=void 0),tP(n)(Q9(K9(n).document().write(X9()(t,e,!0))))}function tP(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(we),autolinkProtocol:M,autolinkEmail:M,atxHeading:o(Ae),blockQuote:o(fn),characterEscape:M,characterReference:M,codeFenced:o(mn),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(mn,u),codeText:o(wn,u),codeTextData:M,data:M,codeFlowValue:M,definition:o(me),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(ge),hardBreakEscape:o(Fe),hardBreakTrailing:o(Fe),htmlFlow:o(Kt,u),htmlFlowData:M,htmlText:o(Kt,u),htmlTextData:M,image:o(be),label:u,link:o(we),listItem:o(Qe),listItemValue:v,listOrdered:o(Te,b),listUnordered:o(Te),paragraph:o(Nn),reference:U,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(Ae),strong:o(on),thematicBreak:o(Fa)},exit:{atxHeading:f(),atxHeadingSequence:se,autolink:f(),autolinkEmail:gt,autolinkProtocol:vt,blockQuote:f(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:Ge,characterReferenceMarkerNumeric:Ge,characterReferenceValue:Ye,characterReference:ot,codeFenced:f(R),codeFencedFence:V,codeFencedFenceInfo:N,codeFencedFenceMeta:E,codeFlowValue:S,codeIndented:f(z),codeText:f(te),codeTextData:S,data:S,definition:f(),definitionDestinationString:X,definitionLabelString:L,definitionTitleString:H,emphasis:f(),hardBreakEscape:f(P),hardBreakTrailing:f(P),htmlFlow:f(D),htmlFlowData:S,htmlText:f(re),htmlTextData:S,image:f(Z),label:ye,labelText:ue,lineEnding:A,link:f(q),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:Ie,resourceDestinationString:B,resourceTitleString:Se,resource:Oe,setextHeading:f(T),setextHeadingLineSequence:I,setextHeadingText:Y,strong:f(),thematicBreak:f()}};oE(e,(t||{}).mdastExtensions||[]);const n={};return s;function s(le){let xe={type:"root",children:[]};const Re={stack:[xe],tokenStack:[],config:e,enter:h,exit:m,buffer:u,resume:x,data:n},Ke=[];let ct=-1;for(;++ct<le.length;)if(le[ct][1].type==="listOrdered"||le[ct][1].type==="listUnordered")if(le[ct][0]==="enter")Ke.push(ct);else{const Rn=Ke.pop();ct=l(le,Rn,ct)}for(ct=-1;++ct<le.length;){const Rn=e[le[ct][0]];lE.call(Rn,le[ct][1].type)&&Rn[le[ct][1].type].call(Object.assign({sliceSerialize:le[ct][2].sliceSerialize},Re),le[ct][1])}if(Re.tokenStack.length>0){const Rn=Re.tokenStack[Re.tokenStack.length-1];(Rn[1]||H2).call(Re,void 0,Rn[0])}for(xe.position={start:si(le.length>0?le[0][1].start:{line:1,column:1,offset:0}),end:si(le.length>0?le[le.length-2][1].end:{line:1,column:1,offset:0})},ct=-1;++ct<e.transforms.length;)xe=e.transforms[ct](xe)||xe;return xe}function l(le,xe,Re){let Ke=xe-1,ct=-1,Rn=!1,vs,Ut,Pt,pn;for(;++Ke<=Re;){const at=le[Ke];switch(at[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{at[0]==="enter"?ct++:ct--,pn=void 0;break}case"lineEndingBlank":{at[0]==="enter"&&(vs&&!pn&&!ct&&!Pt&&(Pt=Ke),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!ct&&at[0]==="enter"&&at[1].type==="listItemPrefix"||ct===-1&&at[0]==="exit"&&(at[1].type==="listUnordered"||at[1].type==="listOrdered")){if(vs){let Us=Ke;for(Ut=void 0;Us--;){const Dn=le[Us];if(Dn[1].type==="lineEnding"||Dn[1].type==="lineEndingBlank"){if(Dn[0]==="exit")continue;Ut&&(le[Ut][1].type="lineEndingBlank",Rn=!0),Dn[1].type="lineEnding",Ut=Us}else if(!(Dn[1].type==="linePrefix"||Dn[1].type==="blockQuotePrefix"||Dn[1].type==="blockQuotePrefixWhitespace"||Dn[1].type==="blockQuoteMarker"||Dn[1].type==="listItemIndent"))break}Pt&&(!Ut||Pt<Ut)&&(vs._spread=!0),vs.end=Object.assign({},Ut?le[Ut][1].start:at[1].end),le.splice(Ut||Ke,0,["exit",vs,at[2]]),Ke++,Re++}if(at[1].type==="listItemPrefix"){const Us={type:"listItem",_spread:!1,start:Object.assign({},at[1].start),end:void 0};vs=Us,le.splice(Ke,0,["enter",Us,at[2]]),Ke++,Re++,Pt=void 0,pn=!0}}}return le[xe][1]._spread=Rn,Re}function o(le,xe){return Re;function Re(Ke){h.call(this,le(Ke),Ke),xe&&xe.call(this,Ke)}}function u(){this.stack.push({type:"fragment",children:[]})}function h(le,xe,Re){this.stack[this.stack.length-1].children.push(le),this.stack.push(le),this.tokenStack.push([xe,Re||void 0]),le.position={start:si(xe.start),end:void 0}}function f(le){return xe;function xe(Re){le&&le.call(this,Re),m.call(this,Re)}}function m(le,xe){const Re=this.stack.pop(),Ke=this.tokenStack.pop();if(Ke)Ke[0].type!==le.type&&(xe?xe.call(this,le,Ke[0]):(Ke[1]||H2).call(this,le,Ke[0]));else throw new Error("Cannot close `"+le.type+"` ("+Eu({start:le.start,end:le.end})+"): its not open");Re.position.end=si(le.end)}function x(){return ry(this.stack.pop())}function b(){this.data.expectingFirstListItemValue=!0}function v(le){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(le),10),this.data.expectingFirstListItemValue=void 0}}function N(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=le}function E(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=le}function V(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function z(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le.replace(/(\r?\n|\r)$/g,"")}function L(le){const xe=this.resume(),Re=this.stack[this.stack.length-1];Re.label=xe,Re.identifier=ta(this.sliceSerialize(le)).toLowerCase()}function H(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.title=le}function X(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.url=le}function se(le){const xe=this.stack[this.stack.length-1];if(!xe.depth){const Re=this.sliceSerialize(le).length;xe.depth=Re}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function I(le){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(le).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function M(le){const Re=this.stack[this.stack.length-1].children;let Ke=Re[Re.length-1];(!Ke||Ke.type!=="text")&&(Ke=Ot(),Ke.position={start:si(le.start),end:void 0},Re.push(Ke)),this.stack.push(Ke)}function S(le){const xe=this.stack.pop();xe.value+=this.sliceSerialize(le),xe.position.end=si(le.end)}function A(le){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=xe.children[xe.children.length-1];Re.position.end=si(le.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(xe.type)&&(M.call(this,le),S.call(this,le))}function P(){this.data.atHardBreak=!0}function D(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function re(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function te(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function q(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=xe,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function Z(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=xe,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function ue(le){const xe=this.sliceSerialize(le),Re=this.stack[this.stack.length-2];Re.label=J9(xe),Re.identifier=ta(xe).toLowerCase()}function ye(){const le=this.stack[this.stack.length-1],xe=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const Ke=le.children;Re.children=Ke}else Re.alt=xe}function B(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.url=le}function Se(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.title=le}function Oe(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function Ie(le){const xe=this.resume(),Re=this.stack[this.stack.length-1];Re.label=xe,Re.identifier=ta(this.sliceSerialize(le)).toLowerCase(),this.data.referenceType="full"}function Ge(le){this.data.characterReferenceType=le.type}function Ye(le){const xe=this.sliceSerialize(le),Re=this.data.characterReferenceType;let Ke;Re?(Ke=W5(xe,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ke=iy(xe);const ct=this.stack[this.stack.length-1];ct.value+=Ke}function ot(le){const xe=this.stack.pop();xe.position.end=si(le.end)}function vt(le){S.call(this,le);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(le)}function gt(le){S.call(this,le);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(le)}function fn(){return{type:"blockquote",children:[]}}function mn(){return{type:"code",lang:null,meta:null,value:""}}function wn(){return{type:"inlineCode",value:""}}function me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ge(){return{type:"emphasis",children:[]}}function Ae(){return{type:"heading",depth:0,children:[]}}function Fe(){return{type:"break"}}function Kt(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function we(){return{type:"link",title:null,url:"",children:[]}}function Te(le){return{type:"list",ordered:le.type==="listOrdered",start:null,spread:le._spread,children:[]}}function Qe(le){return{type:"listItem",spread:le._spread,checked:null,children:[]}}function Nn(){return{type:"paragraph",children:[]}}function on(){return{type:"strong",children:[]}}function Ot(){return{type:"text",value:""}}function Fa(){return{type:"thematicBreak"}}}function si(t){return{line:t.line,column:t.column,offset:t.offset}}function oE(t,e){let n=-1;for(;++n<e.length;){const s=e[n];Array.isArray(s)?oE(t,s):nP(t,s)}}function nP(t,e){let n;for(n in e)if(lE.call(e,n))switch(n){case"canContainEols":{const s=e[n];s&&t[n].push(...s);break}case"transforms":{const s=e[n];s&&t[n].push(...s);break}case"enter":case"exit":{const s=e[n];s&&Object.assign(t[n],s);break}}}function H2(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Eu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Eu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Eu({start:e.start,end:e.end})+") is still open")}function sP(t){const e=this;e.parser=n;function n(s){return eP(s,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function aP(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rP(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function iP(t,e){const n=e.value?e.value+`
`:"",s={},l=e.lang?e.lang.split(/\s+/):[];l.length>0&&(s.className=["language-"+l[0]]);let o={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function lP(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oP(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cP(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=String(e.identifier).toUpperCase(),l=ac(s.toLowerCase()),o=t.footnoteOrder.indexOf(s);let u,h=t.footnoteCounts.get(s);h===void 0?(h=0,t.footnoteOrder.push(s),u=t.footnoteOrder.length):u=o+1,h+=1,t.footnoteCounts.set(s,h);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,f);const m={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,m),t.applyData(e,m)}function uP(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dP(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function cE(t,e){const n=e.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+s}];const l=t.all(e),o=l[0];o&&o.type==="text"?o.value="["+o.value:l.unshift({type:"text",value:"["});const u=l[l.length-1];return u&&u.type==="text"?u.value+=s:l.push({type:"text",value:s}),l}function hP(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return cE(t,e);const l={src:ac(s.url||""),alt:e.alt};s.title!==null&&s.title!==void 0&&(l.title=s.title);const o={type:"element",tagName:"img",properties:l,children:[]};return t.patch(e,o),t.applyData(e,o)}function fP(t,e){const n={src:ac(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,s),t.applyData(e,s)}function mP(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,s),t.applyData(e,s)}function pP(t,e){const n=String(e.identifier).toUpperCase(),s=t.definitionById.get(n);if(!s)return cE(t,e);const l={href:ac(s.url||"")};s.title!==null&&s.title!==void 0&&(l.title=s.title);const o={type:"element",tagName:"a",properties:l,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function gP(t,e){const n={href:ac(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const s={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function xP(t,e,n){const s=t.all(e),l=n?yP(n):uE(e),o={},u=[];if(typeof e.checked=="boolean"){const x=s[0];let b;x&&x.type==="element"&&x.tagName==="p"?b=x:(b={type:"element",tagName:"p",properties:{},children:[]},s.unshift(b)),b.children.length>0&&b.children.unshift({type:"text",value:" "}),b.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let h=-1;for(;++h<s.length;){const x=s[h];(l||h!==0||x.type!=="element"||x.tagName!=="p")&&u.push({type:"text",value:`
`}),x.type==="element"&&x.tagName==="p"&&!l?u.push(...x.children):u.push(x)}const f=s[s.length-1];f&&(l||f.type!=="element"||f.tagName!=="p")&&u.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,m),t.applyData(e,m)}function yP(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let s=-1;for(;!e&&++s<n.length;)e=uE(n[s])}return e}function uE(t){const e=t.spread;return e??t.children.length>1}function bP(t,e){const n={},s=t.all(e);let l=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++l<s.length;){const u=s[l];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function vP(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wP(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function NP(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function _P(t,e){const n=t.all(e),s=n.shift(),l=[];if(s){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([s],!0)};t.patch(e.children[0],u),l.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},h=ty(e.children[1]),f=q5(e.children[e.children.length-1]);h&&f&&(u.position={start:h,end:f}),l.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(l,!0)};return t.patch(e,o),t.applyData(e,o)}function jP(t,e,n){const s=n?n.children:void 0,o=(s?s.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,h=u?u.length:e.children.length;let f=-1;const m=[];for(;++f<h;){const b=e.children[f],v={},N=u?u[f]:void 0;N&&(v.align=N);let E={type:"element",tagName:o,properties:v,children:[]};b&&(E.children=t.all(b),t.patch(b,E),E=t.applyData(b,E)),m.push(E)}const x={type:"element",tagName:"tr",properties:{},children:t.wrap(m,!0)};return t.patch(e,x),t.applyData(e,x)}function EP(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const $2=9,G2=32;function SP(t){const e=String(t),n=/\r?\n|\r/g;let s=n.exec(e),l=0;const o=[];for(;s;)o.push(Y2(e.slice(l,s.index),l>0,!0),s[0]),l=s.index+s[0].length,s=n.exec(e);return o.push(Y2(e.slice(l),l>0,!1)),o.join("")}function Y2(t,e,n){let s=0,l=t.length;if(e){let o=t.codePointAt(s);for(;o===$2||o===G2;)s++,o=t.codePointAt(s)}if(n){let o=t.codePointAt(l-1);for(;o===$2||o===G2;)l--,o=t.codePointAt(l-1)}return l>s?t.slice(s,l):""}function TP(t,e){const n={type:"text",value:SP(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function AP(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const CP={blockquote:aP,break:rP,code:iP,delete:lP,emphasis:oP,footnoteReference:cP,heading:uP,html:dP,imageReference:hP,image:fP,inlineCode:mP,linkReference:pP,link:gP,listItem:xP,list:bP,paragraph:vP,root:wP,strong:NP,table:_P,tableCell:EP,tableRow:jP,text:TP,thematicBreak:AP,toml:Hh,yaml:Hh,definition:Hh,footnoteDefinition:Hh};function Hh(){}const dE=-1,jm=0,Tu=1,Pf=2,oy=3,cy=4,uy=5,dy=6,hE=7,fE=8,K2=typeof self=="object"?self:globalThis,kP=(t,e)=>{const n=(l,o)=>(t.set(o,l),l),s=l=>{if(t.has(l))return t.get(l);const[o,u]=e[l];switch(o){case jm:case dE:return n(u,l);case Tu:{const h=n([],l);for(const f of u)h.push(s(f));return h}case Pf:{const h=n({},l);for(const[f,m]of u)h[s(f)]=s(m);return h}case oy:return n(new Date(u),l);case cy:{const{source:h,flags:f}=u;return n(new RegExp(h,f),l)}case uy:{const h=n(new Map,l);for(const[f,m]of u)h.set(s(f),s(m));return h}case dy:{const h=n(new Set,l);for(const f of u)h.add(s(f));return h}case hE:{const{name:h,message:f}=u;return n(new K2[h](f),l)}case fE:return n(BigInt(u),l);case"BigInt":return n(Object(BigInt(u)),l);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:h}=new Uint8Array(u);return n(new DataView(h),u)}}return n(new K2[o](u),l)};return s},Q2=t=>kP(new Map,t)(0),bo="",{toString:IP}={},{keys:RP}=Object,du=t=>{const e=typeof t;if(e!=="object"||!t)return[jm,e];const n=IP.call(t).slice(8,-1);switch(n){case"Array":return[Tu,bo];case"Object":return[Pf,bo];case"Date":return[oy,bo];case"RegExp":return[cy,bo];case"Map":return[uy,bo];case"Set":return[dy,bo];case"DataView":return[Tu,n]}return n.includes("Array")?[Tu,n]:n.includes("Error")?[hE,n]:[Pf,n]},$h=([t,e])=>t===jm&&(e==="function"||e==="symbol"),DP=(t,e,n,s)=>{const l=(u,h)=>{const f=s.push(u)-1;return n.set(h,f),f},o=u=>{if(n.has(u))return n.get(u);let[h,f]=du(u);switch(h){case jm:{let x=u;switch(f){case"bigint":h=fE,x=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);x=null;break;case"undefined":return l([dE],u)}return l([h,x],u)}case Tu:{if(f){let v=u;return f==="DataView"?v=new Uint8Array(u.buffer):f==="ArrayBuffer"&&(v=new Uint8Array(u)),l([f,[...v]],u)}const x=[],b=l([h,x],u);for(const v of u)x.push(o(v));return b}case Pf:{if(f)switch(f){case"BigInt":return l([f,u.toString()],u);case"Boolean":case"Number":case"String":return l([f,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const x=[],b=l([h,x],u);for(const v of RP(u))(t||!$h(du(u[v])))&&x.push([o(v),o(u[v])]);return b}case oy:return l([h,u.toISOString()],u);case cy:{const{source:x,flags:b}=u;return l([h,{source:x,flags:b}],u)}case uy:{const x=[],b=l([h,x],u);for(const[v,N]of u)(t||!($h(du(v))||$h(du(N))))&&x.push([o(v),o(N)]);return b}case dy:{const x=[],b=l([h,x],u);for(const v of u)(t||!$h(du(v)))&&x.push(o(v));return b}}const{message:m}=u;return l([h,{name:f,message:m}],u)};return o},X2=(t,{json:e,lossy:n}={})=>{const s=[];return DP(!(e||n),!!e,new Map,s)(t),s},Lf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Q2(X2(t,e)):structuredClone(t):(t,e)=>Q2(X2(t,e));function MP(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function OP(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function PP(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||MP,s=t.options.footnoteBackLabel||OP,l=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let f=-1;for(;++f<t.footnoteOrder.length;){const m=t.footnoteById.get(t.footnoteOrder[f]);if(!m)continue;const x=t.all(m),b=String(m.identifier).toUpperCase(),v=ac(b.toLowerCase());let N=0;const E=[],V=t.footnoteCounts.get(b);for(;V!==void 0&&++N<=V;){E.length>0&&E.push({type:"text",value:" "});let L=typeof n=="string"?n:n(f,N);typeof L=="string"&&(L={type:"text",value:L}),E.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(N>1?"-"+N:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(f,N),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const R=x[x.length-1];if(R&&R.type==="element"&&R.tagName==="p"){const L=R.children[R.children.length-1];L&&L.type==="text"?L.value+=" ":R.children.push({type:"text",value:" "}),R.children.push(...E)}else x.push(...E);const z={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(x,!0)};t.patch(m,z),h.push(z)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Lf(u),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(h,!0)},{type:"text",value:`
`}]}}const Em=(function(t){if(t==null)return UP;if(typeof t=="function")return Sm(t);if(typeof t=="object")return Array.isArray(t)?LP(t):VP(t);if(typeof t=="string")return zP(t);throw new Error("Expected function, string, or object as test")});function LP(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Em(t[n]);return Sm(s);function s(...l){let o=-1;for(;++o<e.length;)if(e[o].apply(this,l))return!0;return!1}}function VP(t){const e=t;return Sm(n);function n(s){const l=s;let o;for(o in t)if(l[o]!==e[o])return!1;return!0}}function zP(t){return Sm(e);function e(n){return n&&n.type===t}}function Sm(t){return e;function e(n,s,l){return!!(FP(n)&&t.call(this,n,typeof s=="number"?s:void 0,l||void 0))}}function UP(){return!0}function FP(t){return t!==null&&typeof t=="object"&&"type"in t}const mE=[],BP=!0,zg=!1,qP="skip";function pE(t,e,n,s){let l;typeof e=="function"&&typeof n!="function"?(s=n,n=e):l=e;const o=Em(l),u=s?-1:1;h(t,void 0,[])();function h(f,m,x){const b=f&&typeof f=="object"?f:{};if(typeof b.type=="string"){const N=typeof b.tagName=="string"?b.tagName:typeof b.name=="string"?b.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(f.type+(N?"<"+N+">":""))+")"})}return v;function v(){let N=mE,E,V,R;if((!e||o(f,m,x[x.length-1]||void 0))&&(N=HP(n(f,x)),N[0]===zg))return N;if("children"in f&&f.children){const z=f;if(z.children&&N[0]!==qP)for(V=(s?z.children.length:-1)+u,R=x.concat(z);V>-1&&V<z.children.length;){const L=z.children[V];if(E=h(L,V,R)(),E[0]===zg)return E;V=typeof E[1]=="number"?E[1]:V+u}}return N}}}function HP(t){return Array.isArray(t)?t:typeof t=="number"?[BP,t]:t==null?mE:[t]}function hy(t,e,n,s){let l,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,l=n):(o=e,u=n,l=s),pE(t,o,h,l);function h(f,m){const x=m[m.length-1],b=x?x.children.indexOf(f):void 0;return u(f,b,x)}}const Ug={}.hasOwnProperty,$P={};function GP(t,e){const n=e||$P,s=new Map,l=new Map,o=new Map,u={...CP,...n.handlers},h={all:m,applyData:KP,definitionById:s,footnoteById:l,footnoteCounts:o,footnoteOrder:[],handlers:u,one:f,options:n,patch:YP,wrap:XP};return hy(t,function(x){if(x.type==="definition"||x.type==="footnoteDefinition"){const b=x.type==="definition"?s:l,v=String(x.identifier).toUpperCase();b.has(v)||b.set(v,x)}}),h;function f(x,b){const v=x.type,N=h.handlers[v];if(Ug.call(h.handlers,v)&&N)return N(h,x,b);if(h.options.passThrough&&h.options.passThrough.includes(v)){if("children"in x){const{children:V,...R}=x,z=Lf(R);return z.children=h.all(x),z}return Lf(x)}return(h.options.unknownHandler||QP)(h,x,b)}function m(x){const b=[];if("children"in x){const v=x.children;let N=-1;for(;++N<v.length;){const E=h.one(v[N],x);if(E){if(N&&v[N-1].type==="break"&&(!Array.isArray(E)&&E.type==="text"&&(E.value=W2(E.value)),!Array.isArray(E)&&E.type==="element")){const V=E.children[0];V&&V.type==="text"&&(V.value=W2(V.value))}Array.isArray(E)?b.push(...E):b.push(E)}}}return b}}function YP(t,e){t.position&&(e.position=OM(t))}function KP(t,e){let n=e;if(t&&t.data){const s=t.data.hName,l=t.data.hChildren,o=t.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const u="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,Lf(o)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function QP(t,e){const n=e.data||{},s="value"in e&&!(Ug.call(n,"hProperties")||Ug.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function XP(t,e){const n=[];let s=-1;for(e&&n.push({type:"text",value:`
`});++s<t.length;)s&&n.push({type:"text",value:`
`}),n.push(t[s]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function W2(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function J2(t,e){const n=GP(t,e),s=n.one(t,void 0),l=PP(n),o=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return l&&o.children.push({type:"text",value:`
`},l),o}function WP(t,e){return t&&"run"in t?async function(n,s){const l=J2(n,{file:s,...e});await t.run(l,s)}:function(n,s){return J2(n,{file:s,...t||e})}}function Z2(t){if(t)throw t}var $0,eN;function JP(){if(eN)return $0;eN=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(m){return typeof Array.isArray=="function"?Array.isArray(m):e.call(m)==="[object Array]"},o=function(m){if(!m||e.call(m)!=="[object Object]")return!1;var x=t.call(m,"constructor"),b=m.constructor&&m.constructor.prototype&&t.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!x&&!b)return!1;var v;for(v in m);return typeof v>"u"||t.call(m,v)},u=function(m,x){n&&x.name==="__proto__"?n(m,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):m[x.name]=x.newValue},h=function(m,x){if(x==="__proto__")if(t.call(m,x)){if(s)return s(m,x).value}else return;return m[x]};return $0=function f(){var m,x,b,v,N,E,V=arguments[0],R=1,z=arguments.length,L=!1;for(typeof V=="boolean"&&(L=V,V=arguments[1]||{},R=2),(V==null||typeof V!="object"&&typeof V!="function")&&(V={});R<z;++R)if(m=arguments[R],m!=null)for(x in m)b=h(V,x),v=h(m,x),V!==v&&(L&&v&&(o(v)||(N=l(v)))?(N?(N=!1,E=b&&l(b)?b:[]):E=b&&o(b)?b:{},u(V,{name:x,newValue:f(L,E,v)})):typeof v<"u"&&u(V,{name:x,newValue:v}));return V},$0}var ZP=JP();const G0=Gg(ZP);function Fg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function eL(){const t=[],e={run:n,use:s};return e;function n(...l){let o=-1;const u=l.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);h(null,...l);function h(f,...m){const x=t[++o];let b=-1;if(f){u(f);return}for(;++b<l.length;)(m[b]===null||m[b]===void 0)&&(m[b]=l[b]);l=m,x?tL(x,h)(...m):u(null,...m)}}function s(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return t.push(l),e}}function tL(t,e){let n;return s;function s(...u){const h=t.length>u.length;let f;h&&u.push(l);try{f=t.apply(this,u)}catch(m){const x=m;if(h&&n)throw x;return l(x)}h||(f&&f.then&&typeof f.then=="function"?f.then(o,l):f instanceof Error?l(f):o(f))}function l(u,...h){n||(n=!0,e(u,...h))}function o(u){l(null,u)}}const Aa={basename:nL,dirname:sL,extname:aL,join:rL,sep:"/"};function nL(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');dd(t);let n=0,s=-1,l=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;l--;)if(t.codePointAt(l)===47){if(o){n=l+1;break}}else s<0&&(o=!0,s=l+1);return s<0?"":t.slice(n,s)}if(e===t)return"";let u=-1,h=e.length-1;for(;l--;)if(t.codePointAt(l)===47){if(o){n=l+1;break}}else u<0&&(o=!0,u=l+1),h>-1&&(t.codePointAt(l)===e.codePointAt(h--)?h<0&&(s=l):(h=-1,s=u));return n===s?s=u:s<0&&(s=t.length),t.slice(n,s)}function sL(t){if(dd(t),t.length===0)return".";let e=-1,n=t.length,s;for(;--n;)if(t.codePointAt(n)===47){if(s){e=n;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function aL(t){dd(t);let e=t.length,n=-1,s=0,l=-1,o=0,u;for(;e--;){const h=t.codePointAt(e);if(h===47){if(u){s=e+1;break}continue}n<0&&(u=!0,n=e+1),h===46?l<0?l=e:o!==1&&(o=1):l>-1&&(o=-1)}return l<0||n<0||o===0||o===1&&l===n-1&&l===s+1?"":t.slice(l,n)}function rL(...t){let e=-1,n;for(;++e<t.length;)dd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":iL(n)}function iL(t){dd(t);const e=t.codePointAt(0)===47;let n=lL(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function lL(t,e){let n="",s=0,l=-1,o=0,u=-1,h,f;for(;++u<=t.length;){if(u<t.length)h=t.codePointAt(u);else{if(h===47)break;h=47}if(h===47){if(!(l===u-1||o===1))if(l!==u-1&&o===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",s=0):(n=n.slice(0,f),s=n.length-1-n.lastIndexOf("/")),l=u,o=0;continue}}else if(n.length>0){n="",s=0,l=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+t.slice(l+1,u):n=t.slice(l+1,u),s=u-l-1;l=u,o=0}else h===46&&o>-1?o++:o=-1}return n}function dd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const oL={cwd:cL};function cL(){return"/"}function Bg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function uL(t){if(typeof t=="string")t=new URL(t);else if(!Bg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return dL(t)}function dL(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const s=e.codePointAt(n+2);if(s===70||s===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(e)}const Y0=["history","path","basename","stem","extname","dirname"];class gE{constructor(e){let n;e?Bg(e)?n={path:e}:typeof e=="string"||hL(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":oL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Y0.length;){const o=Y0[s];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let l;for(l in n)Y0.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?Aa.basename(this.path):void 0}set basename(e){Q0(e,"basename"),K0(e,"basename"),this.path=Aa.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Aa.dirname(this.path):void 0}set dirname(e){tN(this.basename,"dirname"),this.path=Aa.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Aa.extname(this.path):void 0}set extname(e){if(K0(e,"extname"),tN(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Aa.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Bg(e)&&(e=uL(e)),Q0(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Aa.basename(this.path,this.extname):void 0}set stem(e){Q0(e,"stem"),K0(e,"stem"),this.path=Aa.join(this.dirname||"",e+(this.extname||""))}fail(e,n,s){const l=this.message(e,n,s);throw l.fatal=!0,l}info(e,n,s){const l=this.message(e,n,s);return l.fatal=void 0,l}message(e,n,s){const l=new Bn(e,n,s);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function K0(t,e){if(t&&t.includes(Aa.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Aa.sep+"`")}function Q0(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function tN(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function hL(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const fL=(function(t){const s=this.constructor.prototype,l=s[t],o=function(){return l.apply(o,arguments)};return Object.setPrototypeOf(o,s),o}),mL={}.hasOwnProperty;class fy extends fL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eL()}copy(){const e=new fy;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];e.use(...s)}return e.data(G0(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(J0("data",this.frozen),this.namespace[e]=n,this):mL.call(this.namespace,e)&&this.namespace[e]||void 0:e?(J0("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const l=n.call(e,...s);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Gh(e),s=this.parser||this.Parser;return X0("parse",s),s(String(n),n)}process(e,n){const s=this;return this.freeze(),X0("process",this.parser||this.Parser),W0("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(o,u){const h=Gh(e),f=s.parse(h);s.run(f,h,function(x,b,v){if(x||!b||!v)return m(x);const N=b,E=s.stringify(N,v);xL(E)?v.value=E:v.result=E,m(x,v)});function m(x,b){x||!b?u(x):o?o(b):n(void 0,b)}}}processSync(e){let n=!1,s;return this.freeze(),X0("processSync",this.parser||this.Parser),W0("processSync",this.compiler||this.Compiler),this.process(e,l),sN("processSync","process",n),s;function l(o,u){n=!0,Z2(o),s=u}}run(e,n,s){nN(e),this.freeze();const l=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?o(void 0,s):new Promise(o);function o(u,h){const f=Gh(n);l.run(e,f,m);function m(x,b,v){const N=b||e;x?h(x):u?u(N):s(void 0,N,v)}}}runSync(e,n){let s=!1,l;return this.run(e,n,o),sN("runSync","run",s),l;function o(u,h){Z2(u),l=h,s=!0}}stringify(e,n){this.freeze();const s=Gh(n),l=this.compiler||this.Compiler;return W0("stringify",l),nN(e),l(e,s)}use(e,...n){const s=this.attachers,l=this.namespace;if(J0("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?h(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(m){if(typeof m=="function")f(m,[]);else if(typeof m=="object")if(Array.isArray(m)){const[x,...b]=m;f(x,b)}else u(m);else throw new TypeError("Expected usable value, not `"+m+"`")}function u(m){if(!("plugins"in m)&&!("settings"in m))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(m.plugins),m.settings&&(l.settings=G0(!0,l.settings,m.settings))}function h(m){let x=-1;if(m!=null)if(Array.isArray(m))for(;++x<m.length;){const b=m[x];o(b)}else throw new TypeError("Expected a list of plugins, not `"+m+"`")}function f(m,x){let b=-1,v=-1;for(;++b<s.length;)if(s[b][0]===m){v=b;break}if(v===-1)s.push([m,...x]);else if(x.length>0){let[N,...E]=x;const V=s[v][1];Fg(V)&&Fg(N)&&(N=G0(!0,V,N)),s[v]=[m,N,...E]}}}}const pL=new fy().freeze();function X0(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function W0(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function J0(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nN(t){if(!Fg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function sN(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Gh(t){return gL(t)?t:new gE(t)}function gL(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function xL(t){return typeof t=="string"||yL(t)}function yL(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",aN=[],rN={allowDangerousHtml:!0},vL=/^(https?|ircs?|mailto|xmpp)$/i,wL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function rc(t){const e=NL(t),n=_L(t);return jL(e.runSync(e.parse(n),n),t)}function NL(t){const e=t.rehypePlugins||aN,n=t.remarkPlugins||aN,s=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...rN}:rN;return pL().use(sP).use(n).use(WP,s).use(e)}function _L(t){const e=t.children||"",n=new gE;return typeof e=="string"&&(n.value=e),n}function jL(t,e){const n=e.allowedElements,s=e.allowElement,l=e.components,o=e.disallowedElements,u=e.skipHtml,h=e.unwrapDisallowed,f=e.urlTransform||EL;for(const x of wL)Object.hasOwn(e,x.from)&&(""+x.from+(x.to?"use `"+x.to+"` instead":"remove it")+bL+x.id,void 0);return hy(t,m),UM(t,{Fragment:r.Fragment,components:l,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function m(x,b,v){if(x.type==="raw"&&v&&typeof b=="number")return u?v.children.splice(b,1):v.children[b]={type:"text",value:x.value},b;if(x.type==="element"){let N;for(N in B0)if(Object.hasOwn(B0,N)&&Object.hasOwn(x.properties,N)){const E=x.properties[N],V=B0[N];(V===null||V.includes(x.tagName))&&(x.properties[N]=f(String(E||""),N,x))}}if(x.type==="element"){let N=n?!n.includes(x.tagName):o?o.includes(x.tagName):!1;if(!N&&s&&typeof b=="number"&&(N=!s(x,b,v)),N&&v&&typeof b=="number")return h&&x.children?v.children.splice(b,1,...x.children):v.children.splice(b,1),b}}}function EL(t){const e=t.indexOf(":"),n=t.indexOf("?"),s=t.indexOf("#"),l=t.indexOf("/");return e===-1||l!==-1&&e>l||n!==-1&&e>n||s!==-1&&e>s||vL.test(t.slice(0,e))?t:""}function iN(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let s=0,l=n.indexOf(e);for(;l!==-1;)s++,l=n.indexOf(e,l+e.length);return s}function SL(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function TL(t,e,n){const l=Em((n||{}).ignore||[]),o=AL(e);let u=-1;for(;++u<o.length;)pE(t,"text",h);function h(m,x){let b=-1,v;for(;++b<x.length;){const N=x[b],E=v?v.children:void 0;if(l(N,E?E.indexOf(N):void 0,v))return;v=N}if(v)return f(m,x)}function f(m,x){const b=x[x.length-1],v=o[u][0],N=o[u][1];let E=0;const R=b.children.indexOf(m);let z=!1,L=[];v.lastIndex=0;let H=v.exec(m.value);for(;H;){const X=H.index,se={index:H.index,input:H.input,stack:[...x,m]};let Y=N(...H,se);if(typeof Y=="string"&&(Y=Y.length>0?{type:"text",value:Y}:void 0),Y===!1?v.lastIndex=X+1:(E!==X&&L.push({type:"text",value:m.value.slice(E,X)}),Array.isArray(Y)?L.push(...Y):Y&&L.push(Y),E=X+H[0].length,z=!0),!v.global)break;H=v.exec(m.value)}return z?(E<m.value.length&&L.push({type:"text",value:m.value.slice(E)}),b.children.splice(R,1,...L)):L=[m],R+L.length}}function AL(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let s=-1;for(;++s<n.length;){const l=n[s];e.push([CL(l[0]),kL(l[1])])}return e}function CL(t){return typeof t=="string"?new RegExp(SL(t),"g"):t}function kL(t){return typeof t=="function"?t:function(){return t}}const Z0="phrasing",eg=["autolink","link","image","label"];function IL(){return{transforms:[VL],enter:{literalAutolink:DL,literalAutolinkEmail:tg,literalAutolinkHttp:tg,literalAutolinkWww:tg},exit:{literalAutolink:LL,literalAutolinkEmail:PL,literalAutolinkHttp:ML,literalAutolinkWww:OL}}}function RL(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Z0,notInConstruct:eg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Z0,notInConstruct:eg},{character:":",before:"[ps]",after:"\\/",inConstruct:Z0,notInConstruct:eg}]}}function DL(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function tg(t){this.config.enter.autolinkProtocol.call(this,t)}function ML(t){this.config.exit.autolinkProtocol.call(this,t)}function OL(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function PL(t){this.config.exit.autolinkEmail.call(this,t)}function LL(t){this.exit(t)}function VL(t){TL(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,zL],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UL]],{ignore:["link","linkReference"]})}function zL(t,e,n,s,l){let o="";if(!xE(l)||(/^w/i.test(e)&&(n=e+n,e="",o="http://"),!FL(n)))return!1;const u=BL(n+s);if(!u[0])return!1;const h={type:"link",title:null,url:o+e+u[0],children:[{type:"text",value:e+u[0]}]};return u[1]?[h,{type:"text",value:u[1]}]:h}function UL(t,e,n,s){return!xE(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function FL(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function BL(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],s=n.indexOf(")");const l=iN(t,"(");let o=iN(t,")");for(;s!==-1&&l>o;)t+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),o++;return[t,n]}function xE(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||yl(n)||Nm(n))&&(!e||n!==47)}yE.peek=WL;function qL(){this.buffer()}function HL(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function $L(){this.buffer()}function GL(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function YL(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ta(this.sliceSerialize(t)).toLowerCase(),n.label=e}function KL(t){this.exit(t)}function QL(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ta(this.sliceSerialize(t)).toLowerCase(),n.label=e}function XL(t){this.exit(t)}function WL(){return"["}function yE(t,e,n,s){const l=n.createTracker(s);let o=l.move("[^");const u=n.enter("footnoteReference"),h=n.enter("reference");return o+=l.move(n.safe(n.associationId(t),{after:"]",before:o})),h(),u(),o+=l.move("]"),o}function JL(){return{enter:{gfmFootnoteCallString:qL,gfmFootnoteCall:HL,gfmFootnoteDefinitionLabelString:$L,gfmFootnoteDefinition:GL},exit:{gfmFootnoteCallString:YL,gfmFootnoteCall:KL,gfmFootnoteDefinitionLabelString:QL,gfmFootnoteDefinition:XL}}}function ZL(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:yE},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,l,o,u){const h=o.createTracker(u);let f=h.move("[^");const m=o.enter("footnoteDefinition"),x=o.enter("label");return f+=h.move(o.safe(o.associationId(s),{before:f,after:"]"})),x(),f+=h.move("]:"),s.children&&s.children.length>0&&(h.shift(4),f+=h.move((e?`
`:" ")+o.indentLines(o.containerFlow(s,h.current()),e?bE:eV))),m(),f}}function eV(t,e,n){return e===0?t:bE(t,e,n)}function bE(t,e,n){return(n?"":"    ")+t}const tV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];vE.peek=iV;function nV(){return{canContainEols:["delete"],enter:{strikethrough:aV},exit:{strikethrough:rV}}}function sV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:tV}],handlers:{delete:vE}}}function aV(t){this.enter({type:"delete",children:[]},t)}function rV(t){this.exit(t)}function vE(t,e,n,s){const l=n.createTracker(s),o=n.enter("strikethrough");let u=l.move("~~");return u+=n.containerPhrasing(t,{...l.current(),before:u,after:"~"}),u+=l.move("~~"),o(),u}function iV(){return"~"}function lV(t){return t.length}function oV(t,e){const n=e||{},s=(n.align||[]).concat(),l=n.stringLength||lV,o=[],u=[],h=[],f=[];let m=0,x=-1;for(;++x<t.length;){const V=[],R=[];let z=-1;for(t[x].length>m&&(m=t[x].length);++z<t[x].length;){const L=cV(t[x][z]);if(n.alignDelimiters!==!1){const H=l(L);R[z]=H,(f[z]===void 0||H>f[z])&&(f[z]=H)}V.push(L)}u[x]=V,h[x]=R}let b=-1;if(typeof s=="object"&&"length"in s)for(;++b<m;)o[b]=lN(s[b]);else{const V=lN(s);for(;++b<m;)o[b]=V}b=-1;const v=[],N=[];for(;++b<m;){const V=o[b];let R="",z="";V===99?(R=":",z=":"):V===108?R=":":V===114&&(z=":");let L=n.alignDelimiters===!1?1:Math.max(1,f[b]-R.length-z.length);const H=R+"-".repeat(L)+z;n.alignDelimiters!==!1&&(L=R.length+L+z.length,L>f[b]&&(f[b]=L),N[b]=L),v[b]=H}u.splice(1,0,v),h.splice(1,0,N),x=-1;const E=[];for(;++x<u.length;){const V=u[x],R=h[x];b=-1;const z=[];for(;++b<m;){const L=V[b]||"";let H="",X="";if(n.alignDelimiters!==!1){const se=f[b]-(R[b]||0),Y=o[b];Y===114?H=" ".repeat(se):Y===99?se%2?(H=" ".repeat(se/2+.5),X=" ".repeat(se/2-.5)):(H=" ".repeat(se/2),X=H):X=" ".repeat(se)}n.delimiterStart!==!1&&!b&&z.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&L==="")&&(n.delimiterStart!==!1||b)&&z.push(" "),n.alignDelimiters!==!1&&z.push(H),z.push(L),n.alignDelimiters!==!1&&z.push(X),n.padding!==!1&&z.push(" "),(n.delimiterEnd!==!1||b!==m-1)&&z.push("|")}E.push(n.delimiterEnd===!1?z.join("").replace(/ +$/,""):z.join(""))}return E.join(`
`)}function cV(t){return t==null?"":String(t)}function lN(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function uV(t,e,n,s){const l=n.enter("blockquote"),o=n.createTracker(s);o.move("> "),o.shift(2);const u=n.indentLines(n.containerFlow(t,o.current()),dV);return l(),u}function dV(t,e,n){return">"+(n?"":" ")+t}function hV(t,e){return oN(t,e.inConstruct,!0)&&!oN(t,e.notInConstruct,!1)}function oN(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let s=-1;for(;++s<e.length;)if(t.includes(e[s]))return!0;return!1}function cN(t,e,n,s){let l=-1;for(;++l<n.unsafe.length;)if(n.unsafe[l].character===`
`&&hV(n.stack,n.unsafe[l]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function fV(t,e){const n=String(t);let s=n.indexOf(e),l=s,o=0,u=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===l?++o>u&&(u=o):o=1,l=s+e.length,s=n.indexOf(e,l);return u}function mV(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function pV(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function gV(t,e,n,s){const l=pV(n),o=t.value||"",u=l==="`"?"GraveAccent":"Tilde";if(mV(t,n)){const b=n.enter("codeIndented"),v=n.indentLines(o,xV);return b(),v}const h=n.createTracker(s),f=l.repeat(Math.max(fV(o,l)+1,3)),m=n.enter("codeFenced");let x=h.move(f);if(t.lang){const b=n.enter(`codeFencedLang${u}`);x+=h.move(n.safe(t.lang,{before:x,after:" ",encode:["`"],...h.current()})),b()}if(t.lang&&t.meta){const b=n.enter(`codeFencedMeta${u}`);x+=h.move(" "),x+=h.move(n.safe(t.meta,{before:x,after:`
`,encode:["`"],...h.current()})),b()}return x+=h.move(`
`),o&&(x+=h.move(o+`
`)),x+=h.move(f),m(),x}function xV(t,e,n){return(n?"":"    ")+t}function my(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function yV(t,e,n,s){const l=my(n),o=l==='"'?"Quote":"Apostrophe",u=n.enter("definition");let h=n.enter("label");const f=n.createTracker(s);let m=f.move("[");return m+=f.move(n.safe(n.associationId(t),{before:m,after:"]",...f.current()})),m+=f.move("]: "),h(),!t.url||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),m+=f.move("<"),m+=f.move(n.safe(t.url,{before:m,after:">",...f.current()})),m+=f.move(">")):(h=n.enter("destinationRaw"),m+=f.move(n.safe(t.url,{before:m,after:t.title?" ":`
`,...f.current()}))),h(),t.title&&(h=n.enter(`title${o}`),m+=f.move(" "+l),m+=f.move(n.safe(t.title,{before:m,after:l,...f.current()})),m+=f.move(l),h()),u(),m}function bV(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function qu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Vf(t,e,n){const s=$o(t),l=$o(e);return s===void 0?l===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}wE.peek=vV;function wE(t,e,n,s){const l=bV(n),o=n.enter("emphasis"),u=n.createTracker(s),h=u.move(l);let f=u.move(n.containerPhrasing(t,{after:l,before:h,...u.current()}));const m=f.charCodeAt(0),x=Vf(s.before.charCodeAt(s.before.length-1),m,l);x.inside&&(f=qu(m)+f.slice(1));const b=f.charCodeAt(f.length-1),v=Vf(s.after.charCodeAt(0),b,l);v.inside&&(f=f.slice(0,-1)+qu(b));const N=u.move(l);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:x.outside},h+f+N}function vV(t,e,n){return n.options.emphasis||"*"}function wV(t,e){let n=!1;return hy(t,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,zg}),!!((!t.depth||t.depth<3)&&ry(t)&&(e.options.setext||n))}function NV(t,e,n,s){const l=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(s);if(wV(t,n)){const x=n.enter("headingSetext"),b=n.enter("phrasing"),v=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return b(),x(),v+`
`+(l===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const u="#".repeat(l),h=n.enter("headingAtx"),f=n.enter("phrasing");o.move(u+" ");let m=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(m)&&(m=qu(m.charCodeAt(0))+m.slice(1)),m=m?u+" "+m:u,n.options.closeAtx&&(m+=" "+u),f(),h(),m}NE.peek=_V;function NE(t){return t.value||""}function _V(){return"<"}_E.peek=jV;function _E(t,e,n,s){const l=my(n),o=l==='"'?"Quote":"Apostrophe",u=n.enter("image");let h=n.enter("label");const f=n.createTracker(s);let m=f.move("![");return m+=f.move(n.safe(t.alt,{before:m,after:"]",...f.current()})),m+=f.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=n.enter("destinationLiteral"),m+=f.move("<"),m+=f.move(n.safe(t.url,{before:m,after:">",...f.current()})),m+=f.move(">")):(h=n.enter("destinationRaw"),m+=f.move(n.safe(t.url,{before:m,after:t.title?" ":")",...f.current()}))),h(),t.title&&(h=n.enter(`title${o}`),m+=f.move(" "+l),m+=f.move(n.safe(t.title,{before:m,after:l,...f.current()})),m+=f.move(l),h()),m+=f.move(")"),u(),m}function jV(){return"!"}jE.peek=EV;function jE(t,e,n,s){const l=t.referenceType,o=n.enter("imageReference");let u=n.enter("label");const h=n.createTracker(s);let f=h.move("![");const m=n.safe(t.alt,{before:f,after:"]",...h.current()});f+=h.move(m+"]["),u();const x=n.stack;n.stack=[],u=n.enter("reference");const b=n.safe(n.associationId(t),{before:f,after:"]",...h.current()});return u(),n.stack=x,o(),l==="full"||!m||m!==b?f+=h.move(b+"]"):l==="shortcut"?f=f.slice(0,-1):f+=h.move("]"),f}function EV(){return"!"}EE.peek=SV;function EE(t,e,n){let s=t.value||"",l="`",o=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(s);)l+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++o<n.unsafe.length;){const u=n.unsafe[o],h=n.compilePattern(u);let f;if(u.atBreak)for(;f=h.exec(s);){let m=f.index;s.charCodeAt(m)===10&&s.charCodeAt(m-1)===13&&m--,s=s.slice(0,m)+" "+s.slice(f.index+1)}}return l+s+l}function SV(){return"`"}function SE(t,e){const n=ry(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}TE.peek=TV;function TE(t,e,n,s){const l=my(n),o=l==='"'?"Quote":"Apostrophe",u=n.createTracker(s);let h,f;if(SE(t,n)){const x=n.stack;n.stack=[],h=n.enter("autolink");let b=u.move("<");return b+=u.move(n.containerPhrasing(t,{before:b,after:">",...u.current()})),b+=u.move(">"),h(),n.stack=x,b}h=n.enter("link"),f=n.enter("label");let m=u.move("[");return m+=u.move(n.containerPhrasing(t,{before:m,after:"](",...u.current()})),m+=u.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),m+=u.move("<"),m+=u.move(n.safe(t.url,{before:m,after:">",...u.current()})),m+=u.move(">")):(f=n.enter("destinationRaw"),m+=u.move(n.safe(t.url,{before:m,after:t.title?" ":")",...u.current()}))),f(),t.title&&(f=n.enter(`title${o}`),m+=u.move(" "+l),m+=u.move(n.safe(t.title,{before:m,after:l,...u.current()})),m+=u.move(l),f()),m+=u.move(")"),h(),m}function TV(t,e,n){return SE(t,n)?"<":"["}AE.peek=AV;function AE(t,e,n,s){const l=t.referenceType,o=n.enter("linkReference");let u=n.enter("label");const h=n.createTracker(s);let f=h.move("[");const m=n.containerPhrasing(t,{before:f,after:"]",...h.current()});f+=h.move(m+"]["),u();const x=n.stack;n.stack=[],u=n.enter("reference");const b=n.safe(n.associationId(t),{before:f,after:"]",...h.current()});return u(),n.stack=x,o(),l==="full"||!m||m!==b?f+=h.move(b+"]"):l==="shortcut"?f=f.slice(0,-1):f+=h.move("]"),f}function AV(){return"["}function py(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function CV(t){const e=py(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function kV(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function CE(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function IV(t,e,n,s){const l=n.enter("list"),o=n.bulletCurrent;let u=t.ordered?kV(n):py(n);const h=t.ordered?u==="."?")":".":CV(n);let f=e&&n.bulletLastUsed?u===n.bulletLastUsed:!1;if(!t.ordered){const x=t.children?t.children[0]:void 0;if((u==="*"||u==="-")&&x&&(!x.children||!x.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),CE(n)===u&&x){let b=-1;for(;++b<t.children.length;){const v=t.children[b];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(u=h),n.bulletCurrent=u;const m=n.containerFlow(t,s);return n.bulletLastUsed=u,n.bulletCurrent=o,l(),m}function RV(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function DV(t,e,n,s){const l=RV(n);let o=n.bulletCurrent||py(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let u=o.length+1;(l==="tab"||l==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(u=Math.ceil(u/4)*4);const h=n.createTracker(s);h.move(o+" ".repeat(u-o.length)),h.shift(u);const f=n.enter("listItem"),m=n.indentLines(n.containerFlow(t,h.current()),x);return f(),m;function x(b,v,N){return v?(N?"":" ".repeat(u))+b:(N?o:o+" ".repeat(u-o.length))+b}}function MV(t,e,n,s){const l=n.enter("paragraph"),o=n.enter("phrasing"),u=n.containerPhrasing(t,s);return o(),l(),u}const OV=Em(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function PV(t,e,n,s){return(t.children.some(function(u){return OV(u)})?n.containerPhrasing:n.containerFlow).call(n,t,s)}function LV(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}kE.peek=VV;function kE(t,e,n,s){const l=LV(n),o=n.enter("strong"),u=n.createTracker(s),h=u.move(l+l);let f=u.move(n.containerPhrasing(t,{after:l,before:h,...u.current()}));const m=f.charCodeAt(0),x=Vf(s.before.charCodeAt(s.before.length-1),m,l);x.inside&&(f=qu(m)+f.slice(1));const b=f.charCodeAt(f.length-1),v=Vf(s.after.charCodeAt(0),b,l);v.inside&&(f=f.slice(0,-1)+qu(b));const N=u.move(l+l);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:x.outside},h+f+N}function VV(t,e,n){return n.options.strong||"*"}function zV(t,e,n,s){return n.safe(t.value,s)}function UV(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function FV(t,e,n){const s=(CE(n)+(n.options.ruleSpaces?" ":"")).repeat(UV(n));return n.options.ruleSpaces?s.slice(0,-1):s}const IE={blockquote:uV,break:cN,code:gV,definition:yV,emphasis:wE,hardBreak:cN,heading:NV,html:NE,image:_E,imageReference:jE,inlineCode:EE,link:TE,linkReference:AE,list:IV,listItem:DV,paragraph:MV,root:PV,strong:kE,text:zV,thematicBreak:FV};function BV(){return{enter:{table:qV,tableData:uN,tableHeader:uN,tableRow:$V},exit:{codeText:GV,table:HV,tableData:ng,tableHeader:ng,tableRow:ng}}}function qV(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function HV(t){this.exit(t),this.data.inTable=void 0}function $V(t){this.enter({type:"tableRow",children:[]},t)}function ng(t){this.exit(t)}function uN(t){this.enter({type:"tableCell",children:[]},t)}function GV(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,YV));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function YV(t,e){return e==="|"?e:t}function KV(t){const e=t||{},n=e.tableCellPadding,s=e.tablePipeAlign,l=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:u,tableCell:f,tableRow:h}};function u(N,E,V,R){return m(x(N,V,R),N.align)}function h(N,E,V,R){const z=b(N,V,R),L=m([z]);return L.slice(0,L.indexOf(`
`))}function f(N,E,V,R){const z=V.enter("tableCell"),L=V.enter("phrasing"),H=V.containerPhrasing(N,{...R,before:o,after:o});return L(),z(),H}function m(N,E){return oV(N,{align:E,alignDelimiters:s,padding:n,stringLength:l})}function x(N,E,V){const R=N.children;let z=-1;const L=[],H=E.enter("table");for(;++z<R.length;)L[z]=b(R[z],E,V);return H(),L}function b(N,E,V){const R=N.children;let z=-1;const L=[],H=E.enter("tableRow");for(;++z<R.length;)L[z]=f(R[z],N,E,V);return H(),L}function v(N,E,V){let R=IE.inlineCode(N,E,V);return V.stack.includes("tableCell")&&(R=R.replace(/\|/g,"\\$&")),R}}function QV(){return{exit:{taskListCheckValueChecked:dN,taskListCheckValueUnchecked:dN,paragraph:WV}}}function XV(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:JV}}}function dN(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function WV(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const l=e.children;let o=-1,u;for(;++o<l.length;){const h=l[o];if(h.type==="paragraph"){u=h;break}}u===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(t)}function JV(t,e,n,s){const l=t.children[0],o=typeof t.checked=="boolean"&&l&&l.type==="paragraph",u="["+(t.checked?"x":" ")+"] ",h=n.createTracker(s);o&&h.move(u);let f=IE.listItem(t,e,n,{...s,...h.current()});return o&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,m)),f;function m(x){return x+u}}function ZV(){return[IL(),JL(),nV(),BV(),QV()]}function e7(t){return{extensions:[RL(),ZL(t),sV(),KV(t),XV()]}}const t7={tokenize:l7,partial:!0},RE={tokenize:o7,partial:!0},DE={tokenize:c7,partial:!0},ME={tokenize:u7,partial:!0},n7={tokenize:d7,partial:!0},OE={name:"wwwAutolink",tokenize:r7,previous:LE},PE={name:"protocolAutolink",tokenize:i7,previous:VE},jr={name:"emailAutolink",tokenize:a7,previous:zE},Ua={};function s7(){return{text:Ua}}let il=48;for(;il<123;)Ua[il]=jr,il++,il===58?il=65:il===91&&(il=97);Ua[43]=jr;Ua[45]=jr;Ua[46]=jr;Ua[95]=jr;Ua[72]=[jr,PE];Ua[104]=[jr,PE];Ua[87]=[jr,OE];Ua[119]=[jr,OE];function a7(t,e,n){const s=this;let l,o;return u;function u(b){return!qg(b)||!zE.call(s,s.previous)||gy(s.events)?n(b):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),h(b))}function h(b){return qg(b)?(t.consume(b),h):b===64?(t.consume(b),f):n(b)}function f(b){return b===46?t.check(n7,x,m)(b):b===45||b===95||Vn(b)?(o=!0,t.consume(b),f):x(b)}function m(b){return t.consume(b),l=!0,f}function x(b){return o&&l&&$n(s.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(b)):n(b)}}function r7(t,e,n){const s=this;return l;function l(u){return u!==87&&u!==119||!LE.call(s,s.previous)||gy(s.events)?n(u):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(t7,t.attempt(RE,t.attempt(DE,o),n),n)(u))}function o(u){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(u)}}function i7(t,e,n){const s=this;let l="",o=!1;return u;function u(b){return(b===72||b===104)&&VE.call(s,s.previous)&&!gy(s.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),l+=String.fromCodePoint(b),t.consume(b),h):n(b)}function h(b){if($n(b)&&l.length<5)return l+=String.fromCodePoint(b),t.consume(b),h;if(b===58){const v=l.toLowerCase();if(v==="http"||v==="https")return t.consume(b),f}return n(b)}function f(b){return b===47?(t.consume(b),o?m:(o=!0,f)):n(b)}function m(b){return b===null||Of(b)||Tt(b)||yl(b)||Nm(b)?n(b):t.attempt(RE,t.attempt(DE,x),n)(b)}function x(b){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(b)}}function l7(t,e,n){let s=0;return l;function l(u){return(u===87||u===119)&&s<3?(s++,t.consume(u),l):u===46&&s===3?(t.consume(u),o):n(u)}function o(u){return u===null?n(u):e(u)}}function o7(t,e,n){let s,l,o;return u;function u(m){return m===46||m===95?t.check(ME,f,h)(m):m===null||Tt(m)||yl(m)||m!==45&&Nm(m)?f(m):(o=!0,t.consume(m),u)}function h(m){return m===95?s=!0:(l=s,s=void 0),t.consume(m),u}function f(m){return l||s||!o?n(m):e(m)}}function c7(t,e){let n=0,s=0;return l;function l(u){return u===40?(n++,t.consume(u),l):u===41&&s<n?o(u):u===33||u===34||u===38||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===60||u===63||u===93||u===95||u===126?t.check(ME,e,o)(u):u===null||Tt(u)||yl(u)?e(u):(t.consume(u),l)}function o(u){return u===41&&s++,t.consume(u),l}}function u7(t,e,n){return s;function s(h){return h===33||h===34||h===39||h===41||h===42||h===44||h===46||h===58||h===59||h===63||h===95||h===126?(t.consume(h),s):h===38?(t.consume(h),o):h===93?(t.consume(h),l):h===60||h===null||Tt(h)||yl(h)?e(h):n(h)}function l(h){return h===null||h===40||h===91||Tt(h)||yl(h)?e(h):s(h)}function o(h){return $n(h)?u(h):n(h)}function u(h){return h===59?(t.consume(h),s):$n(h)?(t.consume(h),u):n(h)}}function d7(t,e,n){return s;function s(o){return t.consume(o),l}function l(o){return Vn(o)?n(o):e(o)}}function LE(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Tt(t)}function VE(t){return!$n(t)}function zE(t){return!(t===47||qg(t))}function qg(t){return t===43||t===45||t===46||t===95||Vn(t)}function gy(t){let e=t.length,n=!1;for(;e--;){const s=t[e][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const h7={tokenize:v7,partial:!0};function f7(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:x7,continuation:{tokenize:y7},exit:b7}},text:{91:{name:"gfmFootnoteCall",tokenize:g7},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:m7,resolveTo:p7}}}}function m7(t,e,n){const s=this;let l=s.events.length;const o=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let u;for(;l--;){const f=s.events[l][1];if(f.type==="labelImage"){u=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return h;function h(f){if(!u||!u._balanced)return n(f);const m=ta(s.sliceSerialize({start:u.end,end:s.now()}));return m.codePointAt(0)!==94||!o.includes(m.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function p7(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},t[t.length-1][1].start)},u={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},h=[t[n+1],t[n+2],["enter",s,e],t[n+3],t[n+4],["enter",l,e],["exit",l,e],["enter",o,e],["enter",u,e],["exit",u,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",s,e]];return t.splice(n,t.length-n+1,...h),t}function g7(t,e,n){const s=this,l=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o=0,u;return h;function h(b){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(b),t.exit("gfmFootnoteCallLabelMarker"),f}function f(b){return b!==94?n(b):(t.enter("gfmFootnoteCallMarker"),t.consume(b),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",m)}function m(b){if(o>999||b===93&&!u||b===null||b===91||Tt(b))return n(b);if(b===93){t.exit("chunkString");const v=t.exit("gfmFootnoteCallString");return l.includes(ta(s.sliceSerialize(v)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(b),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(b)}return Tt(b)||(u=!0),o++,t.consume(b),b===92?x:m}function x(b){return b===91||b===92||b===93?(t.consume(b),o++,m):m(b)}}function x7(t,e,n){const s=this,l=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o,u=0,h;return f;function f(E){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(E),t.exit("gfmFootnoteDefinitionLabelMarker"),m}function m(E){return E===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(E),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",x):n(E)}function x(E){if(u>999||E===93&&!h||E===null||E===91||Tt(E))return n(E);if(E===93){t.exit("chunkString");const V=t.exit("gfmFootnoteDefinitionLabelString");return o=ta(s.sliceSerialize(V)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(E),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),v}return Tt(E)||(h=!0),u++,t.consume(E),E===92?b:x}function b(E){return E===91||E===92||E===93?(t.consume(E),u++,x):x(E)}function v(E){return E===58?(t.enter("definitionMarker"),t.consume(E),t.exit("definitionMarker"),l.includes(o)||l.push(o),lt(t,N,"gfmFootnoteDefinitionWhitespace")):n(E)}function N(E){return e(E)}}function y7(t,e,n){return t.check(ud,e,t.attempt(h7,e,n))}function b7(t){t.exit("gfmFootnoteDefinition")}function v7(t,e,n){const s=this;return lt(t,l,"gfmFootnoteDefinitionIndent",5);function l(o){const u=s.events[s.events.length-1];return u&&u[1].type==="gfmFootnoteDefinitionIndent"&&u[2].sliceSerialize(u[1],!0).length===4?e(o):n(o)}}function w7(t){let n=(t||{}).singleTilde;const s={name:"strikethrough",tokenize:o,resolveAll:l};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function l(u,h){let f=-1;for(;++f<u.length;)if(u[f][0]==="enter"&&u[f][1].type==="strikethroughSequenceTemporary"&&u[f][1]._close){let m=f;for(;m--;)if(u[m][0]==="exit"&&u[m][1].type==="strikethroughSequenceTemporary"&&u[m][1]._open&&u[f][1].end.offset-u[f][1].start.offset===u[m][1].end.offset-u[m][1].start.offset){u[f][1].type="strikethroughSequence",u[m][1].type="strikethroughSequence";const x={type:"strikethrough",start:Object.assign({},u[m][1].start),end:Object.assign({},u[f][1].end)},b={type:"strikethroughText",start:Object.assign({},u[m][1].end),end:Object.assign({},u[f][1].start)},v=[["enter",x,h],["enter",u[m][1],h],["exit",u[m][1],h],["enter",b,h]],N=h.parser.constructs.insideSpan.null;N&&bs(v,v.length,0,_m(N,u.slice(m+1,f),h)),bs(v,v.length,0,[["exit",b,h],["enter",u[f][1],h],["exit",u[f][1],h],["exit",x,h]]),bs(u,m-1,f-m+3,v),f=m+v.length-2;break}}for(f=-1;++f<u.length;)u[f][1].type==="strikethroughSequenceTemporary"&&(u[f][1].type="data");return u}function o(u,h,f){const m=this.previous,x=this.events;let b=0;return v;function v(E){return m===126&&x[x.length-1][1].type!=="characterEscape"?f(E):(u.enter("strikethroughSequenceTemporary"),N(E))}function N(E){const V=$o(m);if(E===126)return b>1?f(E):(u.consume(E),b++,N);if(b<2&&!n)return f(E);const R=u.exit("strikethroughSequenceTemporary"),z=$o(E);return R._open=!z||z===2&&!!V,R._close=!V||V===2&&!!z,h(E)}}}class N7{constructor(){this.map=[]}add(e,n,s){_7(this,e,n,s)}consume(e){if(this.map.sort(function(o,u){return o[0]-u[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];s.push(e.slice()),e.length=0;let l=s.pop();for(;l;){for(const o of l)e.push(o);l=s.pop()}this.map.length=0}}function _7(t,e,n,s){let l=0;if(!(n===0&&s.length===0)){for(;l<t.map.length;){if(t.map[l][0]===e){t.map[l][1]+=n,t.map[l][2].push(...s);return}l+=1}t.map.push([e,n,s])}}function j7(t,e){let n=!1;const s=[];for(;e<t.length;){const l=t[e];if(n){if(l[0]==="enter")l[1].type==="tableContent"&&s.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=s.length-1;s[o]=s[o]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return s}function E7(){return{flow:{null:{name:"table",tokenize:S7,resolveAll:T7}}}}function S7(t,e,n){const s=this;let l=0,o=0,u;return h;function h(S){let A=s.events.length-1;for(;A>-1;){const re=s.events[A][1].type;if(re==="lineEnding"||re==="linePrefix")A--;else break}const P=A>-1?s.events[A][1].type:null,D=P==="tableHead"||P==="tableRow"?Y:f;return D===Y&&s.parser.lazy[s.now().line]?n(S):D(S)}function f(S){return t.enter("tableHead"),t.enter("tableRow"),m(S)}function m(S){return S===124||(u=!0,o+=1),x(S)}function x(S){return S===null?n(S):De(S)?o>1?(o=0,s.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),N):n(S):Je(S)?lt(t,x,"whitespace")(S):(o+=1,u&&(u=!1,l+=1),S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),u=!0,x):(t.enter("data"),b(S)))}function b(S){return S===null||S===124||Tt(S)?(t.exit("data"),x(S)):(t.consume(S),S===92?v:b)}function v(S){return S===92||S===124?(t.consume(S),b):b(S)}function N(S){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(S):(t.enter("tableDelimiterRow"),u=!1,Je(S)?lt(t,E,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):E(S))}function E(S){return S===45||S===58?R(S):S===124?(u=!0,t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),V):se(S)}function V(S){return Je(S)?lt(t,R,"whitespace")(S):R(S)}function R(S){return S===58?(o+=1,u=!0,t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),z):S===45?(o+=1,z(S)):S===null||De(S)?X(S):se(S)}function z(S){return S===45?(t.enter("tableDelimiterFiller"),L(S)):se(S)}function L(S){return S===45?(t.consume(S),L):S===58?(u=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(S),t.exit("tableDelimiterMarker"),H):(t.exit("tableDelimiterFiller"),H(S))}function H(S){return Je(S)?lt(t,X,"whitespace")(S):X(S)}function X(S){return S===124?E(S):S===null||De(S)?!u||l!==o?se(S):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(S)):se(S)}function se(S){return n(S)}function Y(S){return t.enter("tableRow"),I(S)}function I(S){return S===124?(t.enter("tableCellDivider"),t.consume(S),t.exit("tableCellDivider"),I):S===null||De(S)?(t.exit("tableRow"),e(S)):Je(S)?lt(t,I,"whitespace")(S):(t.enter("data"),T(S))}function T(S){return S===null||S===124||Tt(S)?(t.exit("data"),I(S)):(t.consume(S),S===92?M:T)}function M(S){return S===92||S===124?(t.consume(S),T):T(S)}}function T7(t,e){let n=-1,s=!0,l=0,o=[0,0,0,0],u=[0,0,0,0],h=!1,f=0,m,x,b;const v=new N7;for(;++n<t.length;){const N=t[n],E=N[1];N[0]==="enter"?E.type==="tableHead"?(h=!1,f!==0&&(hN(v,e,f,m,x),x=void 0,f=0),m={type:"table",start:Object.assign({},E.start),end:Object.assign({},E.end)},v.add(n,0,[["enter",m,e]])):E.type==="tableRow"||E.type==="tableDelimiterRow"?(s=!0,b=void 0,o=[0,0,0,0],u=[0,n+1,0,0],h&&(h=!1,x={type:"tableBody",start:Object.assign({},E.start),end:Object.assign({},E.end)},v.add(n,0,[["enter",x,e]])),l=E.type==="tableDelimiterRow"?2:x?3:1):l&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")?(s=!1,u[2]===0&&(o[1]!==0&&(u[0]=u[1],b=Yh(v,e,o,l,void 0,b),o=[0,0,0,0]),u[2]=n)):E.type==="tableCellDivider"&&(s?s=!1:(o[1]!==0&&(u[0]=u[1],b=Yh(v,e,o,l,void 0,b)),o=u,u=[o[1],n,0,0])):E.type==="tableHead"?(h=!0,f=n):E.type==="tableRow"||E.type==="tableDelimiterRow"?(f=n,o[1]!==0?(u[0]=u[1],b=Yh(v,e,o,l,n,b)):u[1]!==0&&(b=Yh(v,e,u,l,n,b)),l=0):l&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")&&(u[3]=n)}for(f!==0&&hN(v,e,f,m,x),v.consume(e.events),n=-1;++n<e.events.length;){const N=e.events[n];N[0]==="enter"&&N[1].type==="table"&&(N[1]._align=j7(e.events,n))}return t}function Yh(t,e,n,s,l,o){const u=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",h="tableContent";n[0]!==0&&(o.end=Object.assign({},So(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const f=So(e.events,n[1]);if(o={type:u,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const m=So(e.events,n[2]),x=So(e.events,n[3]),b={type:h,start:Object.assign({},m),end:Object.assign({},x)};if(t.add(n[2],0,[["enter",b,e]]),s!==2){const v=e.events[n[2]],N=e.events[n[3]];if(v[1].end=Object.assign({},N[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const E=n[2]+1,V=n[3]-n[2]-1;t.add(E,V,[])}}t.add(n[3]+1,0,[["exit",b,e]])}return l!==void 0&&(o.end=Object.assign({},So(e.events,l)),t.add(l,0,[["exit",o,e]]),o=void 0),o}function hN(t,e,n,s,l){const o=[],u=So(e.events,n);l&&(l.end=Object.assign({},u),o.push(["exit",l,e])),s.end=Object.assign({},u),o.push(["exit",s,e]),t.add(n+1,0,o)}function So(t,e){const n=t[e],s=n[0]==="enter"?"start":"end";return n[1][s]}const A7={name:"tasklistCheck",tokenize:k7};function C7(){return{text:{91:A7}}}function k7(t,e,n){const s=this;return l;function l(f){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),o)}function o(f){return Tt(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),u):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),u):n(f)}function u(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),h):n(f)}function h(f){return De(f)?e(f):Je(f)?t.check({tokenize:I7},e,n)(f):n(f)}}function I7(t,e,n){return lt(t,s,"whitespace");function s(l){return l===null?n(l):e(l)}}function R7(t){return X5([s7(),f7(),w7(t),E7(),C7()])}const D7={};function ic(t){const e=this,n=t||D7,s=e.data(),l=s.micromarkExtensions||(s.micromarkExtensions=[]),o=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),u=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);l.push(R7(n)),o.push(ZV()),u.push(e7(n))}const Tm=["Public Forum (PF)","Lincoln-Douglas (LD)","Policy Debate (CX)","Big Questions Debate","World Schools Debate","Congressional Debate","Original Oratory (OO)","Informative Speaking (INFO)","United States Extemp (USX)","International Extemp (IX)","Dramatic Interpretation (DI)","Humorous Interpretation (HI)","Duo Interpretation","Program Oral Interpretation (POI)","Impromptu","Extemporaneous Commentary","Expository","Storytelling","Prose/Poetry","Parliamentary (British)","Parliamentary (Asian)","Model UN Speech","After Dinner Speaking","Toast/Ceremonial"],UE=["Proposition/Affirmative","Opposition/Negative","Government","Opposition","Pro","Con","Opening Member","Closing Member/Whip","Sponsor (Congress)","Individual/Solo","Neutral/Evaluator"],Ue={DEBATE:"debate",INDIVIDUAL_SPEAKING:"individual",INTERP:"interp",EXTEMP:"extemp",LIMITED_PREP:"limited_prep"},Go={"Public Forum (PF)":Ue.DEBATE,"Lincoln-Douglas (LD)":Ue.DEBATE,"Policy Debate (CX)":Ue.DEBATE,"Big Questions Debate":Ue.DEBATE,"World Schools Debate":Ue.DEBATE,"Congressional Debate":Ue.DEBATE,"Parliamentary (British)":Ue.DEBATE,"Parliamentary (Asian)":Ue.DEBATE,"Original Oratory (OO)":Ue.INDIVIDUAL_SPEAKING,"Informative Speaking (INFO)":Ue.INDIVIDUAL_SPEAKING,Expository:Ue.INDIVIDUAL_SPEAKING,"After Dinner Speaking":Ue.INDIVIDUAL_SPEAKING,"Toast/Ceremonial":Ue.INDIVIDUAL_SPEAKING,"Model UN Speech":Ue.INDIVIDUAL_SPEAKING,"Dramatic Interpretation (DI)":Ue.INTERP,"Humorous Interpretation (HI)":Ue.INTERP,"Duo Interpretation":Ue.INTERP,"Program Oral Interpretation (POI)":Ue.INTERP,"Prose/Poetry":Ue.INTERP,Storytelling:Ue.INTERP,"United States Extemp (USX)":Ue.EXTEMP,"International Extemp (IX)":Ue.EXTEMP,"Extemporaneous Commentary":Ue.EXTEMP,Impromptu:Ue.LIMITED_PREP},M7={[Ue.DEBATE]:{name:"Debate",description:"Competitive debate formats with opposing sides",showOpposingArguments:!0,showClash:!0,showRebuttals:!0,showCrossEx:!0,rubric:`
## Debate Evaluation Criteria

| Category | Weight | Description |
|----------|--------|-------------|
| **Argumentation & Evidence** | 30% | Quality of arguments, evidence strength, logical warrants |
| **Clash & Engagement** | 25% | Direct responses to opponent, refutation quality |
| **Impact Analysis** | 20% | Magnitude, probability, timeframe of impacts |
| **Strategy & Organization** | 15% | Speech structure, time allocation, flow |
| **Delivery** | 10% | Clarity, persuasion, pace (speed okay if clear) |
    `,focusAreas:["Arguments for your position","Responses to opposing arguments","Evidence quality and sources","Impact calculus","Clash and refutation","Cross-examination presence"]},[Ue.INDIVIDUAL_SPEAKING]:{name:"Individual Speaking",description:"Platform speaking events focused on original content",showOpposingArguments:!1,showClash:!1,showRebuttals:!1,showCrossEx:!1,rubric:`
## Individual Speaking Evaluation Criteria

| Category | Weight | Description |
|----------|--------|-------------|
| **Content & Research** | 30% | Depth of information, accuracy, relevance |
| **Organization** | 25% | Structure, transitions, logical flow |
| **Delivery** | 25% | Vocal variety, eye contact, gestures, presence |
| **Analysis & Insight** | 15% | Original thought, depth of understanding |
| **Impact & Memorability** | 5% | Audience engagement, lasting impression |
    `,focusAreas:["Content clarity and accuracy","Speech organization and structure","Vocal delivery and variety","Physical presence and gestures","Audience engagement","Use of evidence and examples"]},[Ue.INTERP]:{name:"Interpretation",description:"Performance events with scripted or literary material",showOpposingArguments:!1,showClash:!1,showRebuttals:!1,showCrossEx:!1,rubric:`
## Interpretation Evaluation Criteria

| Category | Weight | Description |
|----------|--------|-------------|
| **Characterization** | 30% | Distinct, consistent, believable characters |
| **Emotional Range** | 25% | Depth of emotion, appropriate intensity |
| **Technical Skill** | 20% | Blocking, pops, timing, focus |
| **Material Selection** | 15% | Quality of cutting, thematic unity |
| **Overall Impact** | 10% | Audience connection, memorability |
    `,focusAreas:["Character development and distinction","Emotional authenticity","Physical performance (blocking, gestures)","Vocal variety and character voices","Timing and pacing","Thematic development"]},[Ue.EXTEMP]:{name:"Extemporaneous Speaking",description:"Current events analysis with limited prep time",showOpposingArguments:!1,showClash:!1,showRebuttals:!1,showCrossEx:!1,rubric:`
## Extemporaneous Speaking Evaluation Criteria

| Category | Weight | Description |
|----------|--------|-------------|
| **Analysis Depth** | 30% | Quality of reasoning, insight into topic |
| **Evidence & Sources** | 25% | Citation quality, recency, variety |
| **Organization** | 20% | Clear structure, strong transitions |
| **Answering the Question** | 15% | Directly addresses the prompt |
| **Delivery** | 10% | Conversational, engaging, minimal notes |
    `,focusAreas:["Direct answer to the question","Analysis depth and insight","Evidence and source citations","Current events knowledge","Logical organization","Conversational delivery"]},[Ue.LIMITED_PREP]:{name:"Limited Preparation",description:"Impromptu speaking with minimal prep time",showOpposingArguments:!1,showClash:!1,showRebuttals:!1,showCrossEx:!1,rubric:`
## Impromptu Speaking Evaluation Criteria

| Category | Weight | Description |
|----------|--------|-------------|
| **Quick Thinking** | 30% | Ability to form coherent thoughts rapidly |
| **Relevance** | 25% | Staying on topic, addressing the prompt |
| **Organization** | 20% | Clear structure despite limited prep |
| **Creativity** | 15% | Original examples, unique perspectives |
| **Delivery** | 10% | Confident, fluid despite improvisation |
    `,focusAreas:["Response relevance to prompt","Quick organization of thoughts","Creative examples and analogies","Confident delivery","Time management","Coherent structure"]}},FE=t=>{const e=Go[t]||Ue.INDIVIDUAL_SPEAKING;return M7[e]},Hg=t=>Go[t]===Ue.DEBATE?["Proposition/Affirmative","Opposition/Negative","Government","Opposition","Pro","Con","Opening Member","Closing Member/Whip","Sponsor (Congress)"]:["Individual/Solo","Neutral/Evaluator"],fN=(t,e,n,s)=>{const l=FE(t),o=Go[t];let u=`You are an expert ${t} coach and judge with years of experience evaluating this specific event type.`;return e&&(u+=`
Topic/Prompt: ${e}`),l.showOpposingArguments&&n&&(u+=`
Side/Position: ${n}`),u+=`

Evaluate the following speech based on this event-specific rubric:
${l.rubric}`,o===Ue.DEBATE?u+=`

### DEBATE-SPECIFIC ANALYSIS:
- Analyze the strength and clarity of each argument presented
- Identify potential opposing arguments and how well they were preempted or addressed
- Evaluate evidence quality and proper citation
- Assess impact calculus (magnitude, probability, timeframe)
- Note clash quality and direct engagement with opposing points
- Consider cross-examination strategy if applicable`:o===Ue.INDIVIDUAL_SPEAKING?u+=`

### INDIVIDUAL SPEAKING-SPECIFIC ANALYSIS:
- Focus on content clarity and information accuracy
- Do NOT analyze opposing arguments (this is not a debate event)
- Evaluate speech organization and flow
- Assess delivery techniques (vocal variety, gestures, eye contact)
- Consider audience engagement and persuasive techniques
- NOTE: Do not penalize for missing visual aids or props (text-only evaluation)`:o===Ue.INTERP?u+=`

### INTERPRETATION-SPECIFIC ANALYSIS:
- Evaluate character development and distinction between characters
- Assess emotional authenticity and range
- Analyze physical performance elements described
- Consider pacing and timing
- Note thematic development and material selection quality
- Do NOT analyze arguments or debate elements (this is a performance event)`:o===Ue.EXTEMP?u+=`

### EXTEMP-SPECIFIC ANALYSIS:
- Evaluate how directly the question/prompt is answered
- Assess depth of analysis on current events
- Check quality and recency of evidence cited
- Consider organization and structure
- Note delivery style (should be conversational, not memorized)
- Do NOT analyze debate clash (this is not a debate event)`:o===Ue.LIMITED_PREP&&(u+=`

### IMPROMPTU-SPECIFIC ANALYSIS:
- Evaluate quick thinking and coherent thought formation
- Assess relevance to the prompt given
- Consider organization despite limited preparation time
- Note creative examples and unique perspectives
- Evaluate confidence and delivery fluidity
- Be understanding of minor hesitations given the time constraints`),u+=`

Please provide the output in the following Markdown format:

## Executive Summary
(Brief 2-3 sentence overview of overall performance)

## Scorecard
| Category | Score (0-10) | Notes |
| --- | --- | --- |
(Fill based on the rubric above)
| **Total** | **(Average/Sum)** | |

## Key ${o===Ue.DEBATE?"Argument":"Content"} Analysis
(Detailed breakdown of main points made)
${l.showOpposingArguments?`
## Opposing Arguments & Clash
(Analysis of responses to opponent arguments and missed clash opportunities)`:""}

## Constructive Feedback
- **Strengths**: ...
- **Areas for Improvement**: ...

## Recommended Drills
(3-5 specific exercises to improve weak areas, tailored to this event type)

## Quick Tips for Next Round
(2-3 actionable items for immediate improvement)

SPEECH TEXT:
${s}`,u},mN={[Ue.DEBATE]:{label:"Debate Events",icon:"",color:"text-red-400"},[Ue.INDIVIDUAL_SPEAKING]:{label:"Individual Speaking",icon:"",color:"text-blue-400"},[Ue.INTERP]:{label:"Interpretation",icon:"",color:"text-purple-400"},[Ue.EXTEMP]:{label:"Extemporaneous",icon:"",color:"text-green-400"},[Ue.LIMITED_PREP]:{label:"Limited Prep",icon:"",color:"text-yellow-400"}};var pN;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(pN||(pN={}));var gN;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(gN||(gN={}));var xN;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(xN||(xN={}));const yN=["user","model","function","system"];var bN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(bN||(bN={}));var vN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(vN||(vN={}));var wN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(wN||(wN={}));var NN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(NN||(NN={}));var Au;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Au||(Au={}));var _N;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(_N||(_N={}));var jN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(jN||(jN={}));var EN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(EN||(EN={}));class Ln extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class vo extends Ln{constructor(e,n){super(e),this.response=n}}class BE extends Ln{constructor(e,n,s,l){super(e),this.status=n,this.statusText=s,this.errorDetails=l}}class gi extends Ln{}class qE extends Ln{}const O7="https://generativelanguage.googleapis.com",P7="v1beta",L7="0.24.1",V7="genai-js";var bl;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(bl||(bl={}));class z7{constructor(e,n,s,l,o){this.model=e,this.task=n,this.apiKey=s,this.stream=l,this.requestOptions=o}toString(){var e,n;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||P7;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||O7}/${s}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function U7(t){const e=[];return t?.apiClient&&e.push(t.apiClient),e.push(`${V7}/${L7}`),e.join(" ")}async function F7(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",U7(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let s=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(l){throw new gi(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${l.message}`)}for(const[l,o]of s.entries()){if(l==="x-goog-api-key")throw new gi(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new gi(`Header name ${l} can only be set using the apiClient field`);n.append(l,o)}}return n}async function B7(t,e,n,s,l,o){const u=new z7(t,e,n,s,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},G7(o)),{method:"POST",headers:await F7(u),body:l})}}async function hd(t,e,n,s,l,o={},u=fetch){const{url:h,fetchOptions:f}=await B7(t,e,n,s,l,o);return q7(h,f,u)}async function q7(t,e,n=fetch){let s;try{s=await n(t,e)}catch(l){H7(l,t)}return s.ok||await $7(s,t),s}function H7(t,e){let n=t;throw n.name==="AbortError"?(n=new qE(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof BE||t instanceof gi||(n=new Ln(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function $7(t,e){let n="",s;try{const l=await t.json();n=l.error.message,l.error.details&&(n+=` ${JSON.stringify(l.error.details)}`,s=l.error.details)}catch{}throw new BE(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,s)}function G7(t){const e={};if(t?.signal!==void 0||t?.timeout>=0){const n=new AbortController;t?.timeout>=0&&setTimeout(()=>n.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function xy(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),df(t.candidates[0]))throw new vo(`${ai(t)}`,t);return Y7(t)}else if(t.promptFeedback)throw new vo(`Text not available. ${ai(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),df(t.candidates[0]))throw new vo(`${ai(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),SN(t)[0]}else if(t.promptFeedback)throw new vo(`Function call not available. ${ai(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),df(t.candidates[0]))throw new vo(`${ai(t)}`,t);return SN(t)}else if(t.promptFeedback)throw new vo(`Function call not available. ${ai(t)}`,t)},t}function Y7(t){var e,n,s,l;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(l=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function SN(t){var e,n,s,l;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(l=(s=t.candidates)===null||s===void 0?void 0:s[0].content)===null||l===void 0?void 0:l.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const K7=[Au.RECITATION,Au.SAFETY,Au.LANGUAGE];function df(t){return!!t.finishReason&&K7.includes(t.finishReason)}function ai(t){var e,n,s;let l="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)l+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(l+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(l+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((s=t.candidates)===null||s===void 0)&&s[0]){const o=t.candidates[0];df(o)&&(l+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(l+=`: ${o.finishMessage}`))}return l}function Hu(t){return this instanceof Hu?(this.v=t,this):new Hu(t)}function Q7(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),l,o=[];return l={},u("next"),u("throw"),u("return"),l[Symbol.asyncIterator]=function(){return this},l;function u(v){s[v]&&(l[v]=function(N){return new Promise(function(E,V){o.push([v,N,E,V])>1||h(v,N)})})}function h(v,N){try{f(s[v](N))}catch(E){b(o[0][3],E)}}function f(v){v.value instanceof Hu?Promise.resolve(v.value.v).then(m,x):b(o[0][2],v)}function m(v){h("next",v)}function x(v){h("throw",v)}function b(v,N){v(N),o.shift(),o.length&&h(o[0][0],o[0][1])}}const TN=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function X7(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Z7(e),[s,l]=n.tee();return{stream:J7(s),response:W7(l)}}async function W7(t){const e=[],n=t.getReader();for(;;){const{done:s,value:l}=await n.read();if(s)return xy(ez(e));e.push(l)}}function J7(t){return Q7(this,arguments,function*(){const n=t.getReader();for(;;){const{value:s,done:l}=yield Hu(n.read());if(l)break;yield yield Hu(xy(s))}})}function Z7(t){const e=t.getReader();return new ReadableStream({start(s){let l="";return o();function o(){return e.read().then(({value:u,done:h})=>{if(h){if(l.trim()){s.error(new Ln("Failed to parse stream"));return}s.close();return}l+=u;let f=l.match(TN),m;for(;f;){try{m=JSON.parse(f[1])}catch{s.error(new Ln(`Error parsing JSON response: "${f[1]}"`));return}s.enqueue(m),l=l.substring(f[0].length),f=l.match(TN)}return o()}).catch(u=>{let h=u;throw h.stack=u.stack,h.name==="AbortError"?h=new qE("Request aborted when reading from the stream"):h=new Ln("Error reading from the stream"),h})}}})}function ez(t){const e=t[t.length-1],n={promptFeedback:e?.promptFeedback};for(const s of t){if(s.candidates){let l=0;for(const o of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[l]||(n.candidates[l]={index:l}),n.candidates[l].citationMetadata=o.citationMetadata,n.candidates[l].groundingMetadata=o.groundingMetadata,n.candidates[l].finishReason=o.finishReason,n.candidates[l].finishMessage=o.finishMessage,n.candidates[l].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[l].content||(n.candidates[l].content={role:o.content.role||"user",parts:[]});const u={};for(const h of o.content.parts)h.text&&(u.text=h.text),h.functionCall&&(u.functionCall=h.functionCall),h.executableCode&&(u.executableCode=h.executableCode),h.codeExecutionResult&&(u.codeExecutionResult=h.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[l].content.parts.push(u)}l++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}async function HE(t,e,n,s){const l=await hd(e,bl.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),s);return X7(l)}async function $E(t,e,n,s){const o=await(await hd(e,bl.GENERATE_CONTENT,t,!1,JSON.stringify(n),s)).json();return{response:xy(o)}}function GE(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function $u(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return tz(e)}function tz(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,l=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),l=!0):(e.parts.push(o),s=!0);if(s&&l)throw new Ln("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!l)throw new Ln("No content is provided for sending chat message.");return s?e:n}function nz(t,e){var n;let s={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const l=t.generateContentRequest!=null;if(t.contents){if(l)throw new gi("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=t.contents}else if(l)s=Object.assign(Object.assign({},s),t.generateContentRequest);else{const o=$u(t);s.contents=[o]}return{generateContentRequest:s}}function AN(t){let e;return t.contents?e=t:e={contents:[$u(t)]},t.systemInstruction&&(e.systemInstruction=GE(t.systemInstruction)),e}function sz(t){return typeof t=="string"||Array.isArray(t)?{content:$u(t)}:t}const CN=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],az={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function rz(t){let e=!1;for(const n of t){const{role:s,parts:l}=n;if(!e&&s!=="user")throw new Ln(`First content should be with role 'user', got ${s}`);if(!yN.includes(s))throw new Ln(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(yN)}`);if(!Array.isArray(l))throw new Ln("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new Ln("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of l)for(const f of CN)f in h&&(o[f]+=1);const u=az[s];for(const h of CN)if(!u.includes(h)&&o[h]>0)throw new Ln(`Content with role '${s}' can't contain '${h}' part`);e=!0}}function kN(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}const IN="SILENT_ERROR";class iz{constructor(e,n,s,l={}){this.model=n,this.params=s,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s?.history&&(rz(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var s,l,o,u,h,f;await this._sendPromise;const m=$u(e),x={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},b=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>$E(this._apiKey,this.model,x,b)).then(N=>{var E;if(kN(N.response)){this._history.push(m);const V=Object.assign({parts:[],role:"model"},(E=N.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(V)}else{const V=ai(N.response);V&&console.warn(`sendMessage() was unsuccessful. ${V}. Inspect response object for details.`)}v=N}).catch(N=>{throw this._sendPromise=Promise.resolve(),N}),await this._sendPromise,v}async sendMessageStream(e,n={}){var s,l,o,u,h,f;await this._sendPromise;const m=$u(e),x={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},b=Object.assign(Object.assign({},this._requestOptions),n),v=HE(this._apiKey,this.model,x,b);return this._sendPromise=this._sendPromise.then(()=>v).catch(N=>{throw new Error(IN)}).then(N=>N.response).then(N=>{if(kN(N)){this._history.push(m);const E=Object.assign({},N.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=ai(N);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(N=>{N.message!==IN&&console.error(N)}),v}}async function lz(t,e,n,s){return(await hd(e,bl.COUNT_TOKENS,t,!1,JSON.stringify(n),s)).json()}async function oz(t,e,n,s){return(await hd(e,bl.EMBED_CONTENT,t,!1,JSON.stringify(n),s)).json()}async function cz(t,e,n,s){const l=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await hd(e,bl.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:l}),s)).json()}class RN{constructor(e,n,s={}){this.apiKey=e,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=GE(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var s;const l=AN(e),o=Object.assign(Object.assign({},this._requestOptions),n);return $E(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),o)}async generateContentStream(e,n={}){var s;const l=AN(e),o=Object.assign(Object.assign({},this._requestOptions),n);return HE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},l),o)}startChat(e){var n;return new iz(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const s=nz(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),n);return lz(this.apiKey,this.model,s,l)}async embedContent(e,n={}){const s=sz(e),l=Object.assign(Object.assign({},this._requestOptions),n);return oz(this.apiKey,this.model,s,l)}async batchEmbedContents(e,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return cz(this.apiKey,this.model,e,s)}}class br{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Ln("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new RN(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,s){if(!e.name)throw new gi("Cached content must contain a `name` field.");if(!e.model)throw new gi("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const u of l)if(n?.[u]&&e[u]&&n?.[u]!==e[u]){if(u==="model"){const h=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(h===f)continue}throw new gi(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new RN(this.apiKey,o,s)}}function YE(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function uz(t){const e=new Date(t),s=new Date-e,l=Math.floor(s/6e4),o=Math.floor(s/36e5),u=Math.floor(s/864e5);return l<1?"Just now":l<60?`${l}m ago`:o<24?`${o}h ago`:u<7?`${u}d ago`:YE(t)}function dz(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const DN={get:(t,e=null)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},set:(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Storage error:",n)}},remove:t=>{try{localStorage.removeItem(t)}catch(e){console.error("Storage error:",e)}}},MN="adjudicator_history",ON=50;function kl(){const[t,e]=k.useState([]),[n,s]=k.useState(!0);k.useEffect(()=>{const N=DN.get(MN,[]);e(N),s(!1)},[]),k.useEffect(()=>{n||DN.set(MN,t)},[t,n]);const l=k.useCallback(N=>{const E={id:dz(),createdAt:new Date().toISOString(),...N};return e(V=>[E,...V].slice(0,ON)),E.id},[]),o=k.useCallback(N=>{e(E=>E.filter(V=>V.id!==N))},[]),u=k.useCallback(()=>{e([])},[]),h=k.useCallback(N=>t.find(E=>E.id===N),[t]),f=k.useCallback(N=>t.filter(E=>E.type===N),[t]),m=k.useCallback((N,E)=>{e(V=>V.map(R=>R.id===N?{...R,...E,updatedAt:new Date().toISOString()}:R))},[]),x=k.useCallback(()=>{const N=JSON.stringify(t,null,2),E=new Blob([N],{type:"application/json"}),V=URL.createObjectURL(E),R=document.createElement("a");R.href=V,R.download=`adjudicator-history-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(V)},[t]),b=k.useCallback(async N=>{try{const E=await N.text(),V=JSON.parse(E);return Array.isArray(V)?(e(R=>{const z=new Set(R.map(H=>H.id));return[...V.filter(H=>!z.has(H.id)),...R].slice(0,ON)}),{success:!0,count:V.length}):{success:!1,error:"Invalid format"}}catch(E){return{success:!1,error:E.message}}},[]),v={total:t.length,byType:{judge:t.filter(N=>N.type==="judge").length,board:t.filter(N=>N.type==="board").length,coach:t.filter(N=>N.type==="coach").length,strategy:t.filter(N=>N.type==="strategy").length,extemp:t.filter(N=>N.type==="extemp").length,tone:t.filter(N=>N.type==="tone").length},lastSession:t[0]||null};return{history:t,isLoading:n,stats:v,addSession:l,deleteSession:o,clearHistory:u,getSession:h,getSessionsByType:f,updateSession:m,exportHistory:x,importHistory:b}}const hz=({apiKey:t})=>{const[e,n]=k.useState("Public Forum (PF)"),[s,l]=k.useState("Proposition/Affirmative"),[o,u]=k.useState(""),[h,f]=k.useState(""),[m,x]=k.useState(!1),[b,v]=k.useState(null),[N,E]=k.useState(""),[V,R]=k.useState(!1),[z,L]=k.useState(!1),{addSession:H}=kl(),X=k.useMemo(()=>FE(e),[e]),se=k.useMemo(()=>Hg(e),[e]),Y=Go[e],I=mN[Y],T=P=>{n(P);const D=Hg(P);D.includes(s)||l(D[0])},M=async()=>{if(!t){E("Please enter a valid Gemini API Key in Settings.");return}if(!h.trim()){E("Please enter the speech transcript.");return}x(!0),E(""),v(null);try{const D=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),re=fN(e,o,s,h),Z=(await(await D.generateContent(re)).response).text();v(Z),H({type:"judge",title:o||`${e} Analysis`,input:{transcript:h.substring(0,500)+(h.length>500?"...":"")},result:Z,metadata:{speechType:e,side:X.showOpposingArguments?s:null,topic:o,eventCategory:Y}}),L(!0),setTimeout(()=>L(!1),2e3)}catch(P){console.error("Gemini Error:",P);try{const re=new br(t).getGenerativeModel({model:"gemini-1.5-flash"}),te=fN(e,o,s,h),ue=(await(await re.generateContent(te)).response).text();v(ue)}catch{E(`Error: ${P.message}. Please try again.`)}}finally{x(!1)}},S=()=>{b&&(navigator.clipboard.writeText(b),R(!0),setTimeout(()=>R(!1),2e3))},A=k.useMemo(()=>{const P={};return Tm.forEach(D=>{const re=Go[D];P[re]||(P[re]=[]),P[re].push(D)}),P},[]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Speech Analysis"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Get AI-powered feedback on your speeches"})]}),I&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-900/50 border border-slate-800/60",children:[r.jsx("span",{className:"text-lg",children:I.icon}),r.jsx("span",{className:`text-sm font-medium ${I.color}`,children:I.label})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-4",children:[r.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Event Format"}),r.jsx("select",{value:e,onChange:P=>T(P.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all",children:Object.entries(A).map(([P,D])=>{const re=mN[P];return r.jsx("optgroup",{label:`${re?.icon||""} ${re?.label||P}`,children:D.map(te=>r.jsx("option",{value:te,children:te},te))},P)})})]}),X.showOpposingArguments?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Side/Position"}),r.jsx("select",{value:s,onChange:P=>l(P.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all",children:se.map(P=>r.jsx("option",{value:P,children:P},P))})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Speaker Role"}),r.jsx("select",{value:s,onChange:P=>l(P.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all",children:se.map(P=>r.jsx("option",{value:P,children:P},P))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:X.showOpposingArguments?"Resolution/Topic":"Speech Topic/Prompt"}),r.jsx("input",{type:"text",value:o,onChange:P=>u(P.target.value),placeholder:X.showOpposingArguments?"Resolved: The United States should...":"Enter the topic or prompt...",className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-700/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Hf,{className:"w-4 h-4 text-cyan-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Analysis Focus Areas"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.focusAreas.slice(0,4).map((P,D)=>r.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-slate-900/50 text-slate-400 rounded-lg border border-slate-700/50",children:P},D)),X.focusAreas.length>4&&r.jsxs("span",{className:"px-3 py-1.5 text-xs text-slate-500",children:["+",X.focusAreas.length-4," more"]})]})]})]}),r.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50",children:r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Speech Transcript"})}),r.jsx("textarea",{value:h,onChange:P=>f(P.target.value),placeholder:"Paste your speech text here...",className:"flex-1 w-full bg-transparent p-4 resize-none focus:outline-none font-mono text-sm text-slate-200 placeholder-slate-600 min-h-[200px]"}),r.jsxs("div",{className:"p-4 border-t border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[h.length.toLocaleString()," characters"]}),r.jsxs("button",{onClick:M,disabled:m,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center gap-2",children:[m?r.jsx(Si,{className:"w-4 h-4 animate-spin"}):r.jsx(Kf,{className:"w-4 h-4"}),m?"Analyzing...":"Analyze Speech"]})]})]}),N&&r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 text-red-400",children:[r.jsx(Ls,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:N})]})]}),r.jsxs("div",{className:"w-full lg:w-1/2 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(xi,{className:"w-5 h-5 text-cyan-400"}),X.name," Evaluation"]}),b&&r.jsxs("div",{className:"flex items-center gap-3",children:[z&&r.jsxs("span",{className:"text-xs text-emerald-400 flex items-center gap-1 font-medium",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved"]}),r.jsx("button",{onClick:S,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Copy to clipboard",children:V?r.jsx(fr,{className:"w-4 h-4 text-emerald-500"}):r.jsx(vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:b?r.jsx("div",{className:"prose prose-invert prose-sm max-w-none prose-headings:text-cyan-400 prose-headings:font-semibold prose-a:text-cyan-400 prose-strong:text-white prose-table:border-collapse prose-th:border prose-th:border-slate-700 prose-td:border prose-td:border-slate-700 prose-th:p-3 prose-td:p-3 prose-th:bg-slate-800/50 prose-th:text-left",children:r.jsx(rc,{remarkPlugins:[ic],children:b})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 py-16",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx("span",{className:"text-3xl",children:I?.icon||""})}),r.jsxs("p",{className:"text-center max-w-xs",children:["Ready to evaluate your ",X.name.toLowerCase()," speech.",r.jsx("br",{}),r.jsx("span",{className:"text-sm text-slate-600",children:"Enter your speech and click Analyze."})]})]})})]})]})]})},fz=({apiKey:t})=>{const[e,n]=k.useState("Public Forum (PF)"),[s,l]=k.useState("Proposition/Affirmative"),[o,u]=k.useState(""),[h,f]=k.useState(""),[m,x]=k.useState([]),[b,v]=k.useState(!1),[N,E]=k.useState(null),[V,R]=k.useState(""),[z,L]=k.useState(!1),[H,X]=k.useState(!1),se=k.useRef(null),{addSession:Y}=kl(),I=A=>{const P=Array.from(A.target.files);P.length!==0&&(P.forEach(D=>{if(D.size>4*1024*1024){R(te=>(te?`${te} `:"")+`Skipped ${D.name} (too large).`);return}const re=new FileReader;re.onloadend=()=>{const te=re.result.split(",")[1];x(q=>[...q,{id:Math.random().toString(36).substr(2,9),url:re.result,raw:te,mimeType:D.type,name:D.name}])},re.readAsDataURL(D)}),se.current&&(se.current.value=""))},T=A=>{x(P=>P.filter(D=>D.id!==A))},M=async()=>{if(!t){R("Please enter a valid Gemini API Key in Settings.");return}if(m.length===0&&!h.trim()){R("Please upload images of the board or provide a description.");return}v(!0),R(""),E(null);try{const P=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),D=`
        Expert Debate Coach (Flowing). Evaluate board/flow. 
        Context: ${e}, ${s}, Topic: ${o}. 
        Assess Organization, Grouping, Legibility, Suggestions. 
        User Notes: ${h}. 
        
        Please provide the output in the following Markdown format:
        ## Executive Summary
        (Brief overview)

        ## Scorecard
        | Category | Score (0-10) | Notes |
        | --- | --- | --- |
        | Organization | | |
        | Grouping | | |
        | Legibility | | |
        | Strategy | | |
        | **Total** | **(Sum)** | |

        ## Detailed Feedback
        ...
      `,re=m.map(ue=>({inlineData:{data:ue.raw,mimeType:ue.mimeType}})),Z=(await(await P.generateContent([D,...re])).response).text();E(Z),Y({type:"board",title:o||"Board Evaluation",input:{imageCount:m.length,description:h.substring(0,200)},result:Z,metadata:{speechType:e,side:s,topic:o}}),X(!0),setTimeout(()=>X(!1),2e3)}catch(A){console.error("Gemini Error:",A);try{const D=new br(t).getGenerativeModel({model:"gemini-1.5-flash"}),re="... (same prompt) ...";R(`Error: ${A.message}. Please try again.`)}catch{R(`Error: ${A.message}`)}}finally{v(!1)}},S=()=>{N&&(navigator.clipboard.writeText(N),L(!0),setTimeout(()=>L(!1),2e3))};return r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-[calc(100vh-8rem)]",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-4",children:[r.jsxs("div",{className:"glass-card space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Format"}),r.jsx("select",{value:e,onChange:A=>n(A.target.value),className:"input-field",children:Tm.map(A=>r.jsx("option",{value:A,children:A},A))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Side"}),r.jsx("select",{value:s,onChange:A=>l(A.target.value),className:"input-field",children:UE.map(A=>r.jsx("option",{value:A,children:A},A))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Topic"}),r.jsx("input",{type:"text",value:o,onChange:A=>u(A.target.value),placeholder:"Resolved: The United States should...",className:"input-field"})]})]}),r.jsxs("div",{className:"flex-1 glass-card flex flex-col p-0 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-slate-700/50 bg-slate-900/50",children:r.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Board Images & Notes"})}),r.jsxs("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar space-y-4",children:[m.length>0&&r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:m.map(A=>r.jsxs("div",{className:"relative group aspect-video bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:[r.jsx("img",{src:A.url,alt:"Board",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:()=>T(A.id),className:"absolute top-1 right-1 p-1 bg-red-500/80 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(zs,{className:"w-3 h-3"})})]},A.id))}),r.jsxs("div",{onClick:()=>se.current?.click(),className:"border-2 border-dashed border-slate-700 rounded-xl p-8 flex flex-col items-center justify-center text-slate-500 hover:border-primary hover:text-primary hover:bg-primary/5 transition-all cursor-pointer",children:[r.jsx(Qf,{className:"w-8 h-8 mb-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Click to upload images"}),r.jsx("span",{className:"text-xs opacity-70",children:"Max 4MB per file"}),r.jsx("input",{type:"file",ref:se,onChange:I,multiple:!0,accept:"image/*",className:"hidden"})]}),r.jsx("textarea",{value:h,onChange:A=>f(A.target.value),placeholder:"Add any specific notes or questions about the flow...",className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg p-3 text-sm text-text-primary focus:outline-none focus:border-primary resize-none h-24"})]}),r.jsxs("div",{className:"p-4 border-t border-slate-700/50 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs text-text-muted",children:[m.length," images"]}),r.jsxs("button",{onClick:M,disabled:b,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[b?r.jsx(Si,{className:"w-4 h-4 animate-spin"}):r.jsx(Kf,{className:"w-4 h-4"}),b?"Analyzing...":"Evaluate Board"]})]})]}),V&&r.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400 text-sm",children:[r.jsx(Ls,{className:"w-4 h-4"}),V]})]}),r.jsxs("div",{className:"w-full lg:w-1/2 glass-card overflow-hidden flex flex-col p-0",children:[r.jsxs("div",{className:"p-4 border-b border-slate-700/50 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[r.jsx(mf,{className:"w-4 h-4 text-primary"}),"Evaluation"]}),N&&r.jsxs("div",{className:"flex items-center gap-2",children:[H&&r.jsxs("span",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved"]}),r.jsx("button",{onClick:S,className:"text-text-secondary hover:text-white transition-colors",title:"Copy to clipboard",children:z?r.jsx(fr,{className:"w-4 h-4 text-green-500"}):r.jsx(vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:N?r.jsx("div",{className:"prose prose-invert prose-sm max-w-none prose-headings:text-cyan-400 prose-a:text-accent prose-strong:text-white prose-table:border-collapse prose-th:border prose-th:border-slate-700 prose-td:border prose-td:border-slate-700 prose-th:p-2 prose-td:p-2 prose-th:bg-slate-800/50",children:r.jsx(rc,{remarkPlugins:[ic],children:N})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted opacity-50",children:[r.jsx(mf,{className:"w-16 h-16 mb-4"}),r.jsx("p",{children:"Upload board images and click Evaluate."})]})})]})]})},mz=({analyser:t,isRecording:e})=>{const n=k.useRef(null);return k.useEffect(()=>{if(!t||!e||!n.current)return;const s=n.current,l=s.getContext("2d"),o=t.frequencyBinCount,u=new Uint8Array(o);let h;const f=()=>{h=requestAnimationFrame(f),t.getByteFrequencyData(u),l.clearRect(0,0,s.width,s.height);const m=s.width/o*2.5;let x,b=0;for(let v=0;v<o;v++){x=u[v]/2;const N=l.createLinearGradient(0,s.height,0,0);N.addColorStop(0,"#06b6d4"),N.addColorStop(1,"#8b5cf6"),l.fillStyle=N,l.fillRect(b,s.height-x,m,x),b+=m+1}};return f(),()=>cancelAnimationFrame(h)},[t,e]),e?r.jsx("canvas",{ref:n,width:300,height:100,className:"w-full h-24 rounded-lg bg-slate-900/50"}):r.jsx("div",{className:"w-full h-24 bg-slate-900/50 rounded-lg flex items-center justify-center text-slate-700 text-xs",children:"Visualizer Ready"})},pz=({analyser:t,isRecording:e})=>{const[n,s]=k.useState({volume:0,brightness:0}),[l,o]=k.useState({label:"Ready",color:"text-slate-500"}),u=k.useRef({volume:0,brightness:0});return k.useEffect(()=>{if(!t||!e)return;const h=t.frequencyBinCount,f=new Uint8Array(h),m=new Uint8Array(t.fftSize);let x;const b=()=>{t.getByteFrequencyData(f),t.getByteTimeDomainData(m);let v=0;for(let X=0;X<m.length;X++){const se=(m[X]-128)/128;v+=se*se}const N=Math.sqrt(v/m.length);let E=0,V=0;for(let X=0;X<h;X++)E+=X*f[X],V+=f[X];const R=V===0?0:E/V/h,z=.15;u.current.volume=u.current.volume*(1-z)+N*z,u.current.brightness=u.current.brightness*(1-z)+R*z;const{volume:L,brightness:H}=u.current;s({volume:L,brightness:H}),L<.01?o({label:"Listening...",color:"text-slate-500"}):L<.05?o({label:"Too Quiet",color:"text-amber-500"}):L>.6?o({label:"Too Loud",color:"text-red-500"}):H>.5?o({label:"Urgent / Intense",color:"text-orange-500"}):H<.2?o({label:"Serious",color:"text-indigo-500"}):o({label:"Balanced",color:"text-green-500"}),x=requestAnimationFrame(b)};return b(),()=>cancelAnimationFrame(x)},[t,e]),e?r.jsxs("div",{className:"flex flex-col items-center space-y-2 mt-4 animate-in fade-in",children:[r.jsx("div",{className:`text-lg font-bold ${l.color} transition-colors duration-300`,children:l.label}),r.jsxs("div",{className:"flex space-x-4 text-xs text-slate-400",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"h-16 w-4 bg-slate-800 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-cyan-500 transition-all duration-100",style:{height:`${Math.min(n.volume*200,100)}%`}})}),r.jsx("span",{className:"mt-1",children:"Vol"})]}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"h-16 w-4 bg-slate-800 rounded-full overflow-hidden relative",children:r.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-purple-500 transition-all duration-100",style:{height:`${Math.min(n.brightness*300,100)}%`}})}),r.jsx("span",{className:"mt-1",children:"Tone"})]})]})]}):null},gz=({apiKey:t})=>{const[e,n]=k.useState("Public Forum (PF)"),[s,l]=k.useState("Proposition/Affirmative"),[o,u]=k.useState(""),[h,f]=k.useState(!1),[m,x]=k.useState(0),[b,v]=k.useState(null),[N,E]=k.useState(null),[V,R]=k.useState(null),[z,L]=k.useState(!1),[H,X]=k.useState(null),[se,Y]=k.useState(""),[I,T]=k.useState(!1),[M,S]=k.useState(!1),{addSession:A}=kl(),P=k.useRef(null),D=k.useRef(null),re=k.useRef([]),te=k.useRef(null),q=k.useRef(null),Z=U=>{const Ie=Math.floor(U/60),Ge=U%60;return`${Ie}:${Ge<10?"0":""}${Ge}`},ue=async()=>{Y("");try{const U=await navigator.mediaDevices.getUserMedia({audio:!0});q.current=U;const Ie=new(window.AudioContext||window.webkitAudioContext),Ge=Ie.createAnalyser();Ie.createMediaStreamSource(U).connect(Ge),Ge.fftSize=256,te.current=Ie,R(Ge),P.current=new MediaRecorder(U),re.current=[],P.current.ondataavailable=ot=>{ot.data.size>0&&re.current.push(ot.data)},P.current.onstop=()=>{const ot=new Blob(re.current,{type:"audio/webm"});v(ot);const vt=new FileReader;vt.readAsDataURL(ot),vt.onloadend=()=>{const gt=vt.result.split(",")[1];E({raw:gt,mimeType:ot.type})},q.current&&q.current.getTracks().forEach(gt=>gt.stop()),te.current&&(te.current.close(),te.current=null,R(null))},P.current.start(),f(!0),x(0),E(null),v(null),X(null),D.current=setInterval(()=>x(ot=>ot+1),1e3)}catch(U){Y("Could not access microphone. Ensure permissions are granted."),console.error(U)}},ye=()=>{P.current&&h&&(P.current.stop(),f(!1),clearInterval(D.current))},B=()=>{E(null),v(null),x(0),X(null),Y("")},Se=async()=>{if(!t){Y("Please enter a valid Gemini API Key in Settings.");return}if(!N){Y("Please record audio first.");return}L(!0),Y(""),X(null);try{const Ie=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),Ge=`
        Expert Speech Coach. Listen to audio. 
        Context: ${e}, ${s}, Topic: ${o}. 
        Evaluate: 
        1. Vocal Delivery (Pace, Tone, Fluency, Emotion). 
        2. Content (Clarity, Persuasion). 
        3. Score (0-100).
        
        Please provide the output in the following Markdown format:
        ## Executive Summary
        (Brief overview)

        ## Scorecard
        | Category | Score (0-10) | Notes |
        | --- | --- | --- |
        | Vocal Delivery | | |
        | Content | | |
        | Persuasion | | |
        | **Total** | **(Sum)** | |

        ## Detailed Feedback
        ...
      `,Ye={inlineData:{data:N.raw,mimeType:N.mimeType}},gt=(await(await Ie.generateContent([Ge,Ye])).response).text();X(gt),A({type:"coach",title:o||"Live Coaching Session",input:{duration:Z(m)},result:gt,metadata:{speechType:e,side:s,topic:o,recordingDuration:m}}),S(!0),setTimeout(()=>S(!1),2e3)}catch(U){console.error("Gemini Error:",U),Y(`Error: ${U.message}. Please try again.`)}finally{L(!1)}},Oe=()=>{H&&(navigator.clipboard.writeText(H),T(!0),setTimeout(()=>T(!1),2e3))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Live Coaching"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Record and analyze your speech in real-time"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-4",children:[r.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Format"}),r.jsx("select",{value:e,onChange:U=>n(U.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all",children:Tm.map(U=>r.jsx("option",{value:U,children:U},U))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Side"}),r.jsx("select",{value:s,onChange:U=>l(U.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all",children:UE.map(U=>r.jsx("option",{value:U,children:U},U))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Topic"}),r.jsx("input",{type:"text",value:o,onChange:U=>u(U.target.value),placeholder:"Topic or Resolution...",className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all"})]})]}),r.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50",children:r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Live Recording"})}),r.jsxs("div",{className:"flex-1 p-8 flex flex-col items-center justify-center space-y-8",children:[r.jsx("div",{className:`text-6xl font-mono font-bold tracking-tighter ${h?"text-red-500 animate-pulse":"text-white"}`,children:Z(m)}),r.jsxs("div",{className:"w-full max-w-md",children:[r.jsx(mz,{analyser:V,isRecording:h}),r.jsx(pz,{analyser:V,isRecording:h})]}),r.jsx("div",{className:"flex items-center gap-4",children:h?r.jsx("button",{onClick:ye,className:"w-20 h-20 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center shadow-lg transition-all hover:scale-110 active:scale-95",children:r.jsx(n_,{className:"w-6 h-6 text-white fill-current"})}):r.jsx("button",{onClick:ue,className:"w-20 h-20 rounded-full bg-gradient-to-br from-red-500 to-red-600 hover:from-red-400 hover:to-red-500 flex items-center justify-center shadow-lg shadow-red-500/30 transition-all hover:scale-110 active:scale-95",children:r.jsx(Ia,{className:"w-8 h-8 text-white"})})}),b&&!h&&r.jsxs("div",{className:"flex items-center gap-4 animate-in fade-in",children:[r.jsx("audio",{controls:!0,src:URL.createObjectURL(b),className:"h-12 rounded-xl"}),r.jsx("button",{onClick:B,className:"p-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(ku,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-500 font-medium",children:b?"Audio recorded":"Ready to record"}),r.jsxs("button",{onClick:Se,disabled:z||!N,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center gap-2",children:[z?r.jsx(Si,{className:"w-4 h-4 animate-spin"}):r.jsx(Cu,{className:"w-4 h-4"}),z?"Analyzing...":"Analyze Audio"]})]})]}),se&&r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 text-red-400",children:[r.jsx(Ls,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:se})]})]}),r.jsxs("div",{className:"w-full lg:w-1/2 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(Cu,{className:"w-5 h-5 text-purple-400"}),"Coaching Feedback"]}),H&&r.jsxs("div",{className:"flex items-center gap-3",children:[M&&r.jsxs("span",{className:"text-xs text-emerald-400 flex items-center gap-1 font-medium",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved"]}),r.jsx("button",{onClick:Oe,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Copy to clipboard",children:I?r.jsx(fr,{className:"w-4 h-4 text-emerald-500"}):r.jsx(vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:H?r.jsx("div",{className:"prose prose-invert prose-sm max-w-none prose-headings:text-purple-400 prose-headings:font-semibold prose-a:text-purple-400 prose-strong:text-white prose-table:border-collapse prose-th:border prose-th:border-slate-700 prose-td:border prose-td:border-slate-700 prose-th:p-3 prose-td:p-3 prose-th:bg-slate-800/50 prose-th:text-left",children:r.jsx(rc,{remarkPlugins:[ic],children:H})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 py-16",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx(Ia,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-center max-w-xs",children:"Record your speech and click Analyze to get AI coaching feedback."})]})})]})]})]})},xz=({apiKey:t})=>{const[e,n]=k.useState("DX"),[s,l]=k.useState("Medium"),[o,u]=k.useState(""),[h,f]=k.useState(!1),[m,x]=k.useState(""),[b,v]=k.useState(!1),[N,E]=k.useState(!1),{addSession:V}=kl(),R=async()=>{if(!t){x("Please enter a valid Gemini API Key in Settings.");return}f(!0),u(""),x("");try{const H=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),X=`Generate a single ${s} difficulty Extemporaneous Speaking question for the category ${e==="DX"?"United States Domestic Extemp (DX)":"International Extemp (NX)"}. The question should be current, relevant to 2024-2025 events, and formatted as a question. Do not include any other text.`,T=(await(await H.generateContent(X)).response).text().trim().replace(/^"|"$/g,"");u(T),V({type:"extemp",title:`${e} Question - ${s}`,input:{question:T},result:T,metadata:{category:e,difficulty:s}}),E(!0),setTimeout(()=>E(!1),2e3)}catch(L){console.error("Gemini Error:",L);try{const X=new br(t).getGenerativeModel({model:"gemini-1.5-flash"});x(`Error: ${L.message}. Please try again.`)}catch{x(`Error: ${L.message}`)}}finally{f(!1)}},z=()=>{o&&(navigator.clipboard.writeText(o),v(!0),setTimeout(()=>v(!1),2e3))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Extemp Generator"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Generate practice questions for extemporaneous speaking"})]}),r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"p-8 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Category"}),r.jsxs("div",{className:"flex bg-slate-900/50 rounded-xl p-1 border border-slate-800",children:[r.jsx("button",{onClick:()=>n("DX"),className:`px-5 py-2.5 rounded-lg text-sm font-medium transition-all ${e==="DX"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"Domestic (DX)"}),r.jsx("button",{onClick:()=>n("NX"),className:`px-5 py-2.5 rounded-lg text-sm font-medium transition-all ${e==="NX"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:"International (NX)"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Difficulty Level"}),r.jsx("div",{className:"grid grid-cols-3 gap-4",children:["Easy","Medium","Hard"].map(L=>r.jsx("button",{onClick:()=>l(L),className:`py-4 rounded-xl border transition-all font-medium ${s===L?"bg-cyan-500/10 border-cyan-500/30 text-cyan-400 shadow-lg shadow-cyan-500/10":"bg-slate-900/30 border-slate-800 text-slate-400 hover:border-slate-700 hover:bg-slate-800/50"}`,children:L},L))})]}),r.jsxs("button",{onClick:R,disabled:h,className:"w-full py-4 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-lg font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 hover:scale-[1.01] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-3",children:[h?r.jsx(Si,{className:"w-6 h-6 animate-spin"}):r.jsx(Jg,{className:"w-6 h-6"}),h?"Generating Question...":"Generate New Question"]}),m&&r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 text-red-400",children:[r.jsx(Ls,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:m})]}),o&&r.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4",children:r.jsxs("div",{className:"bg-slate-900/80 border border-slate-700 rounded-2xl p-8 relative group",children:[r.jsxs("p",{className:"text-xl md:text-2xl font-serif text-center text-white leading-relaxed",children:['"',o,'"']}),r.jsx("button",{onClick:z,className:"absolute top-4 right-4 p-2.5 text-slate-400 hover:text-white bg-slate-800/50 hover:bg-slate-700 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"Copy to clipboard",children:b?r.jsx(fr,{className:"w-5 h-5 text-emerald-500"}):r.jsx(vr,{className:"w-5 h-5"})}),N&&r.jsxs("span",{className:"absolute top-4 left-4 text-xs text-emerald-400 flex items-center gap-1 bg-emerald-500/10 px-3 py-1.5 rounded-lg font-medium",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved to history"]})]})})]})})]})},yz=({apiKey:t})=>{const e=k.useMemo(()=>Tm.filter(A=>Go[A]===Ue.DEBATE),[]),[n,s]=k.useState(e[0]||"Public Forum (PF)"),[l,o]=k.useState("Proposition/Affirmative"),[u,h]=k.useState(""),[f,m]=k.useState(""),[x,b]=k.useState("comprehensive"),[v,N]=k.useState(!1),[E,V]=k.useState(null),[R,z]=k.useState(""),[L,H]=k.useState(!1),[X,se]=k.useState(!1),{addSession:Y}=kl(),I=k.useMemo(()=>Hg(n),[n]),T=[{id:"comprehensive",label:"Full Strategy",icon:Gt,description:"Complete debate strategy with arguments, rebuttals, and flow"},{id:"arguments",label:"Argument Builder",icon:Nl,description:"Focus on constructing strong arguments"},{id:"rebuttals",label:"Rebuttal Prep",icon:Qu,description:"Anticipate and counter opponent arguments"},{id:"crossfire",label:"Cross-Ex Prep",icon:tC,description:"Strategic questions and responses"}],M=async()=>{if(!t){z("Please enter a valid Gemini API Key in Settings.");return}if(!u.trim()){z("Please enter the debate topic or resolution.");return}N(!0),z(""),V(null);try{const P=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),D={comprehensive:`You are an expert Debate Coach preparing a student for a ${n} debate.

**Topic/Resolution:** ${u}
**Side:** ${l}
${f?`**Additional Context:** ${f}`:""}

Generate a COMPREHENSIVE DEBATE STRATEGY. Include:

##  Strategic Overview
A brief (2-3 sentence) overview of the best approach for this position.

##  Core Framework
The central theme/value/criterion that should anchor all arguments.

##  Main Arguments (3-4)
For each argument provide:
### Argument 1: [Compelling Title]
- **Claim**: The main assertion (1 sentence)
- **Warrant**: The logical reasoning (2-3 sentences)
- **Impact**: Why this matters - include magnitude, timeframe, probability
- **Evidence Needed**: Specific types of sources/data to find
- **Tag Line**: A memorable 5-7 word summary

##  Anticipated Opponent Arguments
For the top 3 likely opponent arguments:
### Counter to: [Their Argument]
- **Their likely claim**: What they'll say
- **Your response strategy**: How to refute it
- **Turn potential**: Can you flip this to your advantage?

##  Cross-Examination Strategy
### Questions to Ask
1. [Strategic question with goal]
2. [Strategic question with goal]
3. [Strategic question with goal]

### Likely Questions You'll Face
- [Question]  [Prepared response]
- [Question]  [Prepared response]

##  Flow Visualization
\`\`\`

                      ${l.toUpperCase()} FLOW                 

 CONSTRUCTIVE  REBUTTAL      SUMMARY       FINAL FOCUS       

 [Arg 1]      [Extend]     [Voters]     [Key takeaway]       

 [Arg 2]      [Respond]    [Weigh]      [Emotional close]    

\`\`\`

##  Time Allocation
| Speech | Time | Focus |
|--------|------|-------|
| Constructive | X min | ... |
| Rebuttal | X min | ... |
| Summary | X min | ... |
| Final Focus | X min | ... |

##  Win Conditions
The 2-3 things that MUST happen to win this round:
1. ...
2. ...
3. ...

##  Power Phrases
5 memorable phrases to use during the round:
1. "..."
2. "..."
3. "..."
4. "..."
5. "..."
`,arguments:`You are an expert Debate Coach specializing in argument construction for ${n}.

**Topic/Resolution:** ${u}
**Side:** ${l}
${f?`**Additional Context:** ${f}`:""}

Generate 4-5 STRONG ARGUMENTS for this position:

## Argument Analysis Framework

For EACH argument, provide:

###  Argument [N]: [Compelling Title]

#### The Claim
A clear, assertive 1-sentence statement.

#### Logical Structure
- **Premise 1**: ...
- **Premise 2**: ...
- **Conclusion**: ...

#### Warrant Deep-Dive
Explain the logical reasoning in 3-4 sentences. Why does the claim follow from the evidence?

#### Impact Calculus
| Factor | Assessment |
|--------|------------|
| **Magnitude** | How big is the impact? |
| **Probability** | How likely? |
| **Timeframe** | When does it occur? |
| **Reversibility** | Can it be undone? |

#### Evidence Guide
- **Statistics needed**: ...
- **Expert quotes**: Types of experts to cite
- **Case studies**: Historical/current examples to find
- **Logical backing**: Philosophical/theoretical support

#### Delivery Tips
- Opening hook: "..."
- Key transition phrases
- Powerful conclusion line

#### Vulnerability Analysis
- Weakest point of this argument
- How opponents might attack
- Pre-emptive defense strategy

---

## Argument Hierarchy
Rank arguments by strength and when to deploy them:
1. **Strongest** (Lead with this): Argument X
2. **Most Emotional** (Final Focus): Argument Y
3. **Technical** (For experienced judges): Argument Z
`,rebuttals:`You are an expert Debate Coach specializing in rebuttal strategy for ${n}.

**Topic/Resolution:** ${u}
**Your Side:** ${l}
**Opponent's Side:** ${l.includes("Affirmative")||l.includes("Pro")?"Opposition/Negative":"Proposition/Affirmative"}
${f?`**Additional Context:** ${f}`:""}

Generate a COMPREHENSIVE REBUTTAL PREPARATION guide:

##  Opponent Argument Predictions

### Predicted Argument 1: [Title]
**What they'll likely say:**
> [Their argument in their words]

**Why this is flawed:**
- Logical flaw: ...
- Evidence problem: ...
- Impact overreach: ...

**Your Rebuttal Response:**
"[Exact words to say - 30-45 seconds]"

**The Turn (flip it to your advantage):**
"Actually, this argument supports OUR side because..."

---

### Predicted Argument 2: [Title]
[Same structure]

---

### Predicted Argument 3: [Title]
[Same structure]

---

##  Defense Blocks

### If They Attack Your [Argument 1]:
**Their likely attack:** ...
**Your defense:** "[30-second response]"

### If They Attack Your [Argument 2]:
**Their likely attack:** ...
**Your defense:** "[30-second response]"

##  Quick-Fire Responses
One-liner responses to common attacks:

| If they say... | You respond... |
|----------------|----------------|
| "..." | "..." |
| "..." | "..." |
| "..." | "..." |

##  Weighing Mechanisms
How to compare impacts when both sides have valid points:

### Magnitude Weighing
"Even if they win X, our impact of Y is larger because..."

### Probability Weighing
"Their impact is speculative, while ours is empirically proven..."

### Timeframe Weighing
"Their impact is long-term and uncertain, our harm is happening now..."

##  Kill Shots
Arguments that completely devastate common opponent positions:

1. **Against [common position]:** ...
2. **Against [common position]:** ...
`,crossfire:`You are an expert Debate Coach specializing in Cross-Examination/Crossfire strategy for ${n}.

**Topic/Resolution:** ${u}
**Your Side:** ${l}
${f?`**Additional Context:** ${f}`:""}

Generate a COMPREHENSIVE CROSS-EXAMINATION STRATEGY:

##  Your Questioning Strategy

### Goal-Oriented Questions
Each question should serve a strategic purpose:

#### Setup Questions (Establish facts)
1. **Question:** "..."
   - **Goal:** Get them to admit X
   - **Follow-up if yes:** "..."
   - **Follow-up if no:** "..."

2. **Question:** "..."
   - **Goal:** ...

#### Trap Questions (Expose contradictions)
1. **Question:** "..."
   - **The trap:** If they say X, point out Y
   - **Delivery:** Stay calm, don't telegraph

2. **Question:** "..."
   - **The trap:** ...

#### Concession Questions (Get admissions)
1. **Question:** "..."
   - **Looking for:** Them to admit your framing
   - **Use in later speeches:** "They agreed that..."

### Question Sequences
**To undermine their Argument 1:**
1. First ask: "..."
2. Then: "..."
3. Finish with: "..."

**To support your Argument 1:**
1. First ask: "..."
2. Then: "..."
3. Finish with: "..."

##  Defending in Cross-Ex

### Likely Questions You'll Face
| Their Question | Your Response Strategy |
|----------------|----------------------|
| "..." | [Don't concede X, instead say...] |
| "..." | [Bridge to your argument...] |
| "..." | [Ask for clarification to buy time...] |

### Deflection Techniques
- **"That's not the right framing..."** then reframe
- **"The real question is..."** pivot to your ground
- **"We can discuss that, but first..."** delay and redirect

### Trap Avoidance
Common traps and how to spot/avoid them:
1. **The false dichotomy:** They present only two options. Response: "Those aren't the only options..."
2. **The hypothetical spiral:** They create unrealistic scenarios. Response: "In the real world..."
3. **The quote trap:** They try to get quotable admissions. Response: "What I'm saying is..." (reframe)

##  Power Moves

### Taking Control
- "Let me finish this point..."
- "That's a different question, I'm asking about..."
- "With respect, that doesn't answer the question..."

### Memorable Moments
Crossfire zingers (use sparingly):
- "So you're agreeing with us that..."
- "If that's true, then your entire case falls apart..."
- "You've just proven our point..."

##  Time Management
| Phase | Your Goals |
|-------|------------|
| First 30 sec | Establish one key admission |
| Middle | Build your trap sequence |
| Final 30 sec | Land your strongest point |
`},q=(await(await P.generateContent(D[x])).response).text();V(q),Y({type:"strategy",title:`${T.find(Z=>Z.id===x)?.label}: ${u.substring(0,50)}`,input:{topic:u,context:f},result:q,metadata:{speechType:n,side:l,topic:u,strategyType:x}}),se(!0),setTimeout(()=>se(!1),2e3)}catch(A){console.error("Gemini Error:",A),z(`Error: ${A.message}. Please try again.`)}finally{N(!1)}},S=()=>{E&&(navigator.clipboard.writeText(E),H(!0),setTimeout(()=>H(!1),2e3))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Strategy Generator"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Build winning debate strategies with AI"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-4",children:[r.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Debate Format"}),r.jsx("select",{value:n,onChange:A=>s(A.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all",children:e.map(A=>r.jsx("option",{value:A,children:A},A))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Side"}),r.jsx("select",{value:l,onChange:A=>o(A.target.value),className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all",children:I.map(A=>r.jsx("option",{value:A,children:A},A))})]})]}),r.jsx("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:r.jsxs("div",{className:"flex items-center gap-3 text-blue-400 text-sm",children:[r.jsx(Hf,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{children:"Strategy Generator is optimized for competitive debate events."})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Topic / Resolution"}),r.jsx("input",{type:"text",value:u,onChange:A=>h(A.target.value),placeholder:"Resolved: The United States should substantially increase...",className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white placeholder-slate-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:["Additional Context ",r.jsx("span",{className:"text-slate-600",children:"(optional)"})]}),r.jsx("textarea",{value:f,onChange:A=>m(A.target.value),placeholder:"E.g., specific arguments you want to focus on, your opponent's known style...",className:"w-full px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white placeholder-slate-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-all resize-none h-24"})]})]}),r.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-4",children:"Strategy Type"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(A=>{const P=A.icon;return r.jsxs("button",{onClick:()=>b(A.id),className:`p-4 rounded-xl border text-left transition-all ${x===A.id?"bg-orange-500/10 border-orange-500/30 shadow-lg shadow-orange-500/10":"bg-slate-900/30 border-slate-800 hover:border-slate-700 hover:bg-slate-800/50"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(P,{className:`w-5 h-5 ${x===A.id?"text-orange-400":"text-slate-500"}`}),r.jsx("span",{className:`font-medium ${x===A.id?"text-white":"text-slate-400"}`,children:A.label})]}),r.jsx("p",{className:"text-xs text-slate-500",children:A.description})]},A.id)})})]}),r.jsx("button",{onClick:M,disabled:v||!u.trim(),className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white text-lg font-semibold shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 hover:scale-[1.01] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-3",children:v?r.jsxs(r.Fragment,{children:[r.jsx(Si,{className:"w-5 h-5 animate-spin"}),"Generating Strategy..."]}):r.jsxs(r.Fragment,{children:[r.jsx(na,{className:"w-5 h-5"}),"Generate Strategy"]})}),R&&r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 text-red-400",children:[r.jsx(Ls,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:R})]})]}),r.jsxs("div",{className:"w-full lg:w-1/2 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(wl,{className:"w-5 h-5 text-orange-400"}),"Strategy Playbook"]}),E&&r.jsxs("div",{className:"flex items-center gap-3",children:[X&&r.jsxs("span",{className:"text-xs text-emerald-400 flex items-center gap-1 font-medium",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved"]}),r.jsx("button",{onClick:S,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Copy to clipboard",children:L?r.jsx(fr,{className:"w-4 h-4 text-emerald-500"}):r.jsx(vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E?r.jsx("div",{className:"prose prose-invert prose-sm max-w-none prose-headings:text-orange-400 prose-headings:font-semibold prose-a:text-orange-400 prose-strong:text-white prose-table:border-collapse prose-th:border prose-th:border-slate-700 prose-td:border prose-td:border-slate-700 prose-th:p-3 prose-td:p-3 prose-th:bg-slate-800/50 prose-th:text-left prose-code:bg-slate-800 prose-code:px-1.5 prose-code:rounded prose-pre:bg-slate-900 prose-pre:border prose-pre:border-slate-700 prose-blockquote:border-l-orange-500 prose-blockquote:bg-slate-900/50 prose-blockquote:py-1",children:r.jsx(rc,{remarkPlugins:[ic],children:E})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 py-16",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx(Gt,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-center max-w-xs",children:"Enter your debate topic and select a strategy type to generate your personalized playbook."})]})})]})]})]})},zf={judge:{icon:xi,label:"Speech Analysis",color:"text-cyan-400",bg:"bg-cyan-500/10 border-cyan-500/20"},board:{icon:mf,label:"Board Evaluation",color:"text-purple-400",bg:"bg-purple-500/10 border-purple-500/20"},coach:{icon:Ia,label:"Live Coaching",color:"text-emerald-400",bg:"bg-emerald-500/10 border-emerald-500/20"},strategy:{icon:Gt,label:"Strategy",color:"text-orange-400",bg:"bg-orange-500/10 border-orange-500/20"},extemp:{icon:Yg,label:"Extemp Question",color:"text-amber-400",bg:"bg-amber-500/10 border-amber-500/20"},tone:{icon:Do,label:"Tone Analysis",color:"text-pink-400",bg:"bg-pink-500/10 border-pink-500/20"}},bz=({session:t,onView:e,onDelete:n})=>{const[s,l]=k.useState(!1),o=zf[t.type]||zf.judge,u=o.icon;return r.jsxs("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden group",children:[r.jsx("div",{className:"p-4 cursor-pointer hover:bg-slate-800/30 transition-colors",onClick:()=>l(!s),children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-2.5 rounded-xl border ${o.bg}`,children:r.jsx(u,{className:`w-5 h-5 ${o.color}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-lg ${o.bg} ${o.color}`,children:o.label}),t.metadata?.speechType&&r.jsx("span",{className:"text-xs text-slate-500",children:t.metadata.speechType})]}),r.jsx("h3",{className:"font-medium text-white truncate",children:t.title||t.metadata?.topic||"Untitled Session"}),r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-3 h-3"}),YE(t.createdAt)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),uz(t.createdAt)]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:h=>{h.stopPropagation(),n(t.id)},className:"p-2 text-slate-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Delete session",children:r.jsx(ia,{className:"w-4 h-4"})}),s?r.jsx(Mo,{className:"w-5 h-5 text-slate-500"}):r.jsx(Un,{className:"w-5 h-5 text-slate-500"})]})]})}),s&&r.jsxs("div",{className:"border-t border-slate-800/60 p-4 animate-in slide-in-from-top-2",children:[t.metadata&&r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.metadata.side&&r.jsx("span",{className:"text-xs px-2.5 py-1 bg-slate-800/50 rounded-lg text-slate-400 border border-slate-700/50",children:t.metadata.side}),t.metadata.difficulty&&r.jsxs("span",{className:"text-xs px-2.5 py-1 bg-slate-800/50 rounded-lg text-slate-400 border border-slate-700/50",children:[t.metadata.difficulty," difficulty"]})]}),r.jsx("div",{className:"bg-slate-900/50 rounded-xl p-4 max-h-[400px] overflow-y-auto border border-slate-800/50",children:r.jsx("div",{className:"prose prose-invert prose-sm max-w-none prose-headings:text-cyan-400 prose-headings:font-semibold prose-a:text-cyan-400 prose-strong:text-white prose-table:border-collapse prose-th:border prose-th:border-slate-700 prose-td:border prose-td:border-slate-700 prose-th:p-3 prose-td:p-3 prose-th:bg-slate-800/50",children:r.jsx(rc,{remarkPlugins:[ic],children:t.result||"No analysis result available"})})}),t.type==="extemp"&&t.input?.question&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/30 rounded-xl border border-slate-700/50",children:[r.jsx("h4",{className:"text-xs font-medium text-slate-500 mb-2",children:"Generated Question"}),r.jsxs("p",{className:"text-white font-serif text-lg",children:['"',t.input.question,'"']})]})]})]})},vz=()=>{const{history:t,isLoading:e,stats:n,deleteSession:s,clearHistory:l,exportHistory:o,importHistory:u}=kl(),[h,f]=k.useState(""),[m,x]=k.useState("all"),[b,v]=k.useState(!1),[N,E]=k.useState(null),V=FN.useRef(null),R=t.filter(L=>{const H=m==="all"||L.type===m,X=!h||L.title?.toLowerCase().includes(h.toLowerCase())||L.metadata?.topic?.toLowerCase().includes(h.toLowerCase())||L.result?.toLowerCase().includes(h.toLowerCase());return H&&X}),z=async L=>{const H=L.target.files?.[0];if(H){const X=await u(H);E(X),setTimeout(()=>E(null),3e3),V.current&&(V.current.value="")}};return e?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Session History"}),r.jsxs("p",{className:"text-slate-400 mt-1",children:[n.total," ",n.total===1?"session":"sessions"," recorded"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:o,disabled:t.length===0,className:"p-2.5 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl transition-colors disabled:opacity-50 border border-slate-800",title:"Export history",children:r.jsx(Bf,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>V.current?.click(),className:"p-2.5 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl transition-colors border border-slate-800",title:"Import history",children:r.jsx(Qf,{className:"w-5 h-5"})}),r.jsx("input",{ref:V,type:"file",accept:".json",onChange:z,className:"hidden"}),t.length>0&&r.jsx("button",{onClick:()=>v(!0),className:"p-2.5 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-colors border border-slate-800",title:"Clear all history",children:r.jsx(ia,{className:"w-5 h-5"})})]})]}),N&&r.jsx("div",{className:`p-4 rounded-xl flex items-center gap-3 text-sm animate-in fade-in ${N.success?"bg-emerald-500/10 border border-emerald-500/20 text-emerald-400":"bg-red-500/10 border border-red-500/20 text-red-400"}`,children:N.success?r.jsxs(r.Fragment,{children:[r.jsx(fr,{className:"w-5 h-5"}),"Imported ",N.count," sessions successfully"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ls,{className:"w-5 h-5"}),"Import failed: ",N.error]})}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries(zf).map(([L,H])=>{const X=H.icon,se=n.byType[L]||0;return r.jsx("button",{onClick:()=>x(m===L?"all":L),className:`p-4 rounded-xl border text-left transition-all ${m===L?"border-cyan-500/30 bg-cyan-500/10 shadow-lg shadow-cyan-500/10":"border-slate-800/60 bg-slate-900/30 hover:bg-slate-800/30 hover:border-slate-700"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(X,{className:`w-5 h-5 ${H.color}`}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold text-white",children:se}),r.jsx("div",{className:"text-xs text-slate-500",children:H.label})]})]})},L)})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),r.jsx("input",{type:"text",value:h,onChange:L=>f(L.target.value),placeholder:"Search sessions...",className:"w-full pl-11 pr-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all"})]}),r.jsxs("select",{value:m,onChange:L=>x(L.target.value),className:"px-4 py-3 rounded-xl bg-slate-900/50 border border-slate-800 text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all w-full sm:w-48",children:[r.jsx("option",{value:"all",children:"All Types"}),Object.entries(zf).map(([L,H])=>r.jsx("option",{value:L,children:H.label},L))]})]}),R.length>0?r.jsx("div",{className:"space-y-4",children:R.map(L=>r.jsx(bz,{session:L,onDelete:s},L.id))}):r.jsx("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm flex flex-col items-center justify-center min-h-[40vh] text-center p-8",children:t.length===0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx(Va,{className:"w-8 h-8 text-slate-600"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Sessions Yet"}),r.jsx("p",{className:"text-slate-500 max-w-md",children:"Your analysis sessions will appear here. Try analyzing a speech, using the live coach, or generating a strategy to get started!"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx(Oo,{className:"w-8 h-8 text-slate-600"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Results Found"}),r.jsx("p",{className:"text-slate-500",children:"No sessions match your search criteria."}),r.jsx("button",{onClick:()=>{f(""),x("all")},className:"mt-4 text-cyan-400 hover:text-cyan-300 font-medium",children:"Clear filters"})]})}),b&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-md p-6 rounded-2xl border border-slate-800 bg-slate-900 shadow-2xl animate-in zoom-in-95",children:[r.jsxs("div",{className:"flex items-center gap-3 text-red-400 mb-4",children:[r.jsx(Ls,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-xl font-bold",children:"Clear All History?"})]}),r.jsxs("p",{className:"text-slate-400 mb-6",children:["This will permanently delete all ",n.total," sessions. This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2.5 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>{l(),v(!1)},className:"px-4 py-2.5 rounded-xl bg-red-500 hover:bg-red-600 text-white font-medium transition-colors",children:"Delete All"})]})]})})]})},wz={uncertain:{label:"Uncertain",color:"text-yellow-400",bgColor:"bg-yellow-500/20",icon:a_},moderate:{label:"Moderate",color:"text-blue-400",bgColor:"bg-blue-500/20",icon:Wg},strong:{label:"Strong",color:"text-green-400",bgColor:"bg-green-500/20",icon:Iu}},$g={passionate:{label:"Passionate",color:"text-red-400",bgColor:"bg-red-500/20",emoji:""},neutral:{label:"Neutral",color:"text-gray-400",bgColor:"bg-gray-500/20",emoji:""},analytical:{label:"Analytical",color:"text-cyan-400",bgColor:"bg-cyan-500/20",emoji:""},inspiring:{label:"Inspiring",color:"text-purple-400",bgColor:"bg-purple-500/20",emoji:""},urgent:{label:"Urgent",color:"text-orange-400",bgColor:"bg-orange-500/20",emoji:""}},Nz={ethos:{label:"Ethos",description:"Credibility & Authority",color:"from-blue-500 to-indigo-500",icon:ZN},pathos:{label:"Pathos",description:"Emotional Appeal",color:"from-red-500 to-pink-500",icon:H4},logos:{label:"Logos",description:"Logic & Reasoning",color:"from-green-500 to-emerald-500",icon:Nl}},_z=({sections:t})=>!t||t.length===0?null:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary mb-3",children:[r.jsx(ss,{className:"w-4 h-4"}),r.jsx("span",{children:"Tone Progression"})]}),r.jsx("div",{className:"flex h-8 rounded-lg overflow-hidden",children:t.map((e,n)=>{const s=$g[e.tone]||$g.neutral;return r.jsxs("div",{className:`flex-1 ${s.bgColor} flex items-center justify-center text-xs font-medium ${s.color} border-r border-bg-primary last:border-r-0 transition-all hover:brightness-125`,title:`${e.label}: ${s.label}`,children:[r.jsx("span",{className:"hidden sm:inline",children:e.label}),r.jsx("span",{className:"sm:hidden",children:s.emoji})]},n)})}),r.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[r.jsx("span",{children:"Opening"}),r.jsx("span",{children:"Closing"})]})]}),sg=({type:t,score:e})=>{const n=Nz[t];if(!n)return null;const s=n.icon;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${n.color} flex items-center justify-center`,children:r.jsx(s,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-white",children:n.label}),r.jsx("div",{className:"text-xs text-text-muted",children:n.description})]})]}),r.jsxs("span",{className:"text-lg font-bold text-white",children:[e,"%"]})]}),r.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full bg-gradient-to-r ${n.color} transition-all duration-1000 ease-out`,style:{width:`${e}%`}})})]})},jz=({apiKey:t})=>{const[e,n]=k.useState(""),[s,l]=k.useState(!1),[o,u]=k.useState(null),[h,f]=k.useState(null),[m,x]=k.useState(""),[b,v]=k.useState(!1),[N,E]=k.useState(!1),{addSession:V}=kl(),R=async()=>{if(!t){x("Please enter a valid Gemini API Key in Settings.");return}if(!e.trim()){x("Please enter the speech transcript.");return}l(!0),x(""),u(null),f(null);try{const se=new br(t).getGenerativeModel({model:"gemini-2.0-flash-exp"}),Y=`You are an expert rhetorical analyst and speech coach. Analyze the following speech for tone, rhetorical techniques, and emotional impact.

SPEECH TEXT:
${e}

Provide your analysis in the following JSON format (ONLY output valid JSON, no markdown):
{
  "overallConfidence": "uncertain" | "moderate" | "strong",
  "dominantTone": "passionate" | "neutral" | "analytical" | "inspiring" | "urgent",
  "rhetoricalAppeals": {
    "ethos": <number 0-100>,
    "pathos": <number 0-100>,
    "logos": <number 0-100>
  },
  "toneProgression": [
    { "label": "Intro", "tone": "neutral" },
    { "label": "Build", "tone": "analytical" },
    { "label": "Peak", "tone": "passionate" },
    { "label": "Close", "tone": "inspiring" }
  ],
  "confidenceIndicators": {
    "hedgingPhrases": ["maybe", "perhaps", "I think"],
    "assertivePhrases": ["clearly", "undoubtedly", "must"],
    "hedgeCount": <number>,
    "assertiveCount": <number>
  },
  "techniques": [
    {
      "name": "Anaphora",
      "description": "Repetition at the beginning of sentences",
      "example": "We will fight... We will win...",
      "effectiveness": "high" | "medium" | "low"
    }
  ],
  "emotionalArc": {
    "opening": { "emotion": "hopeful", "intensity": 60 },
    "middle": { "emotion": "determined", "intensity": 80 },
    "closing": { "emotion": "triumphant", "intensity": 95 }
  },
  "recommendations": [
    "Add more concrete evidence to strengthen logos appeal",
    "Consider varying sentence length for better rhythm"
  ],
  "summary": "A two-sentence summary of the overall rhetorical effectiveness."
}`,M=(await(await se.generateContent(Y)).response).text();let S;try{const A=M.match(/\{[\s\S]*\}/);if(A)S=JSON.parse(A[0]);else throw new Error("No JSON found in response")}catch(A){console.error("JSON parse error:",A),u(M);return}f(S),V({type:"tone",title:"Tone Analysis",input:{transcript:e.substring(0,500)+(e.length>500?"...":"")},result:JSON.stringify(S,null,2),metadata:{confidence:S.overallConfidence,dominantTone:S.dominantTone}}),E(!0),setTimeout(()=>E(!1),2e3)}catch(X){console.error("Gemini Error:",X),x(`Error: ${X.message}. Please try again.`)}finally{l(!1)}},z=()=>{h&&(navigator.clipboard.writeText(JSON.stringify(h,null,2)),v(!0),setTimeout(()=>v(!1),2e3))},L=h?.overallConfidence?wz[h.overallConfidence]:null,H=h?.dominantTone?$g[h.dominantTone]:null;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Tone Analysis"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Analyze rhetorical impact and emotional tone"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col gap-4",children:[r.jsx("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm space-y-4",children:r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-700/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Hf,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"This analysis detects:"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["Confidence Level","Emotional Tone","Ethos/Pathos/Logos","Rhetorical Techniques"].map((X,se)=>r.jsx("span",{className:"px-3 py-1.5 text-xs font-medium bg-slate-900/50 text-slate-400 rounded-lg border border-slate-700/50",children:X},se))})]})}),r.jsxs("div",{className:"flex-1 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50",children:r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Speech Transcript"})}),r.jsx("textarea",{value:e,onChange:X=>n(X.target.value),placeholder:"Paste your speech text here for detailed tone and rhetorical analysis...",className:"flex-1 w-full bg-transparent p-4 resize-none focus:outline-none font-mono text-sm text-slate-200 placeholder-slate-600 min-h-[300px]"}),r.jsxs("div",{className:"p-4 border-t border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[e.length.toLocaleString()," characters"]}),r.jsxs("button",{onClick:R,disabled:s,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center gap-2",children:[s?r.jsx(Si,{className:"w-4 h-4 animate-spin"}):r.jsx(Kf,{className:"w-4 h-4"}),s?"Analyzing...":"Analyze Tone"]})]})]}),m&&r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-center gap-3 text-red-400",children:[r.jsx(Ls,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:m})]})]}),r.jsxs("div",{className:"w-full lg:w-1/2 rounded-2xl border border-slate-800/60 bg-slate-900/30 backdrop-blur-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-800/60 bg-slate-900/50 flex justify-between items-center",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(na,{className:"w-5 h-5 text-purple-400"}),"Rhetorical Analysis"]}),h&&r.jsxs("div",{className:"flex items-center gap-3",children:[N&&r.jsxs("span",{className:"text-xs text-emerald-400 flex items-center gap-1 font-medium",children:[r.jsx(Va,{className:"w-3 h-3"})," Saved"]}),r.jsx("button",{onClick:z,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Copy to clipboard",children:b?r.jsx(fr,{className:"w-4 h-4 text-emerald-500"}):r.jsx(vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L&&r.jsxs("div",{className:`p-4 rounded-xl ${L.bgColor} border border-slate-700/50`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(L.icon,{className:`w-5 h-5 ${L.color}`}),r.jsx("span",{className:"text-sm text-slate-400",children:"Confidence"})]}),r.jsx("div",{className:`text-xl font-bold ${L.color}`,children:L.label})]}),H&&r.jsxs("div",{className:`p-4 rounded-xl ${H.bgColor} border border-slate-700/50`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xl",children:H.emoji}),r.jsx("span",{className:"text-sm text-slate-400",children:"Dominant Tone"})]}),r.jsx("div",{className:`text-xl font-bold ${H.color}`,children:H.label})]})]}),r.jsxs("div",{className:"p-5 rounded-xl bg-slate-800/30 border border-slate-700/30 space-y-4",children:[r.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(ZN,{className:"w-4 h-4 text-purple-400"}),"Rhetorical Appeals"]}),h.rhetoricalAppeals&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(sg,{type:"ethos",score:h.rhetoricalAppeals.ethos}),r.jsx(sg,{type:"pathos",score:h.rhetoricalAppeals.pathos}),r.jsx(sg,{type:"logos",score:h.rhetoricalAppeals.logos})]})]}),h.toneProgression&&r.jsx("div",{className:"p-5 rounded-xl bg-slate-800/30 border border-slate-700/30",children:r.jsx(_z,{sections:h.toneProgression})}),h.techniques&&h.techniques.length>0&&r.jsxs("div",{className:"p-5 rounded-xl bg-slate-800/30 border border-slate-700/30 space-y-3",children:[r.jsx("h4",{className:"font-semibold text-white",children:"Rhetorical Techniques"}),r.jsx("div",{className:"space-y-3",children:h.techniques.map((X,se)=>r.jsxs("div",{className:"p-3 bg-slate-900/50 rounded-lg border border-slate-800",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-white",children:X.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${X.effectiveness==="high"?"bg-emerald-500/20 text-emerald-400":X.effectiveness==="medium"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:X.effectiveness})]}),r.jsx("p",{className:"text-sm text-slate-500",children:X.description})]},se))})]}),h.recommendations&&r.jsxs("div",{className:"p-5 rounded-xl bg-slate-800/30 border border-slate-700/30 space-y-3",children:[r.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(Nl,{className:"w-4 h-4 text-amber-400"}),"Recommendations"]}),r.jsx("ul",{className:"space-y-2",children:h.recommendations.map((X,se)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-400",children:[r.jsx(fr,{className:"w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0"}),X]},se))})]}),h.summary&&r.jsxs("div",{className:"p-5 rounded-xl bg-purple-500/10 border border-purple-500/20",children:[r.jsx("h4",{className:"font-semibold text-purple-400 mb-2",children:"Summary"}),r.jsx("p",{className:"text-slate-300",children:h.summary})]})]}):o?r.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:r.jsx(rc,{remarkPlugins:[ic],children:o})}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 py-16",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:r.jsx(Do,{className:"w-8 h-8"})}),r.jsx("p",{className:"text-center max-w-xs",children:"Paste your speech transcript to analyze rhetorical impact and emotional tone."})]})})]})]})]})},Ez=({onSkip:t})=>{const[e,n]=k.useState(!0),[s,l]=k.useState(""),[o,u]=k.useState(""),[h,f]=k.useState(""),[m,x]=k.useState(!1),[b,v]=k.useState(!1),[N,E]=k.useState(""),{login:V,register:R,loginWithGoogle:z,error:L,clearError:H}=In(),X=async T=>{if(T.preventDefault(),E(""),H(),!s||!o){E("Please fill in all required fields.");return}if(!e&&!h){E("Please enter your name.");return}if(o.length<6){E("Password must be at least 6 characters.");return}v(!0);try{e?await V(s,o):await R(s,o,h)}catch{}finally{v(!1)}},se=async()=>{E(""),H(),v(!0);try{await z()}catch{}finally{v(!1)}},Y=()=>{n(!e),E(""),H()},I=N||L;return r.jsxs("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-4",children:[r.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-primary/10 to-transparent rounded-full blur-3xl"}),r.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-accent/10 to-transparent rounded-full blur-3xl"})]}),r.jsxs("div",{className:"w-full max-w-md relative z-10",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-accent shadow-lg shadow-primary/25 mb-4",children:r.jsx(xi,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Adjudicator AI"}),r.jsx("p",{className:"text-text-secondary",children:"Your AI-powered debate coaching platform"})]}),r.jsxs("div",{className:"glass-card space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:e?"Welcome back":"Create your account"}),r.jsx("p",{className:"text-text-muted text-sm mt-1",children:e?"Sign in to continue to your dashboard":"Start your debate coaching journey"})]}),r.jsxs("button",{onClick:se,disabled:b,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white hover:bg-gray-100 text-gray-800 font-medium rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-700"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-bg-secondary text-text-muted",children:"or continue with email"})})]}),r.jsxs("form",{onSubmit:X,className:"space-y-4",children:[!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),r.jsx("input",{type:"text",value:h,onChange:T=>f(T.target.value),placeholder:"John Doe",className:"input-field pl-10",disabled:b})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(iA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),r.jsx("input",{type:"email",value:s,onChange:T=>l(T.target.value),placeholder:"you@example.com",className:"input-field pl-10",disabled:b})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(nA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),r.jsx("input",{type:m?"text":"password",value:o,onChange:T=>u(T.target.value),placeholder:"",className:"input-field pl-10 pr-10",disabled:b}),r.jsx("button",{type:"button",onClick:()=>x(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-secondary",children:m?r.jsx(k4,{className:"w-5 h-5"}):r.jsx(Qg,{className:"w-5 h-5"})})]})]}),I&&r.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start gap-2 text-red-400 text-sm",children:[r.jsx(Ls,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:I})]}),r.jsx("button",{type:"submit",disabled:b,className:"btn-primary w-full flex items-center justify-center gap-2 py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:b?r.jsx(Si,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[e?"Sign In":"Create Account",r.jsx(hf,{className:"w-4 h-4"})]})})]}),r.jsxs("p",{className:"text-center text-text-secondary text-sm",children:[e?"Don't have an account? ":"Already have an account? ",r.jsx("button",{onClick:Y,className:"text-primary hover:text-primary/80 font-medium transition-colors",disabled:b,children:e?"Sign up":"Sign in"})]})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsx("button",{onClick:t,className:"text-text-muted hover:text-text-secondary text-sm transition-colors underline underline-offset-2",children:"Continue as guest (limited features)"})})]})]})},Sz=({onGetStarted:t,onContinueAsGuest:e})=>{const[n,s]=k.useState(0),l=[{icon:pf,title:"Real-time Analysis",description:"Get instant AI feedback on speeches with event-specific rubrics. Identify strengths, weaknesses, and actionable improvements in seconds.",color:"from-cyan-500 to-blue-500",delay:.1},{icon:Ra,title:"Team Collaboration",description:"Manage your entire debate squad in one place. Share strategies, track individual progress, and coordinate team preparation.",color:"from-purple-500 to-pink-500",delay:.2},{icon:ss,title:"Performance Insights",description:"Deep analytics on speaking patterns, argument effectiveness, and improvement trends. Data-driven coaching for measurable results.",color:"from-orange-500 to-red-500",delay:.3},{icon:Gn,title:"Tournament Tracking",description:"Log competition results, monitor rankings, and analyze performance across events. See what strategies win at the highest levels.",color:"from-green-500 to-emerald-500",delay:.4}],o=[{icon:pf,text:"Instant AI feedback in seconds"},{icon:Qu,text:"Event-specific evaluation rubrics"},{icon:ss,text:"Track progress over time"},{icon:wl,text:"Personalized improvement drills"}],u=[{quote:"This completely transformed how I prepare for tournaments. My speaker points jumped 2 points!",author:"Sarah M.",role:"Public Forum Debater",avatar:""},{quote:"The strategy generator helped me anticipate every argument my opponents made at State.",author:"Marcus T.",role:"Lincoln-Douglas Champion",avatar:""},{quote:"Finally, feedback that understands the difference between Informative and Extemp. Game changer.",author:"Emily R.",role:"Speech Coach",avatar:""}];k.useEffect(()=>{const m=setInterval(()=>{s(x=>(x+1)%u.length)},5e3);return()=>clearInterval(m)},[]);const h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},f={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return r.jsxs("div",{className:"min-h-screen bg-bg-primary overflow-hidden",children:[r.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-primary/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-accent/20 via-transparent to-transparent rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),r.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-cyan-500/10 to-purple-500/10 rounded-full blur-3xl animate-float"})]}),r.jsx("nav",{className:"relative z-10 px-6 py-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-lg shadow-primary/25",children:r.jsx(xi,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"text-xl font-bold text-white",children:"Adjudicator AI"})]}),r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"text-text-secondary hover:text-white transition-colors px-4 py-2",children:"Try Free"}),r.jsxs("button",{onClick:t,className:"btn-primary flex items-center gap-2",children:["Sign In",r.jsx(hf,{className:"w-4 h-4"})]})]})]})}),r.jsx("section",{className:"relative z-10 px-6 pt-16 pb-24",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs(F.div,{initial:"hidden",animate:"visible",variants:h,className:"text-center max-w-4xl mx-auto",children:[r.jsxs(F.div,{variants:f,className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 mb-8",children:[r.jsx(na,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"text-sm text-primary font-medium",children:"Trusted by 500+ Competitive Teams"})]}),r.jsxs(F.h1,{variants:f,className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",children:[r.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-primary via-cyan-400 to-accent",children:"AI-Powered"}),r.jsx("span",{className:"text-white",children:" Debate Coaching"}),r.jsx("br",{}),r.jsx("span",{className:"text-white",children:"for "}),r.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-accent",children:"Competitive Teams"})]}),r.jsx(F.p,{variants:f,className:"text-xl text-text-secondary mb-10 max-w-2xl mx-auto",children:"Elite debate programs use Adjudicator AI to analyze speeches in real-time, track team performance, and gain competitive insights that win tournaments."}),r.jsxs(F.div,{variants:f,className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12",children:[r.jsx("button",{onClick:t,className:"group relative px-8 py-4 bg-gradient-to-r from-primary to-cyan-400 rounded-xl font-semibold text-white shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 transition-all hover:scale-105",children:r.jsxs("span",{className:"flex items-center gap-2",children:["Start Free Trial",r.jsx(hf,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),r.jsxs("button",{onClick:e,className:"group px-8 py-4 rounded-xl font-semibold text-text-secondary hover:text-white border border-slate-700 hover:border-slate-600 hover:bg-slate-800/50 transition-all flex items-center gap-2",children:[r.jsx(yi,{className:"w-5 h-5"}),"Watch Demo"]})]}),r.jsxs(F.div,{variants:f,className:"flex flex-col sm:flex-row items-center justify-center gap-6 sm:gap-12 text-text-muted",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center",children:r.jsx(Ra,{className:"w-5 h-5 text-cyan-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-lg font-bold text-white",children:"10,000+"}),r.jsx("div",{className:"text-xs text-text-muted",children:"Active Debaters"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center",children:r.jsx(Gn,{className:"w-5 h-5 text-yellow-500"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-lg font-bold text-white",children:"500+"}),r.jsx("div",{className:"text-xs text-text-muted",children:"Teams & Schools"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center",children:r.jsx(_l,{className:"w-5 h-5 text-green-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-lg font-bold text-white",children:"1M+"}),r.jsx("div",{className:"text-xs text-text-muted",children:"Speeches Analyzed"})]})]})]})]})})}),r.jsx("section",{className:"relative z-10 px-6 py-24 bg-gradient-to-b from-transparent via-slate-900/50 to-transparent",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs(F.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Everything You Need to Excel"}),r.jsx("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"From speech analysis to strategy building, we've got every aspect of your debate prep covered."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((m,x)=>r.jsx(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:m.delay},whileHover:{y:-5,scale:1.02},className:"group relative",children:r.jsxs("div",{className:"glass-card h-full cursor-pointer",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${m.color} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg`,children:r.jsx(m.icon,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:m.title}),r.jsx("p",{className:"text-text-secondary text-sm",children:m.description})]})},m.title))})]})}),r.jsx("section",{className:"relative z-10 px-6 py-24",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[r.jsxs(F.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Why Debaters Choose Us"}),r.jsx("p",{className:"text-text-secondary mb-8",children:"We built this for debaters, by debaters. Every feature is designed to give you a competitive edge."}),r.jsx("div",{className:"space-y-4",children:o.map((m,x)=>r.jsxs(F.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:x*.1},className:"flex items-center gap-4 p-4 rounded-xl bg-slate-900/50 border border-slate-800 hover:border-primary/30 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:r.jsx(m.icon,{className:"w-5 h-5 text-primary"})}),r.jsx("span",{className:"text-text-primary font-medium",children:m.text})]},x))})]}),r.jsx(F.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative",children:r.jsxs("div",{className:"glass-card relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full blur-3xl"}),r.jsx(St,{mode:"wait",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"relative z-10",children:[r.jsx("div",{className:"flex items-center gap-1 mb-4",children:[...Array(5)].map((m,x)=>r.jsx(mr,{className:"w-5 h-5 fill-yellow-500 text-yellow-500"},x))}),r.jsxs("blockquote",{className:"text-xl text-white font-medium mb-6 leading-relaxed",children:['"',u[n].quote,'"']}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-800 flex items-center justify-center text-2xl",children:u[n].avatar}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-semibold",children:u[n].author}),r.jsx("div",{className:"text-text-muted text-sm",children:u[n].role})]})]})]},n)}),r.jsx("div",{className:"flex items-center gap-2 mt-6",children:u.map((m,x)=>r.jsx("button",{onClick:()=>s(x),className:`w-2 h-2 rounded-full transition-all ${x===n?"w-6 bg-primary":"bg-slate-700 hover:bg-slate-600"}`},x))})]})})]})})}),r.jsx("section",{className:"relative z-10 px-6 py-24",children:r.jsx(F.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"relative rounded-3xl overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 via-accent/20 to-primary/20"}),r.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-xl"}),r.jsxs("div",{className:"relative z-10 p-12 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-primary to-accent mb-6 shadow-lg shadow-primary/25",children:r.jsx(Gn,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Win Your Next Round?"}),r.jsx("p",{className:"text-text-secondary mb-8 max-w-lg mx-auto",children:"Join thousands of debaters already using AI to sharpen their skills and dominate competitions."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[r.jsxs("button",{onClick:t,className:"group px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold hover:bg-gray-100 transition-all hover:scale-105 flex items-center gap-2",children:["Start Free Today",r.jsx(Un,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),r.jsx("button",{onClick:e,className:"px-8 py-4 text-white font-semibold hover:underline underline-offset-4",children:"Continue as Guest"})]})]})]})})}),r.jsx("footer",{className:"relative z-10 px-6 py-16 border-t border-slate-800 bg-slate-900/50",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:[r.jsxs("div",{className:"col-span-2 md:col-span-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-lg shadow-primary/25",children:r.jsx(xi,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"text-lg font-bold text-white",children:"Adjudicator AI"})]}),r.jsx("p",{className:"text-text-muted text-sm mb-4",children:"AI-powered debate coaching platform for competitive teams and speech programs."}),r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[[...Array(5)].map((m,x)=>r.jsx(mr,{className:"w-4 h-4 fill-yellow-500 text-yellow-500"},x)),r.jsx("span",{className:"text-sm text-text-muted ml-2",children:"4.9/5"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Speech Analysis"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Strategy Generator"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Live Coaching"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Team Analytics"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-4",children:"Resources"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Documentation"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Debate Guides"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Event Rubrics"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"API Access"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"About Us"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Contact"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-text-muted hover:text-white transition-colors text-sm",children:"Terms of Service"})})]})]})]}),r.jsxs("div",{className:"pt-8 border-t border-slate-800 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsx("div",{className:"text-text-muted text-sm",children:" 2025 Adjudicator AI. All rights reserved."}),r.jsx("div",{className:"flex items-center gap-6",children:r.jsx("span",{className:"text-text-muted text-sm",children:"Built for debaters, by debaters."})})]})]})})]})},Tz=async(t,e)=>{const n=rs(ht,"users",t,"debates");return(await Al(n,{...e,createdAt:Yt(),updatedAt:Yt()})).id},Az=async(t,e={})=>{const n=rs(ht,"users",t,"debates");let s=Ps(n,nc("createdAt","desc"));return e.format&&(s=Ps(s,Yx("format","==",e.format))),e.limit&&(s=Ps(s,Wx(e.limit))),(await Tl(s)).docs.map(o=>({id:o.id,...o.data()}))},Cz=async t=>{const e=await Az(t),n={},s={},l={},o={};return e.forEach(u=>{n[u.format]||(n[u.format]={wins:0,losses:0,total:0}),n[u.format].total++,u.result==="win"?n[u.format].wins++:u.result==="loss"&&n[u.format].losses++,u.tournament&&(s[u.tournament]||(s[u.tournament]={wins:0,losses:0,total:0,speakerPoints:[]}),s[u.tournament].total++,u.result==="win"?s[u.tournament].wins++:s[u.tournament].losses++,u.speakerPoints&&s[u.tournament].speakerPoints.push(u.speakerPoints));const h=u.createdAt?.toDate?.()||new Date(u.createdAt),f=`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}`;l[f]||(l[f]={wins:0,losses:0,total:0,avgScore:[]}),l[f].total++,u.result==="win"?l[f].wins++:l[f].losses++,u.score&&l[f].avgScore.push(u.score),u.opponent&&(o[u.opponent]||(o[u.opponent]={wins:0,losses:0,total:0}),o[u.opponent].total++,u.result==="win"?o[u.opponent].wins++:o[u.opponent].losses++)}),{totalDebates:e.length,totalWins:e.filter(u=>u.result==="win").length,totalLosses:e.filter(u=>u.result==="loss").length,winRate:e.length>0?(e.filter(u=>u.result==="win").length/e.length*100).toFixed(1):0,formatStats:n,tournamentStats:s,monthlyStats:l,opponentStats:o,recentDebates:e.slice(0,10)}},kz=async(t,e)=>{const n=rs(ht,"users",t,"opponents");return(await Al(n,{...e,createdAt:Yt(),updatedAt:Yt()})).id},Iz=async(t,e,n)=>{const s=hn(ht,"users",t,"opponents",e);await ra(s,{...n,updatedAt:Yt()})},Rz=async t=>{const e=rs(ht,"users",t,"opponents"),n=Ps(e,nc("updatedAt","desc"));return(await Tl(n)).docs.map(l=>({id:l.id,...l.data()}))},Dz=async(t,e)=>{const n=hn(ht,"users",t,"opponents",e);await Jx(n)},Mz=async(t,e,n)=>{const s=hn(ht,"users",t,"opponents",e);await ra(s,{notes:Ho({id:Date.now().toString(),content:n,createdAt:new Date().toISOString()}),updatedAt:Yt()})},Oz=async(t,e)=>{const n=rs(ht,"users",t,"evidence");return(await Al(n,{...e,usageCount:0,usedInDebates:[],createdAt:Yt(),updatedAt:Yt()})).id},Pz=async(t,e,n)=>{const s=hn(ht,"users",t,"evidence",e);await ra(s,{...n,updatedAt:Yt()})},Lz=async(t,e={})=>{const n=rs(ht,"users",t,"evidence");let s=Ps(n,nc("createdAt","desc"));e.limit&&(s=Ps(s,Wx(e.limit)));let o=(await Tl(s)).docs.map(u=>({id:u.id,...u.data()}));if(e.tag&&(o=o.filter(u=>u.tags?.includes(e.tag))),e.search){const u=e.search.toLowerCase();o=o.filter(h=>h.title?.toLowerCase().includes(u)||h.content?.toLowerCase().includes(u)||h.source?.toLowerCase().includes(u))}return o},Vz=async(t,e)=>{const n=hn(ht,"users",t,"evidence",e);await Jx(n)},zz=async(t,e,n)=>{const s=hn(ht,"users",t,"evidence",e),l=await vm(s);l.exists()&&await ra(s,{usageCount:(l.data().usageCount||0)+1,usedInDebates:Ho(n),lastUsed:Yt()})},Uz=async(t,e)=>{const n=rs(ht,"users",t,"practice");return(await Al(n,{...e,createdAt:Yt()})).id},KE=async(t,e={})=>{const n=rs(ht,"users",t,"practice");let s=Ps(n,nc("createdAt","desc"));return e.type&&(s=Ps(s,Yx("type","==",e.type))),e.limit&&(s=Ps(s,Wx(e.limit))),(await Tl(s)).docs.map(o=>({id:o.id,...o.data()}))},Fz=async t=>{const e=await KE(t),n={totalSessions:e.length,totalTime:e.reduce((u,h)=>u+(h.duration||0),0),byType:{},streak:0,avgScore:0};e.forEach(u=>{n.byType[u.type]||(n.byType[u.type]={count:0,totalScore:0}),n.byType[u.type].count++,u.score&&(n.byType[u.type].totalScore+=u.score)});const s=e.filter(u=>u.score);s.length>0&&(n.avgScore=(s.reduce((u,h)=>u+h.score,0)/s.length).toFixed(1));const l=new Date;let o=0;for(let u=0;u<365;u++){const h=new Date(l);h.setDate(h.getDate()-u);const f=h.toISOString().split("T")[0];if(e.some(x=>(x.createdAt?.toDate?.()||new Date(x.createdAt)).toISOString().split("T")[0]===f))o++;else if(u>0)break}return n.streak=o,n},Bz=async(t,e)=>{const n=rs(ht,"teams"),s=await Al(n,{...e,ownerId:t,members:[{id:t,role:"owner",joinedAt:new Date().toISOString()}],inviteCode:Math.random().toString(36).substring(2,8).toUpperCase(),createdAt:Yt(),updatedAt:Yt()}),l=hn(ht,"users",t);return await ra(l,{teams:Ho(s.id)}),s.id},qz=async t=>{const e=hn(ht,"teams",t),n=await vm(e);return n.exists()?{id:n.id,...n.data()}:null},Hz=async t=>{const e=hn(ht,"users",t),n=await vm(e);if(!n.exists())return[];const s=n.data().teams||[];return(await Promise.all(s.map(o=>qz(o)))).filter(Boolean)},$z=async(t,e)=>{const n=rs(ht,"teams"),s=Ps(n,Yx("inviteCode","==",e.toUpperCase())),l=await Tl(s);if(l.empty)throw new Error("Invalid invite code");const o=l.docs[0];if(o.data().members.some(h=>h.id===t))throw new Error("Already a member of this team");return await ra(hn(ht,"teams",o.id),{members:Ho({id:t,role:"member",joinedAt:new Date().toISOString()}),updatedAt:Yt()}),await ra(hn(ht,"users",t),{teams:Ho(o.id)}),o.id},Gz=async(t,e)=>{const n=rs(ht,"users",t,"tournaments");return(await Al(n,{...e,rounds:[],createdAt:Yt(),updatedAt:Yt()})).id},Yz=async(t,e,n)=>{const s=hn(ht,"users",t,"tournaments",e);await ra(s,{...n,updatedAt:Yt()})},Kz=async t=>{const e=rs(ht,"users",t,"tournaments"),n=Ps(e,nc("date","desc"));return(await Tl(n)).docs.map(l=>({id:l.id,...l.data()}))},Qz=async(t,e)=>{const n=hn(ht,"users",t,"tournaments",e);await Jx(n)},Xz=async(t,e,n)=>{const s=hn(ht,"users",t,"tournaments",e);await ra(s,{rounds:Ho({id:Date.now().toString(),...n,createdAt:new Date().toISOString()}),updatedAt:Yt()})},Wz=async(t,e)=>{const n=rs(ht,"users",t,"judges");return(await Al(n,{...e,createdAt:Yt(),updatedAt:Yt()})).id},Jz=async t=>{const e=rs(ht,"users",t,"judges"),n=Ps(e,nc("name"));return(await Tl(n)).docs.map(l=>({id:l.id,...l.data()}))},Zz=async(t,e,n)=>{const s=hn(ht,"users",t,"judges",e);await ra(s,{...n,updatedAt:Yt()})},eU=()=>{const{user:t}=In(),[e,n]=k.useState(null),[s,l]=k.useState(!0),[o,u]=k.useState(null),h=k.useCallback(async()=>{if(!t?.uid){l(!1);return}try{l(!0);const m=await Cz(t.uid);n(m),u(null)}catch(m){console.error("Error fetching analytics:",m),u(m.message)}finally{l(!1)}},[t?.uid]);return k.useEffect(()=>{h()},[h]),{analytics:e,loading:s,error:o,refetch:h,saveDebate:async m=>{if(!t?.uid)throw new Error("Not authenticated");const x=await Tz(t.uid,m);return await h(),x}}},tU=()=>{const{user:t}=In(),[e,n]=k.useState([]),[s,l]=k.useState(!0),[o,u]=k.useState(null),h=k.useCallback(async()=>{if(!t?.uid){l(!1);return}try{l(!0);const v=await Rz(t.uid);n(v),u(null)}catch(v){console.error("Error fetching opponents:",v),u(v.message)}finally{l(!1)}},[t?.uid]);return k.useEffect(()=>{h()},[h]),{opponents:e,loading:s,error:o,refetch:h,addOpponent:async v=>{if(!t?.uid)throw new Error("Not authenticated");const N=await kz(t.uid,v);return await h(),N},updateOpponent:async(v,N)=>{if(!t?.uid)throw new Error("Not authenticated");await Iz(t.uid,v,N),await h()},deleteOpponent:async v=>{if(!t?.uid)throw new Error("Not authenticated");await Dz(t.uid,v),await h()},addNote:async(v,N)=>{if(!t?.uid)throw new Error("Not authenticated");await Mz(t.uid,v,N),await h()}}},nU=(t={})=>{const{user:e}=In(),[n,s]=k.useState([]),[l,o]=k.useState(!0),[u,h]=k.useState(null),[f,m]=k.useState(t),x=k.useCallback(async()=>{if(!e?.uid){o(!1);return}try{o(!0);const R=await Lz(e.uid,f);s(R),h(null)}catch(R){console.error("Error fetching evidence:",R),h(R.message)}finally{o(!1)}},[e?.uid,f]);k.useEffect(()=>{x()},[x]);const b=async R=>{if(!e?.uid)throw new Error("Not authenticated");const z=await Oz(e.uid,R);return await x(),z},v=async(R,z)=>{if(!e?.uid)throw new Error("Not authenticated");await Pz(e.uid,R,z),await x()},N=async R=>{if(!e?.uid)throw new Error("Not authenticated");await Vz(e.uid,R),await x()},E=async(R,z)=>{if(!e?.uid)throw new Error("Not authenticated");await zz(e.uid,R,z),await x()},V=[...new Set(n.flatMap(R=>R.tags||[]))];return{evidence:n,loading:l,error:u,filters:f,setFilters:m,allTags:V,refetch:x,addEvidence:b,updateEvidence:v,deleteEvidence:N,trackUsage:E}},sU=()=>{const{user:t}=In(),[e,n]=k.useState([]),[s,l]=k.useState(null),[o,u]=k.useState(!0),[h,f]=k.useState(null),m=k.useCallback(async()=>{if(!t?.uid){u(!1);return}try{u(!0);const[b,v]=await Promise.all([KE(t.uid,{limit:50}),Fz(t.uid)]);n(b),l(v),f(null)}catch(b){console.error("Error fetching practice data:",b),f(b.message)}finally{u(!1)}},[t?.uid]);return k.useEffect(()=>{m()},[m]),{sessions:e,stats:s,loading:o,error:h,refetch:m,saveSession:async b=>{if(!t?.uid)throw new Error("Not authenticated");const v=await Uz(t.uid,b);return await m(),v}}},aU=()=>{const{user:t}=In(),[e,n]=k.useState([]),[s,l]=k.useState(!0),[o,u]=k.useState(null),h=k.useCallback(async()=>{if(!t?.uid){l(!1);return}try{l(!0);const x=await Hz(t.uid);n(x),u(null)}catch(x){console.error("Error fetching teams:",x),u(x.message)}finally{l(!1)}},[t?.uid]);return k.useEffect(()=>{h()},[h]),{teams:e,loading:s,error:o,refetch:h,createTeam:async x=>{if(!t?.uid)throw new Error("Not authenticated");const b=await Bz(t.uid,x);return await h(),b},joinTeam:async x=>{if(!t?.uid)throw new Error("Not authenticated");const b=await $z(t.uid,x);return await h(),b}}},rU=()=>{const{user:t}=In(),[e,n]=k.useState([]),[s,l]=k.useState(!0),[o,u]=k.useState(null),h=k.useCallback(async()=>{if(!t?.uid){l(!1);return}try{l(!0);const v=await Kz(t.uid);n(v),u(null)}catch(v){console.error("Error fetching tournaments:",v),u(v.message)}finally{l(!1)}},[t?.uid]);return k.useEffect(()=>{h()},[h]),{tournaments:e,loading:s,error:o,refetch:h,addTournament:async v=>{if(!t?.uid)throw new Error("Not authenticated");const N=await Gz(t.uid,v);return await h(),N},updateTournament:async(v,N)=>{if(!t?.uid)throw new Error("Not authenticated");await Yz(t.uid,v,N),await h()},deleteTournament:async v=>{if(!t?.uid)throw new Error("Not authenticated");await Qz(t.uid,v),await h()},addRound:async(v,N)=>{if(!t?.uid)throw new Error("Not authenticated");await Xz(t.uid,v,N),await h()}}},iU=()=>{const{user:t}=In(),[e,n]=k.useState([]),[s,l]=k.useState(!0),[o,u]=k.useState(null),h=k.useCallback(async()=>{if(!t?.uid){l(!1);return}try{l(!0);const x=await Jz(t.uid);n(x),u(null)}catch(x){console.error("Error fetching judges:",x),u(x.message)}finally{l(!1)}},[t?.uid]);return k.useEffect(()=>{h()},[h]),{judges:e,loading:s,error:o,refetch:h,addJudge:async x=>{if(!t?.uid)throw new Error("Not authenticated");const b=await Wz(t.uid,x);return await h(),b},updateJudge:async(x,b)=>{if(!t?.uid)throw new Error("Not authenticated");await Zz(t.uid,x,b),await h()}}},lU=["Public Forum","Lincoln-Douglas","Policy","Congress","World Schools","Extemp","Original Oratory","Impromptu"],oU={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ll={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},QE=({value:t,duration:e=1e3,prefix:n="",suffix:s="",decimals:l=0})=>{const[o,u]=k.useState(0);return k.useEffect(()=>{const h=Date.now(),f=typeof t=="number"?t:parseFloat(t)||0,m=()=>{const x=Date.now(),b=Math.min((x-h)/e,1),v=1-Math.pow(1-b,4),N=f*v;u(N),b<1&&requestAnimationFrame(m)};requestAnimationFrame(m)},[t,e]),r.jsxs("span",{children:[n,o.toFixed(l),s]})},XE=({progress:t,size:e=120,strokeWidth:n=8,color:s="cyan",showValue:l=!0,label:o,animate:u=!0})=>{const h=(e-n)/2,f=h*2*Math.PI,m=f-t/100*f,x={cyan:{stroke:"#06b6d4",glow:"drop-shadow(0 0 8px rgba(6, 182, 212, 0.5))"},emerald:{stroke:"#10b981",glow:"drop-shadow(0 0 8px rgba(16, 185, 129, 0.5))"},purple:{stroke:"#a855f7",glow:"drop-shadow(0 0 8px rgba(168, 85, 247, 0.5))"},amber:{stroke:"#f59e0b",glow:"drop-shadow(0 0 8px rgba(245, 158, 11, 0.5))"},red:{stroke:"#ef4444",glow:"drop-shadow(0 0 8px rgba(239, 68, 68, 0.5))"}},b=x[s]||x.cyan;return r.jsxs("div",{className:"relative inline-flex flex-col items-center",children:[r.jsxs("svg",{width:e,height:e,className:"transform -rotate-90",children:[r.jsx("circle",{cx:e/2,cy:e/2,r:h,fill:"none",stroke:"currentColor",strokeWidth:n,className:"text-slate-800"}),r.jsx(F.circle,{cx:e/2,cy:e/2,r:h,fill:"none",stroke:b.stroke,strokeWidth:n,strokeLinecap:"round",strokeDasharray:f,initial:u?{strokeDashoffset:f}:{strokeDashoffset:m},animate:{strokeDashoffset:m},transition:{duration:1,ease:"easeOut"},style:{filter:b.glow}})]}),l&&r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("span",{className:"text-2xl font-bold text-white",children:r.jsx(QE,{value:t,suffix:"%"})}),o&&r.jsx("span",{className:"text-xs text-slate-400",children:o})]})]})},Kh=({label:t,value:e,change:n,icon:s,color:l="cyan",subtitle:o})=>{const u=n>0,h=n===0||n===void 0,f={cyan:{bg:"from-cyan-500/20 to-cyan-600/5",border:"border-cyan-500/20",icon:"text-cyan-400",iconBg:"bg-cyan-500/10"},emerald:{bg:"from-emerald-500/20 to-emerald-600/5",border:"border-emerald-500/20",icon:"text-emerald-400",iconBg:"bg-emerald-500/10"},purple:{bg:"from-purple-500/20 to-purple-600/5",border:"border-purple-500/20",icon:"text-purple-400",iconBg:"bg-purple-500/10"},amber:{bg:"from-amber-500/20 to-amber-600/5",border:"border-amber-500/20",icon:"text-amber-400",iconBg:"bg-amber-500/10"},red:{bg:"from-red-500/20 to-red-600/5",border:"border-red-500/20",icon:"text-red-400",iconBg:"bg-red-500/10"}},m=f[l]||f.cyan;return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-4},className:"relative group cursor-default",children:[r.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r ${m.bg} rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500`}),r.jsxs("div",{className:`relative p-6 rounded-2xl border ${m.border} bg-gradient-to-br ${m.bg} backdrop-blur-sm overflow-hidden`,children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/5 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsxs("div",{className:"relative flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-slate-400 font-medium mb-1",children:t}),r.jsxs("p",{className:"text-3xl font-bold text-white tracking-tight",children:[r.jsx(QE,{value:parseFloat(e)||0,decimals:e.toString().includes(".")?1:0}),e.toString().includes("%")&&"%"]}),n!==void 0&&r.jsxs("div",{className:`flex items-center gap-1.5 mt-2 text-sm font-medium ${h?"text-slate-500":u?"text-emerald-400":"text-red-400"}`,children:[!h&&r.jsx(F.div,{initial:{rotate:u?-45:45,opacity:0},animate:{rotate:0,opacity:1},transition:{delay:.3},children:u?"":""}),r.jsx("span",{children:h?"No change":`${Math.abs(n)}%`}),r.jsx("span",{className:"text-slate-500",children:"vs last month"})]}),o&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:o})]}),r.jsx(F.div,{whileHover:{rotate:5,scale:1.1},className:`p-3 rounded-xl ${m.iconBg} border ${m.border}`,children:r.jsx(s,{className:`w-6 h-6 ${m.icon}`})})]})]})]})},yy=({children:t,variant:e="default",size:n="md"})=>{const s={default:"bg-slate-800 text-slate-300 border-slate-700",success:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30",warning:"bg-amber-500/10 text-amber-400 border-amber-500/30",danger:"bg-red-500/10 text-red-400 border-red-500/30",info:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",purple:"bg-purple-500/10 text-purple-400 border-purple-500/30"},l={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"};return r.jsx(F.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`inline-flex items-center gap-1.5 font-medium rounded-full border ${s[e]} ${l[n]}`,children:t})},cU=()=>r.jsx("div",{className:"relative p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 animate-pulse",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-4 w-24 bg-slate-800 rounded"}),r.jsx("div",{className:"h-8 w-20 bg-slate-800 rounded"}),r.jsx("div",{className:"h-3 w-32 bg-slate-800 rounded"})]}),r.jsx("div",{className:"w-12 h-12 bg-slate-800 rounded-xl"})]})}),ag=({className:t=""})=>r.jsx("div",{className:`bg-slate-800/50 rounded-xl animate-pulse ${t}`}),uU=({onAddDebate:t})=>r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20",children:[r.jsxs("div",{className:"relative inline-block mb-8",children:[r.jsx(F.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:3,repeat:1/0},className:"absolute inset-0 w-32 h-32 rounded-full bg-cyan-500/20 blur-xl"}),r.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.2,.05,.2]},transition:{duration:3,repeat:1/0,delay:.5},className:"absolute inset-0 w-32 h-32 rounded-full bg-purple-500/20 blur-xl"}),r.jsxs(F.div,{initial:{rotate:-10},animate:{rotate:[0,5,0]},transition:{duration:4,repeat:1/0},className:"relative p-6 rounded-3xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-xl shadow-2xl",children:[r.jsx(ss,{className:"w-16 h-16 text-cyan-400"}),r.jsx(F.div,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 -right-2",children:r.jsx(na,{className:"w-6 h-6 text-amber-400"})})]})]}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Start Your Debate Journey"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-8 leading-relaxed",children:"Track your debates to unlock powerful analytics, visualize your progress, and gain insights that will help you win more rounds."}),r.jsxs(F.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:t,className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold text-lg shadow-lg shadow-cyan-500/25 inline-flex items-center gap-3",children:[r.jsx(vn,{className:"w-5 h-5"}),"Record Your First Debate",r.jsx(Un,{className:"w-5 h-5"})]})]}),dU=({isOpen:t,onClose:e,onSave:n})=>{const[s,l]=k.useState({date:new Date().toISOString().split("T")[0],format:"Public Forum",tournament:"",round:"Round 1",opponent:"",opponentSchool:"",side:"Pro",result:"win",speakerPoints:"",score:"",topic:"",notes:""});if(!t)return null;const o=u=>{u.preventDefault(),n({...s,speakerPoints:s.speakerPoints?parseFloat(s.speakerPoints):null,score:s.score?parseInt(s.score):null}),e()};return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:u=>u.target===u.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-2xl bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl shadow-black/50 max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-transparent to-purple-500/10"}),r.jsxs("div",{className:"relative flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-cyan-500/10 border border-cyan-500/30",children:r.jsx(Gn,{className:"w-5 h-5 text-cyan-400"})}),"Record Debate"]}),r.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Track your performance and build your analytics"})]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Date"}),r.jsx("input",{type:"date",value:s.date,onChange:u=>l({...s,date:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Format"}),r.jsx("select",{value:s.format,onChange:u=>l({...s,format:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",children:lU.map(u=>r.jsx("option",{value:u,children:u},u))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Tournament"}),r.jsx("input",{type:"text",value:s.tournament,onChange:u=>l({...s,tournament:u.target.value}),placeholder:"e.g., Harvard Invitational",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Round"}),r.jsx("select",{value:s.round,onChange:u=>l({...s,round:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",children:["Round 1","Round 2","Round 3","Round 4","Round 5","Round 6","Octofinals","Quarterfinals","Semifinals","Finals"].map(u=>r.jsx("option",{value:u,children:u},u))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Opponent Name"}),r.jsx("input",{type:"text",value:s.opponent,onChange:u=>l({...s,opponent:u.target.value}),placeholder:"Opponent's name",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Opponent School"}),r.jsx("input",{type:"text",value:s.opponentSchool,onChange:u=>l({...s,opponentSchool:u.target.value}),placeholder:"School name",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Result"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l({...s,result:"win"}),className:`p-4 rounded-xl border-2 transition-all ${s.result==="win"?"bg-emerald-500/20 border-emerald-500 shadow-lg shadow-emerald-500/20":"bg-slate-800/30 border-slate-700 hover:border-slate-600"}`,children:[r.jsx(Gn,{className:`w-8 h-8 mx-auto mb-2 ${s.result==="win"?"text-emerald-400":"text-slate-500"}`}),r.jsx("span",{className:`font-semibold ${s.result==="win"?"text-emerald-400":"text-slate-400"}`,children:"Win"})]}),r.jsxs(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l({...s,result:"loss"}),className:`p-4 rounded-xl border-2 transition-all ${s.result==="loss"?"bg-red-500/20 border-red-500 shadow-lg shadow-red-500/20":"bg-slate-800/30 border-slate-700 hover:border-slate-600"}`,children:[r.jsx(Gt,{className:`w-8 h-8 mx-auto mb-2 ${s.result==="loss"?"text-red-400":"text-slate-500"}`}),r.jsx("span",{className:`font-semibold ${s.result==="loss"?"text-red-400":"text-slate-400"}`,children:"Loss"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Side"}),r.jsxs("select",{value:s.side,onChange:u=>l({...s,side:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",children:[r.jsx("option",{value:"Pro",children:"Pro/Aff"}),r.jsx("option",{value:"Con",children:"Con/Neg"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Speaker Points"}),r.jsx("input",{type:"number",step:"0.1",min:"20",max:"30",value:s.speakerPoints,onChange:u=>l({...s,speakerPoints:u.target.value}),placeholder:"28.5",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Notes"}),r.jsx("textarea",{value:s.notes,onChange:u=>l({...s,notes:u.target.value}),placeholder:"Key takeaways, what worked, areas to improve...",rows:3,className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all resize-none"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[r.jsx(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:"Cancel"}),r.jsx(F.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},className:"px-8 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold shadow-lg shadow-cyan-500/25",children:"Save Debate"})]})]})]})})},hU=({wins:t,losses:e})=>{const n=t+e,s=n>0?t/n*100:0;return r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx(XE,{progress:s,size:140,strokeWidth:12,color:s>=50?"emerald":"amber",label:"Win Rate"}),r.jsx(F.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute -inset-4 rounded-full border border-dashed border-slate-700/50"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"}),r.jsx(F.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 rounded-full bg-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-2xl font-bold text-white",children:t}),r.jsx("span",{className:"text-slate-400 ml-2",children:"Wins"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-600"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-2xl font-bold text-white",children:e}),r.jsx("span",{className:"text-slate-400 ml-2",children:"Losses"})]})]}),r.jsx("div",{className:"pt-2 border-t border-slate-800",children:r.jsxs("p",{className:"text-slate-500",children:[n," total debates"]})})]})]})},fU=({data:t})=>{const e=Object.keys(t).sort().slice(-12),n=e.map(l=>{const o=t[l];return o.total>0?o.wins/o.total*100:0}),s=Math.max(...n,100);return e.length===0?r.jsx("div",{className:"flex items-center justify-center h-48 text-slate-500",children:r.jsx("p",{children:"Record more debates to see trends"})}):r.jsxs("div",{className:"relative h-56",children:[r.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[100,75,50,25,0].map(l=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs text-slate-600 w-8",children:[l,"%"]}),r.jsx("div",{className:"flex-1 border-t border-slate-800/50 border-dashed"})]},l))}),r.jsx("div",{className:"absolute inset-0 pt-4 pb-6 pl-10 flex items-end justify-between gap-2",children:n.map((l,o)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[r.jsxs(F.div,{initial:{height:0,opacity:0},animate:{height:`${l/s*100}%`,opacity:1},transition:{delay:o*.05,duration:.6,ease:"easeOut"},className:"relative w-full rounded-t-lg cursor-pointer group",style:{background:l>=50?"linear-gradient(to top, rgba(16, 185, 129, 0.8), rgba(6, 182, 212, 0.6))":"linear-gradient(to top, rgba(245, 158, 11, 0.8), rgba(251, 191, 36, 0.6))",minHeight:"4px"},children:[r.jsx("div",{className:"absolute inset-0 rounded-t-lg blur-md opacity-50",style:{background:l>=50?"linear-gradient(to top, rgb(16, 185, 129), rgb(6, 182, 212))":"linear-gradient(to top, rgb(245, 158, 11), rgb(251, 191, 36))"}}),r.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-lg text-xs text-white font-medium opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 shadow-xl",children:[l.toFixed(0),"% win rate",r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-800 border-r border-b border-slate-700 rotate-45"})]})]}),r.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:e[o].split("-")[1]})]},e[o]))})]})},mU=({data:t})=>{const e=Object.entries(t);return e.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"No format data available"}):r.jsx("div",{className:"space-y-5",children:e.map(([n,s],l)=>{const o=s.total>0?s.wins/s.total*100:0,u=o>=70?"emerald":o>=50?"cyan":o>=30?"amber":"red";return r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[n,o>=70&&r.jsx(Kg,{className:"w-4 h-4 text-amber-400"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-slate-500 text-sm",children:[s.wins,"W - ",s.losses,"L"]}),r.jsxs(yy,{variant:u==="emerald"?"success":u==="cyan"?"info":u==="amber"?"warning":"danger",children:[o.toFixed(0),"%"]})]})]}),r.jsx("div",{className:"h-3 bg-slate-800 rounded-full overflow-hidden",children:r.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,delay:l*.1},className:"h-full rounded-full relative overflow-hidden",style:{background:`linear-gradient(90deg, ${u==="emerald"?"rgb(16, 185, 129), rgb(6, 182, 212)":u==="cyan"?"rgb(6, 182, 212), rgb(99, 102, 241)":u==="amber"?"rgb(245, 158, 11), rgb(251, 191, 36)":"rgb(239, 68, 68), rgb(248, 113, 113)"})`},children:r.jsx(F.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent"})})})]},n)})})},pU=({data:t})=>{const e=Object.entries(t).map(([n,s])=>({name:n,...s,winRate:s.total>0?s.wins/s.total*100:0})).sort((n,s)=>s.total-n.total).slice(0,10);return e.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"No opponent data available"}):r.jsx("div",{className:"space-y-3",children:e.map((n,s)=>r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:s*.05},whileHover:{scale:1.01,x:4},className:"flex items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-slate-800/50 to-slate-900/30 border border-slate-800/50 hover:border-slate-700/50 transition-all cursor-pointer group",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg ${s===0?"bg-amber-500/20 text-amber-400 border border-amber-500/30":s===1?"bg-slate-400/20 text-slate-300 border border-slate-400/30":s===2?"bg-amber-700/20 text-amber-600 border border-amber-700/30":"bg-slate-800 text-slate-400"}`,children:s+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-white font-medium truncate group-hover:text-cyan-400 transition-colors",children:n.name}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[n.total," debates"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`text-lg font-bold ${n.winRate>=50?"text-emerald-400":"text-red-400"}`,children:[n.winRate.toFixed(0),"%"]}),r.jsxs("p",{className:"text-slate-500 text-xs",children:[n.wins,"W-",n.losses,"L"]})]}),r.jsx(Un,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-400 transition-colors"})]},n.name))})},gU=({debates:t})=>r.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((e,n)=>r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:n*.05},whileHover:{scale:1.01},className:"flex items-center gap-4 p-4 rounded-xl bg-slate-800/30 border border-slate-800/50 hover:bg-slate-800/50 transition-all cursor-pointer group",children:[r.jsx("div",{className:`relative w-2 h-14 rounded-full ${e.result==="win"?"bg-emerald-500":"bg-red-500"}`,children:r.jsx(F.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:`absolute inset-0 rounded-full ${e.result==="win"?"bg-emerald-500":"bg-red-500"} blur-sm`})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-white font-medium",children:e.tournament||"Practice"}),r.jsx("span",{className:"text-slate-600",children:""}),r.jsx(yy,{variant:"info",size:"sm",children:e.format})]}),r.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["vs ",e.opponent||"Unknown","  ",e.round]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-semibold ${e.result==="win"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/30":"bg-red-500/10 text-red-400 border border-red-500/30"}`,children:e.result==="win"?" Win":"Loss"}),e.speakerPoints&&r.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[r.jsx(mr,{className:"w-3 h-3 inline-block text-amber-400 mr-1"}),e.speakerPoints," speaks"]})]})]},e.id||n))}),xU=()=>r.jsxs("div",{className:"space-y-8 animate-pulse",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((t,e)=>r.jsx(cU,{},e))}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(ag,{className:"h-64 rounded-2xl"}),r.jsx(ag,{className:"h-64 rounded-2xl"})]}),r.jsx(ag,{className:"h-80 rounded-2xl"})]}),yU=({apiKey:t})=>{const{user:e,isAuthenticated:n}=In(),{analytics:s,loading:l,refetch:o,saveDebate:u}=eU(),[h,f]=k.useState(!1),[m,x]=k.useState("overview"),b=async N=>{try{await u(N)}catch(E){console.error("Error saving debate:",E)}},v=s&&s.totalDebates>0;return r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(ss,{className:"w-7 h-7 text-cyan-400"})}),"Analytics",r.jsx(yy,{variant:"info",children:"Premium"})]}),r.jsx("p",{className:"text-slate-400 mt-2",children:"Track your debate performance and progress"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(F.button,{whileHover:{scale:1.05,rotate:180},whileTap:{scale:.95},onClick:o,className:"p-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all",title:"Refresh",children:r.jsx(Jg,{className:"w-5 h-5"})}),r.jsxs(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:()=>f(!0),className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Record Debate"]})]})]}),r.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-2 p-1.5 bg-slate-900/50 rounded-2xl border border-slate-800/50 w-fit",children:[{id:"overview",label:"Overview",icon:$1},{id:"trends",label:"Trends",icon:Iu},{id:"opponents",label:"Head-to-Head",icon:Ra},{id:"formats",label:"By Format",icon:ss}].map(N=>r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(N.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${m===N.id?"bg-slate-800 text-white shadow-lg":"text-slate-400 hover:text-white"}`,children:[r.jsx(N.icon,{className:"w-4 h-4"}),N.label]},N.id))}),l?r.jsx(xU,{}):v?r.jsxs(F.div,{variants:oU,initial:"hidden",animate:"visible",children:[m==="overview"&&r.jsxs(r.Fragment,{children:[r.jsxs(F.div,{variants:ll,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Kh,{label:"Total Debates",value:s.totalDebates.toString(),icon:Ia,color:"cyan"}),r.jsx(Kh,{label:"Win Rate",value:`${s.winRate}`,change:5,icon:Gn,color:"emerald"}),r.jsx(Kh,{label:"Total Wins",value:s.totalWins.toString(),icon:XT,color:"purple"}),r.jsx(Kh,{label:"Win Streak",value:s.currentStreak?.toString()||"0",subtitle:"Current streak",icon:HN,color:"amber"})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs(F.div,{variants:ll,className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[r.jsx($1,{className:"w-5 h-5 text-cyan-400"}),"Win/Loss Ratio"]}),r.jsx(hU,{wins:s.totalWins,losses:s.totalLosses})]}),r.jsxs(F.div,{variants:ll,className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[r.jsx(ss,{className:"w-5 h-5 text-purple-400"}),"Performance by Format"]}),r.jsx(mU,{data:s.formatStats})]})]}),r.jsxs(F.div,{variants:ll,className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[r.jsx(Fn,{className:"w-5 h-5 text-amber-400"}),"Recent Debates"]}),r.jsx(gU,{debates:s.recentDebates})]})]}),m==="trends"&&r.jsxs(F.div,{variants:ll,className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[r.jsx(Iu,{className:"w-5 h-5 text-emerald-400"}),"Win Rate Trend (Last 12 Months)"]}),r.jsx(fU,{data:s.monthlyStats})]}),m==="opponents"&&r.jsxs(F.div,{variants:ll,className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-cyan-400"}),"Head-to-Head Records"]}),r.jsx(pU,{data:s.opponentStats})]}),m==="formats"&&r.jsx(F.div,{variants:ll,className:"grid md:grid-cols-2 gap-6",children:Object.entries(s.formatStats).map(([N,E],V)=>{const R=E.total>0?E.wins/E.total*100:0;return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:V*.1},whileHover:{scale:1.02,y:-4},className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-950/50 hover:border-slate-700/60 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h4",{className:"text-white font-semibold text-lg",children:N}),r.jsx(XE,{progress:R,size:60,strokeWidth:6,color:R>=50?"emerald":"amber"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:"p-3 rounded-xl bg-slate-800/30",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:E.total}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Total"})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-emerald-500/10",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:E.wins}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Wins"})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10",children:[r.jsx("p",{className:"text-2xl font-bold text-red-400",children:E.losses}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Losses"})]})]})]},N)})})]}):r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 rounded-3xl border border-slate-800/60 bg-gradient-to-b from-slate-900/50 to-slate-950/50",children:r.jsx(uU,{onAddDebate:()=>f(!0)})}),r.jsx(St,{children:h&&r.jsx(dU,{isOpen:h,onClose:()=>f(!1),onSave:b})})]})})},bU={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},vU={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}}},vl={high:{label:"High Threat",color:"red",bgClass:"bg-red-500/10 border-red-500/30",textClass:"text-red-400",icon:ui,glow:"shadow-red-500/20"},medium:{label:"Medium Threat",color:"amber",bgClass:"bg-amber-500/10 border-amber-500/30",textClass:"text-amber-400",icon:Ls,glow:"shadow-amber-500/20"},low:{label:"Low Threat",color:"emerald",bgClass:"bg-emerald-500/10 border-emerald-500/30",textClass:"text-emerald-400",icon:fr,glow:"shadow-emerald-500/20"}},wU=({onAdd:t})=>r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20",children:[r.jsxs("div",{className:"relative inline-block mb-8",children:[r.jsx(F.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:3,repeat:1/0},className:"absolute inset-0 w-32 h-32 rounded-full bg-red-500/20 blur-xl"}),r.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.2,.05,.2]},transition:{duration:3,repeat:1/0,delay:.5},className:"absolute inset-0 w-32 h-32 rounded-full bg-amber-500/20 blur-xl"}),r.jsxs(F.div,{animate:{rotate:[0,5,0,-5,0]},transition:{duration:5,repeat:1/0},className:"relative p-6 rounded-3xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-xl shadow-2xl",children:[r.jsx(Gt,{className:"w-16 h-16 text-red-400"}),r.jsx(F.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 -right-2",children:r.jsx(Qg,{className:"w-6 h-6 text-amber-400"})})]})]}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Know Your Competition"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-8 leading-relaxed",children:"Track opponents, analyze their strategies, and prepare winning counter-arguments. Intelligence wins debates."}),r.jsxs(F.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(239, 68, 68, 0.3)"},whileTap:{scale:.98},onClick:t,className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-red-500 to-orange-600 text-white font-semibold text-lg shadow-lg shadow-red-500/25 inline-flex items-center gap-3",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add First Opponent",r.jsx(Un,{className:"w-5 h-5"})]})]}),WE=({level:t,size:e="md",pulse:n=!1})=>{const s=vl[t]||vl.medium,l=s.icon,o={sm:"px-2 py-0.5 text-xs gap-1",md:"px-3 py-1 text-sm gap-1.5",lg:"px-4 py-2 text-base gap-2"};return r.jsxs(F.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`inline-flex items-center font-semibold rounded-full border ${s.bgClass} ${s.textClass} ${o[e]} ${n?"animate-pulse":""}`,children:[r.jsx(l,{className:e==="sm"?"w-3 h-3":e==="lg"?"w-5 h-5":"w-4 h-4"}),s.label]})},NU=({winRate:t,size:e=60})=>{const n=(e-6)/2,s=n*2*Math.PI,l=s-t/100*s,o=t>=50?"#ef4444":"#10b981";return r.jsxs("div",{className:"relative",style:{width:e,height:e},children:[r.jsxs("svg",{className:"transform -rotate-90",width:e,height:e,children:[r.jsx("circle",{cx:e/2,cy:e/2,r:n,fill:"none",stroke:"currentColor",strokeWidth:"6",className:"text-slate-800"}),r.jsx(F.circle,{cx:e/2,cy:e/2,r:n,fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:s,initial:{strokeDashoffset:s},animate:{strokeDashoffset:l},transition:{duration:1,ease:"easeOut"}})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("span",{className:`text-sm font-bold ${t>=50?"text-red-400":"text-emerald-400"}`,children:[t,"%"]})})]})},_U=({opponent:t,onClick:e,isSelected:n})=>{const s=vl[t.threatLevel]||vl.medium,l=t.debates?.total>0?Math.round(t.debates.wins/t.debates.total*100):0;return r.jsxs(F.div,{variants:vU,whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:e,className:`relative group cursor-pointer ${n?"ring-2 ring-cyan-500":""}`,children:[r.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r ${t.threatLevel==="high"?"from-red-500/20 to-orange-500/20":t.threatLevel==="medium"?"from-amber-500/20 to-yellow-500/20":"from-emerald-500/20 to-teal-500/20"} rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500`}),r.jsxs("div",{className:"relative p-5 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80 backdrop-blur-sm hover:border-slate-700/60 transition-all overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/5 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsxs("div",{className:"relative flex items-start gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${t.threatLevel==="high"?"from-red-500/30 to-orange-600/30":t.threatLevel==="medium"?"from-amber-500/30 to-yellow-600/30":"from-emerald-500/30 to-teal-600/30"} flex items-center justify-center text-2xl font-bold text-white border ${s.bgClass}`,children:t.name?.[0]?.toUpperCase()||"?"}),r.jsx(F.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full ${t.threatLevel==="high"?"bg-red-500":t.threatLevel==="medium"?"bg-amber-500":"bg-emerald-500"} border-2 border-slate-900`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold text-lg truncate group-hover:text-cyan-400 transition-colors",children:t.name}),r.jsx("p",{className:"text-slate-500 text-sm",children:t.school||"Unknown School"})]}),r.jsx(WE,{level:t.threatLevel,size:"sm"})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400 text-sm",children:[r.jsx(ZA,{className:"w-4 h-4"}),r.jsxs("span",{children:[t.debates?.total||0," debates"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[r.jsx(Gn,{className:l>=50?"w-4 h-4 text-red-400":"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:l>=50?"text-red-400":"text-emerald-400",children:[t.debates?.wins||0,"W - ",t.debates?.losses||0,"L"]})]})]}),(t.strengths?.length>0||t.weaknesses?.length>0)&&r.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.strengths?.slice(0,2).map((o,u)=>r.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-500/10 text-red-400 border border-red-500/20",children:[" ",o]},u)),t.weaknesses?.slice(0,2).map((o,u)=>r.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",children:[" ",o]},u))]})]}),r.jsx("div",{className:"hidden sm:block",children:r.jsx(NU,{winRate:l})})]}),r.jsx(Un,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-600 group-hover:text-slate-400 group-hover:translate-x-1 transition-all"})]})]})},jU=({opponent:t,onClose:e,onGenerateStrategy:n})=>{const[s,l]=k.useState("overview"),[o,u]=k.useState(!1);if(!t)return null;const h=vl[t.threatLevel]||vl.medium;t.debates?.total>0&&Math.round(t.debates.wins/t.debates.total*100);const f=async()=>{u(!0),await n?.(t),u(!1)};return r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"h-full overflow-hidden rounded-2xl border border-slate-800/60 bg-gradient-to-b from-slate-900/95 to-slate-950/95 backdrop-blur-xl",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800 overflow-hidden",children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${t.threatLevel==="high"?"from-red-500/10 via-transparent to-orange-500/5":t.threatLevel==="medium"?"from-amber-500/10 via-transparent to-yellow-500/5":"from-emerald-500/10 via-transparent to-teal-500/5"}`}),r.jsxs("div",{className:"relative flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${t.threatLevel==="high"?"from-red-500/30 to-orange-600/30":t.threatLevel==="medium"?"from-amber-500/30 to-yellow-600/30":"from-emerald-500/30 to-teal-600/30"} flex items-center justify-center text-3xl font-bold text-white border ${h.bgClass}`,children:t.name?.[0]?.toUpperCase()||"?"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:t.name}),r.jsx("p",{className:"text-slate-400",children:t.school||"Unknown School"}),r.jsx(WE,{level:t.threatLevel,size:"md"})]})]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex items-center gap-2 p-4 border-b border-slate-800/50",children:[{id:"overview",label:"Overview",icon:ss},{id:"history",label:"History",icon:Fn},{id:"strategy",label:"Strategy",icon:Do}].map(m=>r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(m.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===m.id?"bg-slate-800 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[r.jsx(m.icon,{className:"w-4 h-4"}),m.label]},m.id))}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(100%-200px)] space-y-6",children:[s==="overview"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-800/50 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:t.debates?.total||0}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Total Debates"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-red-400",children:t.debates?.wins||0}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Your Losses"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:t.debates?.losses||0}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Your Wins"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(ui,{className:"w-5 h-5 text-red-400"}),"Opponent Strengths"]}),r.jsx("div",{className:"space-y-2",children:t.strengths?.length>0?t.strengths.map((m,x)=>r.jsxs(F.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"flex items-center gap-3 p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),r.jsx("span",{className:"text-slate-300",children:m})]},x)):r.jsx("p",{className:"text-slate-500 italic",children:"No strengths recorded yet"})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Gt,{className:"w-5 h-5 text-emerald-400"}),"Opponent Weaknesses"]}),r.jsx("div",{className:"space-y-2",children:t.weaknesses?.length>0?t.weaknesses.map((m,x)=>r.jsxs(F.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"flex items-center gap-3 p-3 rounded-xl bg-emerald-500/5 border border-emerald-500/20",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-slate-300",children:m})]},x)):r.jsx("p",{className:"text-slate-500 italic",children:"No weaknesses recorded yet"})})]}),t.commonArguments?.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(as,{className:"w-5 h-5 text-cyan-400"}),"Common Arguments"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.commonArguments.map((m,x)=>r.jsx("span",{className:"px-3 py-1.5 rounded-full text-sm bg-cyan-500/10 text-cyan-400 border border-cyan-500/20",children:m},x))})]})]}),s==="history"&&r.jsx("div",{className:"space-y-4",children:t.debateHistory?.length>0?t.debateHistory.map((m,x)=>r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:x*.05},className:"flex items-center gap-4 p-4 rounded-xl bg-slate-800/30 border border-slate-800/50",children:[r.jsx("div",{className:`w-2 h-12 rounded-full ${m.result==="win"?"bg-emerald-500":"bg-red-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white font-medium",children:m.tournament}),r.jsxs("p",{className:"text-slate-500 text-sm",children:[m.round,"  ",m.date]})]}),r.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium ${m.result==="win"?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:m.result==="win"?"Won":"Lost"})]},x)):r.jsx("p",{className:"text-slate-500 text-center py-8",children:"No debate history recorded"})}),s==="strategy"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(168, 85, 247, 0.3)"},whileTap:{scale:.98},onClick:f,disabled:o,className:"w-full py-4 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 text-white font-semibold shadow-lg shadow-purple-500/25 flex items-center justify-center gap-3 disabled:opacity-50",children:o?r.jsxs(r.Fragment,{children:[r.jsx(F.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:r.jsx(na,{className:"w-5 h-5"})}),"Generating AI Strategy..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Do,{className:"w-5 h-5"}),"Generate AI Counter-Strategy",r.jsx(na,{className:"w-5 h-5"})]})}),t.counterStrategies?.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[r.jsx(Qu,{className:"w-5 h-5 text-purple-400"}),"Counter-Strategies"]}),t.counterStrategies.map((m,x)=>r.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-purple-500/5 border border-purple-500/20",children:r.jsx("p",{className:"text-slate-300",children:m})},x))]})]})]})]})},EU=({isOpen:t,onClose:e,onSave:n})=>{const[s,l]=k.useState({name:"",school:"",threatLevel:"medium",strengths:"",weaknesses:"",commonArguments:"",notes:""});if(!t)return null;const o=u=>{u.preventDefault(),n({...s,strengths:s.strengths.split(",").map(h=>h.trim()).filter(Boolean),weaknesses:s.weaknesses.split(",").map(h=>h.trim()).filter(Boolean),commonArguments:s.commonArguments.split(",").map(h=>h.trim()).filter(Boolean),debates:{total:0,wins:0,losses:0}}),e()};return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:u=>u.target===u.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 via-transparent to-amber-500/10"}),r.jsxs("div",{className:"relative flex items-center justify-between",children:[r.jsx("div",{children:r.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-red-500/10 border border-red-500/30",children:r.jsx(Gt,{className:"w-5 h-5 text-red-400"})}),"Add Opponent"]})}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-140px)]",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Name *"}),r.jsx("input",{type:"text",value:s.name,onChange:u=>l({...s,name:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"School"}),r.jsx("input",{type:"text",value:s.school,onChange:u=>l({...s,school:u.target.value}),className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Threat Level"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(vl).map(([u,h])=>r.jsxs(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l({...s,threatLevel:u}),className:`p-3 rounded-xl border-2 transition-all text-center ${s.threatLevel===u?`${h.bgClass} border-current ${h.textClass}`:"bg-slate-800/30 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[r.jsx(h.icon,{className:`w-6 h-6 mx-auto mb-1 ${s.threatLevel===u?h.textClass:""}`}),r.jsx("span",{className:"text-sm font-medium",children:h.label.split(" ")[0]})]},u))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Strengths (comma-separated)"}),r.jsx("input",{type:"text",value:s.strengths,onChange:u=>l({...s,strengths:u.target.value}),placeholder:"e.g., Strong rebuttals, Fast speaking, Good evidence",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Weaknesses (comma-separated)"}),r.jsx("input",{type:"text",value:s.weaknesses,onChange:u=>l({...s,weaknesses:u.target.value}),placeholder:"e.g., Weak on CX, Poor time management",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Notes"}),r.jsx("textarea",{value:s.notes,onChange:u=>l({...s,notes:u.target.value}),placeholder:"Any additional observations...",rows:3,className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all resize-none"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[r.jsx(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:"Cancel"}),r.jsx(F.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},whileTap:{scale:.98},className:"px-8 py-3 rounded-xl bg-gradient-to-r from-red-500 to-orange-600 text-white font-semibold shadow-lg shadow-red-500/25",children:"Add Opponent"})]})]})]})})},SU=({apiKey:t})=>{const{user:e}=In(),{opponents:n,loading:s,saveOpponent:l,generateCounterStrategy:o}=tU(),[u,h]=k.useState(!1),[f,m]=k.useState(null),[x,b]=k.useState(""),[v,N]=k.useState("all"),E=k.useMemo(()=>(n||[]).filter(R=>{const z=R.name?.toLowerCase().includes(x.toLowerCase())||R.school?.toLowerCase().includes(x.toLowerCase()),L=v==="all"||R.threatLevel===v;return z&&L}),[n,x,v]),V=async R=>{await l(R)};return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-full",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-red-500/20 to-orange-600/20 border border-red-500/30",children:r.jsx(Gt,{className:"w-7 h-7 text-red-400"})}),"Opponent Intelligence"]}),r.jsx("p",{className:"text-slate-400 mt-2",children:"Track, analyze, and prepare for your competition"})]}),r.jsxs(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(239, 68, 68, 0.3)"},whileTap:{scale:.98},onClick:()=>h(!0),className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-red-500 to-orange-600 text-white font-medium shadow-lg shadow-red-500/25 flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Opponent"]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),r.jsx("input",{type:"text",value:x,onChange:R=>b(R.target.value),placeholder:"Search opponents...",className:"w-full pl-12 pr-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsx("div",{className:"flex items-center gap-2 p-1 bg-slate-900/50 rounded-xl border border-slate-800/50",children:[{id:"all",label:"All"},{id:"high",label:"High",color:"text-red-400"},{id:"medium",label:"Medium",color:"text-amber-400"},{id:"low",label:"Low",color:"text-emerald-400"}].map(R=>r.jsx("button",{onClick:()=>N(R.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${v===R.id?"bg-slate-800 text-white":`text-slate-400 hover:text-white ${R.color||""}`}`,children:R.label},R.id))})]}),s?r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[...Array(4)].map((R,z)=>r.jsx("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 animate-pulse",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-slate-800"}),r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsx("div",{className:"h-5 w-32 bg-slate-800 rounded"}),r.jsx("div",{className:"h-4 w-24 bg-slate-800 rounded"}),r.jsx("div",{className:"h-3 w-full bg-slate-800 rounded"})]})]})},z))}):E.length===0?r.jsx("div",{className:"p-8 rounded-3xl border border-slate-800/60 bg-gradient-to-b from-slate-900/50 to-slate-950/50",children:r.jsx(wU,{onAdd:()=>h(!0)})}):r.jsxs("div",{className:"grid lg:grid-cols-5 gap-6",children:[r.jsx(F.div,{variants:bU,initial:"hidden",animate:"visible",className:`${f?"lg:col-span-3":"lg:col-span-5"} space-y-4`,children:r.jsx("div",{className:`grid ${f?"grid-cols-1":"md:grid-cols-2"} gap-4`,children:E.map(R=>r.jsx(_U,{opponent:R,onClick:()=>m(R),isSelected:f?.id===R.id},R.id))})}),r.jsx(St,{children:f&&r.jsx("div",{className:"lg:col-span-2",children:r.jsx(jU,{opponent:f,onClose:()=>m(null),onGenerateStrategy:o})})})]})]}),r.jsx(St,{children:u&&r.jsx(EU,{isOpen:u,onClose:()=>h(!1),onSave:V})})]})},TU={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06}}},AU={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.3}}},by=({rating:t,onChange:e,readonly:n=!0,size:s="md"})=>{const[l,o]=k.useState(0),u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(h=>{const f=(l||t)>=h;return r.jsx(F.button,{type:"button",disabled:n,onClick:()=>!n&&e?.(h),onMouseEnter:()=>!n&&o(h),onMouseLeave:()=>o(0),whileHover:n?{}:{scale:1.2},whileTap:n?{}:{scale:.9},className:n?"cursor-default":"cursor-pointer",children:r.jsx(mr,{className:`${u[s]} transition-colors ${f?"text-amber-400 fill-amber-400":"text-slate-700"}`})},h)})})},JE=({label:t,color:e="slate",onRemove:n,onClick:s})=>{const l={slate:"bg-slate-800 text-slate-300 hover:bg-slate-700 border-slate-700",cyan:"bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 border-cyan-500/30",emerald:"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 border-emerald-500/30",purple:"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 border-purple-500/30",amber:"bg-amber-500/10 text-amber-400 hover:bg-amber-500/20 border-amber-500/30",red:"bg-red-500/10 text-red-400 hover:bg-red-500/20 border-red-500/30",blue:"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 border-blue-500/30"};return r.jsxs(F.span,{layout:!0,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},whileHover:{scale:1.05},onClick:s,className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium border ${l[e]} transition-colors cursor-pointer`,children:[r.jsx(ex,{className:"w-3 h-3"}),t,n&&r.jsx("button",{onClick:o=>{o.stopPropagation(),n()},className:"ml-0.5 hover:text-white transition-colors",children:""})]})},CU=({onAdd:t})=>r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-20",children:[r.jsxs("div",{className:"relative inline-block mb-8",children:[r.jsx(F.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:3,repeat:1/0},className:"absolute inset-0 w-32 h-32 rounded-full bg-cyan-500/20 blur-xl"}),r.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.2,.05,.2]},transition:{duration:3,repeat:1/0,delay:.5},className:"absolute inset-0 w-32 h-32 rounded-full bg-blue-500/20 blur-xl"}),r.jsxs(F.div,{animate:{y:[0,-5,0]},transition:{duration:3,repeat:1/0},className:"relative p-6 rounded-3xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-xl shadow-2xl",children:[r.jsx(wl,{className:"w-16 h-16 text-cyan-400"}),r.jsx(F.div,{animate:{rotate:[0,10,0,-10,0]},transition:{duration:4,repeat:1/0},className:"absolute -top-2 -right-2",children:r.jsx(na,{className:"w-6 h-6 text-amber-400"})})]})]}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Build Your Evidence Arsenal"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-8 leading-relaxed",children:"Store your best cards, organize by topic, and access them instantly during rounds. Quality evidence wins debates."}),r.jsxs(F.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:t,className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold text-lg shadow-lg shadow-cyan-500/25 inline-flex items-center gap-3",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Your First Card",r.jsx(Un,{className:"w-5 h-5"})]})]}),kU=({evidence:t,onClick:e,onCopy:n,isExpanded:s})=>{const[l,o]=k.useState(!1),[u,h]=k.useState(!1),f=x=>{x.stopPropagation(),navigator.clipboard.writeText(t.content),o(!0),setTimeout(()=>o(!1),2e3),n?.()},m=["cyan","purple","emerald","amber","blue","red"];return r.jsxs(F.div,{variants:AU,whileHover:{scale:1.01,y:-4},onClick:e,className:"relative group cursor-pointer",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-500/10 via-blue-500/10 to-purple-500/10 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500"}),r.jsxs("div",{className:"relative p-5 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80 backdrop-blur-sm hover:border-slate-700/60 transition-all overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-cyan-500/5 to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsxs("div",{className:"relative flex items-start justify-between gap-3 mb-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-white font-semibold text-lg truncate group-hover:text-cyan-400 transition-colors",children:t.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xf,{className:"w-3.5 h-3.5"}),t.author||"Unknown"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-3.5 h-3.5"}),t.year||"N/A"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(by,{rating:t.quality||3,size:"sm"}),r.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:f,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:l?r.jsx(ka,{className:"w-4 h-4 text-emerald-400"}):r.jsx(vr,{className:"w-4 h-4"})})})]})]}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-full bg-gradient-to-b from-cyan-500 to-blue-600"}),r.jsxs("p",{className:"pl-4 text-slate-400 text-sm line-clamp-3 leading-relaxed italic",children:['"',t.content,'"']})]}),t.source&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sm",children:[r.jsx($f,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-slate-500 truncate",children:t.source})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags?.slice(0,4).map((x,b)=>r.jsx(JE,{label:x,color:m[b%m.length]},x)),t.tags?.length>4&&r.jsxs("span",{className:"text-xs text-slate-500 self-center",children:["+",t.tags.length-4," more"]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-slate-800/50",children:[r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(as,{className:"w-3.5 h-3.5"}),"Used ",t.usageCount||0," times"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Fn,{className:"w-3.5 h-3.5"}),t.lastUsed?new Date(t.lastUsed).toLocaleDateString():"Never"]})]}),t.bookmarked&&r.jsx(e4,{className:"w-4 h-4 text-amber-400"})]}),r.jsx(Un,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-600 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})]})},IU=({evidence:t,format:e="mla"})=>{const[n,s]=k.useState(!1),l=()=>{const{author:u,title:h,source:f,year:m,url:x}=t;switch(e){case"mla":return`${u||"Unknown"}. "${h}." ${f||"N/A"}, ${m||"n.d."}.`;case"apa":return`${u||"Unknown"}. (${m||"n.d."}) ${h}. ${f||"N/A"}.`;case"chicago":return`${u||"Unknown"}. "${h}." ${f||"N/A"} (${m||"n.d."}).`;default:return`${u||"Unknown"} - ${h} (${m||"n.d."})`}},o=()=>{navigator.clipboard.writeText(l()),s(!0),setTimeout(()=>s(!1),2e3)};return r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[r.jsx("p",{className:"text-slate-300 text-sm font-mono",children:l()}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"mt-3 px-4 py-2 rounded-lg bg-slate-700 text-white text-sm font-medium hover:bg-slate-600 transition-colors flex items-center gap-2",children:[n?r.jsx(ka,{className:"w-4 h-4 text-emerald-400"}):r.jsx(vr,{className:"w-4 h-4"}),n?"Copied!":"Copy Citation"]})]})},RU=({evidence:t,isOpen:e,onClose:n,onEdit:s,onDelete:l})=>{const[o,u]=k.useState("mla"),[h,f]=k.useState(!1);if(!e||!t)return null;const m=()=>{navigator.clipboard.writeText(t.content),f(!0),setTimeout(()=>f(!1),2e3)};return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:x=>x.target===x.currentTarget&&n(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-3xl bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-transparent to-blue-500/10"}),r.jsxs("div",{className:"relative flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:t.title}),r.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[r.jsxs("span",{className:"text-slate-400 flex items-center gap-1.5",children:[r.jsx(Xf,{className:"w-4 h-4"}),t.author||"Unknown"]}),r.jsxs("span",{className:"text-slate-400 flex items-center gap-1.5",children:[r.jsx(ci,{className:"w-4 h-4"}),t.year||"N/A"]}),r.jsx(by,{rating:t.quality||3})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(F.button,{whileHover:{scale:1.1},onClick:s,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(Yf,{className:"w-5 h-5"})}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:n,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)] space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[r.jsx(OA,{className:"w-5 h-5 text-cyan-400"}),"Evidence Content"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:m,className:"px-3 py-1.5 rounded-lg bg-slate-800 text-slate-300 text-sm font-medium hover:bg-slate-700 transition-colors flex items-center gap-2",children:[h?r.jsx(ka,{className:"w-4 h-4 text-emerald-400"}):r.jsx(vr,{className:"w-4 h-4"}),h?"Copied!":"Copy"]})]}),r.jsxs("div",{className:"relative p-5 rounded-xl bg-slate-800/30 border border-slate-800/50",children:[r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 rounded-full bg-gradient-to-b from-cyan-500 to-blue-600"}),r.jsx("p",{className:"pl-4 text-slate-300 leading-relaxed whitespace-pre-wrap",children:t.content})]})]}),t.source&&r.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-slate-800/30 border border-slate-800/50",children:[r.jsx($f,{className:"w-5 h-5 text-slate-500"}),r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors flex items-center gap-2",children:[t.source,r.jsx(A4,{className:"w-4 h-4"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(ex,{className:"w-5 h-5 text-purple-400"}),"Tags"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags?.map((x,b)=>r.jsx(JE,{label:x,color:["cyan","purple","emerald","amber","blue"][b%5]},x))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(as,{className:"w-5 h-5 text-amber-400"}),"Citation"]}),r.jsx("div",{className:"flex items-center gap-2 mb-3",children:["mla","apa","chicago"].map(x=>r.jsx("button",{onClick:()=>u(x),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${o===x?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"bg-slate-800 text-slate-400 hover:text-white"}`,children:x.toUpperCase()},x))}),r.jsx(IU,{evidence:t,format:o})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:t.usageCount||0}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Times Used"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:t.quality||0}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Quality Rating"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:t.lastUsed?new Date(t.lastUsed).toLocaleDateString():"Never"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Last Used"})]})]})]})]})})},DU=({isOpen:t,onClose:e,onSave:n})=>{const[s,l]=k.useState({title:"",author:"",year:"",source:"",url:"",content:"",tags:"",quality:3});if(!t)return null;const o=u=>{u.preventDefault(),n({...s,tags:s.tags.split(",").map(h=>h.trim()).filter(Boolean),usageCount:0,createdAt:new Date().toISOString()}),e(),l({title:"",author:"",year:"",source:"",url:"",content:"",tags:"",quality:3})};return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:u=>u.target===u.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-2xl bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-transparent to-blue-500/10"}),r.jsxs("div",{className:"relative flex items-center justify-between",children:[r.jsx("div",{children:r.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-cyan-500/10 border border-cyan-500/30",children:r.jsx(wl,{className:"w-5 h-5 text-cyan-400"})}),"Add Evidence Card"]})}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-140px)]",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Card Title *"}),r.jsx("input",{type:"text",value:s.title,onChange:u=>l({...s,title:u.target.value}),placeholder:"e.g., Climate Change Impact on Economy",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Author"}),r.jsx("input",{type:"text",value:s.author,onChange:u=>l({...s,author:u.target.value}),placeholder:"Author name",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Year"}),r.jsx("input",{type:"text",value:s.year,onChange:u=>l({...s,year:u.target.value}),placeholder:"2024",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Quality"}),r.jsx("div",{className:"pt-2",children:r.jsx(by,{rating:s.quality,onChange:u=>l({...s,quality:u}),readonly:!1})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Source / Publication"}),r.jsx("input",{type:"text",value:s.source,onChange:u=>l({...s,source:u.target.value}),placeholder:"e.g., The New York Times, Nature Journal",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"URL (optional)"}),r.jsx("input",{type:"url",value:s.url,onChange:u=>l({...s,url:u.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Evidence Content *"}),r.jsx("textarea",{value:s.content,onChange:u=>l({...s,content:u.target.value}),placeholder:"Paste your evidence card content here...",rows:5,className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all resize-none",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",value:s.tags,onChange:u=>l({...s,tags:u.target.value}),placeholder:"e.g., climate, economy, impact, 2024",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[r.jsx(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:"Cancel"}),r.jsx(F.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},className:"px-8 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold shadow-lg shadow-cyan-500/25",children:"Add Evidence"})]})]})]})})},MU=({apiKey:t})=>{const{user:e}=In(),{evidence:n,loading:s,saveEvidence:l,deleteEvidence:o}=nU(),[u,h]=k.useState(!1),[f,m]=k.useState(null),[x,b]=k.useState(""),[v,N]=k.useState("all"),[E,V]=k.useState("recent"),R=k.useMemo(()=>{const L=new Set;return n?.forEach(H=>H.tags?.forEach(X=>L.add(X))),Array.from(L)},[n]),z=k.useMemo(()=>{let L=[...n||[]];if(x){const H=x.toLowerCase();L=L.filter(X=>X.title?.toLowerCase().includes(H)||X.content?.toLowerCase().includes(H)||X.author?.toLowerCase().includes(H)||X.tags?.some(se=>se.toLowerCase().includes(H)))}switch(v!=="all"&&(L=L.filter(H=>H.tags?.includes(v))),E){case"recent":L.sort((H,X)=>new Date(X.createdAt)-new Date(H.createdAt));break;case"quality":L.sort((H,X)=>(X.quality||0)-(H.quality||0));break;case"usage":L.sort((H,X)=>(X.usageCount||0)-(H.usageCount||0));break;case"alpha":L.sort((H,X)=>H.title?.localeCompare(X.title));break}return L},[n,x,v,E]);return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(wl,{className:"w-7 h-7 text-cyan-400"})}),"Evidence Library"]}),r.jsxs("p",{className:"text-slate-400 mt-2",children:[n?.length||0," cards  Organize and access your research instantly"]})]}),r.jsxs(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:()=>h(!0),className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Card"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),r.jsx("input",{type:"text",value:x,onChange:L=>b(L.target.value),placeholder:"Search evidence...",className:"w-full pl-12 pr-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[r.jsxs("select",{value:v,onChange:L=>N(L.target.value),className:"px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none transition-all",children:[r.jsx("option",{value:"all",children:"All Tags"}),R.map(L=>r.jsx("option",{value:L,children:L},L))]}),r.jsxs("select",{value:E,onChange:L=>V(L.target.value),className:"px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none transition-all",children:[r.jsx("option",{value:"recent",children:"Most Recent"}),r.jsx("option",{value:"quality",children:"Highest Quality"}),r.jsx("option",{value:"usage",children:"Most Used"}),r.jsx("option",{value:"alpha",children:"Alphabetical"})]})]})]}),s?r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[...Array(4)].map((L,H)=>r.jsx("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-slate-900/30 animate-pulse",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-5 w-3/4 bg-slate-800 rounded"}),r.jsx("div",{className:"h-4 w-1/2 bg-slate-800 rounded"}),r.jsx("div",{className:"h-20 bg-slate-800 rounded"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-6 w-16 bg-slate-800 rounded-full"}),r.jsx("div",{className:"h-6 w-16 bg-slate-800 rounded-full"})]})]})},H))}):z.length===0?r.jsx("div",{className:"p-8 rounded-3xl border border-slate-800/60 bg-gradient-to-b from-slate-900/50 to-slate-950/50",children:n?.length===0?r.jsx(CU,{onAdd:()=>h(!0)}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Oo,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Results Found"}),r.jsx("p",{className:"text-slate-400",children:"Try adjusting your search or filters"})]})}):r.jsx(F.div,{variants:TU,initial:"hidden",animate:"visible",className:"grid md:grid-cols-2 gap-4",children:z.map(L=>r.jsx(kU,{evidence:L,onClick:()=>m(L)},L.id))})]}),r.jsx(St,{children:u&&r.jsx(DU,{isOpen:u,onClose:()=>h(!1),onSave:l})}),r.jsx(St,{children:f&&r.jsx(RU,{evidence:f,isOpen:!!f,onClose:()=>m(null),onEdit:()=>{},onDelete:()=>o(f.id)})})]})},hu=["gemini-2.0-flash-exp","gemini-1.5-flash"];async function OU(t,e,n=[]){for(const s of hu)try{const l=[{text:e}];n.length>0&&n.forEach(h=>{h.base64&&l.push({inline_data:{mime_type:h.mimeType||"image/jpeg",data:h.base64}})});const o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${s}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:l}]})});if(!o.ok){const h=await o.json().catch(()=>({}));if(s===hu[hu.length-1])throw new Error(`Gemini API Error: ${h.error?.message||o.statusText}`);continue}return(await o.json()).candidates?.[0]?.content?.parts?.[0]?.text||""}catch(l){if(s===hu[hu.length-1])throw l}}const PU=({show:t})=>t?r.jsx("div",{className:"fixed inset-0 pointer-events-none z-[60]",children:[...Array(50)].map((e,n)=>r.jsx(F.div,{initial:{opacity:1,y:-20,x:Math.random()*window.innerWidth,rotate:0,scale:1},animate:{opacity:0,y:window.innerHeight+100,rotate:720,scale:.5},transition:{duration:3+Math.random()*2,delay:Math.random()*.5,ease:"easeOut"},className:"absolute",style:{width:10+Math.random()*10,height:10+Math.random()*10,background:["#22d3ee","#a855f7","#f97316","#22c55e","#eab308"][Math.floor(Math.random()*5)],borderRadius:Math.random()>.5?"50%":"2px"}},n))}):null,ZE=({progress:t,size:e=200,strokeWidth:n=8,color:s="cyan",children:l})=>{const o=(e-n)/2,u=o*2*Math.PI,h=u-t/100*u,f={cyan:{stroke:"stroke-cyan-400",glow:"drop-shadow-[0_0_15px_rgba(34,211,238,0.6)]"},purple:{stroke:"stroke-purple-400",glow:"drop-shadow-[0_0_15px_rgba(168,85,247,0.6)]"},orange:{stroke:"stroke-orange-400",glow:"drop-shadow-[0_0_15px_rgba(251,146,60,0.6)]"},emerald:{stroke:"stroke-emerald-400",glow:"drop-shadow-[0_0_15px_rgba(52,211,153,0.6)]"},amber:{stroke:"stroke-amber-400",glow:"drop-shadow-[0_0_15px_rgba(251,191,36,0.6)]"},red:{stroke:"stroke-red-400",glow:"drop-shadow-[0_0_15px_rgba(248,113,113,0.6)]"}},m=f[s]||f.cyan;return r.jsxs("div",{className:"relative",style:{width:e,height:e},children:[r.jsxs("svg",{className:`transform -rotate-90 ${m.glow}`,width:e,height:e,children:[r.jsx("circle",{cx:e/2,cy:e/2,r:o,stroke:"currentColor",strokeWidth:n,fill:"none",className:"text-slate-800/60"}),r.jsx(F.circle,{cx:e/2,cy:e/2,r:o,stroke:"currentColor",strokeWidth:n,fill:"none",strokeLinecap:"round",className:m.stroke,initial:{strokeDashoffset:u},animate:{strokeDashoffset:h},transition:{duration:.5,ease:"easeOut"},style:{strokeDasharray:u}})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l})]})},LU=({isActive:t,color:e="red"})=>r.jsxs("div",{className:"relative flex items-center justify-center",children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(F.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0},className:`absolute w-4 h-4 rounded-full bg-${e}-500`}),r.jsx(F.div,{animate:{scale:[1,2,1],opacity:[.3,0,.3]},transition:{duration:1.5,repeat:1/0,delay:.2},className:`absolute w-4 h-4 rounded-full bg-${e}-500`})]}),r.jsx(F.div,{animate:t?{scale:[1,1.1,1]}:{},transition:{duration:.5,repeat:1/0},className:`w-4 h-4 rounded-full ${t?`bg-${e}-500`:"bg-slate-600"}`})]}),VU=({className:t=""})=>r.jsx("div",{className:`animate-pulse bg-gradient-to-r from-slate-800/50 via-slate-700/50 to-slate-800/50 rounded-xl ${t}`}),zU=({value:t,duration:e=1e3})=>{const[n,s]=k.useState(0);return k.useEffect(()=>{if(typeof t!="number")return;let l;const o=u=>{l||(l=u);const h=Math.min((u-l)/e,1);s(Math.floor(h*t)),h<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},[t,e]),r.jsx("span",{children:n})},Qh=[{id:"timed-response",name:"Timed Response",description:"Practice speaking for set durations",icon:Fn,color:"cyan",gradient:"from-cyan-500/20 to-blue-500/20",borderGlow:"hover:shadow-[0_0_30px_rgba(34,211,238,0.15)]",durations:[30,60,120,180,240]},{id:"refutation",name:"Argument Refutation",description:"Counter arguments under pressure",icon:Gt,color:"purple",gradient:"from-purple-500/20 to-pink-500/20",borderGlow:"hover:shadow-[0_0_30px_rgba(168,85,247,0.15)]",durations:[30,60]},{id:"cross-ex",name:"Cross Examination",description:"Practice CX questions & answers",icon:_l,color:"orange",gradient:"from-orange-500/20 to-amber-500/20",borderGlow:"hover:shadow-[0_0_30px_rgba(251,146,60,0.15)]",durations:[180]},{id:"impromptu",name:"Impromptu Topics",description:"Random topics, minimal prep",icon:e_,color:"emerald",gradient:"from-emerald-500/20 to-teal-500/20",borderGlow:"hover:shadow-[0_0_30px_rgba(52,211,153,0.15)]",durations:[120,180,300]}],UU={"timed-response":["Explain why education funding should be increased","Argue for or against social media regulation","Defend the importance of free speech on college campuses","Explain the benefits of renewable energy investment","Argue for or against universal basic income","Discuss the ethics of artificial intelligence","Defend the role of government in healthcare","Explain why immigration reform is necessary"],refutation:[{claim:"Minimum wage increases cause unemployment",side:"oppose"},{claim:"Climate change is the most pressing issue of our time",side:"oppose"},{claim:"Privacy should be sacrificed for national security",side:"oppose"},{claim:"Standardized testing improves education outcomes",side:"oppose"},{claim:"Social media companies should be liable for user content",side:"oppose"},{claim:"Universal healthcare would bankrupt the economy",side:"oppose"}],"cross-ex":[{topic:"Government surveillance",role:"questioner"},{topic:"Criminal justice reform",role:"questioner"},{topic:"Environmental regulations",role:"questioner"},{topic:"Free trade agreements",role:"answerer"},{topic:"Immigration policy",role:"answerer"}],impromptu:["Technology has made us more connected but less social","The pen is mightier than the sword","History repeats itself","Money can't buy happiness","Actions speak louder than words","The ends justify the means","Knowledge is power"]},FU=({onStart:t})=>r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[r.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-8",children:[r.jsx(F.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-2 border-dashed border-slate-700"}),r.jsx(F.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"absolute inset-4 rounded-full bg-gradient-to-br from-cyan-500/20 to-purple-500/20 border border-cyan-500/30 flex items-center justify-center",children:r.jsx(Gt,{className:"w-12 h-12 text-cyan-400"})}),[0,1,2].map(e=>r.jsx(F.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear",delay:e*1},className:"absolute inset-0",style:{transformOrigin:"center center"},children:r.jsx("div",{className:"absolute w-3 h-3 rounded-full bg-cyan-400",style:{top:0,left:"50%",transform:"translateX(-50%)"}})},e))]}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Ready to Level Up?"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-8 text-lg",children:"Sharpen your skills with timed drills, refutation practice, and cross-examination simulations."}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"group relative px-8 py-4 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-all inline-flex items-center gap-3",children:[r.jsx(yi,{className:"w-5 h-5"}),"Start Your First Drill",r.jsx(F.span,{animate:{x:[0,4,0]},transition:{duration:1,repeat:1/0},children:r.jsx(hf,{className:"w-5 h-5"})})]})]}),Xh=({icon:t,label:e,value:n,color:s,suffix:l=""})=>{const o={cyan:"from-cyan-500/10 via-cyan-500/5 to-transparent border-cyan-500/20",purple:"from-purple-500/10 via-purple-500/5 to-transparent border-purple-500/20",orange:"from-orange-500/10 via-orange-500/5 to-transparent border-orange-500/20",emerald:"from-emerald-500/10 via-emerald-500/5 to-transparent border-emerald-500/20"},u={cyan:"text-cyan-400 bg-cyan-500/10",purple:"text-purple-400 bg-purple-500/10",orange:"text-orange-400 bg-orange-500/10",emerald:"text-emerald-400 bg-emerald-500/10"};return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4,scale:1.02},className:`relative overflow-hidden p-5 rounded-2xl bg-gradient-to-br ${o[s]} border backdrop-blur-sm transition-all duration-300`,children:[r.jsx("div",{className:`absolute -top-10 -right-10 w-32 h-32 rounded-full bg-${s}-500/10 blur-3xl`}),r.jsxs("div",{className:"relative flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-xl ${u[s]}`,children:r.jsx(t,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("p",{className:`text-2xl font-bold text-${s}-400`,children:[typeof n=="number"?r.jsx(zU,{value:n}):n,l]}),r.jsx("p",{className:"text-slate-400 text-sm mt-0.5",children:e})]})]})]})},BU=({drill:t,onSelect:e,index:n})=>{const s=t.icon;return r.jsxs(F.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},whileHover:{y:-8,scale:1.02},whileTap:{scale:.98},onClick:()=>e(t),className:`group relative w-full p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br ${t.gradient} backdrop-blur-sm hover:border-${t.color}-500/50 ${t.borderGlow} transition-all duration-500 text-left overflow-hidden`,children:[r.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:r.jsx(F.div,{animate:{rotate:360},transition:{duration:30,repeat:1/0,ease:"linear"},className:`absolute -top-20 -right-20 w-40 h-40 rounded-full bg-${t.color}-500/10 blur-2xl`})}),r.jsxs("div",{className:"relative",children:[r.jsx(F.div,{whileHover:{rotate:[0,-10,10,0],scale:1.1},transition:{duration:.5},className:`w-16 h-16 rounded-2xl bg-${t.color}-500/10 border border-${t.color}-500/30 flex items-center justify-center mb-5 group-hover:shadow-lg group-hover:shadow-${t.color}-500/20 transition-all`,children:r.jsx(s,{className:`w-8 h-8 text-${t.color}-400`})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-${drill.color}-300 transition-colors",children:t.name}),r.jsx("p",{className:"text-slate-400 text-sm mb-5 line-clamp-2",children:t.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.durations.slice(0,3).map(l=>r.jsx("span",{className:`px-3 py-1.5 rounded-lg bg-slate-800/60 text-slate-300 text-xs font-medium border border-slate-700/50 group-hover:border-${t.color}-500/30 transition-colors`,children:l<60?`${l}s`:`${l/60}m`},l)),t.durations.length>3&&r.jsxs("span",{className:"text-slate-500 text-xs font-medium",children:["+",t.durations.length-3," more"]})]}),r.jsxs(F.div,{initial:{opacity:0,x:-10},whileHover:{opacity:1,x:0},className:`absolute top-6 right-6 flex items-center gap-2 text-${t.color}-400 text-sm font-medium`,children:["Start",r.jsx(Un,{className:"w-4 h-4"})]})]})]})},qU=({drill:t,onSelect:e,onCancel:n})=>{const s=t.icon;return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:`w-full max-w-md bg-gradient-to-br from-slate-900 via-slate-900 to-${t.color}-950/20 border border-slate-800 rounded-3xl shadow-2xl shadow-${t.color}-500/10 p-8`,children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx(F.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:`w-20 h-20 rounded-2xl bg-${t.color}-500/10 border border-${t.color}-500/30 flex items-center justify-center mx-auto mb-5`,children:r.jsx(s,{className:`w-10 h-10 text-${t.color}-400`})}),r.jsx("h2",{className:"text-2xl font-bold text-white",children:t.name}),r.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"How long do you want to practice?"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.durations.map((l,o)=>r.jsxs(F.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+o*.1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(l),className:`group p-5 rounded-2xl bg-slate-800/50 border border-slate-700/50 hover:border-${t.color}-500/50 hover:bg-${t.color}-500/10 transition-all text-center`,children:[r.jsx("span",{className:`text-3xl font-bold text-white group-hover:text-${t.color}-400 transition-colors`,children:l<60?l:l/60}),r.jsx("span",{className:"text-slate-400 text-sm ml-1 block mt-1",children:l<60?"seconds":"minutes"})]},l))}),r.jsx(F.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:n,className:"w-full mt-6 py-4 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all font-medium",children:"Cancel"})]})})},HU=({duration:t,isRunning:e,onComplete:n})=>{const[s,l]=k.useState(t),[o,u]=k.useState(100);k.useEffect(()=>{l(t),u(100)},[t]),k.useEffect(()=>{if(!e||s<=0){s<=0&&n?.();return}const m=setInterval(()=>{l(x=>{const b=x-1;return u(b/t*100),b})},1e3);return()=>clearInterval(m)},[e,s,t,n]);const h=m=>{const x=Math.floor(m/60),b=m%60;return`${x}:${b.toString().padStart(2,"0")}`},f=()=>o>50?"cyan":o>25?"amber":"red";return r.jsx(ZE,{progress:o,size:220,strokeWidth:10,color:f(),children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(F.span,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},className:`text-5xl font-bold tracking-tight text-${f()}-400`,children:h(s)},s),r.jsx("span",{className:"text-slate-500 text-sm mt-1",children:"remaining"})]})})},$U=({score:t,onContinue:e})=>{const s=t>=90?{icon:Kg,color:"amber",message:"Outstanding!",subtitle:"You're a debate champion!"}:t>=80?{icon:Gn,color:"cyan",message:"Excellent!",subtitle:"Top-tier performance!"}:t>=70?{icon:uA,color:"purple",message:"Great Job!",subtitle:"Keep up the momentum!"}:t>=60?{icon:mr,color:"emerald",message:"Good Work!",subtitle:"Room to grow, but solid!"}:{icon:Gt,color:"orange",message:"Keep Practicing!",subtitle:"Every session makes you better!"},l=s.icon;return r.jsxs(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center py-12",children:[r.jsx(F.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:10},className:`w-28 h-28 rounded-full bg-gradient-to-br from-${s.color}-500/20 to-${s.color}-600/10 border-2 border-${s.color}-500/40 mx-auto mb-6 flex items-center justify-center shadow-xl shadow-${s.color}-500/20`,children:r.jsx(l,{className:`w-14 h-14 text-${s.color}-400`})}),r.jsx(F.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-white mb-2",children:s.message}),r.jsx(F.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-slate-400 mb-6",children:s.subtitle}),t&&r.jsxs(F.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5,type:"spring"},className:`inline-flex items-center gap-3 px-6 py-3 rounded-2xl bg-${s.color}-500/10 border border-${s.color}-500/30`,children:[r.jsx(na,{className:`w-5 h-5 text-${s.color}-400`}),r.jsx("span",{className:"text-3xl font-bold text-white",children:t}),r.jsx("span",{className:"text-slate-400",children:"/100"})]}),r.jsx(F.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"block mx-auto mt-8 px-8 py-4 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold shadow-lg shadow-cyan-500/25",children:"Continue"})]})},GU=({drill:t,duration:e,prompt:n,onComplete:s,onCancel:l,apiKey:o})=>{const[u,h]=k.useState("prep"),[f,m]=k.useState(!1),[x,b]=k.useState(!1),[v,N]=k.useState(15),[E,V]=k.useState(null),[R,z]=k.useState(!1),[L,H]=k.useState(""),[X,se]=k.useState(!1),Y=k.useRef(null);k.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const re=window.SpeechRecognition||window.webkitSpeechRecognition;Y.current=new re,Y.current.continuous=!0,Y.current.interimResults=!0,Y.current.onresult=te=>{let q="";for(let Z=te.resultIndex;Z<te.results.length;Z++)te.results[Z].isFinal&&(q+=te.results[Z][0].transcript+" ");q&&H(Z=>Z+q)}}},[]);const I=async()=>{try{b(!0),Y.current&&Y.current.start()}catch(re){console.error("Error starting recording:",re)}},T=()=>{b(!1),Y.current&&Y.current.stop()},M=()=>{h("active"),m(!0),I()},S=async()=>{if(m(!1),T(),h("review"),L&&o){z(!0);try{const re=`Analyze this debate practice response. The drill was: "${n}"

The speaker said:
"${L}"

Duration: ${e} seconds

Provide a brief analysis covering:
1. **Content Quality** (1-10): Were the arguments clear and relevant?
2. **Structure** (1-10): Was there a clear organization?
3. **Delivery Estimate** (1-10): Based on word count and sentence structure
4. **Strengths**: What worked well
5. **Areas to Improve**: Specific suggestions
6. **Overall Score**: X/10

Keep the response concise but actionable.`,te=await OU(re,o);V(te);const q=P(te);q&&q>=70&&(se(!0),setTimeout(()=>se(!1),4e3))}catch(re){console.error("Analysis error:",re)}finally{z(!1)}}},A=()=>{const re=E?P(E):null;re&&re>=80?h("celebration"):s({type:t.id,duration:e,prompt:n,transcript:L,analysis:E,score:re})},P=re=>{const te=re.match(/Overall Score[:\s]*(\d+)/i);return te?parseInt(te[1])*10:null},D=t.icon;return r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 backdrop-blur-xl flex items-center justify-center p-6 overflow-y-auto",children:[r.jsx(PU,{show:X}),r.jsxs("div",{className:"w-full max-w-3xl",children:[r.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl bg-${t.color}-500/10 border border-${t.color}-500/30 flex items-center justify-center`,children:r.jsx(D,{className:`w-5 h-5 text-${t.color}-400`})}),t.name]}),r.jsxs("p",{className:"text-slate-400 mt-1",children:[u==="prep"&&"Prepare your response",u==="active"&&"Speak now!",u==="review"&&"Review your performance",u==="celebration"&&"Congratulations!"]})]}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:"px-4 py-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all border border-transparent hover:border-slate-700",children:"Exit"})]}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-6 rounded-2xl bg-gradient-to-br from-${t.color}-500/10 to-transparent border border-${t.color}-500/20 mb-8`,children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-2 rounded-lg bg-${t.color}-500/10`,children:r.jsx(Nl,{className:`w-5 h-5 text-${t.color}-400`})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-400 mb-2",children:"Your Prompt"}),r.jsx("p",{className:"text-xl text-white font-medium",children:typeof n=="object"?n.claim||n.topic:n}),typeof n=="object"&&n.role&&r.jsxs("span",{className:`inline-block mt-3 px-4 py-2 rounded-xl text-sm font-medium ${n.role==="questioner"?"bg-purple-500/10 text-purple-400 border border-purple-500/30":"bg-cyan-500/10 text-cyan-400 border border-cyan-500/30"}`,children:["Role: ",n.role.charAt(0).toUpperCase()+n.role.slice(1)]})]})]})}),r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[350px]",children:[u==="prep"&&r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[r.jsx(ZE,{progress:100,size:180,color:"cyan",children:r.jsx(F.span,{initial:{scale:1.3,opacity:0},animate:{scale:1,opacity:1},className:"text-6xl font-bold text-cyan-400",children:v},v)}),r.jsx("p",{className:"text-slate-400 mt-4 mb-8 text-lg",children:"seconds to prepare"}),r.jsx("div",{className:"flex items-center gap-4 justify-center",children:r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:M,className:"px-10 py-5 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold text-lg shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all flex items-center gap-3",children:[r.jsx(yi,{className:"w-6 h-6"}),"Start Speaking"]})}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[r.jsx("button",{onClick:()=>N(Math.max(5,v-5)),className:"px-4 py-2 rounded-xl bg-slate-800/50 text-slate-400 hover:text-white transition-colors border border-slate-700/50 hover:border-slate-600",children:"-5s"}),r.jsx("button",{onClick:()=>N(v+5),className:"px-4 py-2 rounded-xl bg-slate-800/50 text-slate-400 hover:text-white transition-colors border border-slate-700/50 hover:border-slate-600",children:"+5s"})]})]}),u==="active"&&r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center w-full",children:[r.jsx(HU,{duration:e,isRunning:f,onComplete:S}),r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex items-center justify-center gap-4 mt-8",children:[r.jsx(LU,{isActive:x}),r.jsx("span",{className:x?"text-red-400 font-medium":"text-slate-500",children:x?"Recording...":"Microphone off"})]}),r.jsxs("div",{className:"flex items-center gap-4 justify-center mt-8",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(!f),className:`px-6 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${f?"bg-amber-500/10 border border-amber-500/30 text-amber-400 hover:bg-amber-500/20":"bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20"}`,children:[f?r.jsx(Gf,{className:"w-5 h-5"}):r.jsx(yi,{className:"w-5 h-5"}),f?"Pause":"Resume"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"px-6 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-800 transition-all flex items-center gap-2",children:[r.jsx(ff,{className:"w-5 h-5"}),"Finish Early"]})]}),L&&r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 p-4 rounded-xl bg-slate-800/30 border border-slate-700/50 max-h-32 overflow-y-auto",children:r.jsx("p",{className:"text-slate-300 text-sm text-left",children:L})})]}),u==="review"&&r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full space-y-6",children:[L&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 rounded-2xl bg-slate-800/30 border border-slate-700/50",children:[r.jsxs("h4",{className:"text-sm font-medium text-slate-400 mb-3 flex items-center gap-2",children:[r.jsx(Ia,{className:"w-4 h-4"}),"Your Response"]}),r.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:L})]}),R?r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-12",children:[r.jsx(F.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 rounded-full border-3 border-cyan-500/30 border-t-cyan-500 mb-4"}),r.jsx("span",{className:"text-slate-400",children:"Analyzing your response with AI..."})]}):E?r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 rounded-2xl bg-gradient-to-br from-emerald-500/10 to-transparent border border-emerald-500/20",children:[r.jsxs("h4",{className:"text-sm font-medium text-emerald-400 mb-3 flex items-center gap-2",children:[r.jsx(Do,{className:"w-4 h-4"}),"AI Analysis"]}),r.jsx("div",{className:"text-slate-300 text-sm whitespace-pre-wrap leading-relaxed",children:E})]}):L?null:r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/50 mx-auto mb-4 flex items-center justify-center",children:r.jsx(fA,{className:"w-8 h-8 text-slate-600"})}),r.jsx("p",{className:"text-slate-400",children:"No speech detected. Make sure your microphone is enabled."})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex items-center justify-center gap-4",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h("prep"),H(""),V(null)},className:"px-6 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-800 transition-all flex items-center gap-2",children:[r.jsx(ku,{className:"w-5 h-5"}),"Try Again"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-all flex items-center gap-2",children:[r.jsx(ff,{className:"w-5 h-5"}),"Save & Exit"]})]})]}),u==="celebration"&&r.jsx($U,{score:E?P(E):null,onContinue:()=>s({type:t.id,duration:e,prompt:n,transcript:L,analysis:E,score:E?P(E):null})})]})]})]})},YU=({session:t,drillType:e,index:n})=>{const s=e.icon,l=o=>o>=80?"emerald":o>=60?"cyan":"amber";return r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:n*.1},whileHover:{x:4},className:`p-4 rounded-xl bg-gradient-to-r from-${e.color}-500/5 to-transparent border border-slate-800/50 hover:border-${e.color}-500/30 flex items-center gap-4 transition-all`,children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-${e.color}-500/10 border border-${e.color}-500/20 flex items-center justify-center`,children:r.jsx(s,{className:`w-6 h-6 text-${e.color}-400`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white font-medium",children:e.name}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),t.duration,"s"]}),r.jsx("span",{className:"text-slate-600",children:""}),r.jsx("span",{className:"text-slate-500 text-sm",children:new Date(t.createdAt?.toDate?.()||t.createdAt).toLocaleDateString()})]})]}),t.score&&r.jsxs("div",{className:`px-4 py-2 rounded-xl bg-${l(t.score)}-500/10 border border-${l(t.score)}-500/20`,children:[r.jsx("span",{className:`text-lg font-bold text-${l(t.score)}-400`,children:t.score}),r.jsx("span",{className:"text-slate-500 text-sm",children:"/100"})]})]})},KU=({apiKey:t})=>{const{sessions:e,stats:n,loading:s,saveSession:l}=sU(),[o,u]=k.useState(null),[h,f]=k.useState(!1),[m,x]=k.useState(null),b=E=>{u(E),f(!0)},v=E=>{f(!1);const V=UU[o.id],R=V[Math.floor(Math.random()*V.length)];x({drill:o,duration:E,prompt:R})},N=async E=>{await l(E),x(null),u(null)};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative",children:[r.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative",children:[r.jsxs("h1",{className:"text-4xl font-bold text-white tracking-tight flex items-center gap-4",children:[r.jsx(F.div,{whileHover:{rotate:180},transition:{duration:.5},className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 flex items-center justify-center",children:r.jsx(Gt,{className:"w-7 h-7 text-cyan-400"})}),"Practice Mode"]}),r.jsx("p",{className:"text-slate-400 mt-2 text-lg",children:"Sharpen your skills with targeted drills and real-time AI feedback"})]})]}),n&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(Xh,{icon:Gt,label:"Total Sessions",value:n.totalSessions,color:"cyan"}),r.jsx(Xh,{icon:Fn,label:"Practice Time",value:Math.round(n.totalTime/60),suffix:"m",color:"purple"}),r.jsx(Xh,{icon:HN,label:"Day Streak",value:n.streak,color:"orange"}),r.jsx(Xh,{icon:mr,label:"Avg Score",value:n.avgScore||"-",color:"emerald"})]}),r.jsxs("div",{children:[r.jsxs(F.h2,{initial:{opacity:0},animate:{opacity:1},className:"text-xl font-bold text-white mb-6 flex items-center gap-3",children:[r.jsx(pf,{className:"w-5 h-5 text-amber-400"}),"Choose Your Drill"]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-5",children:Qh.map((E,V)=>r.jsx(BU,{drill:E,onSelect:b,index:V},E.id))})]}),r.jsxs("div",{children:[r.jsxs(F.h2,{initial:{opacity:0},animate:{opacity:1},className:"text-xl font-bold text-white mb-6 flex items-center gap-3",children:[r.jsx(ss,{className:"w-5 h-5 text-purple-400"}),"Recent Practice"]}),s?r.jsx("div",{className:"space-y-3",children:[1,2,3].map(E=>r.jsx(VU,{className:"h-20"},E))}):e.length===0?r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/50 to-slate-900/30",children:r.jsx(FU,{onStart:()=>b(Qh[0])})}):r.jsx("div",{className:"space-y-3",children:e.slice(0,5).map((E,V)=>{const R=Qh.find(z=>z.id===E.type)||Qh[0];return r.jsx(YU,{session:E,drillType:R,index:V},E.id||V)})})]}),r.jsxs(St,{children:[h&&o&&r.jsx(qU,{drill:o,onSelect:v,onCancel:()=>{f(!1),u(null)}}),m&&r.jsx(GU,{drill:m.drill,duration:m.duration,prompt:m.prompt,apiKey:t,onComplete:N,onCancel:()=>{x(null),u(null)}})]})]})},QU={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},XU={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},WU=({role:t})=>{const e={captain:{label:"Captain",icon:Kg,color:"from-amber-500 to-orange-600",bg:"bg-amber-500/10",border:"border-amber-500/30",text:"text-amber-400"},coach:{label:"Coach",icon:Qu,color:"from-purple-500 to-indigo-600",bg:"bg-purple-500/10",border:"border-purple-500/30",text:"text-purple-400"},varsity:{label:"Varsity",icon:mr,color:"from-cyan-500 to-blue-600",bg:"bg-cyan-500/10",border:"border-cyan-500/30",text:"text-cyan-400"},jv:{label:"JV",icon:Gt,color:"from-emerald-500 to-green-600",bg:"bg-emerald-500/10",border:"border-emerald-500/30",text:"text-emerald-400"},novice:{label:"Novice",icon:na,color:"from-slate-400 to-slate-600",bg:"bg-slate-500/10",border:"border-slate-500/30",text:"text-slate-400"}},n=e[t]||e.novice,s=n.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${n.bg} ${n.border} ${n.text} border`,children:[r.jsx(s,{className:"w-3 h-3"}),n.label]})},JU=({isOnline:t,size:e="sm"})=>{const n={sm:"w-2.5 h-2.5",md:"w-3 h-3",lg:"w-4 h-4"};return r.jsxs("span",{className:`relative flex ${n[e]}`,children:[t&&r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:`relative inline-flex rounded-full ${n[e]} ${t?"bg-emerald-500":"bg-slate-500"}`})]})},eS=({name:t,image:e,size:n="md",showOnline:s,isOnline:l})=>{const o={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-xl"},u=["from-cyan-500 to-blue-600","from-purple-500 to-indigo-600","from-emerald-500 to-green-600","from-amber-500 to-orange-600","from-pink-500 to-rose-600"],h=t?t.charCodeAt(0)%u.length:0,f=t?.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2)||"?";return r.jsxs("div",{className:"relative",children:[e?r.jsx("img",{src:e,alt:t,className:`${o[n]} rounded-xl object-cover ring-2 ring-slate-800`}):r.jsx("div",{className:`${o[n]} rounded-xl bg-gradient-to-br ${u[h]} flex items-center justify-center text-white font-bold shadow-lg`,children:f}),s&&r.jsx("div",{className:"absolute -bottom-0.5 -right-0.5",children:r.jsx(JU,{isOnline:l,size:"sm"})})]})},ZU=({member:t,isCurrentUser:e,onMessage:n,onRemove:s})=>{const[l,o]=k.useState(!1);return r.jsxs(F.div,{variants:XU,whileHover:{scale:1.02,y:-2},className:"relative group",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-500/5 to-purple-500/5 rounded-2xl blur-lg opacity-0 group-hover:opacity-100 transition-all"}),r.jsx("div",{className:"relative p-4 rounded-xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80 hover:border-slate-700/60 transition-all",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(eS,{name:t.name,image:t.avatar,size:"lg",showOnline:!0,isOnline:t.isOnline}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h4",{className:"text-white font-semibold truncate",children:[t.name,e&&r.jsx("span",{className:"text-slate-500 ml-1",children:"(You)"})]}),t.isOnline&&r.jsx("span",{className:"text-xs text-emerald-400",children:"Online"})]}),r.jsx("p",{className:"text-slate-500 text-sm truncate",children:t.email}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(WU,{role:t.role}),t.events?.map(u=>r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-800 text-slate-400",children:u},u))]})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n?.(t),className:"p-2 rounded-lg text-slate-400 hover:text-cyan-400 hover:bg-cyan-500/10 transition-all",children:r.jsx(_l,{className:"w-5 h-5"})}),r.jsxs("div",{className:"relative",children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(!l),className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(E4,{className:"w-5 h-5"})}),l&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-slate-900 border border-slate-800 rounded-xl shadow-xl z-50 py-1",children:[r.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-slate-300 hover:bg-slate-800 flex items-center gap-2",children:[r.jsx(Qg,{className:"w-4 h-4"})," View Profile"]}),r.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-slate-300 hover:bg-slate-800 flex items-center gap-2",children:[r.jsx(Yf,{className:"w-4 h-4"})," Edit Role"]}),!e&&r.jsxs("button",{onClick:()=>s?.(t),className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-2",children:[r.jsx(gC,{className:"w-4 h-4"})," Remove"]})]})]})]})]})]})})]})},eF=({message:t,isOwn:e,senderName:n,senderAvatar:s,timestamp:l})=>r.jsxs(F.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},className:`flex gap-3 ${e?"flex-row-reverse":""}`,children:[r.jsx(eS,{name:n,image:s,size:"sm"}),r.jsxs("div",{className:`max-w-[70%] ${e?"items-end":"items-start"}`,children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${e?"flex-row-reverse":""}`,children:[r.jsx("span",{className:"text-sm font-medium text-slate-300",children:n}),r.jsx("span",{className:"text-xs text-slate-500",children:l})]}),r.jsx("div",{className:`p-3 rounded-2xl ${e?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-br-md":"bg-slate-800 text-slate-200 rounded-bl-md"}`,children:r.jsx("p",{className:"text-sm leading-relaxed",children:t})})]})]}),tF=({teamId:t,members:e})=>{const[n,s]=k.useState([{id:1,sender:"Alex Chen",message:"Ready for the tournament this weekend?",timestamp:"2:30 PM",isOwn:!1},{id:2,sender:"You",message:"Yes! I finished the case outline. Will share it tonight.",timestamp:"2:32 PM",isOwn:!0},{id:3,sender:"Sarah Kim",message:"Perfect! I found some great evidence on the climate topic.",timestamp:"2:35 PM",isOwn:!1},{id:4,sender:"You",message:"Can't wait to see it. Let's do a practice round tomorrow?",timestamp:"2:36 PM",isOwn:!0}]),[l,o]=k.useState(""),u=k.useRef(null),h=()=>{u.current?.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{h()},[n]);const f=()=>{l.trim()&&(s([...n,{id:Date.now(),sender:"You",message:l,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isOwn:!0}]),o(""))};return r.jsxs("div",{className:"flex flex-col h-[500px] rounded-2xl border border-slate-800/60 bg-gradient-to-b from-slate-900/80 to-slate-950/80 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-slate-800 bg-slate-900/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_l,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h3",{className:"text-white font-semibold",children:"Team Chat"}),r.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-400 text-xs",children:[e?.filter(m=>m.isOnline).length||0," online"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(F.button,{whileHover:{scale:1.1},className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(CA,{className:"w-4 h-4"})}),r.jsx(F.button,{whileHover:{scale:1.1},className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(wC,{className:"w-4 h-4"})})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(m=>r.jsx(eF,{message:m.message,isOwn:m.isOwn,senderName:m.sender,timestamp:m.timestamp},m.id)),r.jsx("div",{ref:u})]}),r.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-900/50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(F.button,{whileHover:{scale:1.1},className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(_A,{className:"w-5 h-5"})}),r.jsx("input",{type:"text",value:l,onChange:m=>o(m.target.value),onKeyPress:m=>m.key==="Enter"&&f(),placeholder:"Type a message...",className:"flex-1 px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:!l.trim(),className:"p-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg shadow-cyan-500/25 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Kf,{className:"w-5 h-5"})})]})})]})},nF=({doc:t,onClick:e})=>{const n={case:{icon:as,color:"text-cyan-400",bg:"bg-cyan-500/10"},evidence:{icon:as,color:"text-purple-400",bg:"bg-purple-500/10"},strategy:{icon:Gt,color:"text-amber-400",bg:"bg-amber-500/10"},notes:{icon:as,color:"text-emerald-400",bg:"bg-emerald-500/10"}},s=n[t.type]||n.notes,l=s.icon;return r.jsx(F.div,{whileHover:{scale:1.02,y:-2},onClick:e,className:"p-4 rounded-xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80 hover:border-slate-700/60 transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${s.bg}`,children:r.jsx(l,{className:`w-5 h-5 ${s.color}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-white font-medium truncate group-hover:text-cyan-400 transition-colors",children:t.title}),r.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Updated ",t.updatedAt," by ",t.updatedBy]})]}),r.jsx(Un,{className:"w-5 h-5 text-slate-600 group-hover:text-slate-400 transition-colors"})]})})},rg=({tournament:t})=>{const[e,n]=k.useState([{id:1,text:"Complete Aff case",done:!0},{id:2,text:"Complete Neg blocks",done:!0},{id:3,text:"Update evidence files",done:!1},{id:4,text:"Practice round with team",done:!1},{id:5,text:"Review judge paradigms",done:!1},{id:6,text:"Prepare extension files",done:!1}]),[s,l]=k.useState(""),o=m=>{n(e.map(x=>x.id===m?{...x,done:!x.done}:x))},u=()=>{s.trim()&&(n([...e,{id:Date.now(),text:s,done:!1}]),l(""))},h=e.filter(m=>m.done).length,f=h/e.length*100;return r.jsxs("div",{className:"p-5 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:r.jsx(t_,{className:"w-5 h-5 text-amber-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Tournament Prep"}),r.jsx("p",{className:"text-slate-500 text-sm",children:t||"Next Tournament"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-2xl font-bold text-white",children:[h,"/",e.length]}),r.jsx("p",{className:"text-slate-500 text-xs",children:"tasks complete"})]})]}),r.jsx("div",{className:"h-2 rounded-full bg-slate-800 mb-4 overflow-hidden",children:r.jsx(F.div,{initial:{width:0},animate:{width:`${f}%`},className:"h-full rounded-full bg-gradient-to-r from-cyan-500 to-emerald-500"})}),r.jsx("div",{className:"space-y-2 mb-4 max-h-48 overflow-y-auto",children:e.map(m=>r.jsxs(F.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${m.done?"bg-emerald-500/5":"bg-slate-800/30 hover:bg-slate-800/50"}`,children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(m.id),className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-colors ${m.done?"bg-emerald-500 border-emerald-500":"border-slate-600 hover:border-slate-500"}`,children:m.done&&r.jsx(ka,{className:"w-3 h-3 text-white"})}),r.jsx("span",{className:`flex-1 text-sm ${m.done?"text-slate-500 line-through":"text-slate-300"}`,children:m.text})]},m.id))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:s,onChange:m=>l(m.target.value),onKeyPress:m=>m.key==="Enter"&&u(),placeholder:"Add task...",className:"flex-1 px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-white text-sm placeholder-slate-500 focus:border-cyan-500 outline-none transition-all"}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"p-2 rounded-lg bg-slate-800 text-slate-400 hover:text-white transition-colors",children:r.jsx(vn,{className:"w-4 h-4"})})]})]})},sF=()=>{const{user:t}=In(),{teams:e}=aU(),[n,s]=k.useState("overview"),[l,o]=k.useState(!1),u=e?.[0],h=u?.members||[],f={id:"demo-team",name:"Westwood Debate",members:[{id:1,name:"Alex Chen",email:"alex@school.edu",role:"captain",isOnline:!0,events:["LD","PF"]},{id:2,name:"Sarah Kim",email:"sarah@school.edu",role:"varsity",isOnline:!0,events:["PF"]},{id:3,name:"Mike Johnson",email:"mike@school.edu",role:"varsity",isOnline:!1,events:["LD"]},{id:4,name:"Emma Davis",email:"emma@school.edu",role:"jv",isOnline:!0,events:["PF"]},{id:5,name:"You",email:t?.email||"you@school.edu",role:"varsity",isOnline:!0,events:["LD","PF"]}],documents:[{id:1,title:"Aff Case - Climate Policy",type:"case",updatedAt:"2 hours ago",updatedBy:"Alex"},{id:2,title:"Neg Blocks - Economy",type:"evidence",updatedAt:"1 day ago",updatedBy:"Sarah"},{id:3,title:"Tournament Strategy",type:"strategy",updatedAt:"3 days ago",updatedBy:"Mike"},{id:4,title:"Practice Notes",type:"notes",updatedAt:"1 week ago",updatedBy:"Emma"}]},m=u||f,x=h||f.members,b=[{id:"overview",label:"Overview",icon:Ra},{id:"chat",label:"Chat",icon:_l},{id:"documents",label:"Documents",icon:as},{id:"prep",label:"Prep",icon:t_}];return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(Ra,{className:"w-7 h-7 text-cyan-400"})}),m.name]}),r.jsxs("p",{className:"text-slate-400 mt-2",children:[x.length," members  ",x.filter(v=>v.isOnline).length," online"]})]}),r.jsxs(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:()=>o(!0),className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 flex items-center gap-2",children:[r.jsx(Y1,{className:"w-5 h-5"}),"Invite Member"]})]}),r.jsx("div",{className:"flex items-center gap-2 p-1 rounded-xl bg-slate-900/50 border border-slate-800/50 w-fit",children:b.map(v=>r.jsxs("button",{onClick:()=>s(v.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${n===v.id?"bg-slate-800 text-white":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[r.jsx(v.icon,{className:"w-4 h-4"}),v.label]},v.id))}),r.jsxs(St,{mode:"wait",children:[n==="overview"&&r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-cyan-400"}),"Team Members"]}),r.jsx(F.div,{variants:QU,initial:"hidden",animate:"visible",className:"space-y-3",children:x.map(v=>r.jsx(ZU,{member:v,isCurrentUser:v.name==="You",onMessage:N=>s("chat"),onRemove:()=>console.log("Remove member:",v.id)},v.id))})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-5 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Team Stats"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Win Rate"}),r.jsx("span",{className:"text-white font-bold",children:"68%"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Tournaments"}),r.jsx("span",{className:"text-white font-bold",children:"12"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-400",children:"Trophies"}),r.jsxs("span",{className:"text-white font-bold flex items-center gap-1",children:[r.jsx(Gn,{className:"w-4 h-4 text-amber-400"})," 5"]})]})]})]}),r.jsx(rg,{tournament:"State Championships - Dec 15"})]})]},"overview"),n==="chat"&&r.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:r.jsx(tF,{teamId:m.id,members:x})},"chat"),n==="documents"&&r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[r.jsx(Xg,{className:"w-5 h-5 text-cyan-400"}),"Shared Documents"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg bg-slate-800 text-white text-sm font-medium hover:bg-slate-700 transition-colors flex items-center gap-2",children:[r.jsx(Qf,{className:"w-4 h-4"}),"Upload"]})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:m.documents.map(v=>r.jsx(nF,{doc:v,onClick:()=>{}},v.id))})]},"documents"),n==="prep"&&r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid md:grid-cols-2 gap-6",children:[r.jsx(rg,{tournament:"State Championships - Dec 15"}),r.jsx(rg,{tournament:"National Qualifiers - Jan 20"})]},"prep")]})]}),r.jsx(St,{children:l&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:v=>v.target===v.currentTarget&&o(!1),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Y1,{className:"w-5 h-5 text-cyan-400"}),"Invite Team Member"]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:()=>o(!1),className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",placeholder:"teammate@school.edu",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Role"}),r.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none transition-all",children:[r.jsx("option",{value:"novice",children:"Novice"}),r.jsx("option",{value:"jv",children:"JV"}),r.jsx("option",{value:"varsity",children:"Varsity"})]})]}),r.jsx(F.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},className:"w-full py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold shadow-lg shadow-cyan-500/25",children:"Send Invitation"})]})]})})})]})},aF=({onAdd:t})=>r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"p-4 rounded-full bg-slate-800/50 border border-slate-700/50 mb-6 mx-auto w-fit",children:r.jsx(Gn,{className:"w-12 h-12 text-slate-500"})}),r.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Tournaments Scheduled"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-6",children:"Add upcoming tournaments to track rounds, manage judge preferences, and stay organized."}),r.jsxs("button",{onClick:t,className:"px-6 py-3 rounded-xl bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 font-medium hover:bg-cyan-500/20 transition-all inline-flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Tournament"]})]}),rF=({isOpen:t,onClose:e,onSave:n,tournament:s=null})=>{const[l,o]=k.useState(s||{name:"",date:"",endDate:"",location:"",format:"Public Forum",level:"Local",registrationDeadline:"",notes:"",travelInfo:{flight:"",hotel:"",transportation:""}});if(!t)return null;const u=h=>{h.preventDefault(),n(l),e()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-800",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:s?"Edit Tournament":"Add Tournament"})}),r.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Tournament Name *"}),r.jsx("input",{type:"text",value:l.name,onChange:h=>o({...l,name:h.target.value}),placeholder:"e.g., Harvard National Forensics Tournament",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",value:l.date,onChange:h=>o({...l,date:h.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"End Date"}),r.jsx("input",{type:"date",value:l.endDate,onChange:h=>o({...l,endDate:h.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Location"}),r.jsx("input",{type:"text",value:l.location,onChange:h=>o({...l,location:h.target.value}),placeholder:"City, State",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Registration Deadline"}),r.jsx("input",{type:"date",value:l.registrationDeadline,onChange:h=>o({...l,registrationDeadline:h.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Format"}),r.jsx("select",{value:l.format,onChange:h=>o({...l,format:h.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",children:["Public Forum","Lincoln-Douglas","Policy","Congress","World Schools","Multiple"].map(h=>r.jsx("option",{value:h,children:h},h))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Level"}),r.jsx("select",{value:l.level,onChange:h=>o({...l,level:h.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",children:["Local","Regional","State","National","International"].map(h=>r.jsx("option",{value:h,children:h},h))})]})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-700/50",children:[r.jsxs("h3",{className:"text-sm font-medium text-slate-400 mb-4 flex items-center gap-2",children:[r.jsx(XN,{className:"w-4 h-4"}),"Travel Information (Optional)"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:l.travelInfo.flight,onChange:h=>o({...l,travelInfo:{...l.travelInfo,flight:h.target.value}}),placeholder:"Flight details",className:"w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 text-sm focus:border-cyan-500 outline-none"}),r.jsx("input",{type:"text",value:l.travelInfo.hotel,onChange:h=>o({...l,travelInfo:{...l.travelInfo,hotel:h.target.value}}),placeholder:"Hotel/accommodation",className:"w-full px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 text-sm focus:border-cyan-500 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Notes"}),r.jsx("textarea",{value:l.notes,onChange:h=>o({...l,notes:h.target.value}),placeholder:"Additional notes...",rows:3,className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none resize-none"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[r.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 rounded-xl text-slate-400 hover:text-white transition-colors",children:"Cancel"}),r.jsxs("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-cyan-500 text-white font-medium hover:bg-cyan-400 transition-colors",children:[s?"Update":"Add"," Tournament"]})]})]})]})})},iF=({tournament:t,onEdit:e,onDelete:n,onClick:s})=>{const l=new Date(t.date),o=l>new Date,u=Math.ceil((l-new Date)/(1e3*60*60*24)),h={Local:"bg-slate-500/10 text-slate-400 border-slate-500/30",Regional:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",State:"bg-purple-500/10 text-purple-400 border-purple-500/30",National:"bg-amber-500/10 text-amber-400 border-amber-500/30",International:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30"};return r.jsxs(F.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:s,className:"p-5 rounded-2xl border border-slate-800/60 bg-slate-900/30 hover:border-slate-700/60 transition-all cursor-pointer group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsxs("div",{className:"w-14 h-14 rounded-xl bg-cyan-500/10 border border-cyan-500/20 flex flex-col items-center justify-center",children:[r.jsx("span",{className:"text-xs text-cyan-400 font-medium",children:l.toLocaleString("default",{month:"short"}).toUpperCase()}),r.jsx("span",{className:"text-xl font-bold text-white",children:l.getDate()})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white group-hover:text-cyan-400 transition-colors",children:t.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-slate-400 text-sm",children:[r.jsx(Yu,{className:"w-3 h-3"}),t.location||"TBD"]})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium border ${h[t.level]}`,children:t.level})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[r.jsx(Gn,{className:"w-4 h-4"}),t.format]}),t.rounds?.length>0&&r.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[r.jsx(Gt,{className:"w-4 h-4"}),t.rounds.length," rounds"]})]}),o&&u<=14&&r.jsxs("div",{className:`mt-4 px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${u<=3?"bg-red-500/10 border border-red-500/20 text-red-400":"bg-amber-500/10 border border-amber-500/20 text-amber-400"}`,children:[r.jsx(Ls,{className:"w-4 h-4"}),u===0?"Today!":u===1?"Tomorrow!":`${u} days away`]}),r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-800/50",children:[r.jsx("div",{className:"flex items-center gap-2",children:t.rounds?.length>0?r.jsxs("span",{className:"text-emerald-400 text-sm flex items-center gap-1",children:[r.jsx(ff,{className:"w-4 h-4"}),"Tracking"]}):r.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-1",children:[r.jsx(p4,{className:"w-4 h-4"}),"No rounds yet"]})}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:f=>{f.stopPropagation(),e(t)},className:"p-1.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all",children:r.jsx(Yf,{className:"w-4 h-4"})}),r.jsx("button",{onClick:f=>{f.stopPropagation(),n(t.id)},className:"p-1.5 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 transition-all",children:r.jsx(ia,{className:"w-4 h-4"})})]})]})]})},lF=({tournament:t,onBack:e,onAddRound:n,onUpdateTournament:s})=>{const[l,o]=k.useState(!1),u=t.rounds||[],h=u.filter(m=>m.result==="win").length,f=u.filter(m=>m.result==="loss").length;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800/50 transition-all",children:r.jsx(qN,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:t.name}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ci,{className:"w-4 h-4"}),new Date(t.date).toLocaleDateString()]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Yu,{className:"w-4 h-4"}),t.location||"TBD"]})]})]})]}),r.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2.5 rounded-xl bg-cyan-500 text-white font-medium hover:bg-cyan-400 transition-colors flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Round"]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800/50 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:u.length}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Rounds"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:h}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Wins"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-400",children:f}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Losses"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-cyan-500/10 border border-cyan-500/20 text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-cyan-400",children:[u.length>0?(h/u.length*100).toFixed(0):0,"%"]}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Win Rate"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Round History"}),u.length===0?r.jsxs("div",{className:"text-center py-12 rounded-xl bg-slate-900/30 border border-slate-800/50",children:[r.jsx(Gt,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-400",children:"No rounds recorded yet"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Add your first round to start tracking"})]}):r.jsx("div",{className:"space-y-3",children:u.map((m,x)=>r.jsxs("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800/50 flex items-center gap-4",children:[r.jsx("div",{className:`w-2 h-12 rounded-full ${m.result==="win"?"bg-emerald-500":"bg-red-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-white font-medium",children:m.roundName}),r.jsx("span",{className:"text-slate-500",children:""}),r.jsx("span",{className:"text-slate-400",children:m.side})]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:["vs ",m.opponent||"Unknown"," ",m.opponentSchool&&`(${m.opponentSchool})`]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m.result==="win"?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"}`,children:m.result==="win"?"Win":"Loss"}),m.speakerPoints&&r.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:[m.speakerPoints," speaks"]})]})]},m.id||x))})]}),(t.travelInfo?.flight||t.travelInfo?.hotel)&&r.jsxs("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800/50",children:[r.jsxs("h3",{className:"text-sm font-medium text-slate-400 mb-3 flex items-center gap-2",children:[r.jsx(XN,{className:"w-4 h-4"}),"Travel Information"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[t.travelInfo.flight&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-500",children:"Flight:"}),r.jsx("span",{className:"text-slate-300",children:t.travelInfo.flight})]}),t.travelInfo.hotel&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-500",children:"Hotel:"}),r.jsx("span",{className:"text-slate-300",children:t.travelInfo.hotel})]})]})]}),r.jsx(St,{children:l&&r.jsx(oF,{isOpen:l,onClose:()=>o(!1),onSave:m=>n(t.id,m)})})]})},oF=({isOpen:t,onClose:e,onSave:n})=>{const[s,l]=k.useState({roundName:"Round 1",opponent:"",opponentSchool:"",side:"Pro",result:"win",speakerPoints:"",judge:"",notes:""});if(!t)return null;const o=u=>{u.preventDefault(),n({...s,speakerPoints:s.speakerPoints?parseFloat(s.speakerPoints):null}),e()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"p-6 border-b border-slate-800",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Round"})}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Round"}),r.jsx("select",{value:s.roundName,onChange:u=>l({...s,roundName:u.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",children:["Round 1","Round 2","Round 3","Round 4","Round 5","Round 6","Octofinals","Quarterfinals","Semifinals","Finals"].map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Opponent"}),r.jsx("input",{type:"text",value:s.opponent,onChange:u=>l({...s,opponent:u.target.value}),placeholder:"Name",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"School"}),r.jsx("input",{type:"text",value:s.opponentSchool,onChange:u=>l({...s,opponentSchool:u.target.value}),placeholder:"School",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Side"}),r.jsxs("select",{value:s.side,onChange:u=>l({...s,side:u.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",children:[r.jsx("option",{value:"Pro",children:"Pro"}),r.jsx("option",{value:"Con",children:"Con"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Result"}),r.jsxs("select",{value:s.result,onChange:u=>l({...s,result:u.target.value}),className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white focus:border-cyan-500 outline-none",children:[r.jsx("option",{value:"win",children:"Win"}),r.jsx("option",{value:"loss",children:"Loss"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Speaks"}),r.jsx("input",{type:"number",step:"0.1",value:s.speakerPoints,onChange:u=>l({...s,speakerPoints:u.target.value}),placeholder:"28.5",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Judge"}),r.jsx("input",{type:"text",value:s.judge,onChange:u=>l({...s,judge:u.target.value}),placeholder:"Judge name",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 rounded-xl text-slate-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-cyan-500 text-white font-medium hover:bg-cyan-400 transition-colors",children:"Add Round"})]})]})]})})},cF=({judges:t,onAddJudge:e,onUpdateJudge:n})=>{const[s,l]=k.useState(!1);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[r.jsx(xi,{className:"w-5 h-5 text-cyan-400"}),"Judge Preferences"]}),r.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 rounded-xl bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/20 transition-all flex items-center gap-2 text-sm",children:[r.jsx(vn,{className:"w-4 h-4"}),"Add Judge"]})]}),t.length===0?r.jsxs("div",{className:"text-center py-8 rounded-xl bg-slate-900/30 border border-slate-800/50",children:[r.jsx(xi,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-400",children:"No judges recorded yet"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Track judge preferences to adapt your strategy"})]}):r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.map(o=>r.jsxs("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800/50",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-medium",children:o.name}),r.jsx("p",{className:"text-slate-500 text-sm",children:o.affiliation})]}),r.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(u=>r.jsx(mr,{className:`w-4 h-4 ${u<=o.rating?"text-amber-400 fill-current":"text-slate-700"}`},u))})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[o.paradigm&&r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-slate-500",children:"Paradigm:"}),r.jsx("span",{className:"text-slate-300",children:o.paradigm})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsxs("span",{className:`flex items-center gap-1 text-xs ${o.leansPro?"text-emerald-400":"text-slate-500"}`,children:[r.jsx(lC,{className:"w-3 h-3"}),"Pro"]}),r.jsxs("span",{className:`flex items-center gap-1 text-xs ${o.leansCon?"text-red-400":"text-slate-500"}`,children:[r.jsx(rC,{className:"w-3 h-3"}),"Con"]}),r.jsxs("span",{className:`flex items-center gap-1 text-xs ${!o.leansPro&&!o.leansCon?"text-cyan-400":"text-slate-500"}`,children:[r.jsx(Wg,{className:"w-3 h-3"}),"Neutral"]})]})]})]},o.id))}),r.jsx(St,{children:s&&r.jsx(uF,{isOpen:s,onClose:()=>l(!1),onSave:e})})]})},uF=({isOpen:t,onClose:e,onSave:n})=>{const[s,l]=k.useState({name:"",affiliation:"",paradigm:"",rating:3,leansPro:!1,leansCon:!1,notes:""});if(!t)return null;const o=u=>{u.preventDefault(),n(s),e(),l({name:"",affiliation:"",paradigm:"",rating:3,leansPro:!1,leansCon:!1,notes:""})};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"p-6 border-b border-slate-800",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Judge"})}),r.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Name *"}),r.jsx("input",{type:"text",value:s.name,onChange:u=>l({...s,name:u.target.value}),placeholder:"Judge name",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Affiliation"}),r.jsx("input",{type:"text",value:s.affiliation,onChange:u=>l({...s,affiliation:u.target.value}),placeholder:"School/Organization",className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Rating"}),r.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(u=>r.jsx("button",{type:"button",onClick:()=>l({...s,rating:u}),className:"p-1",children:r.jsx(mr,{className:`w-6 h-6 ${u<=s.rating?"text-amber-400 fill-current":"text-slate-700"}`})},u))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Paradigm"}),r.jsx("textarea",{value:s.paradigm,onChange:u=>l({...s,paradigm:u.target.value}),placeholder:"Judge's preferred arguments, style preferences...",rows:3,className:"w-full px-4 py-2.5 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 outline-none resize-none"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 rounded-xl text-slate-400 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-cyan-500 text-white font-medium hover:bg-cyan-400 transition-colors",children:"Add Judge"})]})]})]})})},dF=({apiKey:t})=>{const{tournaments:e,loading:n,addTournament:s,updateTournament:l,deleteTournament:o,addRound:u}=rU(),{judges:h,addJudge:f,updateJudge:m}=iU(),[x,b]=k.useState(!1),[v,N]=k.useState(null),[E,V]=k.useState(null),[R,z]=k.useState("upcoming"),L=k.useMemo(()=>e.filter(se=>new Date(se.date)>=new Date).sort((se,Y)=>new Date(se.date)-new Date(Y.date)),[e]),H=k.useMemo(()=>e.filter(se=>new Date(se.date)<new Date).sort((se,Y)=>new Date(Y.date)-new Date(se.date)),[e]),X=async se=>{v?(await l(v.id,se),N(null)):await s(se),b(!1)};return E?r.jsx(lF,{tournament:E,onBack:()=>V(null),onAddRound:u,onUpdateTournament:l}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx(Gn,{className:"w-8 h-8 text-cyan-400"}),"Tournaments"]}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Manage your tournament schedule and track rounds"})]}),r.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2.5 rounded-xl bg-cyan-500 text-white font-medium hover:bg-cyan-400 transition-colors flex items-center gap-2",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add Tournament"]})]}),r.jsx("div",{className:"flex items-center gap-2 p-1 bg-slate-900/50 rounded-xl border border-slate-800/50 w-fit",children:[{id:"upcoming",label:`Upcoming (${L.length})`},{id:"past",label:`Past (${H.length})`},{id:"judges",label:`Judges (${h.length})`}].map(se=>r.jsx("button",{onClick:()=>z(se.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${R===se.id?"bg-slate-800 text-white":"text-slate-400 hover:text-white"}`,children:se.label},se.id))}),n?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Jg,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):R==="judges"?r.jsx(cF,{judges:h,onAddJudge:f,onUpdateJudge:m}):r.jsx(r.Fragment,{children:(R==="upcoming"?L:H).length===0?r.jsx("div",{className:"p-8 rounded-2xl border border-slate-800/60 bg-slate-900/30",children:r.jsx(aF,{onAdd:()=>b(!0)})}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:(R==="upcoming"?L:H).map(se=>r.jsx(iF,{tournament:se,onClick:()=>V(se),onEdit:Y=>{N(Y),b(!0)},onDelete:o},se.id))})}),r.jsx(St,{children:x&&r.jsx(rF,{isOpen:x,onClose:()=>{b(!1),N(null)},onSave:X,tournament:v})})]})},Gu={claim:{label:"Claim",color:"from-cyan-500 to-blue-600",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/50",textColor:"text-cyan-400",icon:Gt,description:"Main argument assertion"},evidence:{label:"Evidence",color:"from-emerald-500 to-green-600",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/50",textColor:"text-emerald-400",icon:as,description:"Supporting data or facts"},warrant:{label:"Warrant",color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/50",textColor:"text-purple-400",icon:Nl,description:"Reasoning connecting evidence to claim"},impact:{label:"Impact",color:"from-amber-500 to-orange-600",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/50",textColor:"text-amber-400",icon:ui,description:"Significance or consequence"},response:{label:"Response",color:"from-red-500 to-rose-600",bgColor:"bg-red-500/10",borderColor:"border-red-500/50",textColor:"text-red-400",icon:Qu,description:"Counter-argument or rebuttal"},question:{label:"Question",color:"from-slate-400 to-slate-600",bgColor:"bg-slate-500/10",borderColor:"border-slate-500/50",textColor:"text-slate-400",icon:Yg,description:"Cross-examination point"}},Uf={supports:{label:"Supports",color:"#22c55e",dash:!1},attacks:{label:"Attacks",color:"#ef4444",dash:!1},responds:{label:"Responds",color:"#f59e0b",dash:!0},leads_to:{label:"Leads To",color:"#8b5cf6",dash:!1},questions:{label:"Questions",color:"#64748b",dash:!0}},PN=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,hF=(t,e,n,s)=>{const l=Math.abs(n-t)*.3;return`M ${t} ${e} C ${t+l} ${e}, ${n-l} ${s}, ${n} ${s}`},fF=({node:t,isSelected:e,isDragging:n,onSelect:s,onDragStart:l,onDrag:o,onDragEnd:u,onEdit:h,onDelete:f,onStartConnection:m,onEndConnection:x,isConnecting:b,scale:v})=>{const N=k.useRef(null),[E,V]=k.useState(!1),[R,z]=k.useState({x:0,y:0}),L=Gu[t.type]||Gu.claim,H=L.icon,X=T=>{if(T.button!==0)return;T.stopPropagation();const M=N.current.getBoundingClientRect();z({x:T.clientX-M.left,y:T.clientY-M.top}),V(!0),l?.(t.id),s?.(t.id)},se=k.useCallback(T=>{if(!E)return;const M=(T.clientX-R.x)/v,S=(T.clientY-R.y)/v;o?.(t.id,M,S)},[E,R,v,t.id,o]),Y=k.useCallback(()=>{E&&(V(!1),u?.(t.id))},[E,t.id,u]);k.useEffect(()=>{if(E)return window.addEventListener("mousemove",se),window.addEventListener("mouseup",Y),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",Y)}},[E,se,Y]);const I=(T,M)=>{T.stopPropagation(),b?x?.(t.id):M&&m?.(t.id)};return r.jsxs(F.div,{ref:N,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,boxShadow:e?"0 0 0 2px rgba(6, 182, 212, 0.5), 0 20px 40px rgba(0, 0, 0, 0.3)":"0 10px 30px rgba(0, 0, 0, 0.2)"},style:{position:"absolute",left:t.x,top:t.y,cursor:E?"grabbing":"grab",zIndex:e?100:E?99:10},className:`
        w-64 rounded-xl border backdrop-blur-sm
        ${L.bgColor} ${L.borderColor}
        ${e?"ring-2 ring-cyan-500/50":""}
        transition-shadow duration-200
      `,onMouseDown:X,children:[r.jsx("div",{className:`
          absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full 
          bg-slate-700 border-2 border-slate-500 cursor-crosshair
          hover:bg-cyan-500 hover:border-cyan-400 hover:scale-125
          transition-all duration-200
          ${b?"animate-pulse bg-cyan-500 border-cyan-400":""}
        `,onClick:T=>I(T,!1)}),r.jsx("div",{className:`
          absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full 
          bg-slate-700 border-2 border-slate-500 cursor-crosshair
          hover:bg-emerald-500 hover:border-emerald-400 hover:scale-125
          transition-all duration-200
        `,onClick:T=>I(T,!0)}),r.jsxs("div",{className:`flex items-center gap-2 p-3 border-b ${L.borderColor}`,children:[r.jsx("div",{className:`p-1.5 rounded-lg bg-gradient-to-br ${L.color}`,children:r.jsx(H,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:`text-xs font-semibold ${L.textColor} uppercase tracking-wider`,children:L.label}),r.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[r.jsx("button",{onClick:T=>{T.stopPropagation(),h?.(t)},className:"p-1 rounded hover:bg-slate-700/50 text-slate-400 hover:text-white transition-colors",children:r.jsx(Yf,{className:"w-3.5 h-3.5"})}),r.jsx("button",{onClick:T=>{T.stopPropagation(),f?.(t.id)},className:"p-1 rounded hover:bg-red-500/20 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-3.5 h-3.5"})})]})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("h4",{className:"text-white font-medium text-sm mb-1 line-clamp-2",children:t.title||"Untitled"}),t.content&&r.jsx("p",{className:"text-slate-400 text-xs line-clamp-3",children:t.content})]}),t.source&&r.jsx("div",{className:"px-3 pb-3",children:r.jsxs("p",{className:"text-slate-500 text-[10px] truncate",children:["Source: ",t.source]})})]})},mF=({connection:t,nodes:e,isSelected:n,onSelect:s,onDelete:l})=>{const o=e.find(V=>V.id===t.from),u=e.find(V=>V.id===t.to);if(!o||!u)return null;const h=o.x+256+8,f=o.y+50,m=u.x-8,x=u.y+50,b=Uf[t.type]||Uf.supports,v=hF(h,f,m,x),N=(h+m)/2,E=(f+x)/2;return r.jsxs("g",{className:"cursor-pointer",onClick:()=>s?.(t.id),children:[r.jsx("path",{d:v,fill:"none",stroke:b.color,strokeWidth:n?3:2,strokeDasharray:b.dash?"8 4":"none",className:"transition-all duration-200",style:{filter:n?"drop-shadow(0 0 8px currentColor)":"none"}}),r.jsx("circle",{cx:m,cy:x,r:4,fill:b.color}),r.jsxs("g",{transform:`translate(${N}, ${E})`,children:[r.jsx("rect",{x:-30,y:-10,width:60,height:20,rx:4,fill:"#1e293b",stroke:b.color,strokeWidth:1,opacity:.9}),r.jsx("text",{textAnchor:"middle",dominantBaseline:"middle",fill:b.color,fontSize:10,fontWeight:500,children:b.label})]}),n&&r.jsxs("g",{transform:`translate(${N+40}, ${E})`,onClick:V=>{V.stopPropagation(),l?.(t.id)},className:"cursor-pointer",children:[r.jsx("circle",{r:10,fill:"#ef4444"}),r.jsx("text",{textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:12,children:""})]})]})},pF=({isOpen:t,onClose:e,onAdd:n,editNode:s})=>{const[l,o]=k.useState({type:"claim",title:"",content:"",source:""});if(k.useEffect(()=>{o(s?{type:s.type||"claim",title:s.title||"",content:s.content||"",source:s.source||""}:{type:"claim",title:"",content:"",source:""})},[s,t]),!t)return null;const u=h=>{h.preventDefault(),n(l,s?.id),e()};return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:h=>h.target===h.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-lg bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"relative p-6 border-b border-slate-800",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 via-transparent to-purple-500/10"}),r.jsxs("div",{className:"relative flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(qf,{className:"w-5 h-5 text-cyan-400"})}),s?"Edit Node":"Add Node"]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]})]}),r.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Node Type"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(Gu).map(([h,f])=>{const m=f.icon;return r.jsxs("button",{type:"button",onClick:()=>o({...l,type:h}),className:`
                      p-3 rounded-xl border transition-all text-left
                      ${l.type===h?`${f.bgColor} ${f.borderColor} ${f.textColor}`:"bg-slate-800/30 border-slate-700 text-slate-400 hover:bg-slate-800/50"}
                    `,children:[r.jsx(m,{className:"w-5 h-5 mb-1"}),r.jsx("p",{className:"text-xs font-medium",children:f.label})]},h)})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Title *"}),r.jsx("input",{type:"text",value:l.title,onChange:h=>o({...l,title:h.target.value}),placeholder:"Enter node title...",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Content"}),r.jsx("textarea",{value:l.content,onChange:h=>o({...l,content:h.target.value}),placeholder:"Add details or explanation...",rows:3,className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all resize-none"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400",children:"Source (optional)"}),r.jsx("input",{type:"text",value:l.source,onChange:h=>o({...l,source:h.target.value}),placeholder:"Citation or reference...",className:"w-full px-4 py-3 rounded-xl bg-slate-800/50 border border-slate-700 text-white placeholder-slate-500 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 outline-none transition-all"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-800",children:[r.jsx(F.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:"Cancel"}),r.jsx(F.button,{type:"submit",whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},className:"px-8 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold shadow-lg shadow-cyan-500/25",children:s?"Save Changes":"Add Node"})]})]})]})})},gF=({isOpen:t,onClose:e,onAdd:n,fromNode:s,toNode:l})=>{const[o,u]=k.useState("supports");return t?r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:h=>h.target===h.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx($f,{className:"w-5 h-5 text-cyan-400"}),"Create Connection"]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Connecting ",r.jsx("span",{className:"text-cyan-400 font-medium",children:s?.title})," to"," ",r.jsx("span",{className:"text-emerald-400 font-medium",children:l?.title})]}),r.jsx("div",{className:"space-y-2",children:Object.entries(Uf).map(([h,f])=>r.jsxs("button",{onClick:()=>u(h),className:`
                  w-full p-3 rounded-xl border transition-all flex items-center gap-3
                  ${o===h?"bg-slate-800 border-slate-600":"bg-slate-900/50 border-slate-800 hover:bg-slate-800/50"}
                `,children:[r.jsx("div",{className:"w-8 h-1 rounded-full",style:{backgroundColor:f.color,backgroundImage:f.dash?`repeating-linear-gradient(90deg, ${f.color}, ${f.color} 4px, transparent 4px, transparent 8px)`:"none"}}),r.jsx("span",{className:"text-white font-medium",children:f.label}),o===h&&r.jsx(ka,{className:"w-4 h-4 text-cyan-400 ml-auto"})]},h))})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:"Cancel"}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n(o),e()},className:"px-8 py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold shadow-lg shadow-cyan-500/25",children:"Connect"})]})]})}):null},xF=({scale:t,onZoomIn:e,onZoomOut:n,onResetView:s,onAddNode:l,onExportPNG:o,onExportPDF:u,onSave:h,onLoad:f,tool:m,setTool:x,showGrid:b,setShowGrid:v})=>r.jsxs("div",{className:"absolute top-4 left-4 z-30 flex flex-col gap-2",children:[r.jsxs("div",{className:"p-2 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm flex flex-col gap-1",children:[r.jsx("button",{onClick:()=>x("select"),className:`p-2.5 rounded-lg transition-all ${m==="select"?"bg-cyan-500/20 text-cyan-400":"text-slate-400 hover:text-white hover:bg-slate-800"}`,title:"Select Tool (V)",children:r.jsx(bA,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>x("pan"),className:`p-2.5 rounded-lg transition-all ${m==="pan"?"bg-cyan-500/20 text-cyan-400":"text-slate-400 hover:text-white hover:bg-slate-800"}`,title:"Pan Tool (H)",children:r.jsx(B4,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-2 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm flex flex-col gap-1",children:[r.jsx("button",{onClick:e,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Zoom In (+)",children:r.jsx(IC,{className:"w-5 h-5"})}),r.jsxs("div",{className:"text-center text-xs text-slate-500 py-1",children:[Math.round(t*100),"%"]}),r.jsx("button",{onClick:n,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Zoom Out (-)",children:r.jsx(MC,{className:"w-5 h-5"})}),r.jsx("button",{onClick:s,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Reset View (R)",children:r.jsx(QN,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-2 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm",children:r.jsx("button",{onClick:()=>v(!b),className:`p-2.5 rounded-lg transition-all ${b?"bg-cyan-500/20 text-cyan-400":"text-slate-400 hover:text-white hover:bg-slate-800"}`,title:"Toggle Grid (G)",children:r.jsx($N,{className:"w-5 h-5"})})})]}),yF=({onAddNode:t,onExportPNG:e,onExportPDF:n,onSave:s,onLoad:l,onClear:o})=>r.jsxs("div",{className:"absolute top-4 right-4 z-30 flex flex-col gap-2",children:[r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"p-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg shadow-cyan-500/25",title:"Add Node (N)",children:r.jsx(vn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"p-2 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm flex flex-col gap-1",children:[r.jsx("button",{onClick:s,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Save Flowchart",children:r.jsx(Zg,{className:"w-5 h-5"})}),r.jsx("button",{onClick:l,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Load Flowchart",children:r.jsx(Xg,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-2 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm flex flex-col gap-1",children:[r.jsx("button",{onClick:e,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Export as PNG",children:r.jsx(mf,{className:"w-5 h-5"})}),r.jsx("button",{onClick:n,className:"p-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all",title:"Export as PDF",children:r.jsx(as,{className:"w-5 h-5"})})]}),r.jsx("button",{onClick:o,className:"p-2.5 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 transition-all",title:"Clear Canvas",children:r.jsx(ia,{className:"w-5 h-5"})})]}),bF=()=>r.jsxs("div",{className:"absolute bottom-4 left-4 z-30 p-4 rounded-xl bg-slate-900/90 border border-slate-800 backdrop-blur-sm",children:[r.jsx("h4",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Node Types"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Gu).map(([t,e])=>{const n=e.icon;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded ${e.bgColor}`,children:r.jsx(n,{className:`w-3 h-3 ${e.textColor}`})}),r.jsx("span",{className:"text-xs text-slate-400",children:e.label})]},t)})})]}),vF=({onAddNode:t})=>r.jsx(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsxs("div",{className:"text-center pointer-events-auto",children:[r.jsxs("div",{className:"relative inline-block mb-8",children:[r.jsx(F.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:3,repeat:1/0},className:"absolute inset-0 w-32 h-32 rounded-full bg-cyan-500/20 blur-xl"}),r.jsx(F.div,{animate:{y:[0,-5,0]},transition:{duration:3,repeat:1/0},className:"relative p-6 rounded-3xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 backdrop-blur-xl shadow-2xl",children:r.jsx(qf,{className:"w-16 h-16 text-cyan-400"})})]}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Start Building Your Flow"}),r.jsx("p",{className:"text-slate-400 max-w-md mx-auto mb-8 leading-relaxed",children:"Create argument structures visually. Add claims, evidence, warrants, and connect them to see your case flow."}),r.jsxs(F.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(6, 182, 212, 0.3)"},whileTap:{scale:.98},onClick:t,className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold text-lg shadow-lg shadow-cyan-500/25 inline-flex items-center gap-3",children:[r.jsx(vn,{className:"w-5 h-5"}),"Add First Node",r.jsx(Un,{className:"w-5 h-5"})]})]})}),wF=()=>{const{user:t}=In(),e=k.useRef(null),n=k.useRef(null),[s,l]=k.useState([]),[o,u]=k.useState([]),[h,f]=k.useState(1),[m,x]=k.useState({x:0,y:0}),[b,v]=k.useState("select"),[N,E]=k.useState(!0),[V,R]=k.useState(null),[z,L]=k.useState(null),[H,X]=k.useState(!1),[se,Y]=k.useState(null),[I,T]=k.useState(!1),[M,S]=k.useState(null),[A,P]=k.useState(!1),[D,re]=k.useState(null),[te,q]=k.useState(!1),[Z,ue]=k.useState({x:0,y:0});k.useEffect(()=>{const be=we=>{if(!(we.target.tagName==="INPUT"||we.target.tagName==="TEXTAREA"))switch(we.key.toLowerCase()){case"n":T(!0);break;case"v":v("select");break;case"h":v("pan");break;case"g":E(Te=>!Te);break;case"r":Se();break;case"+":case"=":ye();break;case"-":B();break;case"delete":case"backspace":V?ot(V):z&&wn(z);break;case"escape":X(!1),Y(null),R(null),L(null);break}};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[V,z]);const ye=()=>f(be=>Math.min(be*1.2,3)),B=()=>f(be=>Math.max(be/1.2,.25)),Se=()=>{f(1),x({x:0,y:0})},Oe=be=>{if(be.ctrlKey||be.metaKey){be.preventDefault();const we=be.deltaY>0?.9:1.1;f(Te=>Math.min(Math.max(Te*we,.25),3))}},U=be=>{b==="pan"||be.button===1?(q(!0),ue({x:be.clientX-m.x,y:be.clientY-m.y})):b==="select"&&(be.target===e.current||be.target.tagName==="svg")&&(R(null),L(null),H&&(X(!1),Y(null)))},Ie=be=>{te&&x({x:be.clientX-Z.x,y:be.clientY-Z.y})},Ge=()=>{q(!1)},Ye=(be,we)=>{if(we)l(s.map(Te=>Te.id===we?{...Te,...be}:Te));else{const Te=n.current?.getBoundingClientRect(),Qe={id:PN(),...be,x:(Te?.width/2-128-m.x)/h+Math.random()*100-50,y:(Te?.height/2-50-m.y)/h+Math.random()*100-50};l([...s,Qe])}S(null)},ot=be=>{l(s.filter(we=>we.id!==be)),u(o.filter(we=>we.from!==be&&we.to!==be)),R(null)},vt=(be,we,Te)=>{l(s.map(Qe=>Qe.id===be?{...Qe,x:we,y:Te}:Qe))},gt=be=>{X(!0),Y(be)},fn=be=>{se&&se!==be&&(o.some(Te=>Te.from===se&&Te.to===be||Te.from===be&&Te.to===se)||(re({from:se,to:be}),P(!0))),X(!1),Y(null)},mn=be=>{if(D){const we={id:PN(),from:D.from,to:D.to,type:be};u([...o,we]),re(null)}},wn=be=>{u(o.filter(we=>we.id!==be)),L(null)},me=async()=>{if(e.current)try{const be=document.createElement("canvas"),we=be.getContext("2d");be.width=1920,be.height=1080,we.fillStyle="#0f172a",we.fillRect(0,0,be.width,be.height),s.forEach(Qe=>{const Nn=Gu[Qe.type];we.fillStyle="#1e293b",we.strokeStyle="#334155",we.lineWidth=2,we.beginPath(),we.roundRect(Qe.x,Qe.y,256,100,12),we.fill(),we.stroke(),we.fillStyle="#fff",we.font="14px sans-serif",we.fillText(Qe.title||"Untitled",Qe.x+12,Qe.y+50)}),o.forEach(Qe=>{const Nn=s.find(Ot=>Ot.id===Qe.from),on=s.find(Ot=>Ot.id===Qe.to);if(Nn&&on){const Ot=Uf[Qe.type];we.strokeStyle=Ot.color,we.lineWidth=2,we.beginPath(),we.moveTo(Nn.x+256,Nn.y+50),we.lineTo(on.x,on.y+50),we.stroke()}});const Te=document.createElement("a");Te.download=`argument-flow-${Date.now()}.png`,Te.href=be.toDataURL("image/png"),Te.click()}catch(be){console.error("Export failed:",be),alert("Export failed. Please try again.")}},ge=()=>{window.print()},Ae=()=>{const we=JSON.stringify({nodes:s,connections:o,scale:h,offset:m},null,2),Te=new Blob([we],{type:"application/json"}),Qe=document.createElement("a");Qe.download=`argument-flow-${Date.now()}.json`,Qe.href=URL.createObjectURL(Te),Qe.click()},Fe=()=>{const be=document.createElement("input");be.type="file",be.accept=".json",be.onchange=we=>{const Te=we.target.files[0];if(Te){const Qe=new FileReader;Qe.onload=Nn=>{try{const on=JSON.parse(Nn.target.result);l(on.nodes||[]),u(on.connections||[]),on.scale&&f(on.scale),on.offset&&x(on.offset)}catch(on){console.error("Load failed:",on),alert("Failed to load file. Please check the format.")}},Qe.readAsText(Te)}},be.click()},Kt=()=>{s.length===0&&o.length===0||confirm("Clear all nodes and connections?")&&(l([]),u([]),R(null),L(null))};return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-[calc(100vh-8rem)]",children:[r.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[r.jsx("div",{className:"flex items-start justify-between flex-shrink-0",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(qf,{className:"w-7 h-7 text-cyan-400"})}),"Argument Flowchart"]}),r.jsxs("p",{className:"text-slate-400 mt-2",children:[s.length," nodes  ",o.length," connections"]})]})}),r.jsxs("div",{ref:n,className:"flex-1 relative rounded-2xl border border-slate-800/60 bg-slate-950 overflow-hidden",style:{cursor:b==="pan"?"grab":te?"grabbing":"default"},onMouseDown:U,onMouseMove:Ie,onMouseUp:Ge,onMouseLeave:Ge,onWheel:Oe,children:[N&&r.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:`
                  linear-gradient(rgba(100, 116, 139, 0.3) 1px, transparent 1px),
                  linear-gradient(90deg, rgba(100, 116, 139, 0.3) 1px, transparent 1px)
                `,backgroundSize:`${32*h}px ${32*h}px`,backgroundPosition:`${m.x}px ${m.y}px`}}),r.jsxs("div",{ref:e,className:"absolute inset-0",style:{transform:`translate(${m.x}px, ${m.y}px) scale(${h})`,transformOrigin:"0 0"},children:[r.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{overflow:"visible"},children:[o.map(be=>r.jsx(mF,{connection:be,nodes:s,isSelected:z===be.id,onSelect:we=>{L(we),R(null)},onDelete:wn},be.id)),H&&se&&r.jsx("line",{x1:s.find(be=>be.id===se)?.x+256+8,y1:s.find(be=>be.id===se)?.y+50,x2:(m.x*-1+(n.current?.clientWidth/2||0))/h,y2:(m.y*-1+(n.current?.clientHeight/2||0))/h,stroke:"#06b6d4",strokeWidth:2,strokeDasharray:"8 4",className:"pointer-events-none"})]}),s.map(be=>r.jsx(fF,{node:be,isSelected:V===be.id,onSelect:we=>{R(we),L(null)},onDragStart:()=>{},onDrag:vt,onDragEnd:()=>{},onEdit:we=>{S(we),T(!0)},onDelete:ot,onStartConnection:gt,onEndConnection:fn,isConnecting:H,scale:h},be.id))]}),s.length===0&&r.jsx(vF,{onAddNode:()=>T(!0)}),r.jsx(xF,{scale:h,onZoomIn:ye,onZoomOut:B,onResetView:Se,tool:b,setTool:v,showGrid:N,setShowGrid:E}),r.jsx(yF,{onAddNode:()=>T(!0),onExportPNG:me,onExportPDF:ge,onSave:Ae,onLoad:Fe,onClear:Kt}),r.jsx(bF,{}),H&&r.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 text-sm font-medium flex items-center gap-2",children:[r.jsx($f,{className:"w-4 h-4"}),"Click a node to connect",r.jsx("button",{onClick:()=>{X(!1),Y(null)},className:"ml-2 p-1 rounded hover:bg-cyan-500/20",children:r.jsx(zs,{className:"w-4 h-4"})})]})]})]}),r.jsx(St,{children:I&&r.jsx(pF,{isOpen:I,onClose:()=>{T(!1),S(null)},onAdd:Ye,editNode:M})}),r.jsx(St,{children:A&&D&&r.jsx(gF,{isOpen:A,onClose:()=>{P(!1),re(null)},onAdd:mn,fromNode:s.find(be=>be.id===D.from),toNode:s.find(be=>be.id===D.to)})})]})},NF=["um","uh","like","you know","so","actually","basically","literally","right","okay"],ig={excellent:85,good:70,fair:55},ol={slow:100,normal:150,fast:180,veryFast:200},_F=({analyser:t,isRecording:e,audioData:n})=>{const s=k.useRef(null),l=k.useRef(null);return k.useEffect(()=>{if(!s.current)return;const o=s.current,u=o.getContext("2d"),h=o.width,f=o.height,m=()=>{if(!t){u.fillStyle="#0f172a",u.fillRect(0,0,h,f),u.beginPath(),u.strokeStyle="#334155",u.lineWidth=2,u.moveTo(0,f/2),u.lineTo(h,f/2),u.stroke();return}const x=t.frequencyBinCount,b=new Uint8Array(x);t.getByteTimeDomainData(b),u.fillStyle="#0f172a",u.fillRect(0,0,h,f);const v=u.createLinearGradient(0,0,h,0);v.addColorStop(0,"#06b6d4"),v.addColorStop(.5,"#8b5cf6"),v.addColorStop(1,"#06b6d4"),u.lineWidth=2,u.strokeStyle=e?v:"#475569",u.beginPath();const N=h/x;let E=0;for(let V=0;V<x;V++){const z=b[V]/128*f/2;V===0?u.moveTo(E,z):u.lineTo(E,z),E+=N}u.lineTo(h,f/2),u.stroke(),e&&(u.shadowBlur=10,u.shadowColor="#06b6d4"),l.current=requestAnimationFrame(m)};return m(),()=>{l.current&&cancelAnimationFrame(l.current)}},[t,e]),r.jsx("canvas",{ref:s,width:800,height:150,className:"w-full h-32 rounded-xl border border-slate-800"})},jF=({analyser:t,isRecording:e})=>{const n=k.useRef(null),s=k.useRef(null);return k.useEffect(()=>{if(!n.current)return;const l=n.current,o=l.getContext("2d"),u=l.width,h=l.height,f=()=>{if(!t){o.fillStyle="#0f172a",o.fillRect(0,0,u,h);const E=32,V=u/E-2;for(let R=0;R<E;R++)o.fillStyle="#1e293b",o.fillRect(R*(V+2),h-20,V,20);return}const m=t.frequencyBinCount,x=new Uint8Array(m);t.getByteFrequencyData(x),o.fillStyle="#0f172a",o.fillRect(0,0,u,h);const b=64,v=u/b-2,N=Math.floor(m/b);for(let E=0;E<b;E++){const R=x[E*N]/255*h*.9,z=E/b*60+180;o.fillStyle=e?`hsla(${z}, 80%, 60%, 0.8)`:"#334155";const L=E*(v+2),H=h-R;o.beginPath(),o.roundRect(L,H,v,R,2),o.fill()}s.current=requestAnimationFrame(f)};return f(),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,e]),r.jsx("canvas",{ref:n,width:400,height:120,className:"w-full h-28 rounded-xl border border-slate-800"})},EF=({pitchHistory:t,currentPitch:e})=>{const n=k.useRef(null);return k.useEffect(()=>{if(!n.current)return;const s=n.current,l=s.getContext("2d"),o=s.width,u=s.height;l.fillStyle="#0f172a",l.fillRect(0,0,o,u),l.strokeStyle="#1e293b",l.lineWidth=1;for(let b=0;b<5;b++){const v=u/5*b;l.beginPath(),l.moveTo(0,v),l.lineTo(o,v),l.stroke()}if(l.fillStyle="#64748b",l.font="10px sans-serif",l.fillText("High",5,15),l.fillText("Low",5,u-5),t.length<2)return;const h=l.createLinearGradient(0,0,o,0);h.addColorStop(0,"#06b6d4"),h.addColorStop(1,"#8b5cf6"),l.strokeStyle=h,l.lineWidth=2,l.beginPath();const f=Math.max(...t,300),m=Math.min(...t.filter(b=>b>0),80),x=f-m||1;if(t.forEach((b,v)=>{const N=v/(t.length-1)*o,E=b>0?(b-m)/x:.5,V=u-E*u*.8-u*.1;v===0?l.moveTo(N,V):l.lineTo(N,V)}),l.stroke(),e>0){const b=(e-m)/x,v=u-b*u*.8-u*.1;l.beginPath(),l.arc(o-5,v,4,0,Math.PI*2),l.fillStyle="#06b6d4",l.fill(),l.shadowBlur=10,l.shadowColor="#06b6d4",l.fill()}},[t,e]),r.jsx("canvas",{ref:n,width:300,height:100,className:"w-full h-24 rounded-xl border border-slate-800"})},Wh=({icon:t,label:e,value:n,subValue:s,trend:l,color:o="cyan"})=>{const u={cyan:"from-cyan-500/20 to-cyan-600/20 border-cyan-500/30 text-cyan-400",emerald:"from-emerald-500/20 to-emerald-600/20 border-emerald-500/30 text-emerald-400",purple:"from-purple-500/20 to-purple-600/20 border-purple-500/30 text-purple-400",amber:"from-amber-500/20 to-amber-600/20 border-amber-500/30 text-amber-400",red:"from-red-500/20 to-red-600/20 border-red-500/30 text-red-400"},h=l==="up"?Iu:l==="down"?a_:Wg;return r.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-br ${u[o]} border backdrop-blur-sm`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-400 text-xs font-medium uppercase tracking-wider",children:e}),r.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:n}),s&&r.jsx("p",{className:"text-slate-500 text-xs mt-1",children:s})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[l&&r.jsx(h,{className:`w-4 h-4 ${l==="up"?"text-emerald-400":l==="down"?"text-red-400":"text-slate-400"}`}),r.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${u[o]}`,children:r.jsx(t,{className:"w-5 h-5"})})]})]})})},SF=({word:t,count:e})=>r.jsxs(F.div,{initial:{scale:0},animate:{scale:1},className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-500/10 border border-amber-500/30",children:[r.jsxs("span",{className:"text-amber-400 text-sm font-medium",children:['"',t,'"']}),r.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-amber-500/20 text-amber-300 text-xs font-bold",children:e})]}),TF=({score:t})=>{const e=()=>t>=ig.excellent?{bg:"bg-emerald-500",text:"text-emerald-400",label:"Excellent"}:t>=ig.good?{bg:"bg-cyan-500",text:"text-cyan-400",label:"Good"}:t>=ig.fair?{bg:"bg-amber-500",text:"text-amber-400",label:"Fair"}:{bg:"bg-red-500",text:"text-red-400",label:"Needs Work"},{bg:n,text:s,label:l}=e();return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-400 text-sm",children:"Confidence Score"}),r.jsxs("span",{className:`${s} font-bold`,children:[t,"%"]})]}),r.jsx("div",{className:"h-3 rounded-full bg-slate-800 overflow-hidden",children:r.jsx(F.div,{initial:{width:0},animate:{width:`${t}%`},transition:{duration:1,ease:"easeOut"},className:`h-full rounded-full ${n}`})}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:s,children:l}),r.jsx("span",{className:"text-slate-500",children:"Target: 85%+"})]})]})},AF=({recording:t,onPlay:e,onDelete:n,isPlaying:s})=>{const l=o=>{const u=Math.floor(o/60),h=Math.floor(o%60);return`${u}:${h.toString().padStart(2,"0")}`};return r.jsxs(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-4 p-4 rounded-xl bg-slate-800/30 border border-slate-800/60 hover:border-slate-700/60 transition-all group",children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>e(t),className:`p-3 rounded-xl transition-all ${s?"bg-cyan-500 text-white":"bg-slate-700 text-slate-300 hover:bg-cyan-500 hover:text-white"}`,children:s?r.jsx(Gf,{className:"w-5 h-5"}):r.jsx(yi,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-white font-medium truncate",children:t.name}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Fn,{className:"w-3.5 h-3.5"}),l(t.duration)]}),r.jsx("span",{children:new Date(t.timestamp).toLocaleDateString()})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.confidence>=80?"bg-emerald-500/10 text-emerald-400":t.confidence>=60?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"}`,children:[t.confidence,"%"]})}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(t.id),className:"p-2 rounded-lg text-slate-400 hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(ia,{className:"w-4 h-4"})})]})},CF=()=>r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex p-4 rounded-full bg-slate-800/50 mb-4",children:r.jsx(JN,{className:"w-8 h-8 text-slate-500"})}),r.jsx("p",{className:"text-slate-400",children:"No recordings yet"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Start recording to analyze your speech"})]}),kF=()=>{const{user:t}=In(),[e,n]=k.useState(!1),[s,l]=k.useState(!1),[o,u]=k.useState(0),[h,f]=k.useState(null),[m,x]=k.useState(!1),[b,v]=k.useState(null),[N,E]=k.useState([]),[V,R]=k.useState(0),[z,L]=k.useState(0),[H,X]=k.useState({}),[se,Y]=k.useState(0),[I,T]=k.useState(0),[M,S]=k.useState(0),[A,P]=k.useState([]),D=k.useRef(null),re=k.useRef(null),te=k.useRef(null),q=k.useRef(null),Z=k.useRef([]),ue=k.useRef(null),ye=k.useRef(new Audio),B=k.useCallback(async()=>{try{const me=await navigator.mediaDevices.getUserMedia({audio:!0});return q.current=me,re.current=new(window.AudioContext||window.webkitAudioContext),te.current=re.current.createAnalyser(),te.current.fftSize=2048,te.current.smoothingTimeConstant=.8,re.current.createMediaStreamSource(me).connect(te.current),D.current=new MediaRecorder(me),D.current.ondataavailable=Ae=>{Ae.data.size>0&&Z.current.push(Ae.data)},D.current.onstop=()=>{const Ae=new Blob(Z.current,{type:"audio/webm"});f(Ae),Z.current=[]},!0}catch(me){return console.error("Failed to initialize audio:",me),!1}},[]),Se=k.useCallback(()=>{if(!te.current)return 0;const me=te.current.fftSize,ge=new Float32Array(me);te.current.getFloatTimeDomainData(ge);let Ae=0,Fe=-1;const Kt=re.current?.sampleRate||44100,be=Math.floor(Kt/400),we=Math.floor(Kt/80);for(let Te=be;Te<we;Te++){let Qe=0;for(let Nn=0;Nn<me-Te;Nn++)Qe+=ge[Nn]*ge[Nn+Te];Qe>Ae&&(Ae=Qe,Fe=Te)}return Fe>0&&Ae>.01?Kt/Fe:0},[]),Oe=k.useCallback(()=>{if(!te.current)return 0;const me=te.current.frequencyBinCount,ge=new Uint8Array(me);te.current.getByteFrequencyData(ge);const Ae=ge.reduce((Fe,Kt)=>Fe+Kt,0);return Math.round(Ae/me/255*100)},[]);k.useEffect(()=>{let me;return e&&!s&&(me=setInterval(()=>{const ge=Se();ge>0&&(R(Math.round(ge)),E(Fe=>[...Fe.slice(-100),ge]));const Ae=Oe();if(T(Ae),Ae>20&&(L(Fe=>Math.min(200,Fe+Math.random()*5)),S(Fe=>Fe+(Math.random()>.7?1:0))),Math.random()<.02&&Ae>30){const Fe=NF[Math.floor(Math.random()*3)];X(Kt=>({...Kt,[Fe]:(Kt[Fe]||0)+1}))}},100)),()=>{me&&clearInterval(me)}},[e,s,Se,Oe]),k.useEffect(()=>{const me=Object.values(H).reduce((we,Te)=>we+Te,0),ge=Math.min(30,me*3),Ae=N.length>10?Math.min(20,(Math.max(...N)-Math.min(...N.filter(we=>we>0)))/10):10,Fe=z>=ol.slow&&z<=ol.fast?20:10,be=Math.max(0,Math.min(100,70-ge+Ae+Fe));Y(Math.round(be))},[H,N,z]),k.useEffect(()=>(e&&!s?ue.current=setInterval(()=>{u(me=>me+1)},1e3):ue.current&&clearInterval(ue.current),()=>{ue.current&&clearInterval(ue.current)}),[e,s]);const U=async()=>{if(!await B()){alert("Could not access microphone. Please check permissions.");return}u(0),E([]),X({}),L(0),S(0),Y(0),f(null),D.current?.start(100),n(!0),l(!1)},Ie=()=>{D.current?.stop(),q.current?.getTracks().forEach(me=>me.stop()),n(!1),l(!1)},Ge=()=>{s?D.current?.resume():D.current?.pause(),l(!s)},Ye=()=>{if(!h)return;const me={id:Date.now().toString(),name:`Recording ${A.length+1}`,blob:h,duration:o,timestamp:new Date().toISOString(),confidence:se,fillerWords:{...H},speakingRate:z,wordCount:M};P(ge=>[me,...ge]),f(null),u(0)},ot=me=>{if(b===me.id)ye.current.pause(),x(!1),v(null);else{const ge=URL.createObjectURL(me.blob);ye.current.src=ge,ye.current.play(),x(!0),v(me.id),ye.current.onended=()=>{x(!1),v(null)}}},vt=me=>{P(ge=>ge.filter(Ae=>Ae.id!==me)),b===me&&(ye.current.pause(),x(!1),v(null))},gt=()=>{if(!h)return;const me=URL.createObjectURL(h),ge=document.createElement("a");ge.href=me,ge.download=`voice-recording-${Date.now()}.webm`,ge.click()},fn=me=>{const ge=Math.floor(me/60),Ae=me%60;return`${ge.toString().padStart(2,"0")}:${Ae.toString().padStart(2,"0")}`},mn=()=>z<ol.slow?{label:"Too Slow",color:"text-amber-400"}:z<ol.normal?{label:"Slow",color:"text-cyan-400"}:z<ol.fast?{label:"Normal",color:"text-emerald-400"}:z<ol.veryFast?{label:"Fast",color:"text-amber-400"}:{label:"Too Fast",color:"text-red-400"},wn=Object.values(H).reduce((me,ge)=>me+ge,0);return r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(AC,{className:"w-7 h-7 text-cyan-400"})}),"Voice Analysis"]}),r.jsx("p",{className:"text-slate-400 mt-2",children:"Real-time speech pattern analysis and feedback"})]})}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[r.jsx(Cu,{className:"w-5 h-5 text-cyan-400"}),"Waveform"]}),e&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),r.jsx("span",{className:"text-red-400 text-sm font-medium",children:"Recording"})]})]}),r.jsx(_F,{analyser:te.current,isRecording:e&&!s}),r.jsx("div",{className:"flex items-center justify-center gap-4 mt-6",children:e?r.jsxs(r.Fragment,{children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Ge,className:`p-4 rounded-xl ${s?"bg-emerald-500 text-white":"bg-slate-700 text-white hover:bg-slate-600"}`,children:s?r.jsx(yi,{className:"w-6 h-6"}):r.jsx(Gf,{className:"w-6 h-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white font-mono",children:fn(o)}),r.jsx("p",{className:"text-slate-500 text-sm",children:s?"Paused":"Recording..."})]}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Ie,className:"p-4 rounded-xl bg-red-500 text-white hover:bg-red-600",children:r.jsx(n_,{className:"w-6 h-6"})})]}):r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:U,className:"px-8 py-4 rounded-2xl bg-gradient-to-r from-red-500 to-rose-600 text-white font-semibold text-lg shadow-lg shadow-red-500/25 flex items-center gap-3",children:[r.jsx(Ia,{className:"w-6 h-6"}),"Start Recording"]})}),h&&!e&&r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-4 border-t border-slate-800",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Ye,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium shadow-lg shadow-cyan-500/25 flex items-center gap-2",children:[r.jsx(Zg,{className:"w-4 h-4"}),"Save Recording"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:gt,className:"px-6 py-2.5 rounded-xl bg-slate-700 text-white font-medium hover:bg-slate-600 flex items-center gap-2",children:[r.jsx(Bf,{className:"w-4 h-4"}),"Download"]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl border border-slate-800/60 bg-slate-900/50",children:[r.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[r.jsx(ss,{className:"w-4 h-4 text-purple-400"}),"Frequency Spectrum"]}),r.jsx(jF,{analyser:te.current,isRecording:e&&!s})]}),r.jsxs("div",{className:"p-4 rounded-xl border border-slate-800/60 bg-slate-900/50",children:[r.jsxs("h4",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[r.jsx(Iu,{className:"w-4 h-4 text-cyan-400"}),"Pitch Variation"]}),r.jsx(EF,{pitchHistory:N,currentPitch:V})]})]}),r.jsxs("div",{className:"p-5 rounded-xl border border-slate-800/60 bg-slate-900/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-white font-medium flex items-center gap-2",children:[r.jsx(ui,{className:"w-4 h-4 text-amber-400"}),"Filler Words Detected"]}),r.jsx("span",{className:`text-2xl font-bold ${wn>10?"text-red-400":wn>5?"text-amber-400":"text-emerald-400"}`,children:wn})]}),Object.keys(H).length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(H).map(([me,ge])=>r.jsx(SF,{word:me,count:ge},me))}):r.jsx("p",{className:"text-slate-500 text-sm",children:e?"Listening for filler words...":"No filler words detected"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[r.jsx(pf,{className:"w-5 h-5 text-amber-400"}),"Live Metrics"]}),r.jsx(Wh,{icon:r_,label:"Volume Level",value:`${I}%`,color:"cyan"}),r.jsx(Wh,{icon:Cu,label:"Current Pitch",value:V>0?`${V} Hz`:"",subValue:V>200?"High":V>120?"Normal":"Low",color:"purple"}),r.jsx(Wh,{icon:Fn,label:"Speaking Rate",value:`${Math.round(z)} WPM`,subValue:mn().label,color:z>ol.fast?"amber":"emerald"}),r.jsx(Wh,{icon:MessageSquare,label:"Word Count",value:M,color:"cyan"})]}),r.jsxs("div",{className:"p-5 rounded-xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[r.jsx(na,{className:"w-5 h-5 text-cyan-400"}),"Confidence Analysis"]}),r.jsx(TF,{score:se})]}),r.jsxs("div",{className:"p-5 rounded-xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[r.jsx(JN,{className:"w-5 h-5 text-purple-400"}),"Saved Recordings",A.length>0&&r.jsx("span",{className:"ml-auto px-2 py-0.5 rounded-full bg-slate-800 text-slate-400 text-xs",children:A.length})]}),r.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:A.length>0?A.map(me=>r.jsx(AF,{recording:me,onPlay:ot,onDelete:vt,isPlaying:b===me.id},me.id)):r.jsx(CF,{})})]}),r.jsxs("div",{className:"p-4 rounded-xl border border-cyan-500/20 bg-cyan-500/5",children:[r.jsxs("h4",{className:"text-cyan-400 font-medium mb-2 flex items-center gap-2",children:[r.jsx(Hf,{className:"w-4 h-4"}),"Tips for Better Speech"]}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ka,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),"Aim for 130-160 words per minute"]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ka,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),"Vary your pitch to maintain engagement"]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ka,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),"Pause instead of using filler words"]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ka,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),"Practice breath control for steady volume"]})]})]})]})]})]})})},wo={ld:{name:"Lincoln-Douglas",shortName:"LD",segments:[{name:"AC",fullName:"Affirmative Constructive",time:360,speaker:"aff"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"neg"},{name:"NC",fullName:"Negative Constructive",time:420,speaker:"neg"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"aff"},{name:"1AR",fullName:"First Affirmative Rebuttal",time:240,speaker:"aff"},{name:"NR",fullName:"Negative Rebuttal",time:360,speaker:"neg"},{name:"2AR",fullName:"Second Affirmative Rebuttal",time:180,speaker:"aff"}],prepTime:{aff:240,neg:240}},pf:{name:"Public Forum",shortName:"PF",segments:[{name:"Pro",fullName:"First Pro Speech",time:240,speaker:"pro"},{name:"Con",fullName:"First Con Speech",time:240,speaker:"con"},{name:"CX",fullName:"Crossfire",time:180,speaker:"both"},{name:"Pro",fullName:"Second Pro Speech",time:240,speaker:"pro"},{name:"Con",fullName:"Second Con Speech",time:240,speaker:"con"},{name:"CX",fullName:"Crossfire",time:180,speaker:"both"},{name:"Sum",fullName:"Pro Summary",time:180,speaker:"pro"},{name:"Sum",fullName:"Con Summary",time:180,speaker:"con"},{name:"GCX",fullName:"Grand Crossfire",time:180,speaker:"both"},{name:"FF",fullName:"Pro Final Focus",time:120,speaker:"pro"},{name:"FF",fullName:"Con Final Focus",time:120,speaker:"con"}],prepTime:{pro:120,con:120}},policy:{name:"Policy",shortName:"CX",segments:[{name:"1AC",fullName:"First Affirmative Constructive",time:480,speaker:"aff"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"neg"},{name:"1NC",fullName:"First Negative Constructive",time:480,speaker:"neg"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"aff"},{name:"2AC",fullName:"Second Affirmative Constructive",time:480,speaker:"aff"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"neg"},{name:"2NC",fullName:"Second Negative Constructive",time:480,speaker:"neg"},{name:"CX",fullName:"Cross-Examination",time:180,speaker:"aff"},{name:"1NR",fullName:"First Negative Rebuttal",time:300,speaker:"neg"},{name:"1AR",fullName:"First Affirmative Rebuttal",time:300,speaker:"aff"},{name:"2NR",fullName:"Second Negative Rebuttal",time:300,speaker:"neg"},{name:"2AR",fullName:"Second Affirmative Rebuttal",time:300,speaker:"aff"}],prepTime:{aff:480,neg:480}},parli:{name:"Parliamentary",shortName:"Parli",segments:[{name:"PM",fullName:"Prime Minister Constructive",time:420,speaker:"gov"},{name:"LO",fullName:"Leader of Opposition",time:480,speaker:"opp"},{name:"MG",fullName:"Member of Government",time:480,speaker:"gov"},{name:"MO",fullName:"Member of Opposition",time:480,speaker:"opp"},{name:"LOR",fullName:"Leader of Opposition Rebuttal",time:240,speaker:"opp"},{name:"PMR",fullName:"Prime Minister Rebuttal",time:300,speaker:"gov"}],prepTime:{gov:0,opp:0}},custom:{name:"Custom",shortName:"Custom",segments:[],prepTime:{side1:180,side2:180}}},tS=t=>{const e=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60;return`${t<0?"-":""}${e}:${n.toString().padStart(2,"0")}`},nS=t=>{const e=Math.floor(t/60),n=t%60;return e===0?`${n}s`:n===0?`${e}m`:`${e}m ${n}s`},IF=({progress:t,size:e=300,strokeWidth:n=12,timeRemaining:s,totalTime:l,isRunning:o,isOvertime:u})=>{const h=(e-n)/2,f=h*2*Math.PI,m=f-t/100*f,x=()=>u||t<=10?"#ef4444":t<=25?"#f59e0b":"#06b6d4";return r.jsxs("div",{className:"relative",style:{width:e,height:e},children:[r.jsxs("svg",{className:"absolute transform -rotate-90",width:e,height:e,children:[r.jsx("circle",{cx:e/2,cy:e/2,r:h,fill:"none",stroke:"#1e293b",strokeWidth:n}),r.jsx("circle",{cx:e/2,cy:e/2,r:h,fill:"none",stroke:x(),strokeWidth:n,strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:m,style:{transition:"stroke-dashoffset 0.5s ease, stroke 0.3s ease",filter:o?`drop-shadow(0 0 10px ${x()})`:"none"}})]}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx(F.span,{initial:{scale:1.1},animate:{scale:1},className:`text-5xl font-bold font-mono ${u||t<=10?"text-red-400":t<=25?"text-amber-400":"text-white"}`,children:tS(s)},s),r.jsxs("span",{className:"text-slate-500 text-sm mt-2",children:["of ",nS(l)]}),u&&r.jsxs("span",{className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[r.jsx(ui,{className:"w-3 h-3"}),"OVERTIME"]})]}),o&&r.jsx(F.div,{animate:{scale:[1,1.05,1],opacity:[.5,.2,.5]},transition:{duration:2,repeat:1/0},className:"absolute inset-0 rounded-full border-2",style:{borderColor:x()}})]})},RF=({segment:t,index:e,isActive:n,isCompleted:s,onClick:l})=>{const o=u=>{switch(u){case"aff":case"pro":case"gov":return"bg-cyan-500/10 border-cyan-500/30 text-cyan-400";case"neg":case"con":case"opp":return"bg-red-500/10 border-red-500/30 text-red-400";case"both":return"bg-purple-500/10 border-purple-500/30 text-purple-400";default:return"bg-slate-500/10 border-slate-500/30 text-slate-400"}};return r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,className:`
        relative p-3 rounded-xl border transition-all text-left w-full
        ${n?"bg-cyan-500/20 border-cyan-500/50 ring-2 ring-cyan-500/30":s?"bg-slate-800/30 border-slate-700/50 opacity-60":"bg-slate-800/30 border-slate-800/60 hover:border-slate-700/60"}
      `,children:[n&&r.jsx(F.div,{layoutId:"activeIndicator",className:"absolute left-0 top-0 bottom-0 w-1 bg-cyan-500 rounded-l-xl"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`
          w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold
          ${s?"bg-emerald-500/20 text-emerald-400":"bg-slate-700 text-slate-300"}
        `,children:s?r.jsx(ka,{className:"w-4 h-4"}):e+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`font-semibold ${n?"text-white":"text-slate-300"}`,children:t.name}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs border ${o(t.speaker)}`,children:t.speaker})]}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:t.fullName})]}),r.jsx("span",{className:"text-slate-400 font-mono text-sm",children:nS(t.time)})]})]})},DF=({prepTime:t,usedPrepTime:e,onUsePrep:n,onStopPrep:s,activePrepSide:l})=>{const o=Object.keys(t);return r.jsxs("div",{className:"p-4 rounded-xl border border-slate-800/60 bg-slate-900/50",children:[r.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Fn,{className:"w-4 h-4 text-amber-400"}),"Prep Time"]}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(u=>{const h=t[u]-(e[u]||0),f=l===u,m=h/t[u]*100;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm font-medium capitalize ${u.includes("aff")||u.includes("pro")||u.includes("gov")||u==="side1"?"text-cyan-400":"text-red-400"}`,children:u}),r.jsx("span",{className:"text-white font-mono text-sm",children:tS(h)})]}),r.jsx("div",{className:"h-2 rounded-full bg-slate-800 overflow-hidden",children:r.jsx(F.div,{initial:{width:"100%"},animate:{width:`${m}%`},className:`h-full rounded-full ${m>50?"bg-emerald-500":m>25?"bg-amber-500":"bg-red-500"}`})}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f?s():n(u),disabled:h<=0&&!f,className:`
                  w-full py-2 rounded-lg text-sm font-medium transition-all
                  ${f?"bg-amber-500 text-white":h<=0?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-slate-700 text-white hover:bg-slate-600"}
                `,children:f?"Stop Prep":"Use Prep"})]},u)})})]})},MF=({isOpen:t,onClose:e})=>{if(!t)return null;const n=[{key:"Space",action:"Play / Pause timer"},{key:"R",action:"Reset current segment"},{key:"",action:"Previous segment"},{key:"",action:"Next segment"},{key:"M",action:"Toggle sound"},{key:"F",action:"Toggle fullscreen"},{key:"1-9",action:"Jump to segment"},{key:"P",action:"Use prep time (cycles sides)"},{key:"Esc",action:"Close modals / Exit fullscreen"}];return r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:s=>s.target===s.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(YN,{className:"w-5 h-5 text-cyan-400"}),"Keyboard Shortcuts"]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-2",children:n.map(({key:s,action:l})=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/30",children:[r.jsx("span",{className:"text-slate-300",children:l}),r.jsx("kbd",{className:"px-3 py-1.5 rounded-lg bg-slate-700 text-white text-sm font-mono border border-slate-600",children:s})]},s))})]})})},OF=({isOpen:t,onClose:e,settings:n,onSettingsChange:s})=>t?r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4",onClick:l=>l.target===l.currentTarget&&e(),children:r.jsxs(F.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl shadow-2xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Ku,{className:"w-5 h-5 text-cyan-400"}),"Timer Settings"]}),r.jsx(F.button,{whileHover:{scale:1.1,rotate:90},onClick:e,className:"p-2 rounded-xl text-slate-400 hover:text-white hover:bg-slate-800 transition-all",children:r.jsx(zs,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{children:r.jsxs("label",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-300",children:"Sound Alerts"}),r.jsx("button",{onClick:()=>s({...n,soundEnabled:!n.soundEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.soundEnabled?"bg-cyan-500":"bg-slate-700"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${n.soundEnabled?"left-7":"left-1"}`})})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Alert at (seconds remaining)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:[120,60,30,10,0].map(l=>r.jsx("button",{onClick:()=>{const o=n.alertTimes.includes(l)?n.alertTimes.filter(u=>u!==l):[...n.alertTimes,l].sort((u,h)=>h-u);s({...n,alertTimes:o})},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${n.alertTimes.includes(l)?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"bg-slate-800 text-slate-400 hover:text-white"}`,children:l===0?"End":`${l}s`},l))})]}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-300",children:"Allow Overtime"}),r.jsx("button",{onClick:()=>s({...n,allowOvertime:!n.allowOvertime}),className:`relative w-12 h-6 rounded-full transition-colors ${n.allowOvertime?"bg-cyan-500":"bg-slate-700"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${n.allowOvertime?"left-7":"left-1"}`})})]})}),r.jsx("div",{children:r.jsxs("label",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-slate-300",children:"Auto-advance to next segment"}),r.jsx("button",{onClick:()=>s({...n,autoAdvance:!n.autoAdvance}),className:`relative w-12 h-6 rounded-full transition-colors ${n.autoAdvance?"bg-cyan-500":"bg-slate-700"}`,children:r.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ${n.autoAdvance?"left-7":"left-1"}`})})]})})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-slate-800",children:r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"w-full py-3 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-semibold",children:"Done"})})]})}):null,PF=()=>{const{user:t}=In(),[e,n]=k.useState("pf"),[s,l]=k.useState(wo.pf.segments),[o,u]=k.useState(wo.pf.prepTime),[h,f]=k.useState(0),[m,x]=k.useState(wo.pf.segments[0]?.time||0),[b,v]=k.useState(!1),[N,E]=k.useState([]),[V,R]=k.useState({}),[z,L]=k.useState(null),[H,X]=k.useState({soundEnabled:!0,alertTimes:[60,30,10,0],allowOvertime:!0,autoAdvance:!1}),[se,Y]=k.useState(!1),[I,T]=k.useState(!1),[M,S]=k.useState(!1),[A,P]=k.useState(null),D=k.useRef(null),re=k.useRef(null),te=k.useRef(null),q=s[h],Z=q?.time||0,ue=Z>0?Math.max(0,m/Z*100):0,ye=m<0,B=k.useCallback(()=>(re.current||(re.current=new(window.AudioContext||window.webkitAudioContext)),re.current),[]),Se=k.useCallback((me="beep")=>{if(H.soundEnabled)try{const ge=B(),Ae=ge.createOscillator(),Fe=ge.createGain();switch(Ae.connect(Fe),Fe.connect(ge.destination),me){case"warning":Ae.frequency.value=880,Ae.type="sine",Fe.gain.value=.3;break;case"final":Ae.frequency.value=440,Ae.type="square",Fe.gain.value=.4;break;case"end":Ae.frequency.value=660,Ae.type="sawtooth",Fe.gain.value=.5;break;default:Ae.frequency.value=660,Ae.type="sine",Fe.gain.value=.3}Ae.start(),Fe.gain.exponentialRampToValueAtTime(.01,ge.currentTime+.3),Ae.stop(ge.currentTime+.3)}catch(ge){console.error("Audio error:",ge)}},[H.soundEnabled,B]);k.useEffect(()=>(b&&(D.current=setInterval(()=>{x(me=>{const ge=me-1;return H.alertTimes.includes(ge)&&ge!==A&&(P(ge),ge===0?Se("end"):ge<=10?Se("final"):Se("warning")),ge<=0&&!H.allowOvertime?(v(!1),H.autoAdvance&&h<s.length-1&&setTimeout(()=>Ge(),500),0):ge})},1e3)),()=>{D.current&&clearInterval(D.current)}),[b,H,h,s.length,A,Se]),k.useEffect(()=>{let me;return z&&(me=setInterval(()=>{R(ge=>{const Ae=(ge[z]||0)+1;return Ae>=o[z]?(L(null),Se("end"),{...ge,[z]:o[z]}):{...ge,[z]:Ae}})},1e3)),()=>{me&&clearInterval(me)}},[z,o,Se]),k.useEffect(()=>{const me=ge=>{if(!(ge.target.tagName==="INPUT"||ge.target.tagName==="TEXTAREA"))switch(ge.key.toLowerCase()){case" ":ge.preventDefault(),v(Fe=>!Fe);break;case"r":Ie();break;case"arrowleft":Ye();break;case"arrowright":Ge();break;case"m":X(Fe=>({...Fe,soundEnabled:!Fe.soundEnabled}));break;case"f":mn();break;case"p":fn();break;case"escape":M&&document.exitFullscreen?.(),Y(!1),T(!1);break;default:const Ae=parseInt(ge.key);Ae>=1&&Ae<=s.length&&ot(Ae-1)}};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[s.length,M]);const Oe=me=>{const ge=wo[me];n(me),l(ge.segments),u(ge.prepTime),f(0),x(ge.segments[0]?.time||0),v(!1),E([]),R({}),L(null)},U=()=>v(me=>!me),Ie=()=>{x(q?.time||0),v(!1),P(null)},Ge=()=>{h<s.length-1&&(E(me=>[...me,h]),f(me=>me+1),x(s[h+1]?.time||0),v(!1),P(null))},Ye=()=>{h>0&&(E(me=>me.filter(ge=>ge!==h-1)),f(me=>me-1),x(s[h-1]?.time||0),v(!1),P(null))},ot=me=>{me>=0&&me<s.length&&(f(me),x(s[me]?.time||0),v(!1),P(null),E(Array.from({length:me},(ge,Ae)=>Ae)))},vt=me=>{v(!1),L(me)},gt=()=>{L(null)},fn=()=>{const me=Object.keys(o);if(z)L(null);else{const ge=me.indexOf(z),Ae=me[(ge+1)%me.length];o[Ae]-(V[Ae]||0)>0&&(L(Ae),v(!1))}},mn=()=>{document.fullscreenElement?(document.exitFullscreen(),S(!1)):(te.current?.requestFullscreen(),S(!0))};k.useEffect(()=>{const me=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",me),()=>document.removeEventListener("fullscreenchange",me)},[]);const wn=()=>{f(0),x(s[0]?.time||0),v(!1),E([]),R({}),L(null),P(null)};return r.jsxs(F.div,{ref:te,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${M?"fixed inset-0 z-50 bg-slate-950 p-8":""}`,children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 border border-cyan-500/30",children:r.jsx(s_,{className:"w-7 h-7 text-cyan-400"})}),"Debate Timer"]}),r.jsxs("p",{className:"text-slate-400 mt-2",children:[wo[e].name," Format"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T(!0),className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white transition-all",title:"Keyboard Shortcuts",children:r.jsx(YN,{className:"w-5 h-5"})}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>X(me=>({...me,soundEnabled:!me.soundEnabled})),className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white transition-all",title:H.soundEnabled?"Mute":"Unmute",children:H.soundEnabled?r.jsx(r_,{className:"w-5 h-5"}):r.jsx(jC,{className:"w-5 h-5"})}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:mn,className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white transition-all",title:"Toggle Fullscreen",children:M?r.jsx(gA,{className:"w-5 h-5"}):r.jsx(QN,{className:"w-5 h-5"})}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Y(!0),className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white transition-all",title:"Settings",children:r.jsx(Ku,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:Object.entries(wo).filter(([me])=>me!=="custom").map(([me,ge])=>r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Oe(me),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${e===me?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"bg-slate-800 text-slate-400 hover:text-white border border-slate-700"}`,children:ge.shortName},me))}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"p-8 rounded-2xl border border-slate-800/60 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:q?.fullName||"No Segment"}),r.jsxs("p",{className:"text-slate-400 mt-1",children:["Segment ",h+1," of ",s.length]})]}),r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx(IF,{progress:ue,size:280,strokeWidth:14,timeRemaining:m,totalTime:Z,isRunning:b,isOvertime:ye})}),r.jsxs("div",{className:"flex items-center justify-center gap-4",children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Ye,disabled:h===0,className:"p-3 rounded-xl bg-slate-700 text-white disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-600 transition-all",children:r.jsx(qN,{className:"w-6 h-6"})}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Ie,className:"p-3 rounded-xl bg-slate-700 text-white hover:bg-slate-600 transition-all",children:r.jsx(ku,{className:"w-6 h-6"})}),r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:U,className:`p-5 rounded-2xl shadow-lg transition-all ${b?"bg-amber-500 hover:bg-amber-600 shadow-amber-500/25":"bg-gradient-to-r from-cyan-500 to-blue-600 shadow-cyan-500/25"}`,children:b?r.jsx(Gf,{className:"w-8 h-8 text-white"}):r.jsx(yi,{className:"w-8 h-8 text-white"})}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:wn,className:"p-3 rounded-xl bg-slate-700 text-white hover:bg-slate-600 transition-all",title:"Reset All",children:r.jsx(ku,{className:"w-6 h-6"})}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Ge,disabled:h===s.length-1,className:"p-3 rounded-xl bg-slate-700 text-white disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-600 transition-all",children:r.jsx(Un,{className:"w-6 h-6"})})]}),r.jsxs("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Press ",r.jsx("kbd",{className:"px-2 py-1 rounded bg-slate-800 text-slate-300 font-mono",children:"Space"})," to start/stop"]})]}),Object.keys(o).length>0&&o[Object.keys(o)[0]]>0&&r.jsx("div",{className:"mt-6",children:r.jsx(DF,{prepTime:o,usedPrepTime:V,onUsePrep:vt,onStopPrep:gt,activePrepSide:z})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[r.jsx(_l,{className:"w-5 h-5 text-cyan-400"}),"Speech Segments"]}),r.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:s.map((me,ge)=>r.jsx(RF,{segment:me,index:ge,isActive:ge===h,isCompleted:N.includes(ge),onClick:()=>ot(ge)},ge))}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-800/30 border border-slate-800/60",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-slate-400 text-sm",children:"Progress"}),r.jsxs("span",{className:"text-white font-medium",children:[N.length," / ",s.length]})]}),r.jsx("div",{className:"h-2 rounded-full bg-slate-800 overflow-hidden",children:r.jsx(F.div,{initial:{width:0},animate:{width:`${N.length/s.length*100}%`},className:"h-full rounded-full bg-gradient-to-r from-cyan-500 to-emerald-500"})})]})]})]})]}),r.jsx(St,{children:se&&r.jsx(OF,{isOpen:se,onClose:()=>Y(!1),settings:H,onSettingsChange:X})}),r.jsx(St,{children:I&&r.jsx(MF,{isOpen:I,onClose:()=>T(!1)})})]})},LN={policy_1ac:{name:"Policy 1AC",format:"Policy",totalTime:480,sections:[{id:"inherency",type:"contention",title:"Inherency",timeAllocation:60,collapsed:!1,notes:"",subPoints:[{id:"inh-a",type:"subpoint",title:"Current System Fails",timeAllocation:30,notes:"",evidence:[{id:"inh-ev1",tag:"Status quo inadequate",source:"",notes:""}]},{id:"inh-b",type:"subpoint",title:"No Change Coming",timeAllocation:30,notes:"",evidence:[{id:"inh-ev2",tag:"No political will",source:"",notes:""}]}]},{id:"plan",type:"contention",title:"Plan Text",timeAllocation:30,collapsed:!1,notes:"Read slowly and clearly",subPoints:[]},{id:"solvency",type:"contention",title:"Solvency",timeAllocation:120,collapsed:!1,notes:"",subPoints:[{id:"solv-a",type:"subpoint",title:"Plan Solves the Problem",timeAllocation:60,notes:"",evidence:[{id:"solv-ev1",tag:"Expert analysis",source:"",notes:""},{id:"solv-ev2",tag:"Historical precedent",source:"",notes:""}]},{id:"solv-b",type:"subpoint",title:"Implementation Feasible",timeAllocation:60,notes:"",evidence:[{id:"solv-ev3",tag:"Resources available",source:"",notes:""}]}]},{id:"adv1",type:"contention",title:"Advantage 1: [Title]",timeAllocation:135,collapsed:!1,notes:"",subPoints:[{id:"adv1-a",type:"subpoint",title:"Link",timeAllocation:45,notes:"",evidence:[{id:"adv1-ev1",tag:"Problem exists",source:"",notes:""}]},{id:"adv1-b",type:"subpoint",title:"Internal Link",timeAllocation:30,notes:"",evidence:[{id:"adv1-ev2",tag:"Escalation scenario",source:"",notes:""}]},{id:"adv1-c",type:"subpoint",title:"Impact",timeAllocation:60,notes:"",evidence:[{id:"adv1-ev3",tag:"Magnitude/scope",source:"",notes:""},{id:"adv1-ev4",tag:"Timeframe",source:"",notes:""}]}]},{id:"adv2",type:"contention",title:"Advantage 2: [Title]",timeAllocation:135,collapsed:!1,notes:"",subPoints:[{id:"adv2-a",type:"subpoint",title:"Link",timeAllocation:45,notes:"",evidence:[]},{id:"adv2-b",type:"subpoint",title:"Internal Link",timeAllocation:30,notes:"",evidence:[]},{id:"adv2-c",type:"subpoint",title:"Impact",timeAllocation:60,notes:"",evidence:[]}]}]},ld_aff:{name:"LD Affirmative Case",format:"Lincoln Douglas",totalTime:360,sections:[{id:"intro",type:"contention",title:"Introduction",timeAllocation:30,collapsed:!1,notes:"Hook the judge",subPoints:[]},{id:"resolution",type:"contention",title:"Resolution & Definitions",timeAllocation:30,collapsed:!1,notes:"",subPoints:[{id:"def-a",type:"subpoint",title:"Key Terms",timeAllocation:15,notes:"",evidence:[]},{id:"def-b",type:"subpoint",title:"Framework/Standard",timeAllocation:15,notes:"",evidence:[]}]},{id:"value",type:"contention",title:"Value Premise",timeAllocation:45,collapsed:!1,notes:"",subPoints:[{id:"val-a",type:"subpoint",title:"Value Statement",timeAllocation:20,notes:"",evidence:[]},{id:"val-b",type:"subpoint",title:"Value Justification",timeAllocation:25,notes:"",evidence:[]}]},{id:"criterion",type:"contention",title:"Value Criterion",timeAllocation:45,collapsed:!1,notes:"",subPoints:[{id:"crit-a",type:"subpoint",title:"Criterion Statement",timeAllocation:15,notes:"",evidence:[]},{id:"crit-b",type:"subpoint",title:"Link to Value",timeAllocation:30,notes:"",evidence:[]}]},{id:"cont1",type:"contention",title:"Contention 1",timeAllocation:90,collapsed:!1,notes:"",subPoints:[{id:"c1-a",type:"subpoint",title:"Claim",timeAllocation:30,notes:"",evidence:[]},{id:"c1-b",type:"subpoint",title:"Warrant",timeAllocation:30,notes:"",evidence:[]},{id:"c1-c",type:"subpoint",title:"Impact to Criterion",timeAllocation:30,notes:"",evidence:[]}]},{id:"cont2",type:"contention",title:"Contention 2",timeAllocation:90,collapsed:!1,notes:"",subPoints:[{id:"c2-a",type:"subpoint",title:"Claim",timeAllocation:30,notes:"",evidence:[]},{id:"c2-b",type:"subpoint",title:"Warrant",timeAllocation:30,notes:"",evidence:[]},{id:"c2-c",type:"subpoint",title:"Impact to Criterion",timeAllocation:30,notes:"",evidence:[]}]},{id:"conclusion",type:"contention",title:"Conclusion",timeAllocation:30,collapsed:!1,notes:"Restate value and criterion",subPoints:[]}]},pf_case:{name:"Public Forum Case",format:"Public Forum",totalTime:240,sections:[{id:"intro",type:"contention",title:"Introduction/Hook",timeAllocation:20,collapsed:!1,notes:"Grab attention, state resolution stance",subPoints:[]},{id:"framework",type:"contention",title:"Framework (Optional)",timeAllocation:20,collapsed:!1,notes:"",subPoints:[]},{id:"cont1",type:"contention",title:"Contention 1",timeAllocation:90,collapsed:!1,notes:"",subPoints:[{id:"pf-c1-claim",type:"subpoint",title:"Claim/Tagline",timeAllocation:10,notes:"",evidence:[]},{id:"pf-c1-warrant",type:"subpoint",title:"Warrant/Analysis",timeAllocation:40,notes:"",evidence:[{id:"pf-c1-ev1",tag:"Evidence 1",source:"",notes:""},{id:"pf-c1-ev2",tag:"Evidence 2",source:"",notes:""}]},{id:"pf-c1-impact",type:"subpoint",title:"Impact",timeAllocation:40,notes:"",evidence:[]}]},{id:"cont2",type:"contention",title:"Contention 2",timeAllocation:90,collapsed:!1,notes:"",subPoints:[{id:"pf-c2-claim",type:"subpoint",title:"Claim/Tagline",timeAllocation:10,notes:"",evidence:[]},{id:"pf-c2-warrant",type:"subpoint",title:"Warrant/Analysis",timeAllocation:40,notes:"",evidence:[]},{id:"pf-c2-impact",type:"subpoint",title:"Impact",timeAllocation:40,notes:"",evidence:[]}]},{id:"conclusion",type:"contention",title:"Conclusion/Weighing",timeAllocation:20,collapsed:!1,notes:"Summarize why your impacts outweigh",subPoints:[]}]},congress_speech:{name:"Congress Speech",format:"Congressional Debate",totalTime:180,sections:[{id:"intro",type:"contention",title:"Introduction",timeAllocation:20,collapsed:!1,notes:"Hook + thesis",subPoints:[]},{id:"point1",type:"contention",title:"Point 1",timeAllocation:50,collapsed:!1,notes:"",subPoints:[{id:"cong-p1-claim",type:"subpoint",title:"Claim",timeAllocation:10,notes:"",evidence:[]},{id:"cong-p1-evidence",type:"subpoint",title:"Evidence",timeAllocation:25,notes:"",evidence:[{id:"cong-ev1",tag:"Statistic/Quote",source:"",notes:""}]},{id:"cong-p1-analysis",type:"subpoint",title:"Analysis",timeAllocation:15,notes:"",evidence:[]}]},{id:"point2",type:"contention",title:"Point 2",timeAllocation:50,collapsed:!1,notes:"",subPoints:[{id:"cong-p2-claim",type:"subpoint",title:"Claim",timeAllocation:10,notes:"",evidence:[]},{id:"cong-p2-evidence",type:"subpoint",title:"Evidence",timeAllocation:25,notes:"",evidence:[]},{id:"cong-p2-analysis",type:"subpoint",title:"Analysis",timeAllocation:15,notes:"",evidence:[]}]},{id:"point3",type:"contention",title:"Point 3 (Optional)",timeAllocation:40,collapsed:!1,notes:"",subPoints:[]},{id:"conclusion",type:"contention",title:"Conclusion",timeAllocation:20,collapsed:!1,notes:"Call to action - urge passage/defeat",subPoints:[]}]},blank:{name:"Blank Outline",format:"Custom",totalTime:300,sections:[]}},lr=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Js=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},LF=({evidence:t,onChange:e,onDelete:n})=>{const[s,l]=k.useState(!1);return r.jsxs(F.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-slate-700/50 border border-slate-600 rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ex,{className:"w-4 h-4 text-cyan-400 mt-1 flex-shrink-0"}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("input",{type:"text",value:t.tag,onChange:o=>e({...t,tag:o.target.value}),placeholder:"Evidence tag...",className:"w-full bg-transparent text-white text-sm font-medium focus:outline-none"})}),r.jsx("button",{onClick:n,className:"p-1 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-3 h-3"})})]}),r.jsx("input",{type:"text",value:t.source,onChange:o=>e({...t,source:o.target.value}),placeholder:"Source (Author, Year)...",className:"w-full bg-slate-800/50 text-slate-300 text-xs px-2 py-1 rounded focus:outline-none focus:ring-1 focus:ring-cyan-500/50"}),s?r.jsx("textarea",{value:t.notes,onChange:o=>e({...t,notes:o.target.value}),onBlur:()=>l(!1),placeholder:"Notes about this evidence...",className:"w-full bg-slate-800/50 text-slate-400 text-xs px-2 py-1 rounded focus:outline-none focus:ring-1 focus:ring-cyan-500/50 min-h-[60px]",autoFocus:!0}):r.jsx("div",{onClick:()=>l(!0),className:"text-xs text-slate-500 cursor-pointer hover:text-slate-400",children:t.notes||"+ Add notes..."})]})},VF=({subPoint:t,onChange:e,onDelete:n,index:s})=>{const[l,o]=k.useState(!0),u=()=>{const m={id:lr(),tag:"",source:"",notes:""};e({...t,evidence:[...t.evidence,m]})},h=(m,x)=>{e({...t,evidence:t.evidence.map(b=>b.id===m?x:b)})},f=m=>{e({...t,evidence:t.evidence.filter(x=>x.id!==m)})};return r.jsx(F.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"ml-6 border-l-2 border-slate-600 pl-4",children:r.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(GN,{className:"w-4 h-4 text-slate-500 cursor-grab"}),r.jsx("button",{onClick:()=>o(!l),className:"p-1 text-slate-400 hover:text-white transition-colors",children:l?r.jsx(Mo,{className:"w-4 h-4"}):r.jsx(Un,{className:"w-4 h-4"})}),r.jsxs("span",{className:"text-cyan-400 text-sm font-medium",children:[String.fromCharCode(65+s),"."]}),r.jsx("input",{type:"text",value:t.title,onChange:m=>e({...t,title:m.target.value}),placeholder:"Sub-point title...",className:"flex-1 bg-transparent text-white font-medium focus:outline-none"}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsx("input",{type:"number",value:t.timeAllocation,onChange:m=>e({...t,timeAllocation:parseInt(m.target.value)||0}),className:"w-12 bg-slate-700/50 text-center rounded px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-cyan-500/50"}),r.jsx("span",{children:"sec"})]}),r.jsx("button",{onClick:n,className:"p-1 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-4 h-4"})})]}),r.jsx(St,{children:l&&r.jsxs(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[r.jsx("textarea",{value:t.notes,onChange:m=>e({...t,notes:m.target.value}),placeholder:"Notes for this sub-point...",className:"w-full bg-slate-700/30 text-slate-300 text-sm px-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-cyan-500/50 min-h-[60px]"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wide",children:"Evidence"}),r.jsxs("button",{onClick:u,className:"flex items-center gap-1 text-xs text-cyan-400 hover:text-cyan-300 transition-colors",children:[r.jsx(vn,{className:"w-3 h-3"}),"Add Evidence"]})]}),r.jsx(St,{children:t.evidence.map(m=>r.jsx(LF,{evidence:m,onChange:x=>h(m.id,x),onDelete:()=>f(m.id)},m.id))})]})]})})]})})},zF=({contention:t,onChange:e,onDelete:n,index:s})=>{const[l,o]=k.useState(t.collapsed),u=t.subPoints.reduce((v,N)=>v+N.timeAllocation,0),h=u>t.timeAllocation?"over":u<t.timeAllocation*.8?"under":"good",f=()=>{const v={id:lr(),type:"subpoint",title:"",timeAllocation:30,notes:"",evidence:[]};e({...t,subPoints:[...t.subPoints,v]})},m=(v,N)=>{e({...t,subPoints:t.subPoints.map(E=>E.id===v?N:E)})},x=v=>{e({...t,subPoints:t.subPoints.filter(N=>N.id!==v)})},b=v=>{e({...t,subPoints:v})};return r.jsxs(F.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"p-4 bg-slate-800/80",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(GN,{className:"w-5 h-5 text-slate-500 cursor-grab"}),r.jsx("button",{onClick:()=>o(!l),className:"p-1 text-slate-400 hover:text-white transition-colors",children:l?r.jsx(Un,{className:"w-5 h-5"}):r.jsx(Mo,{className:"w-5 h-5"})}),r.jsxs("span",{className:"text-purple-400 font-bold text-lg",children:[s+1,"."]}),r.jsx("input",{type:"text",value:t.title,onChange:v=>e({...t,title:v.target.value}),placeholder:"Contention title...",className:"flex-1 bg-transparent text-white text-lg font-semibold focus:outline-none"}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${h==="over"?"bg-red-500/20 text-red-400":h==="under"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[r.jsx(Fn,{className:"w-4 h-4"}),r.jsx("input",{type:"number",value:t.timeAllocation,onChange:v=>e({...t,timeAllocation:parseInt(v.target.value)||0}),className:"w-14 bg-transparent text-center font-medium focus:outline-none"}),r.jsx("span",{className:"text-sm",children:"sec"}),h==="over"&&r.jsx(Ls,{className:"w-4 h-4"}),h==="good"&&r.jsx(ff,{className:"w-4 h-4"})]}),r.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-5 h-5"})})]}),t.subPoints.length>0&&r.jsxs("div",{className:"mt-2 ml-12 text-xs text-slate-500",children:["Sub-points total: ",Js(u)," / ",Js(t.timeAllocation)," allocated"]})]}),r.jsx(St,{children:!l&&r.jsxs(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(WA,{className:"w-4 h-4 text-slate-400 mt-2"}),r.jsx("textarea",{value:t.notes,onChange:v=>e({...t,notes:v.target.value}),placeholder:"Notes for this contention...",className:"flex-1 bg-slate-700/30 text-slate-300 px-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-purple-500/50 min-h-[60px]"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(zN,{axis:"y",values:t.subPoints,onReorder:b,className:"space-y-3",children:t.subPoints.map((v,N)=>r.jsx(UN,{value:v,children:r.jsx(VF,{subPoint:v,onChange:E=>m(v.id,E),onDelete:()=>x(v.id),index:N})},v.id))}),r.jsxs("button",{onClick:f,className:"ml-6 flex items-center gap-2 text-sm text-slate-400 hover:text-cyan-400 transition-colors",children:[r.jsx(vn,{className:"w-4 h-4"}),"Add Sub-Point"]})]})]})})]})},UF=()=>{const[t,e]=k.useState({id:lr(),name:"Untitled Outline",format:"Custom",totalTime:300,sections:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),[n,s]=k.useState([]),[l,o]=k.useState(!0),[u,h]=k.useState(!1),f=t.sections.reduce((I,T)=>I+T.timeAllocation,0),m=t.sections.reduce((I,T)=>I+T.subPoints.reduce((M,S)=>M+S.evidence.length,0),0),x=f>t.totalTime?"over":f<t.totalTime*.9?"under":"good",b=I=>{const T=LN[I];e({...T,id:lr(),name:T.name,sections:T.sections.map(M=>({...M,id:lr(),subPoints:M.subPoints.map(S=>({...S,id:lr(),evidence:S.evidence.map(A=>({...A,id:lr()}))}))})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o(!1)},v=()=>{const I={id:lr(),type:"contention",title:"",timeAllocation:60,collapsed:!1,notes:"",subPoints:[]};e(T=>({...T,sections:[...T.sections,I],updatedAt:new Date().toISOString()}))},N=(I,T)=>{e(M=>({...M,sections:M.sections.map(S=>S.id===I?T:S),updatedAt:new Date().toISOString()}))},E=I=>{e(T=>({...T,sections:T.sections.filter(M=>M.id!==I),updatedAt:new Date().toISOString()}))},V=I=>{e(T=>({...T,sections:I,updatedAt:new Date().toISOString()}))},R=()=>{const I={...t,updatedAt:new Date().toISOString()};s(T=>{const M=T.findIndex(S=>S.id===t.id);if(M>=0){const S=[...T];return S[M]=I,S}return[...T,I]}),e(I)},z=I=>{e(I),h(!1)},L=()=>{const I=JSON.stringify(t,null,2),T=new Blob([I],{type:"application/json"}),M=URL.createObjectURL(T),S=document.createElement("a");S.href=M,S.download=`${t.name.replace(/\s+/g,"_")}.json`,S.click(),URL.revokeObjectURL(M)},H=()=>{let I=`# ${t.name}

`;I+=`**Format:** ${t.format}  
`,I+=`**Total Time:** ${Js(t.totalTime)}

`,I+=`---

`,t.sections.forEach((A,P)=>{I+=`## ${P+1}. ${A.title||"Untitled"} (${Js(A.timeAllocation)})

`,A.notes&&(I+=`*${A.notes}*

`),A.subPoints.forEach((D,re)=>{I+=`### ${String.fromCharCode(65+re)}. ${D.title||"Untitled"} (${Js(D.timeAllocation)})

`,D.notes&&(I+=`${D.notes}

`),D.evidence.forEach((te,q)=>{I+=`- **[${te.tag||"Evidence"}]** ${te.source||""}
`,te.notes&&(I+=`  - ${te.notes}
`)}),D.evidence.length>0&&(I+=`
`)}),I+=`
`});const T=new Blob([I],{type:"text/markdown"}),M=URL.createObjectURL(T),S=document.createElement("a");S.href=M,S.download=`${t.name.replace(/\s+/g,"_")}.md`,S.click(),URL.revokeObjectURL(M)},X=()=>{let I=`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${t.name}</title>
  <style>
    body { font-family: 'Georgia', serif; max-width: 800px; margin: 40px auto; padding: 20px; line-height: 1.6; }
    h1 { color: #1a1a2e; border-bottom: 2px solid #4a4a8a; padding-bottom: 10px; }
    h2 { color: #4a4a8a; margin-top: 30px; }
    h3 { color: #6a6aaa; margin-left: 20px; }
    .meta { color: #666; font-style: italic; margin-bottom: 20px; }
    .time { color: #888; font-size: 0.9em; }
    .notes { background: #f5f5f5; padding: 10px; border-left: 3px solid #4a4a8a; margin: 10px 0; }
    .evidence { margin-left: 40px; padding: 10px; background: #fafafa; border-radius: 5px; margin-bottom: 10px; }
    .evidence-tag { font-weight: bold; color: #4a4a8a; }
    .evidence-source { color: #666; font-style: italic; }
    @media print { body { margin: 20px; } }
  </style>
</head>
<body>
  <h1>${t.name}</h1>
  <div class="meta">
    <strong>Format:</strong> ${t.format} | 
    <strong>Total Time:</strong> ${Js(t.totalTime)}
  </div>
`;t.sections.forEach((A,P)=>{I+=`  <h2>${P+1}. ${A.title||"Untitled"} <span class="time">(${Js(A.timeAllocation)})</span></h2>
`,A.notes&&(I+=`  <div class="notes">${A.notes}</div>
`),A.subPoints.forEach((D,re)=>{I+=`  <h3>${String.fromCharCode(65+re)}. ${D.title||"Untitled"} <span class="time">(${Js(D.timeAllocation)})</span></h3>
`,D.notes&&(I+=`  <p>${D.notes}</p>
`),D.evidence.forEach(te=>{I+=`  <div class="evidence">
    <span class="evidence-tag">[${te.tag||"Evidence"}]</span>
    <span class="evidence-source">${te.source||""}</span>
    ${te.notes?`<p>${te.notes}</p>`:""}
  </div>
`})})}),I+=`</body>
</html>`;const T=new Blob([I],{type:"text/html"}),M=URL.createObjectURL(T),S=document.createElement("a");S.href=M,S.download=`${t.name.replace(/\s+/g,"_")}.html`,S.click(),URL.revokeObjectURL(M)},se=I=>{const T=I.target.files?.[0];if(!T)return;const M=new FileReader;M.onload=S=>{try{const A=JSON.parse(S.target?.result);e({...A,id:lr(),updatedAt:new Date().toISOString()})}catch(A){console.error("Failed to import outline:",A)}},M.readAsText(T),I.target.value=""},Y=()=>{if(t.sections.length===0)return;const I=Math.floor(t.totalTime/t.sections.length);e(T=>({...T,sections:T.sections.map(M=>{const S=M.subPoints.length||1,A=Math.floor(M.timeAllocation/S);return{...M,timeAllocation:I,subPoints:M.subPoints.map(P=>({...P,timeAllocation:A}))}}),updatedAt:new Date().toISOString()}))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl",children:r.jsx(as,{className:"w-6 h-6 text-white"})}),"Speech Outline Builder"]}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Create structured speech outlines with drag-and-drop organization"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(wA,{className:"w-4 h-4"}),"Templates"]}),r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(Xg,{className:"w-4 h-4"}),"Saved"]})]})]}),r.jsx(St,{children:l&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>o(!1),children:r.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Choose a Template"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(LN).map(([I,T])=>r.jsxs("button",{onClick:()=>b(I),className:"p-4 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-purple-500 rounded-xl text-left transition-all",children:[r.jsx("div",{className:"font-semibold text-white",children:T.name}),r.jsx("div",{className:"text-sm text-slate-400 mt-1",children:T.format}),r.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:[Js(T.totalTime),"  ",T.sections.length," sections"]})]},I))})]})})}),r.jsx(St,{children:u&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:r.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Saved Outlines"}),n.length===0?r.jsx("p",{className:"text-slate-400 text-center py-8",children:"No saved outlines yet"}):r.jsx("div",{className:"space-y-2",children:n.map(I=>r.jsxs("button",{onClick:()=>z(I),className:"w-full p-3 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 rounded-lg text-left transition-colors",children:[r.jsx("div",{className:"font-medium text-white",children:I.name}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[I.format,"  Updated ",new Date(I.updatedAt).toLocaleDateString()]})]},I.id))})]})})}),r.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Outline Name"}),r.jsx("input",{type:"text",value:t.name,onChange:I=>e(T=>({...T,name:I.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Format"}),r.jsxs("select",{value:t.format,onChange:I=>e(T=>({...T,format:I.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[r.jsx("option",{value:"Custom",children:"Custom"}),r.jsx("option",{value:"Policy",children:"Policy"}),r.jsx("option",{value:"Lincoln Douglas",children:"Lincoln Douglas"}),r.jsx("option",{value:"Public Forum",children:"Public Forum"}),r.jsx("option",{value:"Congressional Debate",children:"Congressional Debate"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Total Time (seconds)"}),r.jsx("input",{type:"number",value:t.totalTime,onChange:I=>e(T=>({...T,totalTime:parseInt(I.target.value)||0})),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]})]}),r.jsxs("div",{className:"flex items-center gap-6 mt-4 pt-4 border-t border-slate-700",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${x==="over"?"bg-red-500/20 text-red-400":x==="under"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[r.jsx(Fn,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:Js(f)}),r.jsxs("span",{className:"text-sm opacity-75",children:["/ ",Js(t.totalTime)]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx(X4,{className:"w-4 h-4"}),r.jsxs("span",{children:[t.sections.length," contentions"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx(wl,{className:"w-4 h-4"}),r.jsxs("span",{children:[m," evidence cards"]})]}),r.jsxs("button",{onClick:Y,className:"flex items-center gap-2 text-sm text-purple-400 hover:text-purple-300 transition-colors ml-auto",children:[r.jsx(SC,{className:"w-4 h-4"}),"Auto-allocate time"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",children:[r.jsx(vn,{className:"w-4 h-4"}),"Add Contention"]}),r.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(Zg,{className:"w-4 h-4"}),"Save"]}),r.jsx("div",{className:"h-6 w-px bg-slate-700"}),r.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors text-sm",children:[r.jsx(D4,{className:"w-4 h-4"}),"Markdown"]}),r.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors text-sm",children:[r.jsx(WN,{className:"w-4 h-4"}),"HTML"]}),r.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors text-sm",children:[r.jsx(Bf,{className:"w-4 h-4"}),"JSON"]}),r.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors text-sm cursor-pointer",children:[r.jsx(Qf,{className:"w-4 h-4"}),"Import",r.jsx("input",{type:"file",accept:".json",onChange:se,className:"hidden"})]}),r.jsxs("button",{onClick:()=>b("blank"),className:"flex items-center gap-2 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors text-sm ml-auto",children:[r.jsx(ku,{className:"w-4 h-4"}),"Reset"]})]}),r.jsx("div",{className:"space-y-4",children:t.sections.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(as,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-400",children:"No contentions yet"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Start by choosing a template or adding your first contention"}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[r.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors",children:"Choose Template"}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Start from Scratch"})]})]}):r.jsx(zN,{axis:"y",values:t.sections,onReorder:V,className:"space-y-4",children:t.sections.map((I,T)=>r.jsx(UN,{value:I,children:r.jsx(zF,{contention:I,onChange:M=>N(I.id,M),onDelete:()=>E(I.id),index:T})},I.id))})})]})},Jh={policy:{name:"Policy",roundTime:90,prepTime:10,breakTime:15},ld:{name:"Lincoln Douglas",roundTime:45,prepTime:5,breakTime:10},pf:{name:"Public Forum",roundTime:40,prepTime:5,breakTime:10},congress:{name:"Congress",roundTime:60,prepTime:0,breakTime:15},parli:{name:"Parliamentary",roundTime:35,prepTime:15,breakTime:10}},Ff=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,VN=(t,e=1)=>{if(t.length<2)return[];const n=[...t];n.length%2!==0&&n.push({id:"bye",name:"BYE",school:""});const s=n.length,l=(s-1)*e,o=s/2,u=[];for(let h=0;h<l;h++){const f=[],m=[...n],x=h%(s-1);for(let b=0;b<x;b++){const v=m.pop();m.splice(1,0,v)}for(let b=0;b<o;b++){const v=m[b],N=m[s-1-b];if(v.id==="bye"||N.id==="bye")continue;const E=h%2===0?v:N,V=h%2===0?N:v;f.push({id:Ff(),roundNumber:h+1,matchNumber:b+1,affTeam:E.id,negTeam:V.id,venue:null,timeSlot:null,judge:null,status:"scheduled",winner:null,notes:""})}u.push({id:Ff(),roundNumber:h+1,matches:f,startTime:null,status:"pending"})}return u},FF=(t,e,n)=>{const s=[];return t.forEach((l,o)=>{const u=l.matches,h=new Map;if(u.forEach(m=>{[m.affTeam,m.negTeam].forEach(x=>{h.has(x)&&s.push({type:"team-double-book",severity:"error",roundNumber:l.roundNumber,message:`Team "${e.find(b=>b.id===x)?.name}" has multiple matches in Round ${l.roundNumber}`}),h.set(x,!0)})}),l.startTime){const m=new Map;u.forEach(x=>{x.venue&&x.timeSlot===l.startTime&&(m.has(x.venue)&&s.push({type:"venue-double-book",severity:"error",roundNumber:l.roundNumber,message:`Venue "${n.find(b=>b.id===x.venue)?.name}" is double-booked in Round ${l.roundNumber}`}),m.set(x.venue,!0))})}const f=n.filter(m=>m.available).length;u.length>f&&f>0&&s.push({type:"insufficient-venues",severity:"warning",roundNumber:l.roundNumber,message:`Round ${l.roundNumber} has ${u.length} matches but only ${f} venues available`})}),s},BF=({team:t,onChange:e,onDelete:n})=>r.jsxs(F.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-2 bg-slate-700/50 rounded-lg p-2",children:[r.jsx(Ra,{className:"w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",value:t.name,onChange:s=>e({...t,name:s.target.value}),placeholder:"Team name...",className:"flex-1 bg-transparent text-white text-sm focus:outline-none"}),r.jsx("input",{type:"text",value:t.school||"",onChange:s=>e({...t,school:s.target.value}),placeholder:"School...",className:"w-32 bg-transparent text-slate-400 text-sm focus:outline-none"}),r.jsx("button",{onClick:n,className:"p-1 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-4 h-4"})})]}),qF=({venue:t,onChange:e,onDelete:n})=>r.jsxs(F.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-2 bg-slate-700/50 rounded-lg p-2",children:[r.jsx(Yu,{className:"w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",value:t.name,onChange:s=>e({...t,name:s.target.value}),placeholder:"Room/Venue name...",className:"flex-1 bg-transparent text-white text-sm focus:outline-none"}),r.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-400",children:[r.jsx("input",{type:"checkbox",checked:t.available,onChange:s=>e({...t,available:s.target.checked}),className:"rounded border-slate-600"}),"Available"]}),r.jsx("button",{onClick:n,className:"p-1 text-slate-400 hover:text-red-400 transition-colors",children:r.jsx(ia,{className:"w-4 h-4"})})]}),sS=({match:t,teams:e,venues:n,onUpdate:s,onDelete:l,compact:o=!1})=>{const[u,h]=k.useState(!1),f=e.find(v=>v.id===t.affTeam),m=e.find(v=>v.id===t.negTeam),x=n.find(v=>v.id===t.venue),b={scheduled:"bg-slate-600 text-slate-300",in_progress:"bg-yellow-500/20 text-yellow-400",completed:"bg-green-500/20 text-green-400",cancelled:"bg-red-500/20 text-red-400"};return o?r.jsxs("div",{className:"flex items-center justify-between bg-slate-700/30 rounded-lg p-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-cyan-400 font-medium",children:f?.name||"?"}),r.jsx("span",{className:"text-slate-500",children:"vs"}),r.jsx("span",{className:"text-orange-400 font-medium",children:m?.name||"?"})]}),x&&r.jsx("span",{className:"text-slate-500 text-xs",children:x.name})]}):r.jsxs(F.div,{layout:!0,className:"bg-slate-800/50 border border-slate-700 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("span",{className:"text-xs text-slate-500",children:["Match #",t.matchNumber]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${b[t.status]}`,children:t.status.replace("_"," ")}),r.jsx("button",{onClick:()=>h(!u),className:"p-1 text-slate-400 hover:text-white transition-colors",children:r.jsx(TA,{className:"w-3 h-3"})})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1 text-center",children:[r.jsx("div",{className:"text-xs text-cyan-400 uppercase tracking-wide mb-1",children:"Aff"}),r.jsx("div",{className:"font-semibold text-white",children:f?.name||"TBD"}),f?.school&&r.jsx("div",{className:"text-xs text-slate-500",children:f.school})]}),r.jsx("div",{className:"text-slate-500 font-bold",children:"vs"}),r.jsxs("div",{className:"flex-1 text-center",children:[r.jsx("div",{className:"text-xs text-orange-400 uppercase tracking-wide mb-1",children:"Neg"}),r.jsx("div",{className:"font-semibold text-white",children:m?.name||"TBD"}),m?.school&&r.jsx("div",{className:"text-xs text-slate-500",children:m.school})]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-4 mt-3 text-xs text-slate-400",children:[x&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yu,{className:"w-3 h-3"}),x.name]}),t.timeSlot&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),t.timeSlot]})]}),t.winner&&r.jsx("div",{className:"mt-3 text-center",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded",children:[r.jsx(Gn,{className:"w-3 h-3"}),"Winner: ",e.find(v=>v.id===t.winner)?.name]})})]}),r.jsx(St,{children:u&&r.jsx(F.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-700",children:r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Venue"}),r.jsxs("select",{value:t.venue||"",onChange:v=>s({...t,venue:v.target.value||null}),className:"w-full bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none",children:[r.jsx("option",{value:"",children:"Select venue..."}),n.filter(v=>v.available).map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Status"}),r.jsxs("select",{value:t.status,onChange:v=>s({...t,status:v.target.value}),className:"w-full bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none",children:[r.jsx("option",{value:"scheduled",children:"Scheduled"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),t.status==="completed"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Winner"}),r.jsxs("select",{value:t.winner||"",onChange:v=>s({...t,winner:v.target.value||null}),className:"w-full bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none",children:[r.jsx("option",{value:"",children:"Select winner..."}),r.jsxs("option",{value:t.affTeam,children:[f?.name," (Aff)"]}),r.jsxs("option",{value:t.negTeam,children:[m?.name," (Neg)"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Notes"}),r.jsx("input",{type:"text",value:t.notes,onChange:v=>s({...t,notes:v.target.value}),placeholder:"Match notes...",className:"w-full bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none"})]})]})})})]})},HF=({round:t,teams:e,venues:n,onUpdateMatch:s,onUpdateRound:l,expanded:o=!1})=>{const[u,h]=k.useState(o),f=t.matches.filter(x=>x.status==="completed").length,m=t.matches.length>0?f/t.matches.length*100:0;return r.jsxs(F.div,{layout:!0,className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:[r.jsx("div",{className:"p-4 cursor-pointer hover:bg-slate-800/80 transition-colors",onClick:()=>h(!u),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{className:"p-1 text-slate-400",children:u?r.jsx(Mo,{className:"w-5 h-5"}):r.jsx(Un,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-white",children:["Round ",t.roundNumber]}),r.jsxs("p",{className:"text-xs text-slate-400",children:[t.matches.length," matches  ",f," completed"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[t.startTime&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-slate-400",children:[r.jsx(Fn,{className:"w-4 h-4"}),t.startTime]}),r.jsx("div",{className:"w-24 h-2 bg-slate-700 rounded-full overflow-hidden",children:r.jsx(F.div,{initial:{width:0},animate:{width:`${m}%`},className:`h-full ${m===100?"bg-green-500":m>0?"bg-yellow-500":"bg-slate-600"}`})})]})]})}),r.jsx(St,{children:u&&r.jsxs(F.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-700",children:[r.jsxs("div",{className:"p-4 bg-slate-800/30 flex items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Start Time"}),r.jsx("input",{type:"time",value:t.startTime||"",onChange:x=>l({...t,startTime:x.target.value}),className:"bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Status"}),r.jsxs("select",{value:t.status,onChange:x=>l({...t,status:x.target.value}),className:"bg-slate-700/50 border border-slate-600 text-white text-sm px-2 py-1 rounded focus:outline-none",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"})]})]})]}),r.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.matches.map(x=>r.jsx(sS,{match:x,teams:e,venues:n,onUpdate:b=>s(t.id,x.id,b)},x.id))})]})})]})},$F=({rounds:t,teams:e,venues:n})=>r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"flex gap-6 min-w-max p-4",children:t.map(s=>r.jsxs("div",{className:"w-64 flex-shrink-0",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsxs("h3",{className:"font-semibold text-white",children:["Round ",s.roundNumber]}),s.startTime&&r.jsx("p",{className:"text-xs text-slate-400",children:s.startTime})]}),r.jsx("div",{className:"space-y-3",children:s.matches.map(l=>r.jsx(sS,{match:l,teams:e,venues:n,onUpdate:()=>{},compact:!0},l.id))})]},s.id))})}),GF=({rounds:t,teams:e})=>{const n=k.useMemo(()=>{const s=new Map;return e.forEach(l=>{s.set(l.id,{team:l,wins:0,losses:0,affWins:0,negWins:0,totalMatches:0})}),t.forEach(l=>{l.matches.forEach(o=>{if(o.status==="completed"&&o.winner){const u=s.get(o.affTeam),h=s.get(o.negTeam);u&&(u.totalMatches++,o.winner===o.affTeam?(u.wins++,u.affWins++):u.losses++),h&&(h.totalMatches++,o.winner===o.negTeam?(h.wins++,h.negWins++):h.losses++)}})}),Array.from(s.values()).sort((l,o)=>o.wins!==l.wins?o.wins-l.wins:l.losses-o.losses)},[t,e]);return r.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-slate-700",children:r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(ss,{className:"w-5 h-5 text-purple-400"}),"Current Standings"]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-800/50",children:r.jsxs("tr",{className:"text-left text-xs text-slate-400 uppercase tracking-wide",children:[r.jsx("th",{className:"px-4 py-3",children:"Rank"}),r.jsx("th",{className:"px-4 py-3",children:"Team"}),r.jsx("th",{className:"px-4 py-3",children:"School"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"W"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"L"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"Aff W"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"Neg W"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"Win %"})]})}),r.jsx("tbody",{children:n.map((s,l)=>{const o=s.totalMatches>0?(s.wins/s.totalMatches*100).toFixed(0):"-";return r.jsxs("tr",{className:"border-t border-slate-700/50 hover:bg-slate-700/30",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`font-bold ${l===0?"text-yellow-400":l===1?"text-slate-300":l===2?"text-orange-400":"text-slate-500"}`,children:l+1})}),r.jsx("td",{className:"px-4 py-3 font-medium text-white",children:s.team.name}),r.jsx("td",{className:"px-4 py-3 text-slate-400",children:s.team.school||"-"}),r.jsx("td",{className:"px-4 py-3 text-center text-green-400 font-medium",children:s.wins}),r.jsx("td",{className:"px-4 py-3 text-center text-red-400 font-medium",children:s.losses}),r.jsx("td",{className:"px-4 py-3 text-center text-cyan-400",children:s.affWins}),r.jsx("td",{className:"px-4 py-3 text-center text-orange-400",children:s.negWins}),r.jsx("td",{className:"px-4 py-3 text-center text-slate-300",children:o!=="-"?`${o}%`:"-"})]},s.team.id)})})]})})]})},YF=()=>{const[t,e]=k.useState([]),[n,s]=k.useState([]),[l,o]=k.useState([]),[u,h]=k.useState("pf"),[f,m]=k.useState("Tournament"),[x,b]=k.useState(""),[v,N]=k.useState("rounds"),[E,V]=k.useState(!0),R=k.useMemo(()=>FF(l,t,n),[l,t,n]),z=R.filter(q=>q.severity==="error").length,L=R.filter(q=>q.severity==="warning").length,H=()=>{e(q=>[...q,{id:Ff(),name:"",school:""}])},X=(q,Z)=>{e(ue=>ue.map(ye=>ye.id===q?Z:ye))},se=q=>{e(Z=>Z.filter(ue=>ue.id!==q))},Y=()=>{s(q=>[...q,{id:Ff(),name:"",available:!0}])},I=(q,Z)=>{s(ue=>ue.map(ye=>ye.id===q?Z:ye))},T=q=>{s(Z=>Z.filter(ue=>ue.id!==q))},M=()=>{const q=t.filter(ye=>ye.name.trim());if(q.length<2)return;const Z=VN(q),ue=n.filter(ye=>ye.available);Z.forEach(ye=>{ye.matches.forEach((B,Se)=>{ue[Se%ue.length]&&(B.venue=ue[Se%ue.length].id)})}),o(Z),V(!1)},S=()=>{const q=[...t].sort(()=>Math.random()-.5),Z=VN(q.filter(ye=>ye.name.trim())),ue=n.filter(ye=>ye.available);Z.forEach(ye=>{ye.matches.forEach((B,Se)=>{ue[Se%ue.length]&&(B.venue=ue[Se%ue.length].id)})}),o(Z)},A=(q,Z,ue)=>{o(ye=>ye.map(B=>B.id===q?{...B,matches:B.matches.map(Se=>Se.id===Z?ue:Se)}:B))},P=q=>{o(Z=>Z.map(ue=>ue.id===q.id?q:ue))},D=()=>{const q=Jh[u];let ue=540;o(ye=>ye.map((B,Se)=>{const Oe=Math.floor(ue/60),U=ue%60,Ie=`${Oe.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`;return ue+=q.roundTime+q.breakTime,{...B,startTime:Ie}}))},re=()=>{const q={tournament:{name:f,date:x,format:Jh[u].name},teams:t,venues:n,rounds:l},Z=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),ue=URL.createObjectURL(Z),ye=document.createElement("a");ye.href=ue,ye.download=`${f.replace(/\s+/g,"_")}_schedule.json`,ye.click(),URL.revokeObjectURL(ue)},te=()=>{let q=`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${f} - Schedule</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
    h1 { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; }
    .meta { text-align: center; color: #666; margin-bottom: 20px; }
    .round { margin-bottom: 30px; page-break-inside: avoid; }
    .round h2 { background: #f0f0f0; padding: 10px; margin: 0; }
    .matches { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 10px; padding: 10px; }
    .match { border: 1px solid #ddd; padding: 10px; border-radius: 5px; }
    .teams { display: flex; justify-content: space-between; align-items: center; }
    .team { font-weight: bold; }
    .aff { color: #0088cc; }
    .neg { color: #cc8800; }
    .venue { font-size: 12px; color: #666; margin-top: 5px; }
    @media print { .round { page-break-inside: avoid; } }
  </style>
</head>
<body>
  <h1>${f}</h1>
  <div class="meta">
    ${x?`<p>Date: ${x}</p>`:""}
    <p>Format: ${Jh[u].name} | Teams: ${t.length} | Rounds: ${l.length}</p>
  </div>
`;l.forEach(ue=>{q+=`  <div class="round">
    <h2>Round ${ue.roundNumber}${ue.startTime?` - ${ue.startTime}`:""}</h2>
    <div class="matches">
`,ue.matches.forEach(ye=>{const B=t.find(U=>U.id===ye.affTeam),Se=t.find(U=>U.id===ye.negTeam),Oe=n.find(U=>U.id===ye.venue);q+=`      <div class="match">
        <div class="teams">
          <span class="team aff">${B?.name||"TBD"}</span>
          <span>vs</span>
          <span class="team neg">${Se?.name||"TBD"}</span>
        </div>
        ${Oe?`<div class="venue">${Oe.name}</div>`:""}
      </div>
`}),q+=`    </div>
  </div>
`}),q+="</body></html>";const Z=window.open("","_blank");Z.document.write(q),Z.document.close(),Z.print()};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:r.jsx(ci,{className:"w-6 h-6 text-white"})}),"Round Robin Scheduler"]}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Generate tournament schedules with conflict detection"})]}),r.jsx("div",{className:"flex items-center gap-2",children:l.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>V(!E),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(Ku,{className:"w-4 h-4"}),"Setup"]}),r.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(WN,{className:"w-4 h-4"}),"Print"]}),r.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[r.jsx(Bf,{className:"w-4 h-4"}),"Export"]})]})})]}),r.jsx(St,{children:E&&r.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-slate-800/50 border border-slate-700 rounded-xl overflow-hidden",children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Tournament Name"}),r.jsx("input",{type:"text",value:f,onChange:q=>m(q.target.value),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Date"}),r.jsx("input",{type:"date",value:x,onChange:q=>b(q.target.value),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Format"}),r.jsx("select",{value:u,onChange:q=>h(q.target.value),className:"w-full bg-slate-700/50 border border-slate-600 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500/50",children:Object.entries(Jh).map(([q,Z])=>r.jsx("option",{value:q,children:Z.name},q))})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-cyan-400"}),"Teams (",t.length,")"]}),r.jsxs("button",{onClick:H,className:"flex items-center gap-1 text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:[r.jsx(vn,{className:"w-4 h-4"}),"Add Team"]})]}),r.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[r.jsx(St,{children:t.map(q=>r.jsx(BF,{team:q,onChange:Z=>X(q.id,Z),onDelete:()=>se(q.id)},q.id))}),t.length===0&&r.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"Add teams to generate schedule"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:[r.jsx(Yu,{className:"w-5 h-5 text-orange-400"}),"Venues (",n.length,")"]}),r.jsxs("button",{onClick:Y,className:"flex items-center gap-1 text-sm text-orange-400 hover:text-orange-300 transition-colors",children:[r.jsx(vn,{className:"w-4 h-4"}),"Add Venue"]})]}),r.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[r.jsx(St,{children:n.map(q=>r.jsx(qF,{venue:q,onChange:Z=>I(q.id,Z),onDelete:()=>T(q.id)},q.id))}),n.length===0&&r.jsx("p",{className:"text-slate-500 text-sm text-center py-4",children:"Add venues for room assignments"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-slate-700",children:[r.jsxs("button",{onClick:M,disabled:t.filter(q=>q.name.trim()).length<2,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-500 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg transition-colors font-medium",children:[r.jsx(ci,{className:"w-5 h-5"}),"Generate Schedule"]}),l.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(e_,{className:"w-4 h-4"}),"Shuffle"]}),r.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:[r.jsx(Fn,{className:"w-4 h-4"}),"Auto Times"]})]}),r.jsxs("div",{className:"ml-auto text-sm text-slate-400",children:[t.filter(q=>q.name.trim()).length," teams  ",Math.max(0,t.filter(q=>q.name.trim()).length-1)," rounds"]})]})]})})}),R.length>0&&r.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(ui,{className:"w-5 h-5 text-yellow-400"}),r.jsxs("span",{className:"font-medium text-white",children:[z," errors, ",L," warnings detected"]})]}),r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:R.map((q,Z)=>r.jsxs("div",{className:`flex items-center gap-2 text-sm px-3 py-2 rounded ${q.severity==="error"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:[q.severity==="error"?r.jsx(ui,{className:"w-4 h-4"}):r.jsx(ui,{className:"w-4 h-4"}),q.message]},Z))})]}),l.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>N("rounds"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="rounds"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[r.jsx(KN,{className:"w-4 h-4"}),"Rounds"]}),r.jsxs("button",{onClick:()=>N("bracket"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="bracket"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[r.jsx($N,{className:"w-4 h-4"}),"Bracket"]}),r.jsxs("button",{onClick:()=>N("standings"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${v==="standings"?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[r.jsx(Gn,{className:"w-4 h-4"}),"Standings"]})]}),r.jsxs(St,{mode:"wait",children:[v==="rounds"&&r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:l.map(q=>r.jsx(HF,{round:q,teams:t,venues:n,onUpdateMatch:A,onUpdateRound:P},q.id))},"rounds"),v==="bracket"&&r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 border border-slate-700 rounded-xl",children:r.jsx($F,{rounds:l,teams:t,venues:n})},"bracket"),v==="standings"&&r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:r.jsx(GF,{rounds:l,teams:t})},"standings")]})]}),l.length===0&&!E&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx(ci,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-400",children:"No schedule generated"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Set up your tournament to generate a schedule"}),r.jsx("button",{onClick:()=>V(!0),className:"mt-4 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:"Open Setup"})]})]})},KF=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--bg-primary)"},children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Si,{className:"w-12 h-12 animate-spin mx-auto",style:{color:"var(--primary)"}}),r.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading Adjudicator AI..."})]})}),QF=({isOpen:t,onClose:e,apiKey:n,setApiKey:s,openaiKey:l,setOpenaiKey:o})=>t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",children:r.jsxs("div",{className:"glass-card w-full max-w-md space-y-6 animate-in zoom-in-95",children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center",style:{color:"var(--text-primary)"},children:[r.jsx(Ku,{className:"w-5 h-5 mr-2",style:{color:"var(--primary)"}}),"Configuration"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:"Google Gemini API Key"}),r.jsx("input",{type:"password",value:n,onChange:u=>s(u.target.value),placeholder:"AIzaSy...",className:"input-field"}),r.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Required for most features."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:"OpenAI API Key (Optional)"}),r.jsx("input",{type:"password",value:l,onChange:u=>o(u.target.value),placeholder:"sk-...",className:"input-field"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg transition-colors",style:{color:"var(--text-secondary)"},children:"Close"}),r.jsx("button",{onClick:e,className:"btn-primary",children:"Save Changes"})]})]})}):null;function XF(){const[t,e]=k.useState("dashboard"),[n,s]=k.useState(!1),[l,o]=k.useState(!0),[u,h]=k.useState(localStorage.getItem("gemini_key")||""),[f,m]=k.useState(localStorage.getItem("openai_key")||""),[x,b]=k.useState(localStorage.getItem("guest_mode")==="true"),{user:v,loading:N,isAuthenticated:E}=In();return k.useEffect(()=>{localStorage.setItem("gemini_key",u)},[u]),k.useEffect(()=>{localStorage.setItem("openai_key",f)},[f]),k.useEffect(()=>{(E||x)&&o(!1)},[E,x]),N?r.jsx(KF,{}):l&&!E&&!x?r.jsx(Sz,{onGetStarted:()=>o(!1),onContinueAsGuest:()=>{b(!0),localStorage.setItem("guest_mode","true"),o(!1)}}):!E&&!x?r.jsx(Ez,{onSkip:()=>{b(!0),localStorage.setItem("guest_mode","true")}}):r.jsxs(uM,{activeTab:t,setActiveTab:e,onSettingsClick:()=>s(!0),children:[t==="dashboard"&&r.jsx(dM,{setActiveTab:e}),t==="analytics"&&r.jsx(yU,{}),t==="judge"&&r.jsx(hz,{apiKey:u}),t==="board"&&r.jsx(fz,{apiKey:u}),t==="coach"&&r.jsx(gz,{apiKey:u}),t==="practice"&&r.jsx(KU,{apiKey:u}),t==="tournaments"&&r.jsx(dF,{}),t==="opponents"&&r.jsx(SU,{apiKey:u}),t==="evidence"&&r.jsx(MU,{}),t==="team"&&r.jsx(sF,{}),t==="strategy"&&r.jsx(yz,{apiKey:u}),t==="extemp"&&r.jsx(xz,{apiKey:u}),t==="tone"&&r.jsx(jz,{apiKey:u}),t==="history"&&r.jsx(vz,{}),t==="flowchart"&&r.jsx(wF,{}),t==="voice"&&r.jsx(kF,{}),t==="timer"&&r.jsx(PF,{}),t==="outline"&&r.jsx(UF,{}),t==="scheduler"&&r.jsx(YF,{}),r.jsx(QF,{isOpen:n,onClose:()=>s(!1),apiKey:u,setApiKey:h,openaiKey:f,setOpenaiKey:m})]})}function WF(){return r.jsx(oM,{children:r.jsx(iM,{children:r.jsx(XF,{})})})}FT.createRoot(document.getElementById("root")).render(r.jsx(FN.StrictMode,{children:r.jsx(WF,{})}));
